(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{329:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(1),s=a.n(o),i=a(5),l=a(84),c=a(2),u=a.n(c),p=a(68),d=a(72),h=a(4),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={amount:0,showError:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),m(t,[{key:"onAmountChanged",value:function(e){var t=e.amount,a=e.asset;this.setState({amount:t,asset:a})}},{key:"getBalance",value:function(){var e=this,t=this.props.account.get("balances"),a=0;return t&&t.forEach(function(t,n){if(n==e.props.assetId){var r=h.b.getObject(t);a=r.get("balance")}}),a}},{key:"onSubmit",value:function(){var e=i.a.get_asset_precision(this.state.asset.get("precision")),t=this.state.amount.replace(/,/g,"");t*=e;var a=this.getBalance();t<=0||t>a?this.setState({showError:!0}):(this.setState({showError:!1}),d.a.reserveAsset(t,this.props.assetId,this.props.account.get("id")),this.props.onClose())}},{key:"render",value:function(){var e=this,t=this.props.assetId;return r.a.createElement("form",{className:"grid-block vertical full-width-content"},r.a.createElement(s.a,{component:"h3",content:"modal.reserve.title"}),r.a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},r.a.createElement("div",{className:"content-block",onClick:function(){e.setState({showError:!1})}},r.a.createElement(p.a,{label:"modal.reserve.amount",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:t,assets:[t],display_balance:r.a.createElement(l.a,{balance:this.props.account.getIn(["balances",t])}),tabIndex:1})),this.state.showError?r.a.createElement("p",{className:"errorModal"},u.a.translate("exchange.invalid_amount")):null,r.a.createElement("div",{className:"content-block button-group"},r.a.createElement("input",{type:"submit",className:"button success btn large inverted",onClick:this.onSubmit.bind(this),value:u.a.translate("modal.reserve.submit"),tabIndex:2}),r.a.createElement("div",{className:"button btn large outline",onClick:this.props.onClose,tabIndex:3},u.a.translate("cancel")))))}}]),t}();t.a=f},502:function(e,t,a){var n;n=function(e){var t=function(e){var t=e.each,a=e.extend,n=e.isArray,r=e.isObject,o=e.isNumber,s=e.merge,i=e.pick,l=e.reduce;return{getColor:function(t,a){var n,r,o,s,l=a.index,c=a.mapOptionsToLevel,u=a.parentColor,p=a.parentColorIndex,d=a.series,h=a.colors,m=a.siblings,f=d.points;return t&&(f=f[t.i],t=c[t.level]||{},(n=f&&t.colorByPoint)&&(o=f.index%(h?h.length:d.chart.options.chart.colorCount),r=h&&h[o]),h=f&&f.options.color,n=t&&t.color,(c=u)&&(c=(c=t&&t.colorVariation)&&"brightness"===c.key?e.color(u).brighten(l/m*c.to).get():u),n=i(h,n,r,c,d.color),s=i(f&&f.options.colorIndex,t&&t.colorIndex,o,p,a.colorIndex)),{color:n,colorIndex:s}},getLevelOptions:function(e){var t,i,c,u,p=null;if(r(e))for(p={},c=o(e.from)?e.from:1,u=e.levels,i={},t=r(e.defaults)?e.defaults:{},n(u)&&(i=l(u,function(e,n){var i,l;return r(n)&&o(n.level)&&(i="boolean"==typeof(l=s({},n)).levelIsConstant?l.levelIsConstant:t.levelIsConstant,delete l.levelIsConstant,delete l.level,n=n.level+(i?0:c-1),r(e[n])?a(e[n],l):e[n]=l),e},{})),u=o(e.to)?e.to:1,e=0;e<=u;e++)p[e]=s({},t,r(i[e])?i[e]:{});return p},setTreeValues:function e(n,r){var o=r.before,s=r.idRoot,l=r.mapIdToNode[s],c=r.points[n.i],u=c&&c.options||{},p=0,d=[];return a(n,{levelDynamic:n.level-("boolean"!=typeof r.levelIsConstant||r.levelIsConstant?0:l.level),name:i(c&&c.name,""),visible:s===n.id||"boolean"==typeof r.visible&&r.visible}),"function"==typeof o&&(n=o(n,r)),t(n.children,function(t,o){var s=a({},r);a(s,{index:o,siblings:n.children.length,visible:n.visible}),t=e(t,s),d.push(t),t.visible&&(p+=t.val)}),n.visible=0<p||n.visible,o=i(u.value,p),a(n,{children:d,childrenTotal:p,isLeaf:n.visible&&!p,val:o}),n},updateRootId:function(e){var t;return r(e)&&(t=r(e.options)?e.options:{},t=i(e.rootNode,t.rootId,""),r(e.userOptions)&&(e.userOptions.rootId=t),e.rootNode=t),t}}}(e);!function(e,t){var a=e.seriesType,n=e.seriesTypes,r=e.map,o=e.merge,s=e.extend,i=e.noop,l=e.each,c=t.getColor,u=t.getLevelOptions,p=e.grep,d=e.isNumber,h=e.isObject,m=e.isString,f=e.pick,b=e.Series,g=e.stableSort,v=e.Color,y=e.reduce,_=function(e,t,a){a=a||this,!1!==(e=t.call(a,e))&&_(e,t,a)},E=t.updateRootId;a("treemap","scatter",{showInLegend:!1,marker:!1,colorByPoint:!1,dataLabels:{enabled:!0,defer:!1,verticalAlign:"middle",formatter:function(){return this.point.name||this.point.id},inside:!0},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}</b>: {point.value}<br/>"},ignoreHiddenPoint:!0,layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,drillUpButton:{position:{align:"right",x:-10,y:10}},borderColor:"#e6e6e6",borderWidth:1,opacity:.15,states:{hover:{borderColor:"#999999",brightness:n.heatmap?0:.1,halo:!1,opacity:.75,shadow:!1}}},{pointArrayMap:["value"],axisTypes:n.heatmap?["xAxis","yAxis","colorAxis"]:["xAxis","yAxis"],directTouch:!0,optionalAxis:"colorAxis",getSymbol:i,parallelArrays:["x","y","value","colorValue"],colorKey:"colorValue",translateColors:n.heatmap&&n.heatmap.prototype.translateColors,colorAttribs:n.heatmap&&n.heatmap.prototype.colorAttribs,trackerGroups:["group","dataLabelsGroup"],getListOfParents:function(t,a){return function(t,a,n){n=n||this,e.objectEach(t,function(e,r){a.call(n,e,r,t)})}(t=y(t||[],function(e,t,a){return void 0===e[t=f(t.parent,"")]&&(e[t]=[]),e[t].push(a),e},{}),function(t,n,r){""!==n&&-1===e.inArray(n,a)&&(l(t,function(e){r[""].push(e)}),delete r[n])}),t},getTree:function(){var e=r(this.data,function(e){return e.id});e=this.getListOfParents(this.data,e);return this.nodeMap=[],this.buildNode("",-1,0,e,null)},init:function(t,a){b.prototype.init.call(this,t,a),this.options.allowDrillToNode&&e.addEvent(this,"click",this.onClickDrillToNode)},buildNode:function(e,t,a,n,r){var o,s=this,i=[],c=s.points[t],u=0;return l(n[e]||[],function(t){o=s.buildNode(s.points[t].id,t,a+1,n,e),u=Math.max(o.height+1,u),i.push(o)}),t={id:e,i:t,children:i,height:u,level:a,parent:r,visible:!1},s.nodeMap[t.id]=t,c&&(c.node=t),t},setTreeValues:function(e){var t,a=this,n=a.options,r=a.nodeMap[a.rootNode],o=(n="boolean"!=typeof n.levelIsConstant||n.levelIsConstant,0),i=[],c=a.points[e.i];return l(e.children,function(e){e=a.setTreeValues(e),i.push(e),e.ignore||(o+=e.val)}),g(i,function(e,t){return e.sortIndex-t.sortIndex}),t=f(c&&c.options.value,o),c&&(c.value=t),s(e,{children:i,childrenTotal:o,ignore:!(f(c&&c.visible,!0)&&0<t),isLeaf:e.visible&&!o,levelDynamic:e.level-(n?0:r.level),name:f(c&&c.name,""),sortIndex:f(c&&c.sortIndex,-t),val:t}),e},calculateChildrenAreas:function(e,t){var a,n=this,r=n.options,s=n.mapOptionsToLevel[e.level+1],i=f(n[s&&s.layoutAlgorithm]&&s.layoutAlgorithm,r.layoutAlgorithm),c=r.alternateStartingDirection;e=p(e.children,function(e){return!e.ignore}),s&&s.layoutStartingDirection&&(t.direction="vertical"===s.layoutStartingDirection?0:1),a=n[i](t,e),l(e,function(e,r){r=a[r],e.values=o(r,{val:e.childrenTotal,direction:c?1-t.direction:t.direction}),e.pointValues=o(r,{x:r.x/n.axisRatio,width:r.width/n.axisRatio}),e.children.length&&n.calculateChildrenAreas(e,e.values)})},setPointValues:function(){var e=this,t=e.xAxis,a=e.yAxis;l(e.points,function(n){var r,o,s,i=n.node,l=i.pointValues;s=(e.pointAttribs(n)["stroke-width"]||0)%2/2,l&&i.visible?(i=Math.round(t.translate(l.x,0,0,0,1))-s,r=Math.round(t.translate(l.x+l.width,0,0,0,1))-s,o=Math.round(a.translate(l.y,0,0,0,1))-s,l=Math.round(a.translate(l.y+l.height,0,0,0,1))-s,n.shapeType="rect",n.shapeArgs={x:Math.min(i,r),y:Math.min(o,l),width:Math.abs(r-i),height:Math.abs(l-o)},n.plotX=n.shapeArgs.x+n.shapeArgs.width/2,n.plotY=n.shapeArgs.y+n.shapeArgs.height/2):(delete n.plotX,delete n.plotY)})},setColorRecursive:function(e,t,a,n,r){var o,s=this,i=(i=s&&s.chart)&&i.options&&i.options.colors;e&&(o=c(e,{colors:i,index:n,mapOptionsToLevel:s.mapOptionsToLevel,parentColor:t,parentColorIndex:a,series:s,siblings:r}),(t=s.points[e.i])&&(t.color=o.color,t.colorIndex=o.colorIndex),l(e.children||[],function(t,a){s.setColorRecursive(t,o.color,o.colorIndex,a,e.children.length)}))},algorithmGroup:function(e,t,a,n){this.height=e,this.width=t,this.plot=n,this.startDirection=this.direction=a,this.lH=this.nH=this.lW=this.nW=this.total=0,this.elArr=[],this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(e,t){return Math.max(e/t,t/e)}},this.addElement=function(e){this.lP.total=this.elArr[this.elArr.length-1],this.total+=e,0===this.direction?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH)),this.elArr.push(e)},this.reset=function(){this.lW=this.nW=0,this.elArr=[],this.total=0}},algorithmCalcPoints:function(e,t,a,n){var r,o,s,i,c,u=a.lW,p=a.lH,d=a.plot,h=0,m=a.elArr.length-1;t?(u=a.nW,p=a.nH):c=a.elArr[a.elArr.length-1],l(a.elArr,function(e){(t||h<m)&&(0===a.direction?(r=d.x,o=d.y,i=e/(s=u)):(r=d.x,o=d.y,s=e/(i=p)),n.push({x:r,y:o,width:s,height:i}),0===a.direction?d.y+=i:d.x+=s),h+=1}),a.reset(),0===a.direction?a.width-=u:a.height-=p,d.y=d.parent.y+(d.parent.height-a.height),d.x=d.parent.x+(d.parent.width-a.width),e&&(a.direction=1-a.direction),t||a.addElement(c)},algorithmLowAspectRatio:function(e,t,a){var n,r=[],o=this,s={x:t.x,y:t.y,parent:t},i=0,c=a.length-1,u=new this.algorithmGroup(t.height,t.width,t.direction,s);return l(a,function(a){n=a.val/t.val*t.height*t.width,u.addElement(n),u.lP.nR>u.lP.lR&&o.algorithmCalcPoints(e,!1,u,r,s),i===c&&o.algorithmCalcPoints(e,!0,u,r,s),i+=1}),r},algorithmFill:function(e,t,a){var n,r,o,s,i,c=[],u=t.direction,p=t.x,d=t.y,h=t.width,m=t.height;return l(a,function(a){n=a.val/t.val*t.height*t.width,r=p,o=d,0===u?(h-=s=n/(i=m),p+=s):(m-=i=n/(s=h),d+=i),c.push({x:r,y:o,width:s,height:i}),e&&(u=1-u)}),c},strip:function(e,t){return this.algorithmLowAspectRatio(!1,e,t)},squarified:function(e,t){return this.algorithmLowAspectRatio(!0,e,t)},sliceAndDice:function(e,t){return this.algorithmFill(!0,e,t)},stripes:function(e,t){return this.algorithmFill(!1,e,t)},translate:function(){var e,t,a=this,n=a.options,r=E(a);b.prototype.translate.call(a),t=a.tree=a.getTree(),e=a.nodeMap[r],a.mapOptionsToLevel=u({from:e.level+1,levels:n.levels,to:t.height,defaults:{levelIsConstant:a.options.levelIsConstant,colorByPoint:n.colorByPoint}}),""===r||e&&e.children.length||(a.drillToNode("",!1),r=a.rootNode,e=a.nodeMap[r]),_(a.nodeMap[a.rootNode],function(e){var t=!1,n=e.parent;return e.visible=!0,(n||""===n)&&(t=a.nodeMap[n]),t}),_(a.nodeMap[a.rootNode].children,function(e){var t=!1;return l(e,function(e){e.visible=!0,e.children.length&&(t=(t||[]).concat(e.children))}),t}),a.setTreeValues(t),a.axisRatio=a.xAxis.len/a.yAxis.len,a.nodeMap[""].pointValues=r={x:0,y:0,width:100,height:100},a.nodeMap[""].values=r=o(r,{width:r.width*a.axisRatio,direction:"vertical"===n.layoutStartingDirection?0:1,val:t.val}),a.calculateChildrenAreas(t,r),a.colorAxis?a.translateColors():n.colorByPoint||a.setColorRecursive(a.tree),n.allowDrillToNode&&(n=e.pointValues,a.xAxis.setExtremes(n.x,n.x+n.width,!1),a.yAxis.setExtremes(n.y,n.y+n.height,!1),a.xAxis.setScale(),a.yAxis.setScale()),a.setPointValues()},drawDataLabels:function(){var e,t,a=this,n=a.mapOptionsToLevel,r=p(a.points,function(e){return e.node.visible});l(r,function(r){t=n[r.node.level],e={style:{}},r.node.isLeaf||(e.enabled=!1),t&&t.dataLabels&&(e=o(e,t.dataLabels),a._hasPointLabels=!0),r.shapeArgs&&(e.style.width=r.shapeArgs.width,r.dataLabel&&r.dataLabel.css({width:r.shapeArgs.width+"px"})),r.dlOptions=o(e,r.options.dataLabels)}),b.prototype.drawDataLabels.call(this)},alignDataLabel:function(e){n.column.prototype.alignDataLabel.apply(this,arguments),e.dataLabel&&e.dataLabel.attr({zIndex:(e.node.zIndex||0)+1})},pointAttribs:function(e,t){var a=h(this.mapOptionsToLevel)?this.mapOptionsToLevel:{},n=e&&a[e.node.level]||{},r=(a=this.options,t&&a.states[t]||{}),o=e&&e.getClassName()||"";return e={stroke:e&&e.borderColor||n.borderColor||r.borderColor||a.borderColor,"stroke-width":f(e&&e.borderWidth,n.borderWidth,r.borderWidth,a.borderWidth),dashstyle:e&&e.borderDashStyle||n.borderDashStyle||r.borderDashStyle||a.borderDashStyle,fill:e&&e.color||this.color},-1!==o.indexOf("highcharts-above-level")?(e.fill="none",e["stroke-width"]=0):-1!==o.indexOf("highcharts-internal-node-interactive")?(t=f(r.opacity,a.opacity),e.fill=v(e.fill).setOpacity(t).get(),e.cursor="pointer"):-1!==o.indexOf("highcharts-internal-node")?e.fill="none":t&&(e.fill=v(e.fill).brighten(r.brightness).get()),e},drawPoints:function(){var e=this,t=p(e.points,function(e){return e.node.visible});l(t,function(t){var a="level-group-"+t.node.levelDynamic;e[a]||(e[a]=e.chart.renderer.g(a).attr({zIndex:1e3-t.node.levelDynamic}).add(e.group)),t.group=e[a]}),n.column.prototype.drawPoints.call(this),e.options.allowDrillToNode&&l(t,function(t){t.graphic&&(t.drillId=e.options.interactByLeaf?e.drillToByLeaf(t):e.drillToByGroup(t))})},onClickDrillToNode:function(e){var t=(e=e.point)&&e.drillId;m(t)&&(e.setState(""),this.drillToNode(t))},drillToByGroup:function(e){var t=!1;return 1!=e.node.level-this.nodeMap[this.rootNode].level||e.node.isLeaf||(t=e.id),t},drillToByLeaf:function(e){var t=!1;if(e.node.parent!==this.rootNode&&e.node.isLeaf)for(e=e.node;!t;)(e=this.nodeMap[e.parent]).parent===this.rootNode&&(t=e.id);return t},drillUp:function(){var e=this.nodeMap[this.rootNode];e&&m(e.parent)&&this.drillToNode(e.parent)},drillToNode:function(e,t){var a=this.nodeMap[e];this.idPreviousRoot=this.rootNode,this.rootNode=e,""===e?this.drillUpButton=this.drillUpButton.destroy():this.showDrillUpButton(a&&a.name||e),this.isDirty=!0,f(t,!0)&&this.chart.redraw()},showDrillUpButton:function(e){var t=this;e=e||"< Back";var a,n,r=t.options.drillUpButton;r.text&&(e=r.text),this.drillUpButton?(this.drillUpButton.placed=!1,this.drillUpButton.attr({text:e}).align()):(n=(a=r.theme)&&a.states,this.drillUpButton=this.chart.renderer.button(e,null,null,function(){t.drillUp()},a,n&&n.hover,n&&n.select).addClass("highcharts-drillup-button").attr({align:r.position.align,zIndex:7}).add().align(r.position,!1,r.relativeTo||"plotBox"))},buildKDTree:i,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,getExtremes:function(){b.prototype.getExtremes.call(this,this.colorValueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,b.prototype.getExtremes.call(this)},getExtremesFromAll:!0,bindAxes:function(){var t={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,dataMin:0,minPadding:0,max:100,dataMax:100,maxPadding:0,startOnTick:!1,title:null,tickPositions:[]};b.prototype.bindAxes.call(this),e.extend(this.yAxis.options,t),e.extend(this.xAxis.options,t)},utils:{recursive:_,reduce:y}},{getClassName:function(){var t=e.Point.prototype.getClassName.call(this),a=this.series,n=a.options;return this.node.level<=a.nodeMap[a.rootNode].level?t+=" highcharts-above-level":this.node.isLeaf||f(n.interactByLeaf,!n.allowDrillToNode)?this.node.isLeaf||(t+=" highcharts-internal-node"):t+=" highcharts-internal-node-interactive",t},isValid:function(){return this.id||d(this.value)},setState:function(t){e.Point.prototype.setState.call(this,t),this.graphic&&this.graphic.attr({zIndex:"hover"===t?1:0})},setVisible:n.pie.prototype.pointClass.prototype.setVisible})}(e,t)},e.exports?e.exports=n:n(Highcharts)},503:function(e,t,a){var n;n=function(e){!function(e){var t,a=e.addEvent,n=e.Axis,r=e.Chart,o=e.color,s=e.each,i=e.extend,l=e.isNumber,c=e.Legend,u=e.LegendSymbolMixin,p=e.noop,d=e.merge,h=e.pick;e.ColorAxis||(t=e.ColorAxis=function(){this.init.apply(this,arguments)},i(t.prototype,n.prototype),i(t.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{overflow:"justify",rotation:0},minColor:"#e6ebf5",maxColor:"#003399",tickLength:5,showInLegend:!0},keepProps:["legendGroup","legendItemHeight","legendItemWidth","legendItem","legendSymbol"].concat(n.prototype.keepProps),init:function(e,t){var a,r="vertical"!==e.options.legend.layout;this.coll="colorAxis",a=d(this.defaultColorAxisOptions,{side:r?2:1,reversed:!r},t,{opposite:!r,showEmpty:!1,title:null,visible:e.options.legend.enabled}),n.prototype.init.call(this,e,a),t.dataClasses&&this.initDataClasses(t),this.initStops(),this.horiz=r,this.zoomEnabled=!1,this.defaultLegendLength=200},initDataClasses:function(e){var t,a=this.chart,n=0,r=a.options.chart.colorCount,i=this.options,l=e.dataClasses.length;this.dataClasses=t=[],this.legendItems=[],s(e.dataClasses,function(e,s){e=d(e),t.push(e),e.color||("category"===i.dataClassColor?(s=a.options.colors,r=s.length,e.color=s[n],e.colorIndex=n,++n===r&&(n=0)):e.color=o(i.minColor).tweenTo(o(i.maxColor),2>l?.5:s/(l-1)))})},setTickPositions:function(){if(!this.dataClasses)return n.prototype.setTickPositions.call(this)},initStops:function(){this.stops=this.options.stops||[[0,this.options.minColor],[1,this.options.maxColor]],s(this.stops,function(e){e.color=o(e[1])})},setOptions:function(e){n.prototype.setOptions.call(this,e),this.options.crosshair=this.options.marker},setAxisSize:function(){var e,t,a=this.legendSymbol,n=this.chart,r=n.options.legend||{};a?(this.left=r=a.attr("x"),this.top=e=a.attr("y"),this.width=t=a.attr("width"),this.height=a=a.attr("height"),this.right=n.chartWidth-r-t,this.bottom=n.chartHeight-e-a,this.len=this.horiz?t:a,this.pos=this.horiz?r:e):this.len=(this.horiz?r.symbolWidth:r.symbolHeight)||this.defaultLegendLength},normalizedValue:function(e){return this.isLog&&(e=this.val2lin(e)),1-(this.max-e)/(this.max-this.min||1)},toColor:function(e,t){var a,n,r,o,s=this.stops,i=this.dataClasses;if(i){for(o=i.length;o--;)if(a=(r=i[o]).from,s=r.to,(void 0===a||e>=a)&&(void 0===s||e<=s)){n=r.color,t&&(t.dataClass=o,t.colorIndex=r.colorIndex);break}}else{for(e=this.normalizedValue(e),o=s.length;o--&&!(e>s[o][0]););a=s[o]||s[o+1],e=1-((s=s[o+1]||a)[0]-e)/(s[0]-a[0]||1),n=a.color.tweenTo(s.color,e)}return n},getOffset:function(){var e=this.legendGroup,t=this.chart.axisOffset[this.side];e&&(this.axisParent=e,n.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=t)},setLegendColor:function(){var e,t=this.reversed;e=t?1:0,t=t?0:1,e=this.horiz?[e,0,t,0]:[0,t,0,e],this.legendColor={linearGradient:{x1:e[0],y1:e[1],x2:e[2],y2:e[3]},stops:this.stops}},drawLegendSymbol:function(e,t){var a=e.padding,n=e.options,r=this.horiz,o=h(n.symbolWidth,r?this.defaultLegendLength:12),s=h(n.symbolHeight,r?12:this.defaultLegendLength),i=h(n.labelPadding,r?16:30);n=h(n.itemDistance,10);this.setLegendColor(),t.legendSymbol=this.chart.renderer.rect(0,e.baseline-11,o,s).attr({zIndex:1}).add(t.legendGroup),this.legendItemWidth=o+a+(r?n:i),this.legendItemHeight=s+a+(r?i:0)},setState:function(e){s(this.series,function(t){t.setState(e)})},visible:!0,setVisible:p,getSeriesExtremes:function(){var e=this.series,t=e.length;for(this.dataMin=1/0,this.dataMax=-1/0;t--;)e[t].getExtremes(),void 0!==e[t].valueMin&&(this.dataMin=Math.min(this.dataMin,e[t].valueMin),this.dataMax=Math.max(this.dataMax,e[t].valueMax))},drawCrosshair:function(e,t){var a,r=t&&t.plotX,o=t&&t.plotY,s=this.pos,i=this.len;t&&((a=this.toPixels(t[t.series.colorKey]))<s?a=s-2:a>s+i&&(a=s+i+2),t.plotX=a,t.plotY=this.len-a,n.prototype.drawCrosshair.call(this,e,t),t.plotX=r,t.plotY=o,this.cross&&!this.cross.addedToColorAxis&&this.legendGroup&&(this.cross.addClass("highcharts-coloraxis-marker").add(this.legendGroup),this.cross.addedToColorAxis=!0,this.cross.attr({fill:this.crosshair.color})))},getPlotLinePath:function(e,t,a,r,o){return l(o)?this.horiz?["M",o-4,this.top-6,"L",o+4,this.top-6,o,this.top,"Z"]:["M",this.left,o,"L",this.left-6,o+6,this.left-6,o-6,"Z"]:n.prototype.getPlotLinePath.call(this,e,t,a,r)},update:function(e,t){var a=this.chart,r=a.legend;s(this.series,function(e){e.isDirtyData=!0}),e.dataClasses&&r.allItems&&(s(r.allItems,function(e){e.isDataClass&&e.legendGroup&&e.legendGroup.destroy()}),a.isDirtyLegend=!0),a.options[this.coll]=d(this.userOptions,e),n.prototype.update.call(this,e,t),this.legendItem&&(this.setLegendColor(),r.colorizeItem(this,!0))},remove:function(){this.legendItem&&this.chart.legend.destroyItem(this),n.prototype.remove.call(this)},getDataClassLegendSymbols:function(){var t,a=this,n=this.chart,r=this.legendItems,o=n.options.legend,l=o.valueDecimals,c=o.valueSuffix||"";return r.length||s(this.dataClasses,function(o,d){var h=!0,m=o.from,f=o.to;t="",void 0===m?t="< ":void 0===f&&(t="> "),void 0!==m&&(t+=e.numberFormat(m,l)+c),void 0!==m&&void 0!==f&&(t+=" - "),void 0!==f&&(t+=e.numberFormat(f,l)+c),r.push(i({chart:n,name:t,options:{},drawLegendSymbol:u.drawRectangle,visible:!0,setState:p,isDataClass:!0,setVisible:function(){h=this.visible=!h,s(a.series,function(e){s(e.points,function(e){e.dataClass===d&&e.setVisible(h)})}),n.legend.colorizeItem(this,h)}},o))}),r},name:""}),s(["fill","stroke"],function(t){e.Fx.prototype[t+"Setter"]=function(){this.elem.attr(t,o(this.start).tweenTo(o(this.end),this.pos),null,!0)}}),a(r,"afterGetAxes",function(){var e=this.options.colorAxis;this.colorAxis=[],e&&new t(this,e)}),a(c,"afterGetAllItems",function(t){var a=[],n=this.chart.colorAxis[0];for(n&&n.options&&n.options.showInLegend&&(n.options.dataClasses?a=n.getDataClassLegendSymbols():a.push(n),s(n.series,function(a){e.erase(t.allItems,a)})),n=a.length;n--;)t.allItems.unshift(a[n])}),a(c,"afterColorizeItem",function(e){e.visible&&e.item.legendColor&&e.item.legendSymbol.attr({fill:e.item.legendColor})}),a(c,"afterUpdate",function(e,t,a){this.chart.colorAxis[0]&&this.chart.colorAxis[0].update({},a)}))}(e),function(e){var t=e.defined,a=e.each,n=e.noop,r=e.seriesTypes;e.colorPointMixin={isValid:function(){return null!==this.value&&1/0!==this.value&&-1/0!==this.value},setVisible:function(e){var t=this,n=e?"show":"hide";a(["graphic","dataLabel"],function(e){t[e]&&t[e][n]()})},setState:function(t){e.Point.prototype.setState.call(this,t),this.graphic&&this.graphic.attr({zIndex:"hover"===t?1:0})}},e.colorSeriesMixin={pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:n,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:r.column.prototype.pointAttribs,translateColors:function(){var e=this,t=this.options.nullColor,n=this.colorAxis,r=this.colorKey;a(this.data,function(a){var o=a[r];(o=a.options.color||(a.isNull?t:n&&void 0!==o?n.toColor(o,a):a.color||e.color))&&(a.color=o)})},colorAttribs:function(e){var a={};return t(e.color)&&(a[this.colorProp||"fill"]=e.color),a}}}(e),function(e){var t=e.colorPointMixin,a=e.each,n=e.merge,r=e.noop,o=e.pick,s=e.Series,i=e.seriesType,l=e.seriesTypes;i("heatmap","scatter",{animation:!1,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}}},n(e.colorSeriesMixin,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var e;l.scatter.prototype.init.apply(this,arguments),(e=this.options).pointRange=o(e.pointRange,e.colsize||1),this.yAxis.axisPointRange=e.rowsize||1},translate:function(){var e=this.options,t=this.xAxis,n=this.yAxis,r=e.pointPadding||0,s=function(e,t,a){return Math.min(Math.max(t,e),a)};this.generatePoints(),a(this.points,function(a){var i=(e.colsize||1)/2,l=(e.rowsize||1)/2,c=s(Math.round(t.len-t.translate(a.x-i,0,1,0,1)),-t.len,2*t.len),u=(i=s(Math.round(t.len-t.translate(a.x+i,0,1,0,1)),-t.len,2*t.len),s(Math.round(n.translate(a.y-l,0,1,0,1)),-n.len,2*n.len)),p=(l=s(Math.round(n.translate(a.y+l,0,1,0,1)),-n.len,2*n.len),o(a.pointPadding,r));a.plotX=a.clientX=(c+i)/2,a.plotY=(u+l)/2,a.shapeType="rect",a.shapeArgs={x:Math.min(c,i)+p,y:Math.min(u,l)+p,width:Math.abs(i-c)-2*p,height:Math.abs(l-u)-2*p}}),this.translateColors()},drawPoints:function(){l.column.prototype.drawPoints.call(this),a(this.points,function(e){e.graphic.attr(this.colorAttribs(e))},this)},animate:r,getBox:r,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,alignDataLabel:l.column.prototype.alignDataLabel,getExtremes:function(){s.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,s.prototype.getExtremes.call(this)}}),e.extend({haloPath:function(e){if(!e)return[];var t=this.shapeArgs;return["M",t.x-e,t.y-e,"L",t.x-e,t.y+t.height+e,t.x+t.width+e,t.y+t.height+e,t.x+t.width+e,t.y-e,"Z"]}},t))}(e)},e.exports?e.exports=n:n(Highcharts)},5233:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(6),s=a.n(o),i=a(1),l=a.n(i),c=a(84),u=a(105),p=a(23),d=a.n(p),h=a(39),m=a(8),f=a(14),b=a(5),g=a(76),v=a(15),y=a(2),_=a.n(y),E=a(4),w=a(68),x=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=function(e){function t(){A(this,t);var e=k(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={amount:0},e}return O(t,r.a.Component),x(t,[{key:"onAmountChanged",value:function(e){var t=e.amount;e.asset;this.setState({amount:t})}},{key:"onSubmit",value:function(e){e.preventDefault(),d.a.publish("settlement_modal","close");var t=b.a.get_asset_precision(this.props.asset.get("precision")),a=this.state.amount.replace(/,/g,"");a*=t;var n=g.a.new_transaction();return n.add_type_operation("asset_settle",{fee:{amount:0,asset_id:0},account:this.props.account.get("id"),amount:{amount:a,asset_id:this.props.asset.get("id")}}),v.a.process_transaction(n,null,!0).then(function(e){return console.log("asset settle result:",e),!0}).catch(function(e){return console.error("asset settle error: ",e),!1})}},{key:"render",value:function(){var e=this.props,t=e.asset,a=e.account,n=this.state.amount;if(!t)return null;var o=t.get("id"),s=a.get("balances"),i=null,u=0;s&&s.forEach(function(e){var t=E.b.getObject(e);if(!t.get("balance"))return null;t.get("asset_type")===o&&(i=e,u=t.get("balance"))});var p=b.a.get_asset_precision(t.get("precision")),d=n?n.replace(/,/g,""):0,h=parseFloat(d)>0&&parseFloat(d)*p<=parseFloat(u)?"button btn large outline":"button disabled btn large outline",m=r.a.createElement("span",null,r.a.createElement(l.a,{content:"exchange.balance"}),":Â ",i?r.a.createElement(c.a,{balance:i}):"0 "+t.get("symbol"));return r.a.createElement("form",{className:"grid-block vertical full-width-content"},r.a.createElement(l.a,{component:"h3",style:{textAlign:"center"},content:"modal.settle.title",asset:t.get("symbol")}),r.a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},r.a.createElement("div",{className:"content-block"},r.a.createElement(w.a,{label:"modal.settle.amount",amount:n,onChange:this.onAmountChanged.bind(this),display_balance:m,asset:o,assets:[o],tabIndex:1})),r.a.createElement("div",{className:"content-block"},r.a.createElement("input",{type:"submit",className:h,onClick:this.onSubmit.bind(this),value:_.a.translate("modal.settle.submit")}))))}}]),t}();C.propTypes={asset:m.a.ChainAsset.isRequired,account:m.a.ChainAccount.isRequired},C=Object(f.a)(C);var S=function(e){function t(){A(this,t);var e=k(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return O(t,r.a.Component),x(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){d.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){return r.a.createElement(h.a,{id:this.props.modalId,onClose:this.onClose.bind(this),overlay:!0,ref:"settlement_modal"},r.a.createElement("div",{className:"grid-block vertical"},r.a.createElement(C,this.props)))}}]),t}(),N=a(119),j=a(79),P=a(38),I=a(18),L=a(28),T=a(36),M=a.n(T),D=a(307),R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},q=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var W=function(e){function t(e){return B(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return F(t,D["b"]),q(t,[{key:"componentDidMount",value:function(){M.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.base!==this.props.base}},{key:"getValue",value:function(){var e=this.props.marketStats;return e&&e.change?e.change:0}},{key:"render",value:function(){var e=this.getValue(),t=0===parseFloat(e)?"":parseFloat(e)<0?"change-down":"change-up",a=r.a.createElement(j.b,{style:"decimal",value:e,minimumFractionDigits:2,maximumFractionDigits:2});return r.a.createElement("span",{className:"value "+t},a,"%")}}]),t}();W.defaultProps={fullPrecision:!1,noDecimals:!1,hide_asset:!1},W=Object(P.a)(W,{propNames:["quote","base"],defaultProps:{quote:"1.3.0"}});var U=function(e){function t(){return B(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return F(t,r.a.Component),q(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,a=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["refCallback"]);return r.a.createElement(W,R({},a,{ref:t}))}}]),t}();U=Object(I.connect)(U,{listenTo:function(){return[L.a]},getProps:function(e){return{marketStats:L.a.getState().allMarketStats.get(e.marketId),allMarketStats:L.a.getState().allMarketStats}}});var z=a(20),H=a(13),K=a(54),G=a(169),J=a(17),Y=a(7),X=a(29),Z=a(3),Q=a.n(Z),$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ee=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function te(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var oe={textAlign:"right"},se={textAlign:"left"},ie=function(e){function t(){return ae(this,t),ne(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return re(t,r.a.Component),ee(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.object.getIn(["call_price","quote","asset_id"]);this.refs[t].show()}},{key:"_onClosePosition",value:function(e){e.preventDefault();var t=g.a.new_transaction();t.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.object.get("borrower"),delta_collateral:{amount:-this.props.object.get("collateral"),asset_id:this.props.object.getIn(["call_price","base","asset_id"])},delta_debt:{amount:-this.props.object.get("debt"),asset_id:this.props.object.getIn(["call_price","quote","asset_id"])}}),v.a.process_transaction(t,null,!0)}},{key:"_getBalance",value:function(){var e=this.props.account,t=this.props.object.getIn(["call_price","quote","asset_id"]),a=e.get("balances"),n=0;return a&&a.forEach(function(e,a){if(a==t){var r=E.b.getObject(e);n=r.get("balance")}}),n}},{key:"_getFeedPrice",value:function(){return this.props?1/b.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_getCollateralRatio",value:function(){var e=this.props.object.toJS();return b.a.get_asset_amount(e.collateral,this.props.collateralAsset)/(b.a.get_asset_amount(e.debt,this.props.debtAsset)/this._getFeedPrice())}},{key:"_getMR",value:function(){return this.props.debtAsset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3}},{key:"_getStatusClass",value:function(){var e=this._getCollateralRatio(),t=this._getMR();return isNaN(e)?null:e<t?"danger":e<t+.5?"warning":""}},{key:"_getCRTip",value:function(){var e=this._getStatusClass(),t=this._getMR();return e&&""!==e?"danger"===e?_.a.translate("tooltip.cr_danger",{mr:t}):"warning"===e?_.a.translate("tooltip.cr_warning",{mr:t}):null:null}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.context.router.push(e)}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,a=e.collateralAsset,n=e.object.toJS(),s=this._getCollateralRatio(),i=b.a.get_asset_amount(n.debt,this.props.debtAsset),c=this._getBalance(),p=this._getStatusClass(),d="/asset/"+t.get("symbol"),h="/market/"+t.get("symbol")+"_"+a.get("symbol"),m=r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:d,onClick:this._onNavigate.bind(this,d)},r.a.createElement(l.a,{content:"account.asset_details"}))),r.a.createElement("li",null,r.a.createElement("a",{href:h,onClick:this._onNavigate.bind(this,h)},r.a.createElement(z.a,{name:t.get("symbol")})," :"," ",r.a.createElement(z.a,{name:a.get("symbol")}))));return r.a.createElement("tr",{className:"margin-row"},r.a.createElement("td",{style:se},r.a.createElement(Y.b,{to:"/asset/"+t.get("symbol")},r.a.createElement(z.a,{noTip:!0,name:t.get("symbol")}))),r.a.createElement("td",{style:oe},r.a.createElement(H.a,{amount:c,asset:n.call_price.quote.asset_id,assetInfo:m,hide_asset:!0})),r.a.createElement("td",{style:oe},r.a.createElement(H.a,{amount:n.debt,asset:n.call_price.quote.asset_id,assetInfo:m,hide_asset:!0})),r.a.createElement("td",{style:oe,className:"column-hide-medium"},r.a.createElement(H.a,{decimalOffset:5,amount:n.collateral,asset:n.call_price.base.asset_id})),r.a.createElement("td",{"data-place":"bottom","data-tip":this._getCRTip(),className:"center-content "+p},b.a.format_number(s,2)),r.a.createElement("td",{style:oe},r.a.createElement(u.a,{noTip:!0,balances:Object(o.List)(),debt:te({},t.get("id"),n.debt),collateral:te({},a.get("id"),parseInt(n.collateral,10)),hide_asset:!0})),r.a.createElement("td",{style:oe,className:"column-hide-small"},r.a.createElement(K.a,{base_amount:n.call_price.base.amount,base_asset:n.call_price.base.asset_id,quote_amount:n.call_price.quote.amount,quote_asset:n.call_price.quote.asset_id,hide_symbols:!0})),r.a.createElement("td",{style:oe,className:"column-hide-small"},r.a.createElement(K.a,{base_amount:t.getIn(["bitasset","current_feed","settlement_price","base","amount"]),base_asset:n.call_price.quote.asset_id,quote_amount:t.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),quote_asset:n.call_price.base.asset_id,hide_symbols:!0})),r.a.createElement("td",{className:"center-content column-hide-small",style:se},r.a.createElement(K.a,{base_amount:n.call_price.base.amount,base_asset:n.call_price.base.asset_id,quote_amount:n.call_price.quote.amount,quote_asset:n.call_price.quote.asset_id,hide_value:!0})),r.a.createElement("td",null,r.a.createElement("div",{"data-place":"left","data-tip":_.a.translate("tooltip.update_position"),style:{paddingBottom:5}},r.a.createElement("a",{onClick:this._onUpdatePosition.bind(this)},r.a.createElement(J.a,{name:"adjust",title:"icons.adjust",className:"icon-14px rotate90"})))),r.a.createElement("td",null,r.a.createElement("div",{"data-place":"left","data-tip":_.a.translate("tooltip.close_position",{amount:i,asset:t.get("symbol")}),style:{paddingBottom:5}},r.a.createElement("a",{onClick:this._onClosePosition.bind(this)},r.a.createElement(J.a,{name:"cross-circle",title:"icons.cross_circle.close_position",className:"icon-14px"}))),t?r.a.createElement(G.a,{ref:"cp_modal_"+n.call_price.quote.asset_id,modalId:"cp_modal_"+n.call_price.quote.asset_id,quote_asset:n.call_price.quote.asset_id,backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}();ie.propTypes={debtAsset:m.a.ChainAsset.isRequired,collateralAsset:m.a.ChainAsset.isRequired},ie.defaultProps={tempComponent:"tr"},ie.contextTypes={router:Q.a.object},ie=Object(f.a)(ie);var le=function(e){function t(){return ae(this,t),ne(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return re(t,r.a.Component),ee(t,[{key:"render",value:function(){var e=this.props,t=e.object,a=e.account,n=t.getIn(["call_price","quote","asset_id"]),o=t.getIn(["call_price","base","asset_id"]);return r.a.createElement(ie,$({debtAsset:n,collateralAsset:o,account:a},this.props))}}]),t}();le.propTypes={object:m.a.ChainObject.isRequired},le=Object(f.a)(le);var ce=function(e){function t(){return ae(this,t),ne(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return re(t,r.a.Component),ee(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.debtAsset.get("id");this.refs[t].show()}},{key:"_getFeedPrice",value:function(){return this.props?1/b.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.context.router.push(e)}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,a=e.collateralAsset,n=e.account,o=t.get("id"),s=n.get("balances"),i=0;s&&s.forEach(function(e,t){if(t==o){var a=E.b.getObject(e);i=a.get("balance")}});var c="/asset/"+t.get("symbol"),u="/market/"+t.get("symbol")+"_"+a.get("symbol"),p=r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:c,onClick:this._onNavigate.bind(this,c)},r.a.createElement(l.a,{content:"account.asset_details"}))),r.a.createElement("li",null,r.a.createElement("a",{href:u,onClick:this._onNavigate.bind(this,u)},r.a.createElement(z.a,{name:t.get("symbol")})," :"," ",r.a.createElement(z.a,{name:a.get("symbol")}))));return r.a.createElement("tr",{className:"margin-row"},r.a.createElement("td",{style:se},r.a.createElement(Y.b,{to:"/asset/"+t.get("symbol")},r.a.createElement(z.a,{noTip:!0,name:t.get("symbol")}))),r.a.createElement("td",{style:oe},r.a.createElement(H.a,{amount:i,asset:t.get("id"),assetInfo:p,hide_asset:!0})),r.a.createElement("td",{style:oe},r.a.createElement(H.a,{amount:0,asset:t.get("id"),assetInfo:p,hide_asset:!0})),r.a.createElement("td",{style:oe,className:"column-hide-medium"},r.a.createElement(H.a,{decimalOffset:5,amount:0,asset:a.get("id")})),r.a.createElement("td",null),r.a.createElement("td",{style:oe}),r.a.createElement("td",{style:oe,className:"column-hide-small"}),r.a.createElement("td",{style:oe,className:"column-hide-small"}),r.a.createElement("td",{className:"center-content column-hide-small",style:se}),r.a.createElement("td",null,r.a.createElement("div",{"data-place":"left","data-tip":_.a.translate("tooltip.update_position"),style:{paddingBottom:5}},r.a.createElement("a",{onClick:this._onUpdatePosition.bind(this)},r.a.createElement(J.a,{name:"adjust",title:"icons.adjust",className:"icon-14px rotate90"})))),r.a.createElement("td",null,t?r.a.createElement(G.a,{ref:"cp_modal_"+t.get("id"),modalId:"cp_modal_"+t.get("id"),quote_asset:t.get("id"),backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}();ce.propTypes={debtAsset:m.a.ChainAsset.isRequired,collateralAsset:m.a.ChainAsset.isRequired},ce.defaultProps={tempComponent:"tr"},ce.contextTypes={router:Q.a.object},ce=Object(f.a)(ce);var ue=function(e){function t(){return ae(this,t),ne(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return re(t,r.a.Component),ee(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.callOrders,o=t.bitAssets;if(n=n.filter(function(e){return!!e}),!(o=o.filter(function(e){return!!e})).length)return null;if(n.forEach(function(e){if(e){var t=o.findIndex(function(t){return t&&t.get("id")===e.getIn(["call_price","quote","asset_id"])});-1!==t&&o.splice(t,1)}}),!o.length)return null;var s=o.map(function(t){return r.a.createElement(ce,$({key:t.get("id"),debtAsset:t.get("id"),collateralAsset:t.getIn(["bitasset","options","short_backing_asset"]),account:a},e.props))});return r.a.createElement("tbody",null,s)}}]),t}();ue.propTypes={callOrders:m.a.ChainObjectsList},ue=Object(f.a)(ue),ue=Object(P.a)(ue,{propNames:["bitAssets"],defaultProps:{bitAssets:["1.3.103","1.3.113","1.3.120","1.3.121","1.3.958","1.3.1325","1.3.1362","1.3.105","1.3.106"]},asList:!0});var pe=function(e){var t=e.callOrders,a=e.account,n=e.className,o=e.children,i=e.preferredUnit;return r.a.createElement("div",{className:"dashboard__adaptive"},r.a.createElement("table",{className:"dashboard__table "+n},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:se},r.a.createElement(l.a,{content:"explorer.asset.title"})),r.a.createElement("th",{style:oe},r.a.createElement(l.a,{content:"exchange.balance"})),r.a.createElement("th",{style:oe},r.a.createElement(l.a,{content:"transaction.borrow_amount"})),r.a.createElement("th",{style:oe,className:"column-hide-medium"},r.a.createElement(l.a,{content:"transaction.collateral"})),r.a.createElement("th",null,r.a.createElement("div",{className:"tooltip inline-block","data-place":"top","data-tip":_.a.translate("tooltip.coll_ratio")},r.a.createElement(l.a,{content:"borrow.coll_ratio"}))),r.a.createElement("th",null,r.a.createElement(X.a,{noLink:!0,string:"account.total",keys:[{type:"asset",value:i,arg:"asset"}]})),r.a.createElement("th",{style:oe,className:"column-hide-small"},r.a.createElement("div",{className:"tooltip inline-block","data-place":"top","data-tip":_.a.translate("tooltip.call_price")},r.a.createElement(l.a,{content:"exchange.call"}))),r.a.createElement("th",{style:oe,className:"column-hide-small"},r.a.createElement(l.a,{content:"exchange.price"})),r.a.createElement("th",{className:"column-hide-small",style:se},r.a.createElement(l.a,{content:"explorer.assets.units"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"borrow.adjust_short"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"transfer.close"})))),r.a.createElement("tbody",null,t.sort(function(e,t){return e.split(".")[2]-t.split(".")[2]}).map(function(e){return r.a.createElement(le,{key:e,object:e,account:a})})),r.a.createElement(ue,{account:a,callOrders:s.a.List(t)}),r.a.createElement("tbody",null,o)))},de=a(166),he=a(237),me=a(104),fe=a(11),be=a(185),ge=a(50),ve=function(e){var t=this;this.id=e.toJS?e.get(0):e[0],this.weight=e.toJS?e.get(1):e[1],this.isAvailable=function(e){return e.includes?e.includes(t.id):-1!==e.indexOf(t)}},ye={AccountPermission:function(e,t,a){var n=this;this.id=e.get("id"),this.weight=t,this.threshold=e.getIn([a,"weight_threshold"]),this.accounts=[],this.keys=e.getIn([a,"key_auths"]).map(function(e){return new ve(e)}).toArray(),this.isAvailable=function(e){return e.includes?e.includes(n.id):-1!==e.indexOf(n)},this._sumWeights=function(e){if(n.isNested()||n.isMultiSig()){var t=n.accounts.reduce(function(t,a){return t+(a._sumWeights(e)?a.weight:0)},0);return Math.floor(t/n.threshold)}return n.isAvailable(e)?n.weight:0},this.getStatus=function(e,t){if(n.isNested()){var a=n.accounts.reduce(function(t,a){return t+a._sumWeights(e)},0);return n.keys.length&&(a+=n.sumKeys(t)),a}var r=n._sumWeights(e);return n.isMultiSig()&&(r+=n.sumKeys(t)),r},this.sumKeys=function(e){return n.keys.reduce(function(t,a){return t+(a.isAvailable(e)?a.weight:0)},0)},this.isNested=function(){return n.accounts.length>0},this.isMultiSig=function(){return n.keys.reduce(function(e,t){return e||t.weight<n.threshold},!1)},this.getMissingSigs=function(e){var t=[],a=[];return n.isNested()?a=n.accounts.reduce(function(t,a){return t.concat(a.getMissingSigs(e))},[]):n.isAvailable(e)||t.push(n.id),t.concat(a)},this.getMissingKeys=function(e){var t=[],a=[];return n.keys.length&&(n.isNested()||n.isMultiSig())&&n.keys.forEach(function(a){a.isAvailable(e)||t.push(a.id)}),n.isNested()&&(a=n.accounts.reduce(function(t,a){return t.concat(a.getMissingKeys(e))},[])),t.concat(a)}},listToIDs:function(e){var t=[];return e.forEach(function(e){e&&t.push(e.get?e.get("id"):e)}),t},unravel:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<3){var r=E.b.getAccount(e.id);r&&r.getIn([t,"account_auths"]).size&&r.getIn([t,"account_auths"]).forEach(function(r){var o=E.b.getAccount(r.get(0));o&&e.accounts.push(a.unravel(new a.AccountPermission(o,r.get(1),t),t,n+1))})}return e},unnest:function(e,t){var a=this,n=[];return e.forEach(function(e){var r=E.b.getAccount(e),o=a.unravel(new a.AccountPermission(r,null,t),t);n.push(o)}),n},flatten_auths:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.List();return e.size?(e.forEach(function(e){t.includes(e.get(0))||(t=t.push(e.get(0)))}),t):t}},_e=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),_e(t,[{key:"componentDidMount",value:function(){M.a.rebuild()}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.children,n=e.dataTip,o=e.content;return r.a.createElement("span",{className:"tooltip "+t,"data-html":!0,"data-tip":n||_.a.translate(o)},a)}}]),t}(),we=function(){return r.a.createElement(Ee,{className:"error appended",content:"explorer.proposals.authority_depth_warning"},"/!\\")},xe=function(){return r.a.createElement(Ee,{className:"error appended",content:"explorer.proposals.children_authority_depth_warning"},"/!\\")},Ae=function(){return r.a.createElement(Ee,{className:"warning",content:"explorer.proposals.pending_approval"},r.a.createElement(l.a,{content:"explorer.proposals.pending"}))},ke=function(){return r.a.createElement(Ee,{className:"warning",content:"explorer.proposals.pending_review"},r.a.createElement(l.a,{content:"explorer.proposals.review"}))},Oe=function(){return r.a.createElement(Ee,{className:"error",content:"explorer.proposals.failed_execute"},r.a.createElement(l.a,{content:"explorer.proposals.failed"}))},Ce=function(e){var t=e.onToggle,a=e.expanded;return r.a.createElement("a",{className:"expand-button",onClick:t},"[",a?"-":"+","]")},Se=function(e){return e.approved?r.a.createElement(J.a,{name:"checkmark-circle",size:"1x",className:"success",title:"icons.checkmark_circle.operation_succeed"}):r.a.createElement(J.a,{name:"cross-circle",size:"1x",className:"error",title:"icons.cross_circle.operation_failed"})},Ne=function(e){var t=e.available,a=e.permission,n=e.weight,o=e.level;return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement(Se,{approved:a.isAvailable(t)}),a.id.substr(0,20-4*o),"..."),r.a.createElement("td",null,n)))},je=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n>t||!(!a.isNested()&&!a.isMultiSig())&&a.accounts.some(function(a){return e(t,a,n+1)})},Pe=function(e,t,a){return e.accounts.reduce(function(e,n){return e+(Ie(n,t,a)?n.weight:0)},0)+e.keys.reduce(function(e,t){return e+(t.isAvailable(a)?t.weight:0)},0)},Ie=function(e,t,a){return e.isNested()||e.isMultiSig()?Pe(e,t,a)>=e.threshold:e.isAvailable(t)},Le=function(e,t,a){return e&&e.threshold>10?b.a.get_percentage(e.getStatus(t,a),e.threshold)+" / 100%":e.getStatus(t,a)+" / "+e.threshold},Te=function(e,t){return t&&t>10?b.a.get_percentage(e,t):e},Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},De=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Be(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ve=function(e){function t(e){Re(this,t);var a=qe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExpandToggle=function(){a.setState({expanded:!a.state.expanded})},a.state={expanded:!!e.expanded},a}return Be(t,r.a.Component),De(t,[{key:"render",value:function(){var e=this.props,t=e.account,a=e.available,n=e.availableKeys,o=e.permission,s=e.threshold,i=e.level,l=e.maxAuthorityDepth,c=e.hideRoot,u=this.state.expanded,p=Ie(o,a,n),d=o.isNested(),h=o.isMultiSig(),m=Te(o.weight,s)||1,f=Le(o,a,n),b=i>=l,g=d||h?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement(Se,{approved:p}),r.a.createElement(ge.a,{subpage:"permissions",account:t.get("id")})),r.a.createElement("td",null,u?r.a.createElement("span",{className:p?"success-text":""},m):m&&(m&&2===m.length?"Â Â ":"")+m+" ",r.a.createElement(Ce,{onToggle:this.handleExpandToggle,expanded:u}),u&&r.a.createElement("span",{className:"appended"},"(",f,")"),b?r.a.createElement(we,null):je(l,o,i)&&!u&&r.a.createElement(xe,null))):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement(Se,{approved:p}),r.a.createElement(ge.a,{subpage:"permissions",account:t.get("id")})),r.a.createElement("td",null,!d&&m?(m&&2===m.length?"Â Â ":"")+m+" ":null)),v=[];return(d||h)&&u&&(o.accounts.forEach(function(e){v.push(r.a.createElement(Fe,{key:e.id,account:e.id,accounts:e.accounts,permission:e,available:a,availableKeys:n,threshold:o.threshold,level:i+1,maxAuthorityDepth:l}))}),o.keys.length&&o.keys.forEach(function(e){return v.push(r.a.createElement(Ne,{key:e.id,permission:e,available:n,level:i+(c?0:1),weight:Te(e.weight,s)}))})),v.length>0?r.a.createElement("tbody",null,c||g,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"3",className:"heading-perm"},r.a.createElement("div",{className:c?"":"table-container"},r.a.createElement("table",null,v)),u&&0===i&&r.a.createElement("div",{className:"spacer"})))):r.a.createElement("tbody",null,g)}}]),t}();Ve.propTypes={account:m.a.ChainAccount.isRequired,accounts:m.a.ChainAccountsList,level:Q.a.number.isRequired},Ve.defaultProps={level:0};var Fe=Object(f.a)(Ve),We=function(e){function t(e){Re(this,t);var a=qe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExpandToggle=function(){return a.setState({expanded:!a.state.expanded})},a.state={requiredPermissions:[],expanded:e.expanded},a._updateState=a._updateState.bind(a),a}return Be(t,r.a.Component),De(t,[{key:"componentWillMount",value:function(){this._updateState(),E.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){E.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=ye.listToIDs(this.props.required),t=ye.listToIDs(this.props.available);this.setState({requiredPermissions:ye.unnest(e,this.props.type),required:e,available:t})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.type,t.added),n=t.removed,o=t.availableKeys,s=t.globalObject,i=t.reviewPeriodTime,l=t.noFail,c=this.state,u=c.requiredPermissions,p=(c.required,c.available),d=c.expanded;p=Object(be.a)(p),o=o.toJS(),a&&(p.push(a),o.push(a)),n&&(-1!==p.indexOf(n)&&p.splice(p.indexOf(n),1),-1!==o.indexOf(n)&&o.splice(o.indexOf(n),1));var h=u.reduce(function(e,t){return e+(Ie(t,p,o)?1:0)},0),m=u.length,f=h===m,b=f&&!i&&!l,g=f&&i,v=s.get("parameters").get("max_authority_depth"),y=1===u.length,_=y?u[0]:null,E=!y&&h+" / "+m,w=u.map(function(t){return r.a.createElement(Fe,{key:t.id,account:t.id,accounts:t.accounts,permission:t,available:p,availableKeys:o,expanded:e.props.expanded||y,level:0,maxAuthorityDepth:v,hideRoot:y})});return r.a.createElement("div",{className:"nested-approval-state"},r.a.createElement("div",{className:"root-status"},b?r.a.createElement(Oe,null):g?r.a.createElement(ke,null):r.a.createElement(Ae,null)," ",_?_.threshold>1&&Le(_,p,o):r.a.createElement("span",null,"(",E,")"),(!_||_.isMultiSig()||_.isNested())&&r.a.createElement(Ce,{onToggle:this.handleExpandToggle,expanded:d}),!d&&u.some(function(e){return je(v,e,0)})&&r.a.createElement(xe,null)),d&&r.a.createElement("table",null,w))}}]),t}();We.propTypes={required:m.a.ChainAccountsList,available:m.a.ChainAccountsList},We.defaultProps={type:"active",added:null,removed:null},We=Object(f.a)(We);var Ue=function(e){function t(){return Re(this,t),qe(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Be(t,r.a.Component),De(t,[{key:"render",value:function(){var e=this.props,t=e.proposal,a=e.type,n=t.get("available_"+a+"_approvals"),o=t.get("available_key_approvals"),s=t.get("required_"+a+"_approvals");return r.a.createElement(We,Me({},this.props,{required:s,available:n,availableKeys:o,reviewPeriodTime:t.get("review_period_time")}))}}]),t}();Ue.propTypes={proposal:m.a.ChainObject.isRequired,type:Q.a.string.isRequired,globalObject:m.a.ChainObject.isRequired},Ue.defaultProps={type:"active",added:null,globalObject:"2.0.0"};var ze=Object(f.a)(Ue),He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ke=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(n=(s=i.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ge=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Xe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ze=function(e,t,a){var n=[];e.forEach(function(e){n=n.concat(e.getMissingSigs(t))});var r=[];return e.forEach(function(e){r=r.concat(e.getMissingKeys(a))}),[n,r]},Qe=function(e){function t(e){Je(this,t);var a=Ye(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={active:null,key:null,owner:null,payee:null},a}return Xe(t,r.a.Component),Ge(t,[{key:"onActiveAccount",value:function(e,t,a,n){var r={};t[n]?(r.key=n,r[a]=null):n?(r[a]=e[n],r.key=null):(r[a]=null,r.key=null),this.setState(r)}},{key:"_onProposalAction",value:function(e){var t=this,a=e.toJS(),n=this.state,r=n.active,o=(n.key,n.owner,{fee_paying_account:n.payee||r,proposal:a.id,active_approvals_to_add:[],active_approvals_to_remove:[],owner_approvals_to_add:[],owner_approvals_to_remove:[],key_approvals_to_add:[],key_approvals_to_remove:[]}),s="approve"===this.props.action,i=[];["active","owner","key"].forEach(function(e){var n=t.state[e];if(n){var r=-1!==a["available_"+e+"_approvals"].indexOf(n);(s&&!r||!s&&r)&&("approve"===t.props.action?(o[e+"_approvals_to_add"]=[n],"key"===e&&i.push(n)):"reject"===t.props.action&&(o[e+"_approvals_to_remove"]=[n],"key"===e&&i.push(n)))}});var l=g.a.new_transaction();l.add_type_operation("proposal_update",o),v.a.process_transaction(l,null,!0,i),d.a.publish(this.props.modalId,"close")}},{key:"onChangePayee",value:function(e){var t=E.b.getAccount(e);t&&this.setState({payee:t.get("id")})}},{key:"onCancel",value:function(){d.a.publish(this.props.modalId,"close")}},{key:"render",value:function(){var e=this.props,t=e.proposal,a=e.type,n=[],o={},s="approve"===this.props.action;this.props.accounts.length&&this.props.accounts.forEach(function(e){(s?e&&!t.get("available_"+a+"_approvals").includes(e.get("id")):e&&t.get("available_"+a+"_approvals").includes(e.get("id")))&&(o[e.get("name")]=e.get("id"),n.push(e.get("name")))});var i=[],c={};this.props.keys.length&&this.props.keys.forEach(function(e){var a=fe.a.isMyKey(e),n=t.get("available_key_approvals").includes(e);(a&&s&&!n||a&&!s&&n)&&(c[e]=!0,i.push(e))});var u=fe.a.getMyAccounts();return r.a.createElement("form",{className:"grid-block vertical full-width-content"},r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"content-block"},r.a.createElement("h4",null,s?"Add approval":"Remove approval")),r.a.createElement("div",{className:"content-block",style:{paddingRight:"20%"}},r.a.createElement(ze,{expanded:!0,proposal:t.get("id"),type:a,added:s?this.state.key?this.state.key:this.state[a]||null:null,removed:s?null:this.state.key?this.state.key:this.state[a]||null,noFail:!0})),r.a.createElement("div",{className:"content-block full-width-content"},r.a.createElement("div",{className:"full-width-content form-group"},r.a.createElement(l.a,{content:"modal.proposals.pay_with",component:"label"}),r.a.createElement(me.a,{account_names:u,onChange:this.onChangePayee.bind(this)})),n.length||i.length?r.a.createElement("div",{className:"full-width-content form-group"},r.a.createElement(l.a,{content:"modal.proposals.approval_"+(s?"add":"remove"),component:"label"}),r.a.createElement(me.a,{account_names:n.concat(i),onChange:this.onActiveAccount.bind(this,o,c,a)})):null,null),r.a.createElement("div",{className:"content-block"},r.a.createElement("input",{type:"submit",className:"button btn large outline",onClick:this._onProposalAction.bind(this,t),value:s?"Approve":"Remove"}),r.a.createElement("div",{onClick:this.onCancel.bind(this),className:" button btn large outline"},r.a.createElement(l.a,{content:"account.perm.cancel"})))))}}]),t}();Qe.propTypes={accounts:m.a.ChainAccountsList},Qe=Object(f.a)(Qe);var $e=function(e){function t(){Je(this,t);var e=Ye(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._updateState=e._updateState.bind(e),e}return Xe(t,r.a.Component),Ge(t,[{key:"componentWillMount",value:function(){this._updateState(),E.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){E.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=this.props,t=e.proposal,a=(e.account,t.get("required_active_approvals").size?"active":"owner"),n=ye.listToIDs(t.get("required_"+a+"_approvals")),r=ye.listToIDs(t.get("available_"+a+"_approvals")),o=ye.listToIDs(t.get("available_key_approvals"));this.setState({requiredPermissions:ye.unnest(n,a),available:r,availableKeys:o,type:a})}},{key:"render",value:function(){var e=this.props.action,t=this.state,a=t.requiredPermissions,n=t.available,o=t.availableKeys,s=t.type,i=Ze(a,n,o),l=Ke(i,2),c=l[0],u=l[1];return r.a.createElement(Qe,He({},this.props,{type:s,accounts:"approve"===e?c:n,keys:"approve"===e?u:o}))}}]),t}();$e.propTypes={account:m.a.ChainAccount.isRequired,proposal:m.a.ChainObject.isRequired},$e=Object(f.a)($e);var et=function(e){function t(){Je(this,t);var e=Ye(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return Xe(t,r.a.Component),Ge(t,[{key:"componentDidMount",value:function(){var e=this;d.a.subscribe(this.props.modalId,function(t,a){e.setState({open:"open"===a})})}},{key:"show",value:function(){d.a.publish(this.props.modalId,"open")}},{key:"render",value:function(){var e=this.props,t=e.modalId;e.proposal;return r.a.createElement(h.a,{id:t,overlay:!0,ref:t},this.state.open?r.a.createElement("div",{className:"grid-block vertical"},r.a.createElement($e,this.props)):null)}}]),t}(),tt=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(n=(s=i.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),at=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var nt=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.forceUpdate=e.forceUpdate.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),at(t,[{key:"componentDidMount",value:function(){E.b.subscribe(this.forceUpdate)}},{key:"componentWillUnmount",value:function(){E.b.unsubscribe(this.forceUpdate)}},{key:"_onApproveModal",value:function(e,t){this.refs[e+"_"+t]&&this.refs[e+"_"+t].show()}},{key:"_canReject",value:function(e){return e.available_active_approvals.length||e.available_owner_approvals.length||e.available_key_approvals.length}},{key:"render",value:function(){var e=this,t=this.props.account;if(!t)return null;var a=[];t.get("proposals").size&&t.get("proposals").forEach(function(e){var n=E.b.getObject(e);if(n){var r=n.get("proposed_transaction").get("operations");a.push({operations:r,account:t,proposal:n})}});var n=a.sort(function(e,t){return b.a.sortID(e.proposal.get("id"),t.proposal.get("id"),!0)}).reduce(function(t,a,n){var o=!1,s=a.proposal.get("id"),i=a.proposal.get("expiration_time"),c=a.operations.map(function(e,t){return"1.2.153124"===e.getIn([1,"to"])&&(o=!0),r.a.createElement(he.b,{key:a.proposal.get("id")+"_operation_"+t,expiration:i,index:t,op:e.toJS(),inverted:!1,hideFee:!0,hideOpLabel:!0,hideExpiration:!0,hideDate:!0,proposal:!0,id:s})}).toArray(),u=e._canReject(a.proposal.toJS()),p=a.proposal.get("id"),d=a.proposal.get("required_active_approvals").size?"active":"owner";t.push(r.a.createElement("tr",{key:p+"_id"},r.a.createElement("td",{colSpan:"4",className:"proposal"+(0===n?" first":"")},r.a.createElement(he.a,{id:s,expiration:i}))));var h=ye.listToIDs(a.proposal.get("available_"+d+"_approvals")),m=ye.listToIDs(a.proposal.get("available_key_approvals")),f=ye.listToIDs(a.proposal.get("required_"+d+"_approvals")),b=ye.unnest(f,d),g=Ze(b,h,m),v=tt(g,2),y=v[0],E=v[1],w=[];y.length&&y.forEach(function(e){e&&!a.proposal.get("available_"+d+"_approvals").includes(e)&&w.push(e)});var x=[];E.length&&E.forEach(function(e){fe.a.isMyKey(e)&&!a.proposal.get("available_key_approvals").includes(e)&&x.push(e)});var A=w.length+x.length>0;return t.push(r.a.createElement("tr",{className:"top-left-align",key:p+"_content"},r.a.createElement("td",null,c),r.a.createElement("td",null,b.map(function(e,t){return r.a.createElement("div",{className:"list-item",key:p+"_approver_"+t},r.a.createElement(ge.a,{subpage:"permissions",account:e.id}))})),r.a.createElement("td",null,r.a.createElement(ze,{proposal:a.proposal.get("id"),type:d})),r.a.createElement("td",{className:"approval-buttons"},o?r.a.createElement("div",{"data-tip":_.a.translate("tooltip.propose_scam"),className:"tooltip has-error scam-error"},"SCAM"):r.a.createElement("button",{onClick:A?e._onApproveModal.bind(e,p,"approve"):function(){},className:"button primary hollow"+(A?"":" hidden")},r.a.createElement("span",null,r.a.createElement(l.a,{content:"proposal.approve"}))),r.a.createElement(et,{ref:p+"_approve",modalId:p+"_approve",account:a.account.get("id"),proposal:p,action:"approve"}),u?r.a.createElement("button",{onClick:e._onApproveModal.bind(e,p,"reject"),className:"button primary hollow"},r.a.createElement(l.a,{content:"proposal.reject"})):null,r.a.createElement(et,{ref:p+"_reject",modalId:p+"_reject",account:a.account.get("id"),proposal:p,action:"reject"})))),t.push(r.a.createElement("tr",{key:p+"_separator"},r.a.createElement("td",{colSpan:"4"},r.a.createElement("hr",null)))),t},[]);return r.a.createElement("table",{className:"table proposals compact "+this.props.className},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(l.a,{content:"proposal.proposals"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"proposal.approvers"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"proposal.status"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"proposal.action"})))),r.a.createElement("tbody",null,n))}}]),t}();nt.propTypes={account:m.a.ChainAccount.isRequired};var rt=Object(f.a)(nt),ot=a(10),st=a(43),it=a(46),lt=a.n(it),ct=a(9),ut=a(255),pt=a(35),dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ht=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var gt=function(e){function t(){return mt(this,t),ft(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return bt(t,ut["a"]),ht(t,[{key:"shouldComponentUpdate",value:function(e,a){return function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.base_amount!==this.props.base_amount||e.quote_amount!==this.props.quote_amount||e.decimals!==this.props.decimals||!b.a.are_equal_shallow(e.pulsate,this.props.pulsate)||!b.a.are_equal_shallow(a,this.state)}},{key:"getFinalPrice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,a=t.coreAsset,n=t.fromAsset,r=t.toAsset,o=t.marketStats;return pt.a.getFinalPrice(a,n,r,o,e)}},{key:"render",value:function(){var e=this.props,t=e.toAsset,a=e.forceDirection,n=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["toAsset","forceDirection"]),o=this.getFinalPrice();return 1===o?r.a.createElement("span",null,"1.00"):o?r.a.createElement(K.a,dt({force_direction:!!a&&t.get("symbol"),base_amount:o.base.amount,base_asset:o.base.asset_id,quote_amount:o.quote.amount,quote_asset:o.quote.asset_id},n)):r.a.createElement("span",null,"--")}}]),t}();gt.defaultProps={forceDirection:!0},gt=Object(P.a)(gt,{propNames:["toAsset","fromAsset","coreAsset"],defaultProps:{toAsset:"1.3.0",coreAsset:"1.3.0"}});var vt=function(e){function t(){return mt(this,t),ft(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return bt(t,r.a.Component),ht(t,[{key:"render",value:function(){var e=this;return r.a.createElement(lt.a,{stores:[ct.a,L.a],inject:{toAsset:function(){return e.props.toAsset||ct.a.getState().settings.get("unit","1.3.0")},marketStats:function(){return L.a.getState().allMarketStats}}},r.a.createElement(gt,dt({},this.props,{ref:this.props.refCallback})))}}]),t}(),yt=a(97),_t=(a(412),a(73),a(66)),Et=a(308),wt=a(31),xt=a(21),At=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function kt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ot=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectedOrders:[],filterValue:""},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),At(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("cancelAllOrders");e&&e.addEventListener("click",function(){var e=this._getFilteredOrders.call(this);e=e.toJS?e.toJS():e,this.setState({selectedOrders:e}),document.querySelectorAll(".orderCancel").forEach(function(e){e.checked||(e.checked=!0)})}.bind(this))}},{key:"_getFilteredOrders",value:function(){var e=this.state.filterValue;return(this.props.account.get("orders")||[]).filter(function(t){var a=E.b.getObject(t).toJS(),n=E.b.getAsset(a.sell_price.base.asset_id),r=E.b.getAsset(a.sell_price.quote.asset_id),o=n.get("symbol").toLowerCase(),s=r.get("symbol").toLowerCase();return o.indexOf(e)>-1||s.indexOf(e)>-1})}},{key:"_cancelLimitOrder",value:function(e,t){t.preventDefault(),wt.a.cancelLimitOrder(this.props.account.get("id"),e,!1).catch(function(e){console.log("cancel order error:",e)})}},{key:"_cancelLimitOrders",value:function(e){var t=this;wt.a.cancelLimitOrders(this.props.account.get("id"),this.state.selectedOrders).then(function(){t.resetSelected()}).catch(function(e){console.log("cancel orders error:",e)})}},{key:"onFlip",value:function(e){var t={};t[e]=!this.props.marketDirections.get(e),ot.a.changeMarketDirection(t)}},{key:"onCheckCancel",value:function(e,t){var a=this.state.selectedOrders;if(t.target.checked)this.setState({selectedOrders:a.concat([e])});else{var n=a.indexOf(e);n>-1&&this.setState({selectedOrders:a.slice(0,n).concat(a.slice(n+1))})}}},{key:"setFilterValue",value:function(e){this.setState({filterValue:e.target.value.toLowerCase()})}},{key:"resetSelected",value:function(){this.setState({selectedOrders:[]}),document.querySelectorAll(".orderCancel").forEach(function(e){e.checked&&(e.checked=!1)})}},{key:"cancelSelected",value:function(){this._cancelLimitOrders.call(this)}},{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.marketDirections,o=this.state,s=o.filterValue,i=o.selectedOrders,c=_.a.translate("account.perm.cancel"),u={},p={};if(!a.get("orders"))return null;var d=a.get("orders"),h=d.size;s&&(d=this._getFilteredOrders.call(this)),d.forEach(function(t){var a=E.b.getObject(t).toJS(),o=E.b.getAsset(a.sell_price.base.asset_id),s=E.b.getAsset(a.sell_price.quote.asset_id);if(o&&s){var i,l=(kt(i={},o.get("id"),{precision:o.get("precision")}),kt(i,s.get("id"),{precision:s.get("precision")}),i),d=pt.a.getMarketName(o,s).marketName,h=n.get(d);u[d]||(u[d]=h?{base:{id:o.get("id"),symbol:o.get("symbol"),precision:o.get("precision")},quote:{id:s.get("id"),symbol:s.get("symbol"),precision:s.get("precision")}}:{base:{id:s.get("id"),symbol:s.get("symbol"),precision:s.get("precision")},quote:{id:o.get("id"),symbol:o.get("symbol"),precision:o.get("precision")}});var m=new xt.d(a,l,u[d].quote.id),f=E.b.getAsset(u[d].base.id),b=E.b.getAsset(u[d].quote.id);p[d]||(p[d]=[]),p[d].push(r.a.createElement(Et.b,{ref:u[d].base.symbol,key:a.id,order:m,base:f,quote:b,cancel_text:c,showSymbols:!1,invert:!0,onCancel:e._cancelLimitOrder.bind(e,a.id),price:m.getPrice(),dashboard:!0,isMyAccount:e.props.isMyAccount,settings:e.props.settings,onFlip:e.onFlip.bind(e,d),onCheckCancel:e.onCheckCancel.bind(e,a.id)}))}});var m=[];for(var f in p)p[f].length&&(m.push(r.a.createElement("tbody",{key:f},p[f].sort(function(e,t){return e.props.price-t.props.price}))),0);return r.a.createElement("div",null,r.a.createElement("div",{className:"dashboard__actions"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-9"},d&&h?r.a.createElement("input",{type:"text",placeholder:_.a.translate("account.filter_orders"),style:{display:"inline-block",maxWidth:"50%",marginRight:"1em",marginBottom:"0"},onChange:this.setFilterValue.bind(this)}):null,i.length?r.a.createElement("button",{className:"btn large inverted"},r.a.createElement(l.a,{content:"account.reset_orders",onClick:this.resetSelected.bind(this)})):null,i.length?r.a.createElement("button",{className:"btn large outline"},r.a.createElement(l.a,{content:"account.submit_orders",onClick:this.cancelSelected.bind(this)})):null)))),r.a.createElement("div",{className:"dashboard__adaptive"},r.a.createElement("table",{className:"dashboard__table blue-bg with-borders"},r.a.createElement(Et.c,{settings:this.props.settings,dashboard:!0,isMyAccount:this.props.isMyAccount}),m,this.props.children)))}}]),t}(),Ct=Ot=Object(I.connect)(Ot,{listenTo:function(){return[ct.a]},getProps:function(){return{marketDirections:ct.a.getState().marketDirections}}}),St=(a(12),{}),Nt=6e4;var jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Pt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var It=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),Pt(t,[{key:"render",value:function(){var e=this.props,t=e.wrap,a=e.orders,n=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["wrap","orders"]),o=this.props.balances.filter(function(e){return!!e&&0!==e.get("balance")}).map(function(e){return e.get("asset_type")}),i=a.filter(function(e){return!!e}).reduce(function(e,t){var a=t.getIn(["sell_price","base","asset_id"]);return e[a]||(e[a]=0),e[a]+=parseInt(t.get("for_sale"),10),e},{});for(var l in i)-1===o.indexOf(l)&&o.push(l);var c=t;return r.a.createElement(c,jt({},n,{orders:i,balanceAssets:s.a.List(o)}))}}]),t}();It.propTypes={balances:m.a.ChainObjectsList,orders:m.a.ChainObjectsList},It.defaultProps={balances:s.a.List(),orders:s.a.List()};var Lt=Object(f.a)(It),Tt=a(202),Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Dt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Rt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var qt=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return a=n=Rt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.tick=function(){var e=n.props,t=e.onIcon,a=e.offIcon,r=(n.state||{}).name,o=void 0===r?t:r;n.setState({name:o===t?a:t})},Rt(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),Dt(t,[{key:"componentDidMount",value:function(){var e=this.props.duration;this.interval=setInterval(this.tick,e)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.onIcon,a=e.rest,n=(this.state||{}).name,o=void 0===n?t:n,s=this.props.title;return r.a.createElement(J.a,Mt({name:o,title:s},a))}}]),t}();qt.propTypes={duration:Q.a.number.isRequired,offIcon:Q.a.string.isRequired,onIcon:Q.a.string.isRequired,title:Q.a.string.isRequired};var Bt=qt,Vt=a(124),Ft=a.n(Vt),Wt=a(502),Ut=a.n(Wt),zt=a(503),Ht=a.n(zt),Kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Gt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Xt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Ut()(Ft.a.Highcharts),Ht()(Ft.a.Highcharts);var Zt=function(e){function t(){return Jt(this,t),Yt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Xt(t,r.a.Component),Gt(t,[{key:"render",value:function(){var e=this.props,t=e.balanceObjects,a=e.core_asset,n=e.marketStats,o=e.preferredAsset,s=null;if(t&&t.length>0){var i=0;s=t.forEach(function(e){if(e){var t="string"==typeof e?E.b.getObject(e):e,r=t.get("asset_type"),s=E.b.getAsset(r);if(s&&o){var l=Number(t.get("balance")),c=pt.a.convertValue(l,o,s,n,a);if(c){var u=b.a.get_asset_precision(o.get("precision"));i+=c/u}}}}),s=t.map(function(e,t){if(!e)return null;var r="string"==typeof e?E.b.getObject(e):e,s=r.get("asset_type"),l=E.b.getAsset(s);if(!l)return null;var c=Number(r.get("balance")),u=pt.a.convertValue(c,o,l,n,a);if(!u)return null;var p=u/b.a.get_asset_precision(o.get("precision")),d=p/i*100;return d<.5?null:p>=1?{name:l.get("symbol")+" ("+(0===i?0:d.toFixed(2))+"%)",value:p,color:Ft.a.Highcharts.getOptions().colors[t]}:null}).filter(function(e){return!!e})}s&&1===s.length&&0===s[0].value&&(s=null);var l={chart:{backgroundColor:"rgba(255, 0, 0, 0)",height:250,spacingLeft:0,spacingRight:0,spacingBottom:0},credits:{enabled:!1},legend:{enabled:!1},plotOptions:{treemap:{animation:!1,tooltip:{pointFormatter:function(){return"<b>"+this.name+"</b>: "+Ft.a.Highcharts.numberFormat(this.value,0)+" "+o.get("symbol")}}}},series:[{type:"treemap",levels:[{level:1,layoutAlgorithm:"sliceAndDice",dataLabels:{enabled:!0,align:"center",verticalAlign:"middle"}}],data:s}],title:{text:null}};return r.a.createElement("div",{className:"account-treemap"},r.a.createElement(Ft.a,{config:l}))}}]),t}();Zt.propTypes={assets:m.a.ChainAssetsList,preferredAsset:m.a.ChainAsset.isRequired},Zt.defaultProps={assets:[],preferredAsset:"1.3.0"},Zt=Object(f.a)(Zt);var Qt=function(e){function t(){return Jt(this,t),Yt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Xt(t,r.a.Component),Gt(t,[{key:"render",value:function(){var e=this.props.balanceObjects.filter(function(e){return!!e}).map(function(e){return e.get("asset_type")});return r.a.createElement(Zt,Kt({preferredAsset:this.props.settings.get("unit","1.3.0"),assets:e},this.props))}}]),t}();Qt.propTypes={balanceObjects:m.a.ChainObjectsList,core_asset:m.a.ChainAsset.isRequired},Qt.defaultProps={balanceObjects:[],core_asset:"1.3.0"},Qt=Object(f.a)(Qt);var $t=function(e){function t(){return Jt(this,t),Yt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Xt(t,r.a.Component),Gt(t,[{key:"render",value:function(){return r.a.createElement(lt.a,{stores:[ct.a,L.a],inject:{marketStats:function(){return L.a.getState().allMarketStats},settings:function(){return ct.a.getState().settings}}},r.a.createElement(Qt,Kt({},this.props,{ref:this.props.refCallback})))}}]),t}(),ea=a(168),ta=a(329),aa=a(265),na=a(70),ra=a(115),oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ia=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function la(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ca(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function ua(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pa(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function da(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ha=function(e){function t(e){ua(this,t);var a=pa(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));for(var n in a.onCloseModal=function(){a.setState({currentAsset:null,currency:{asset:null,currency:null},depositAddress:null})},a.updateModal=function(){a.setState({isBridgeModalVisible:!1})},a.sortFunctions={qty:function(e,t,a){return Number(this.qtyRefs[e.key])<Number(this.qtyRefs[t.key])?this.state.sortDirection||a?-1:1:Number(this.qtyRefs[e.key])>Number(this.qtyRefs[t.key])?this.state.sortDirection||a?1:-1:void 0},alphabetic:function(e,t,a){return e.key>t.key?this.state.sortDirection||a?1:-1:e.key<t.key?this.state.sortDirection||a?-1:1:0},priceValue:function(e,t){var a=this.priceRefs[e.key],n=this.priceRefs[t.key];if(a&&n){var r=a.getFinalPrice(!0),o=n.getFinalPrice(!0);return null===r&&null!==o?1:null!==r&&null===o?-1:null===r&&null===o?this.sortFunctions.alphabetic(e,t,!0):this.state.sortDirection?r-o:o-r}},totalValue:function(e,t){var a=this.valueRefs[e.key],n=this.valueRefs[t.key];if(a&&n){var r=a.getValue(),o=n.getValue();return!r&&o?1:r&&!o?-1:r||o?this.state.sortDirection?r-o:o-r:this.sortFunctions.alphabetic(e,t,!0)}},changeValue:function(e,t){var a=this.changeRefs[e.key],n=this.changeRefs[t.key];if(a&&n){var r=a.getValue(),o=n.getValue(),s="NaN"!=parseFloat(r)?parseFloat(r):r,i="NaN"!=parseFloat(o)?parseFloat(o):o;return void 0===this.state.sortDirection||this.state.sortDirection?s-i:i-s}}},a._renderBuy=function(e,t,n){return t?r.a.createElement("span",null,r.a.createElement("a",{onClick:a.onShowModal.bind(a,e,"buy_tab")},r.a.createElement(Bt,{onIcon:"dollar",offIcon:"dollar",title:"icons.dollar.buy",duration:1e3,className:"icon-14px"}))):n},a.state={sortKey:e.viewSettings.get("portfolioSort","totalValue"),sortDirection:e.viewSettings.get("portfolioSortDirection",!0),settleAsset:"1.3.0",shownAssets:e.viewSettings.get("shownAssets","active"),depositAsset:null,withdrawAsset:null,bridgeAsset:null,waitLoadMore:!0,tokens:[],alwaysShowAssets:["LLC","BTC","ETH","XMR","DASH","LTC","USDT","EUR","USD","GBP","CNY","RUB","UAH"],hide0balances:!1,isBridgeModalVisible:!1,currentAsset:null,type:"deposit",currency:{asset:null,currency:null},currencies:null,depositAddress:null,buyLLCAddress:null,activeTab:"deposit_tab",isAssetsLoad:!0,isDashboard:!0},a.qtyRefs={},a.priceRefs={},a.valueRefs={},a.changeRefs={},a.sortFunctions)a.sortFunctions[n]=a.sortFunctions[n].bind(a);return a._handleFilterInput=a._handleFilterInput.bind(a),a.onShowModal=a.onShowModal.bind(a),a}return da(t,r.a.Component),ia(t,[{key:"ajax",value:function(e,t,a){void 0===a&&(a=null);var n="https://llcgateway.localcoin.is/?methodnameaction="+t;a&&(n+="&"+this.encodeQueryData(a)),fetch(n).then(function(e){return e.json()}).then(e)}},{key:"onShowModal",value:function(e,a){var n=this;this.setState({isBridgeModalVisible:!1,isDashboard:!0},function(){n.setState({isBridgeModalVisible:!0,currentAsset:e||null,activeTab:a,isDashboard:"LLC"!==e})}),this.getAllowCurrencies(e);var r=this.props.account,o="object"===(void 0===r?"undefined":sa(r))?r.get("name"):"string"==typeof r?r:"";(new na.a).ÑreatePaymentAddress(o,e,t.MODE_BUY_LLC,function(e){n.setState({buyLLCAddress:e})}),(new na.a).ÑreatePaymentAddress(o,e,t.MODE_BUY_OTHER_COIN,function(e){n.setState({depositAddress:e})})}},{key:"getAllowCurrencies",value:function(e){var t=this,a=new na.a,n=this;a.getAllowCurrency(function(a){a[t.state.type].forEach(function(t){t.asset==e&&n.setState({currency:t})})})}},{key:"_reserveButtonClick",value:function(e,t){t.preventDefault(),this.setState({reserve:e}),d.a.publish("reserve_asset","open")}},{key:"_reserveAsset",value:function(e,t){t.preventDefault(),d.a.publish("reserve_asset","close");var a=this.state.issue,n=this.props.assets.get(a.asset_id);a.amount*=b.a.get_asset_precision(n.precision),AssetActions.issueAsset(e,a)}},{key:"_handleFilterInput",value:function(e){e.preventDefault(),this.setState({filterValue:e.target.value})}},{key:"componentWillMount",value:function(){var e=this;if(this._checkMarginStatus(),"#activity"===this.props.location.hash&&this.props.router.push("/account/"+this.props.account_name),void 0!==window.allAllowAssets){var t=[].concat(ca(this.state.alwaysShowAssets)),a=!0,n=!1,r=void 0;try{for(var o,s=window.allAllowAssets[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var i=o.value;-1===t.indexOf(i)&&t.push(i)}}catch(e){n=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw r}}this.setState({alwaysShowAssets:t,waitLoadMore:!1,tokens:window.allAssets})}else this.ajax(function(t){window.allAllowAssets=[],window.allAssets=[];var a=!0,n=!1,r=void 0;try{for(var o,s=t.deposit[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var i=o.value;window.allAssets.push(i.asset),i.allowBridge&&window.allAllowAssets.push(i.asset)}}catch(e){n=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw r}}var l=[].concat(ca(e.state.alwaysShowAssets)),c=!0,u=!1,p=void 0;try{for(var d,h=window.allAllowAssets[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var m=d.value;-1===l.indexOf(m)&&l.push(m)}}catch(e){u=!0,p=e}finally{try{!c&&h.return&&h.return()}finally{if(u)throw p}}window.maxFinanceCnt=l.length;var f=!0,b=!1,g=void 0;try{for(var v,y=window.allAssets[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var _=v.value;-1===l.indexOf(_)&&l.push(_)}}catch(e){b=!0,g=e}finally{try{!f&&y.return&&y.return()}finally{if(b)throw g}}e.setState({alwaysShowAssets:l,waitLoadMore:!1,tokens:window.allAssets})},"GetAllowCurrency")}},{key:"_checkMarginStatus",value:function(){var e=this;(function(e){if(!e||e&&!e.get("call_orders",[]).size)return Promise.resolve(null);var t=e.get("name")+JSON.stringify(e.get("call_orders"));return St[t]?St[t].result?Promise.resolve(St[t].result):new Promise(function(e,a){St[t].queue.push({res:e,rej:a})}):new Promise(function(a,n){St[t]={queue:[{res:a,rej:n}],result:null},Object(E.f)("getObject",e.get("call_orders").toArray()).then(function(e){var a=[];e.forEach(function(e){var t=e.getIn(["call_price","base","asset_id"]),n=e.getIn(["call_price","quote","asset_id"]);-1===a.indexOf(t)&&a.push(t),-1===a.indexOf(n)&&a.push(n)}),Object(E.f)("getAsset",a,6e3).then(function(a){var n={};a.forEach(function(e){n[e.get("id")]=e.toJS()});var r={};e.forEach(function(e){var t=n[e.getIn(["call_price","quote","asset_id"])],a=n[e.getIn(["call_price","base","asset_id"])],o=t.bitasset.current_feed.settlement_price;if(o.base.asset_id===o.quote.asset_id)r[t.id]={ratio:null};else{var s=new xt.a({amount:e.get("collateral"),asset_id:a.id,precision:a.precision}),i=new xt.a({amount:e.get("debt"),asset_id:t.id,precision:t.precision}),l=t.bitasset.current_feed.maintenance_collateral_ratio/1e3,c=new xt.c({priceObject:t.bitasset.current_feed.settlement_price,market_base:t.bitasset.current_feed.settlement_price.quote.asset_id,sqr:t.bitasset.current_feed.maximum_short_squeeze_ratio,assets:n}),u={ratio:s.getAmount({real:!0})/(i.getAmount({real:!0})/c.toReal())};if(isNaN(u.ratio))return null;u.ratio<l?u.statusClass="danger":u.ratio<l+.5?u.statusClass="warning":u.statusClass=null,r[t.id]=u}}),St[t].queue.forEach(function(e){e.res(r)}),St[t]={result:r},setTimeout(function(){delete St[t]},Nt)})}).catch(function(){St[t].queue.forEach(function(e){e.rej()})})})})((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).account).then(function(t){var a=null;for(var n in t)a=t[n].statusClass||a;e.setState({globalMarginStatus:a})})}},{key:"componentWillReceiveProps",value:function(e){e.account!==this.props.account&&(this._checkMarginStatus(e),this.priceRefs={},this.valueRefs={},this.changeRefs={},setTimeout(this.forceUpdate.bind(this),500))}},{key:"shouldComponentUpdate",value:function(e,t){return!b.a.are_equal_shallow(e.backedCoins,this.props.backedCoins)||!b.a.are_equal_shallow(e.balances,this.props.balances)||e.account!==this.props.account||e.settings!==this.props.settings||e.hiddenAssets!==this.props.hiddenAssets||!b.a.are_equal_shallow(t,this.state)||this.state.filterValue!==t.filterValue}},{key:"componentDidUpdate",value:function(e,t){if(!this.state.isAssetsLoad){var a=this;setTimeout(function(){a.forceUpdate()},1e3)}}},{key:"_onSettleAsset",value:function(e,t){t.preventDefault(),this.setState({settleAsset:e}),this.refs.settlement_modal.show(),console.log("===================================="),console.log(this.refs.settlement_modal),console.log("====================================")}},{key:"_hideAsset",value:function(e,t){ot.a.hideAsset(e,t)}},{key:"_showDepositModal",value:function(e,t){var a=this;t.preventDefault(),this.setState({depositAsset:e},function(){a.refs.deposit_modal_new.show()})}},{key:"_showDepositWithdraw",value:function(e,t,a,n){var r,o=this;n.preventDefault(),this.setState((la(r={},"bridge_modal"===e?"bridgeAsset":"deposit_modal"===e?"depositAsset":"withdrawAsset",t),la(r,"fiatModal",a),r),function(){o.refs[e].show()})}},{key:"_getSeparator",value:function(e){return e?r.a.createElement("span",null,"Â |Â "):null}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.props.router.push(e)}},{key:"triggerSend",value:function(e){var t=this;this.setState({send_asset:e},function(){t.send_modal&&t.send_modal.show()})}},{key:"_renderBalances",value:function(e,t,a){var n=this,o=this.props.core_asset,s=this.props,i=s.settings,l=s.hiddenAssets,u=s.orders,p=i.get("unit")||o.get("symbol"),d=i.get("showAssetPercent",!1),h=function(e,t){var a=e&&e.has("bitasset_data_id"),o="cp_modal_"+e.get("id");return{isBitAsset:a,borrowModal:a?r.a.createElement(G.a,{ref:o,modalId:"borrow_modal_"+e.get("id"),quote_asset:e.get("id"),backing_asset:e.getIn(["bitasset","options","short_backing_asset"]),account:t}):null,borrowLink:a?r.a.createElement("a",{onClick:function(){M.a.hide(),n.refs[o].show()}},r.a.createElement(J.a,{name:"dollar",title:"icons.dollar.borrow",className:"icon-14px"})):null}},m=[],f=Object(ra.a)();if(e.forEach(function(e){var t=E.b.getObject(e);if(t){var a=t.get("asset_type"),s=E.b.getObject(a);if(s){var i,g,v,y="",w=(s.get("symbol"),"1.3.0"!==s.get("id")),x=p!==o.get("symbol"),A=st.a.parseDescription(s.getIn(["options","description"])).market;-1===(y=s.get("symbol")).indexOf("OPEN.")||A||(A="USD");var k=A||p;w&&k===y&&(k=o.get("symbol")),i=w?r.a.createElement(Y.b,{to:"/market/"+k+"_"+s.get("symbol")},r.a.createElement(J.a,{name:"trade",title:"icons.trade.trade",className:"icon-14px"})):x?r.a.createElement(Y.b,{to:"/market/"+p+"_"+s.get("symbol")},r.a.createElement(J.a,{name:"trade",title:"icons.trade.trade",className:"icon-14px"})):"-",v=r.a.createElement("a",{onClick:n.triggerSend.bind(n,s.get("id"))},r.a.createElement(J.a,{name:"transfer",title:"icons.transfer",className:"icon-14px"}));var O=h(s,n.props.account),C=O.isBitAsset,S=O.borrowModal,j=O.borrowLink;g=r.a.createElement("a",{onClick:n._onSettleAsset.bind(n,s.get("id"))},r.a.createElement(J.a,{name:"settle",title:"icons.settle",className:"icon-14px"}));var P=!l.includes(a),I=!!t.get("balance"),L=!!u[a],T=Object(ea.a)(s.get("symbol"),n.props.backedCoins),M=f.includes(s.get("symbol")),D=void 0!==window.allAssets&&-1!==window.allAssets.indexOf(s.get("symbol"))||T&&T.depositAllowed||M,R=void 0!==window.allAssets&&window.allAssets.indexOf(-1!==s.get("symbol"))||T&&T.withdrawalAllowed&&I&&0!=t.get("balance")||M,q=!!n.props.bridgeCoins.get(y)||"LLC"===s.get("symbol"),B=t.get("balance");n.qtyRefs[s.get("symbol")]=b.a.get_asset_amount(B,s),m.push(r.a.createElement("tr",{key:s.get("symbol"),style:{maxWidth:"100rem"}},r.a.createElement("td",{style:{textAlign:"left"}},r.a.createElement(yt.a,{showIcon:!0,asset:s.get("id")})),r.a.createElement("td",{style:{textAlign:"right"}},I||L?r.a.createElement(c.a,{balance:e,hide_asset:!0}):null),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},r.a.createElement(vt,{refCallback:function(e){e&&e.refs.bound_component&&(n.priceRefs[s.get("symbol")]=e.refs.bound_component)},fromAsset:s.get("id"),pulsate:{reverse:!0,fill:"forwards"},hide_symbols:!0})),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},r.a.createElement(U,{refCallback:function(e){e&&e.refs.bound_component&&(n.changeRefs[s.get("symbol")]=e.refs.bound_component)},base:s.get("id"),quote:p,marketId:s.get("symbol")+"_"+p,hide_symbols:!0})),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},I||L?r.a.createElement(N.a,{balance:e,toAsset:p,hide_asset:!0,refCallback:function(e){e&&e.refs.bound_component&&(n.valueRefs[s.get("symbol")]=e.refs.bound_component)}}):null),d?r.a.createElement("td",{style:{textAlign:"right"}},I?r.a.createElement(c.a,{balance:e,asPercentage:!0}):null):null,r.a.createElement("td",null,v),r.a.createElement("td",null,n._renderBuy(s.get("symbol"),q,"-")),r.a.createElement("td",null,D?r.a.createElement("span",null,r.a.createElement(J.a,{style:{cursor:"pointer"},name:"deposit",title:"icons.deposit.deposit",className:"icon-14x",onClick:n.onShowModal.bind(n,s.get("symbol"),"deposit_tab")})):"-"),r.a.createElement("td",null,R?r.a.createElement("span",null,r.a.createElement(J.a,{style:{cursor:"pointer"},name:"withdraw",title:"icons.withdraw",className:"icon-14px",onClick:n.onShowModal.bind(n,s.get("symbol"),"withdraw_tab")})):"-"),r.a.createElement("td",null,i),r.a.createElement("td",null,C?r.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":_.a.translate("tooltip.borrow",{asset:y})},j,S):"-"),r.a.createElement("td",null,C?r.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":_.a.translate("tooltip.settle",{asset:y})},g):"-"),r.a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":_.a.translate("tooltip.burn"),onClick:n._reserveButtonClick.bind(n,s.get("id"))},r.a.createElement("a",{style:{marginRight:0},className:P?"order-cancel":"action-plus"},r.a.createElement("span",{className:"icon fire icon-14px"},r.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},r.a.createElement("path",{d:"M10.031 32c-2.133-4.438-0.997-6.981 0.642-9.376 1.795-2.624 2.258-5.221 2.258-5.221s1.411 1.834 0.847 4.703c2.493-2.775 2.963-7.196 2.587-8.889 5.635 3.938 8.043 12.464 4.798 18.783 17.262-9.767 4.294-24.38 2.036-26.027 0.753 1.646 0.895 4.433-0.625 5.785-2.573-9.759-8.937-11.759-8.937-11.759 0.753 5.033-2.728 10.536-6.084 14.648-0.118-2.007-0.243-3.392-1.298-5.312-0.237 3.646-3.023 6.617-3.777 10.27-1.022 4.946 0.765 8.568 7.555 12.394z"}))))),r.a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":_.a.translate("tooltip."+(P?"hide_asset":"show_asset")),onClick:n._hideAsset.bind(n,a,P)},r.a.createElement("a",{style:{marginRight:0},className:P?"order-cancel":"action-plus"},r.a.createElement(J.a,{name:P?"cross-circle":"plus-circle",title:P?"icons.cross_circle.hide_asset":"icons.plus_circle.show_asset",className:"icon-14px"})))))}}}),t&&!this.state.hide0balances){var g=!0;this.setState({isAssetsLoad:!0}),t.filter(function(e){var t=!0;return m.forEach(function(a){a.key===e&&(t=!1)}),t}).forEach(function(e){var t=E.b.getAsset(e);if(t||(g=!1),t){var s=!l.includes(t.get("id")),i=(t.get("symbol").split("."),Object(ea.a)(t.get("symbol"),n.props.backedCoins)),c=f.includes(t.get("symbol")),u=i&&i.depositAllowed||c;u||(u=-1!==n.state.tokens.indexOf(t.get("symbol")));var p=i&&i.withdrawalAllowed||c;p||(p=-1!==n.state.tokens.indexOf(t.get("symbol")));var d=!!n.props.bridgeCoins.get(t.get("symbol"))||"LLC"===t.get("symbol"),b="1.3.0"!==t.get("id"),v=st.a.parseDescription(t.getIn(["options","description"])).market;-1===t.get("symbol").indexOf("OPEN.")||v||(v="USD");var y=v||(o?o.get("symbol"):"LLC"),w=b?r.a.createElement(Y.b,{to:"/market/"+y+"_"+t.get("symbol")},r.a.createElement(J.a,{name:"trade",title:"icons.trade.trade",className:"icon-14px"})):"-",x=h(t,n.props.account),A=x.isBitAsset,k=x.borrowModal,O=x.borrowLink;(s&&a||!s&&!a)&&m.push(r.a.createElement("tr",{key:t.get("symbol"),style:{maxWidth:"100rem"}},r.a.createElement("td",{style:{textAlign:"left"}},r.a.createElement(yt.a,{showIcon:!0,asset:t.get("id")})),r.a.createElement("td",{style:{textAlign:"right"}},"-"),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},"-"),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},"-"),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},"-"),r.a.createElement("td",null,"-"),r.a.createElement("td",null,n._renderBuy(t.get("symbol"),d,"-")),r.a.createElement("td",null,u?r.a.createElement("span",null,r.a.createElement(J.a,{style:{cursor:"pointer"},name:"deposit",title:"icons.deposit.deposit",className:"icon-14x",onClick:n.onShowModal.bind(n,t.get("symbol"),"deposit_tab")})):"-"),r.a.createElement("td",null,p?r.a.createElement("span",null,r.a.createElement(J.a,{style:{cursor:"pointer"},name:"withdraw",title:"icons.withdraw",className:"icon-14px",onClick:n.onShowModal.bind(n,t.get("symbol"),"withdraw_tab")})):"-"),r.a.createElement("td",null,w),r.a.createElement("td",null,A?r.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":_.a.translate("tooltip.borrow",{asset:t.get("symbol")})},O,k):"-"),r.a.createElement("td",null,"-"),r.a.createElement("td",{style:{textAlign:"center"}},"-"),r.a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":_.a.translate("tooltip."+(s?"hide_asset":"show_asset"))},r.a.createElement("a",{style:{marginRight:0},className:s?"order-cancel":"action-plus",onClick:n._hideAsset.bind(n,t.get("id"),s)},r.a.createElement(J.a,{name:s?"cross-circle":"plus-circle",title:s?"icons.cross_circle.hide_asset":"icons.plus_circle.show_asset",className:"icon-14px"})))))}}),this.setState({isAssetsLoad:g})}return m.sort(this.sortFunctions[this.state.sortKey]),m}},{key:"_changeShownAssets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"active";this.setState({shownAssets:e}),ot.a.changeViewSetting({shownAssets:e})}},{key:"_toggleSortOrder",value:function(e){this.state.sortKey===e?(ot.a.changeViewSetting({portfolioSortDirection:!this.state.sortDirection}),this.setState({sortDirection:!this.state.sortDirection})):(ot.a.changeViewSetting({portfolioSort:e}),this.setState({sortDirection:!1,sortKey:e}))}},{key:"_renderRadioButton",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.a.createElement("label",{className:"radio"},r.a.createElement("input",{className:"radio__input",type:"radio",name:"dashboard-filters",onChange:t,checked:a}),r.a.createElement("span",{className:"radio__styled"}),r.a.createElement("span",{className:"radio__label"},e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.hiddenAssets,o=t.settings,i=t.orders,c=t.location,p=this.state,m=p.shownAssets,f=p.alwaysShowAssets;if(!a)return null;var g=[],v={},y={};a.toJS&&a.has("call_orders")&&(g=a.get("call_orders").toJS());var w=void 0,x=void 0,A=a.get("balances"),k=s.a.List(),O=s.a.List(),C=s.a.List(),N=s.a.List();(g.forEach(function(e){var t=E.b.getObject(e);if(t){var a=t.getIn(["call_price","base","asset_id"]);v[a]?v[a]+=parseInt(t.get("collateral"),10):v[a]=parseInt(t.get("collateral"),10);var n=t.getIn(["call_price","quote","asset_id"]);y[n]?y[n]+=parseInt(t.get("debt"),10):y[n]=parseInt(t.get("debt"),10)}}),f)&&(A&&((A=A.filter(function(t,a){var n=E.b.getObject(t);return!(n&&!n.get("balance")&&!i[a])&&!(e.state.hide0balances&&n.get("balance")<=0)})).forEach(function(t,a){var r=E.b.getAsset(a),o="",s="";e.state.filterValue&&(s=e.state.filterValue?String(e.state.filterValue).toLowerCase():"",o=r.get("symbol").toLowerCase(),b.a.replaceName(r).isBitAsset&&(o="bit"+o));n.includes(a)&&o.includes(s)?O=O.push(t):o.includes(s)&&(k=k.push(t))}),f.forEach(function(t){var a=E.b.getAsset(t);if(a){var r="",o="";if(e.state.filterValue)o=e.state.filterValue?String(e.state.filterValue).toLowerCase():"",r=a.get("symbol").toLowerCase(),b.a.replaceName(a).isBitAsset&&(r="bit"+r);n.includes(t)&&r.includes(o)?N=N.push(t):r.includes(o)&&(C=C.push(t))}}),w=this._renderBalances(k,this.state.filterValue?C:this.state.alwaysShowAssets,!0),x=this._renderBalances(O,this.state.filterValue?N:this.state.alwaysShowAssets)));var j=r.a.createElement(u.a,{noTip:!0,balances:O,hide_asset:!0}),P=r.a.createElement(u.a,{noTip:!0,balances:k,hide_asset:!0}),I=r.a.createElement(u.a,{noTip:!0,balances:s.a.List(),openOrders:i,hide_asset:!0}),L=r.a.createElement(u.a,{noTip:!0,balances:s.a.List(),debt:y,collateral:v,hide_asset:!0}),T=r.a.createElement(u.a,{noTip:!0,balances:s.a.List(),debt:y,hide_asset:!0}),M=r.a.createElement(u.a,{noTip:!0,balances:s.a.List(),collateral:v,hide_asset:!0}),D=o.get("unit")||this.props.core_asset.get("symbol"),R=r.a.createElement(X.a,{noLink:!0,string:"account.total",keys:[{type:"asset",value:D,arg:"asset"}]});w.push(r.a.createElement("tr",{key:"portfolio",className:"total-value"},r.a.createElement("td",{colSpan:"2",style:{textAlign:"left"}},R),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{style:{textAlign:"right"}},P),r.a.createElement("td",{colSpan:"9"}))),this.state.waitLoadMore&&w.push(r.a.createElement("tr",{className:"total-value"},r.a.createElement("td",{colSpan:"14",style:{textAlign:"center"}},"Load more... Please wait..."))),x.push(r.a.createElement("tr",{key:"portfolio",className:"total-value"},r.a.createElement("td",{colSpan:"2",style:{textAlign:"left"}},R),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{style:{textAlign:"right"}},j),r.a.createElement("td",{colSpan:"9"})));var q=o.get("showAssetPercent",!1),B=(this.props.backedCoins.get("OPEN",[]).find(function(t){return t.symbol===e.state.withdrawAsset}),this.props.bridgeCoins.get(this.state.bridgeAsset),void 0!==window.maxFinanceCnt?window.maxFinanceCnt:10),V=[{title:"account.portfolio",subTitle:P,content:r.a.createElement("div",null,r.a.createElement("div",{className:"dashboard__actions"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-3 col-lg-6"},r.a.createElement("input",{type:"text",placeholder:"Filter",onChange:this._handleFilterInput})),r.a.createElement("div",{className:"col-xl-9 col-lg-12"},r.a.createElement("div",{className:"dashboard__actions__filters"},this._renderRadioButton(_.a.translate("account.hide_hidden"),"active"!=m?this._changeShownAssets.bind(this,"active"):function(){},!("active"!=m)),x.length?this._renderRadioButton(_.a.translate("account.show_hidden"),"hidden"!=m?this._changeShownAssets.bind(this,"hidden"):function(){},!("hidden"!=m)):null,this._renderRadioButton(_.a.translate("account.show_visual"),"visual"!=m?this._changeShownAssets.bind(this,"visual"):function(){},!("visual"!=m)),r.a.createElement("div",null,r.a.createElement("label",{className:"hide0balances"},r.a.createElement("input",{name:"isGoing",type:"checkbox",checked:this.state.hide0balances,onChange:function(t){return e.setState({hide0balances:!e.state.hide0balances})}}),r.a.createElement("span",null),r.a.createElement("span",null,_.a.translate("exchange.hide"),"Â 0Â ",_.a.translate("transfer.balances")))))))),this.state.isBridgeModalVisible?r.a.createElement(aa.a,{account:this.props.account,currency:this.state.currency,type:this.state.type,depositAddress:this.state.depositAddress,buyLLCAddress:this.state.buyLLCAddress,activeTab:this.state.activeTab,onCloseModal:this.onCloseModal,isDashboard:this.state.isDashboard}):null),r.a.createElement(Tt.a,{id:"send_modal_portfolio",refCallback:function(t){t&&(e.send_modal=t)},from_name:this.props.account.get("name"),asset_id:this.state.send_asset||"1.3.0"}),"visual"!=m?r.a.createElement("div",{className:"dashboard__adaptive"},r.a.createElement("table",{className:"dashboard__table blue-bg with-borders"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{textAlign:"left"},className:"clickable",onClick:this._toggleSortOrder.bind(this,"alphabetic")},r.a.createElement(l.a,{component:"span",content:"account.asset"})),r.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"qty"),className:"clickable",style:{textAlign:"right"}},r.a.createElement(l.a,{content:"account.qty"})),r.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"priceValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},r.a.createElement(l.a,{content:"exchange.price"})," (",r.a.createElement(z.a,{name:D,noTip:!0}),")"),r.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"changeValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},r.a.createElement(l.a,{content:"account.hour_24_short"})),r.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"totalValue"),style:{textAlign:"right"},className:"column-hide-small clickable"},r.a.createElement(X.a,{noLink:!0,string:"account.eq_value_header",keys:[{type:"asset",value:D,arg:"asset"}],noTip:!0})),q?r.a.createElement("th",{style:{textAlign:"right"}},r.a.createElement(l.a,{component:"span",content:"account.percent"})):null,r.a.createElement("th",null,r.a.createElement(l.a,{content:"header.payments"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"exchange.buy"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"modal.deposit.submit"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"modal.withdraw.submit"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"account.trade"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"exchange.borrow_short"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"account.settle"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"modal.reserve.submit"})),r.a.createElement("th",{className:"column-hide-small"},r.a.createElement(l.a,{content:"active"==m?"exchange.hide":"account.perm.show"})))),r.a.createElement("tbody",null,"hidden"==m&&x.length?x.length>B?x.splice(0,B):x:w.length>B?w.splice(0,B):w))):r.a.createElement($t,{balanceObjects:k}))},{title:"account.open_orders",subTitle:I,content:r.a.createElement(Ct,this.props,r.a.createElement("tbody",null,r.a.createElement("tr",{className:"total-value"},r.a.createElement("td",{colSpan:"7",style:{textAlign:"right"}},R),r.a.createElement("td",{colSpan:"2",style:{textAlign:"left"}},I),this.props.isMyAccount?r.a.createElement("td",null):null)))},{title:"account.collaterals",subTitle:L,content:r.a.createElement(pe,{preferredUnit:D,className:"dashboard-table blue-bg with-borders",callOrders:g,account:a},r.a.createElement("tr",{className:"total-value"},r.a.createElement("td",null,R),r.a.createElement("td",null),r.a.createElement("td",null,T),r.a.createElement("td",{className:"column-hide-medium"},M),r.a.createElement("td",null),r.a.createElement("td",null,L),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{colSpan:"3"})))},{title:"account.activity",subTitle:"",content:r.a.createElement(de.a,{accountsList:s.a.fromJS([a.get("id")]),compactView:!1,showMore:!0,fullHeight:!0,limit:15,showFilters:!0,dashboard:!0})},{title:"account.proposed_transactions",subTitle:"",content:r.a.createElement("div",{className:"propsal-table-wrap"},r.a.createElement(rt,{className:"dashboard-table",account:a.get("id")}))}];return r.a.createElement("div",{className:"dashboard-layout"},r.a.createElement(_t.a,{items:V,inner:!0,updateModal:this.updateModal,defaultActiveTab:"#activity"===c.hash?"account.activity":null}),r.a.createElement(h.a,{id:"reserve_asset",overlay:!0},r.a.createElement("br",null),r.a.createElement("div",{className:"grid-block vertical"},r.a.createElement(ta.a,{assetId:this.state.reserve,account:a,onClose:function(){d.a.publish("reserve_asset","close")}}))),r.a.createElement("div",null),r.a.createElement(S,{ref:"settlement_modal",modalId:"settlement_modal",asset:this.state.settleAsset,account:a.get("name")}))}}]),t}();ha.MODE_BUY_LLC="1",ha.MODE_BUY_OTHER_COIN="0",ha=Object(P.a)(ha,{propNames:["core_asset"]});var ma=function(e){function t(){return ua(this,t),pa(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return da(t,r.a.Component),ia(t,[{key:"render",value:function(){return r.a.createElement(Lt,oa({},this.props,{wrap:ha}))}}]),t}();t.default=ma}}]);