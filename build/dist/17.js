<<<<<<< HEAD
(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{362:function(e,t,a){"use strict";(function(e){var n=a(92),s=a(0),i=a.n(s),o=a(89),r=a.n(o),l=a(1),c=a.n(l),u=a(7),p=a(13),d=a(5),m=a(71),h=a(3),_=a.n(h),f=a(50),y=a(23),g=a(21),v=a.n(g),w=a(53),b=a(4),E=a(251),k=a.n(E),C=a(41),S=a(19),A=a(2),N=a.n(A),O=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var T=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={withdraw_amount:t.props.amount_to_withdraw,withdraw_address:w.a.getLast(e.output_wallet_type),withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null,options_is_valid:!1,confirmation_is_valid:!1,withdraw_address_selected:w.a.getLast(e.output_wallet_type),memo:"",withdraw_address_first:!0,empty_withdraw_value:!1,from_account:e.account,fee_asset_id:"1.3.0",feeStatus:{}},t._validateAddress(t.state.withdraw_address,e),t._checkBalance=t._checkBalance.bind(t),t._updateFee=Object(n.a)(t._updateFee.bind(t),250),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.a.Component),O(a,[{key:"componentWillMount",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:"componentWillUnmount",value:function(){this.unMounted=!0}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.account!==this.state.from_account&&e.account!==this.props.account&&this.setState({from_account:e.account,feeStatus:{},fee_asset_id:"1.3.0",feeAmount:new S.a({amount:0})},function(){t._updateFee(),t._checkFeeStatus()})}},{key:"_updateFee",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.fee_asset_id,n=t.from_account,s=this._getAvailableAssets(t).fee_asset_types;if(1===s.length&&s[0]!==a&&(a=s[0]),!n)return null;Object(C.b)({accountID:n.get("id"),feeID:a,options:["price_per_kbyte"],data:{type:"memo",content:this.props.output_coin_type+":"+t.withdraw_address+(t.memo?":"+t.memo:"")}}).then(function(t){var a=t.fee,n=t.hasBalance,s=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:a,hasBalance:n,hasPoolBalance:s,error:!n||!s},e._checkBalance)})}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.from_account;if(a){var n=this._getAvailableAssets(t).fee_asset_types,s={},i=[];n.forEach(function(n){i.push(Object(C.b)({accountID:a.get("id"),feeID:n,options:["price_per_kbyte"],data:{type:"memo",content:e.props.output_coin_type+":"+t.withdraw_address+(t.memo?":"+t.memo:"")}}))}),Promise.all(i).then(function(a){n.forEach(function(e,t){s[e]=a[t]}),d.a.are_equal_shallow(t.feeStatus,s)||e.setState({feeStatus:s}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:"onMemoChanged",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:"onWithdrawAmountChange",value:function(e){var t=e.amount;this.setState({withdraw_amount:t,empty_withdraw_value:void 0!==t&&!parseFloat(t)},this._checkBalance)}},{key:"onSelectChanged",value:function(e){var t=w.a.get(this.props.output_wallet_type)[e];w.a.setLast({wallet:this.props.output_wallet_type,address:t}),this.setState({withdraw_address_selected:t,options_is_valid:!1,withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:"onWithdrawAddressChanged",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_selected:t,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:"_validateAddress",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(w.j)({url:a.url,walletType:a.output_wallet_type,newAddress:e}).then(function(a){t.state.withdraw_address===e&&t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:a})})}},{key:"_checkBalance",value:function(){var e=this.state,t=e.feeAmount,a=e.withdraw_amount,n=this.props,s=n.asset,i=n.balance;if(i&&t){var o=Object(C.a)(a,s,t,i);if(null!==o)return this.setState({balanceError:!o}),o}}},{key:"onSubmit",value:function(){if(!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&null!==this.state.withdraw_amount)if(this.state.withdraw_address_is_valid)if(parseFloat(this.state.withdraw_amount)>0){if(w.a.has(this.props.output_wallet_type)){var t=w.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),w.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var a=[];a.push(this.state.withdraw_address),w.a.set({wallet:this.props.output_wallet_type,addresses:a})}w.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var n=this.props.asset,s=this.state.feeAmount,i=parseFloat(String.prototype.replace.call(this.state.withdraw_amount,/,/g,"")),o=void 0!==this.props.gateFee?parseFloat(String.prototype.replace.call(this.props.gateFee,/,/g,"")):0,r=new S.a({asset_id:n.get("id"),precision:n.get("precision"),real:i}),l=new S.a({asset_id:n.get("id"),precision:n.get("precision"),real:0});void 0!==this.props.balance&&(l=r.clone(this.props.balance.get("balance")));var c=new S.a({asset_id:n.get("id"),precision:n.get("precision"),real:o});r.plus(c),l.lt(r)&&(r=l),y.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),r.getAmount(),n.get("id"),this.props.output_coin_type+":"+this.state.withdraw_address+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,s?s.asset_id:"1.3.0"),this.setState({empty_withdraw_value:!1})}else this.setState({empty_withdraw_value:!0});else v.a.publish(this.getWithdrawModalId(),"open")}},{key:"onSubmitConfirmation",value:function(){if(v.a.publish(this.getWithdrawModalId(),"close"),w.a.has(this.props.output_wallet_type)){var t=w.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),w.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var a=[];a.push(this.state.withdraw_address),w.a.set({wallet:this.props.output_wallet_type,addresses:a})}w.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var n=this.props.asset,s=d.a.get_asset_precision(n.get("precision")),i=String.prototype.replace.call(this.state.withdraw_amount,/,/g,""),o=this.state.feeAmount;y.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),parseInt(i*s,10),n.get("id"),this.props.output_coin_type+":"+this.state.withdraw_address+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,o?o.asset_id:"1.3.0")}},{key:"onDropDownList",value:function(){w.a.has(this.props.output_wallet_type)&&(!1===this.state.options_is_valid&&(this.setState({options_is_valid:!0}),this.setState({withdraw_address_first:!1})),!0===this.state.options_is_valid&&this.setState({options_is_valid:!1}))}},{key:"getWithdrawModalId",value:function(){return"confirmation"}},{key:"onAccountBalance",value:function(){var e=this.state.feeAmount;if(Object.keys(this.props.account.get("balances").toJS()).includes(this.props.asset.get("id"))){var t=new S.a({amount:this.props.balance.get("balance"),asset_id:this.props.asset.get("id"),precision:this.props.asset.get("precision")});t.asset_id===e.asset_id&&t.minus(e),this.setState({withdraw_amount:t.getAmount({real:!0}),empty_withdraw_value:!1},this._checkBalance)}}},{key:"setNestedRef",value:function(e){this.nestedRef=e}},{key:"onFeeChanged",value:function(e){var t=e.asset;this.setState({fee_asset_id:t.get("id")},this._updateFee)}},{key:"_getAvailableAssets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.from_account,a=e.feeStatus;var n=[];if(!t||!t.get("balances"))return{fee_asset_types:n};var s=e.from_account.get("balances").toJS();for(var i in n=Object.keys(s).sort(d.a.sortID),s){var o=b.b.getObject(i),r=b.b.getObject(s[i]);if(r&&0===r.get("balance")&&-1!==n.indexOf(i)&&n.splice(n.indexOf(i),1),o){var l=!1;try{l=new S.f({base:new S.a(o.getIn(["options","core_exchange_rate","base"]).toJS()),quote:new S.a(o.getIn(["options","core_exchange_rate","quote"]).toJS())}).isValid()}catch(e){l=!1}"1.3.0"===o.get("id")||l||n.splice(n.indexOf(i),1)}}return{fee_asset_types:n=n.filter(function(e){return(void 0===a[t=e]||a[t]&&a[t].hasPoolBalance)&&function(e){return void 0===a[e]||a[e]&&a[e].hasBalance}(e);var t})}}},{key:"render",value:function(){var e=this.state,t=e.withdraw_address_selected,a=e.memo,n=w.a.get(this.props.output_wallet_type),s=null,o=this.props.account.get("balances").toJS(),l=Object.keys(o),u=this.getWithdrawModalId(),p=null,d=null,h=null;this.state.options_is_valid&&(d=i.a.createElement("div",{className:n.length?"blocktrades-options":"blocktrades-disabled-options"},n.map(function(e,t){return i.a.createElement("a",{key:t,onClick:this.onSelectChanged.bind(this,t)},e)},this))),!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&(this.state.withdraw_address_is_valid||(p=i.a.createElement("div",{className:"has-error",style:{paddingTop:10}},i.a.createElement(c.a,{content:"gateway.valid_address",coin_type:this.props.output_coin_type})),h=i.a.createElement(k.a,{id:u,overlay:!0},i.a.createElement(r.a,{close:u},i.a.createElement("a",{href:"#",className:"close-button"},"×")),i.a.createElement("br",null),i.a.createElement("label",null,i.a.createElement(c.a,{content:"modal.confirmation.title"})),i.a.createElement("br",null),i.a.createElement("div",{className:"content-block"},i.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmitConfirmation.bind(this),value:_.a.translate("modal.confirmation.accept")}),i.a.createElement(r.a,{close:u},i.a.createElement("a",{className:"secondary button"},i.a.createElement(c.a,{content:"modal.confirmation.cancel"})))))));var y=1,g=null;this.props.output_supports_memos&&(g=i.a.createElement("div",{className:"content-block"},i.a.createElement("label",null,i.a.createElement(c.a,{component:"span",content:"transfer.memo"})),i.a.createElement("textarea",{rows:"3",value:a,tabIndex:y++,onChange:this.onMemoChanged.bind(this)})));var v=this._getAvailableAssets().fee_asset_types;if(l.length>0){var b=this.props.asset.get("id");if(b){var E=o[b];s=i.a.createElement("span",{style:{borderBottom:"#A09F9F 1px dotted",cursor:"pointer"}},i.a.createElement(c.a,{component:"span",content:"transfer.available"})," : ",i.a.createElement("span",{className:"set-cursor",onClick:this.onAccountBalance.bind(this)},E?i.a.createElement(m.a,{balance:o[b]}):0))}else s="No funds"}else s="No funds";var C=this.state.error||this.state.balanceError||!this.state.withdraw_amount;return i.a.createElement("form",{className:"grid-block vertical full-width-content"},i.a.createElement("div",{className:"grid-container"},i.a.createElement("div",{className:"content-block"},i.a.createElement("h3",null,i.a.createElement(c.a,{content:"gateway.withdraw_coin",coin:this.props.output_coin_name,symbol:this.props.output_coin_symbol}))),i.a.createElement("div",{className:"content-block"},i.a.createElement(f.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.asset.get("id"),assets:[this.props.asset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:s}),this.state.empty_withdraw_value?i.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},i.a.createElement(c.a,{content:"transfer.errors.valid"})):null,this.state.balanceError?i.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},i.a.createElement(c.a,{content:"transfer.errors.insufficient"})):null),this.state.feeAmount?i.a.createElement("div",{className:"content-block gate_fee"},i.a.createElement(f.a,{refCallback:this.setNestedRef.bind(this),label:"transfer.fee",disabled:!0,amount:this.state.feeAmount.getAmount({real:!0}),onChange:this.onFeeChanged.bind(this),asset:this.state.feeAmount.asset_id,assets:v,tabIndex:y++}),this.state.hasBalance?null:i.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},i.a.createElement(c.a,{content:"transfer.errors.noFeeBalance"})),this.state.hasPoolBalance?null:i.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},i.a.createElement(c.a,{content:"transfer.errors.noPoolBalance"}))):null,this.props.gateFee?i.a.createElement("div",{className:"amount-selector right-selector",style:{paddingBottom:20}},i.a.createElement("label",{className:"left-label"},i.a.createElement(c.a,{content:"gateway.fee"})),i.a.createElement("div",{className:"inline-label input-wrapper"},i.a.createElement("input",{type:"text",disabled:!0,value:this.props.gateFee}),i.a.createElement("div",{className:"form-label select floating-dropdown"},i.a.createElement("div",{className:"dropdown-wrapper inactive"},i.a.createElement("div",null,this.props.output_coin_symbol))))):null,i.a.createElement("div",{className:"content-block"},i.a.createElement("label",{className:"left-label"},i.a.createElement(c.a,{component:"span",content:"modal.withdraw.address"})),i.a.createElement("div",{className:"blocktrades-select-dropdown"},i.a.createElement("div",{className:"inline-label"},i.a.createElement("input",{type:"text",value:t,tabIndex:"4",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:"off"}),i.a.createElement("span",{onClick:this.onDropDownList.bind(this)},"▼"))),i.a.createElement("div",{className:"blocktrades-position-options"},d),p),g,i.a.createElement("div",{className:"button-group"},i.a.createElement("div",{onClick:this.onSubmit.bind(this),className:"button"+(C?" disabled":"")},i.a.createElement(c.a,{content:"modal.withdraw.submit"})),i.a.createElement(r.a,{close:this.props.modal_id},i.a.createElement("div",{className:"button"},i.a.createElement(c.a,{content:"account.perm.cancel"})))),h))}}]),a}();T.propTypes={account:u.a.ChainAccount.isRequired,issuer:u.a.ChainAccount.isRequired,asset:u.a.ChainAsset.isRequired,output_coin_name:N.a.string.isRequired,output_coin_symbol:N.a.string.isRequired,output_coin_type:N.a.string.isRequired,url:N.a.string,output_wallet_type:N.a.string,output_supports_memos:N.a.bool.isRequired,amount_to_withdraw:N.a.string,balance:u.a.ChainObject},t.a=Object(p.a)(T)}).call(this,a(31).Buffer)},571:function(e,t,a){"use strict";var n=a(15),s=a(85),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var o=new s.a("__bts__"),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.current_blocktrades_address_cache_version_string="2"}return i(e,[{key:"getIndexForDepositKeyInExchange",value:function(e,t,a){return[this.current_blocktrades_address_cache_version_string,e,t,a].reduce(function(e,t){return e.concat("[",t,"]")},"")}},{key:"getCachedInputAddress",value:function(e,t,a,s){var i=n.a.getWallet(),r=this.getIndexForDepositKeyInExchange(t,a,s);if(i){i.deposit_keys=i.deposit_keys||{},i.deposit_keys[e]=i.deposit_keys[e]||{},i.deposit_keys[e][r]=i.deposit_keys[e][r]||[];var l=i.deposit_keys[e][r].length;return l?i.deposit_keys[e][r][l-1]:null}var c=o.get("deposit_keys",{});c[e]=c[e]||{},c[e][r]=c[e][r]||[];var u=c[e][r].length;return u?c[e][r][u-1]:null}},{key:"cacheInputAddress",value:function(e,t,a,s,i,r){if(i){var l=n.a.getWallet(),c=this.getIndexForDepositKeyInExchange(t,a,s);if(l)delete l.deposit_keys.undefined,Object.keys(l.deposit_keys||{}).forEach(function(e){for(var t in l.deposit_keys[e])if(l.deposit_keys[e][t]&&l.deposit_keys[e][t].length)for(var a=l.deposit_keys[e][t].length-1;a>=0;a--)l.deposit_keys[e][t][a]&&"unknown"===l.deposit_keys[e][t][a].address&&l.deposit_keys[e][t].splice(a,1)}),l.deposit_keys=l.deposit_keys||{},l.deposit_keys[e]=l.deposit_keys[e]||{},l.deposit_keys[e][c]=l.deposit_keys[e][c]||[],l.deposit_keys[e][c].push({address:i,memo:r}),n.a._updateWallet();else{var u=o.get("deposit_keys",{});u[e]=u[e]||{},u[e][c]=u[e][c]||[],u[e][c].push({address:i,memo:r}),o.set("deposit_keys",u)}}}}]),e}();t.a=r},8016:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(16),o=a(61),r=a(180),l=a(5),c=a(1),u=a.n(c),p=a(7),d=a(13),m=a(4),h=a(362),_=a(36),f=a(21),y=a.n(f),g=a(113),v=a(22),w=a(46),b=a(53),E=a(27),k=a(43),C=a(3),S=a.n(C),A=a(2),N=a.n(A),O=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var T=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n={blocktrades:E.a.BASE,openledger:E.e.BASE};return a.state={receive_address:null,url:e.url||n[e.gateway],loading:!1,emptyAddressDeposit:!1},a.addDepositAddress=a.addDepositAddress.bind(a),a._copy=a._copy.bind(a),document.addEventListener("copy",a._copy),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),O(t,[{key:"_copy",value:function(e){try{this.state.clipboardText&&e.clipboardData.setData("text/plain",this.state.clipboardText),e.preventDefault()}catch(e){console.error(e)}}},{key:"_getDepositObject",value:function(){return{inputCoinType:this.props.deposit_coin_type,outputCoinType:this.props.receive_coin_type,outputAddress:this.props.account.get("name"),url:this.state.url,stateCallback:this.addDepositAddress}}},{key:"componentWillMount",value:function(){Object(b.h)({coin:this.props.receive_coin_type,account:this.props.account.get("name"),stateCallback:this.addDepositAddress})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("copy",this._copy)}},{key:"componentWillReceiveProps",value:function(e){e.account!==this.props.account&&Object(b.h)({coin:e.receive_coin_type,account:e.account.get("name"),stateCallback:this.addDepositAddress})}},{key:"addDepositAddress",value:function(e){e.error&&("no_address"===e.error.message?this.setState({emptyAddressDeposit:!0}):this.setState({emptyAddressDeposit:!1})),this.setState({receive_address:e}),this.setState({loading:!1}),this.setState({receive_address:e})}},{key:"requestDepositAddressLoad",value:function(){this.setState({loading:!0,emptyAddressDeposit:!1}),Object(b.i)(this._getDepositObject())}},{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.issuer_account.get("name")+"_"+this.props.receive_asset.get("symbol")}},{key:"onWithdraw",value:function(){y.a.publish(this.getWithdrawModalId(),"open")}},{key:"toClipboard",value:function(e){try{this.setState({clipboardText:e},function(){document.execCommand("copy")})}catch(e){console.error(e)}}},{key:"render",value:function(){var e="deposit"===this.props.action,t=s.a.createElement(k.a,null);if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return t;var a=this.props.account.get("balances"),n=this.props.gateFee;this.props.receive_asset.get("symbol");if(this.props.deprecated_in_favor_of){var i=!1,o=a.get(this.props.receive_asset.get("id"));if(o){var r=m.b.getObject(o);if(r)0!=r.get("balance")&&(i=!0)}if(!i)return t}var l=this.state.receive_address,c=this.state.emptyAddressDeposit,p=this.state.loading;if(!l)return s.a.createElement("div",{style:{margin:"3rem"}},s.a.createElement(k.a,{type:"three-bounce"}));var d=this.getWithdrawModalId(),f=null,y=null,b="",E=void 0;if(this.props.deposit_account){f=s.a.createElement("span",null,this.props.deposit_account),b=this.props.receive_coin_type+":"+this.props.account.get("name"),y=s.a.createElement("span",null,b);var C=this.props.deposit_coin_type+":"}else{l.memo?(E=l.memo,b=l.address,f=s.a.createElement("span",null,l.address),y=s.a.createElement("span",null,l.memo)):(b=l.address,f=s.a.createElement("span",null,l.address));C=""}return!this.props.isAvailable||e&&!this.props.deposit_account&&!l||l&&"unknown"===l.address?s.a.createElement("div",null,s.a.createElement(u.a,{className:"txtlabel cancel",content:"gateway.unavailable",component:"h4"})):e?s.a.createElement("div",{className:"Blocktrades__gateway grid-block no-padding no-margin"},s.a.createElement("div",{className:"small-12 medium-5"},s.a.createElement(u.a,{component:"h4",content:"gateway.deposit_summary"}),s.a.createElement("div",{className:"small-12 medium-10"},s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement(u.a,{component:"td",content:"gateway.asset_to_deposit"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},this.props.deposit_asset)),s.a.createElement("tr",null,s.a.createElement(u.a,{component:"td",content:"gateway.asset_to_receive"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},s.a.createElement(v.a,{name:this.props.receive_asset.get("symbol"),replace:!1}))),s.a.createElement("tr",null,s.a.createElement(u.a,{component:"td",content:"gateway.intermediate"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},s.a.createElement(w.a,{account:this.props.issuer_account.get("id")}))),s.a.createElement("tr",null,s.a.createElement(u.a,{component:"td",content:"gateway.your_account"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},s.a.createElement(w.a,{account:this.props.account.get("id")}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(u.a,{content:"gateway.balance"}),":"),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},s.a.createElement(g.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol"),replace:!1}))))))),s.a.createElement("div",{className:"small-12 medium-7"},s.a.createElement(u.a,{component:"h4",content:"gateway.deposit_inst"}),s.a.createElement("label",{className:"left-label"},s.a.createElement(u.a,{content:"gateway.deposit_to",asset:this.props.deposit_asset}),":"),s.a.createElement("label",{className:"fz_12 left-label"},s.a.createElement(u.a,{content:"gateway.deposit_notice_delay"})),s.a.createElement("div",null,c?s.a.createElement(u.a,{content:"gateway.please_generate_address"}):f,s.a.createElement("div",null,y&&s.a.createElement("span",null,"memo: ",y)),s.a.createElement("div",{className:"button-group",style:{paddingTop:10}},f?s.a.createElement("div",{className:"button",onClick:this.toClipboard.bind(this,b)},s.a.createElement(u.a,{content:"gateway.copy_address"})):null,E?s.a.createElement("div",{className:"button",onClick:this.toClipboard.bind(this,E)},s.a.createElement(u.a,{content:"gateway.copy_memo"})):null,s.a.createElement("button",{className:"button spinner-button-circle",onClick:this.requestDepositAddressLoad.bind(this)},p?s.a.createElement(k.a,{type:"circle"}):null,s.a.createElement(u.a,{content:"gateway.generate_new"}))),s.a.createElement(u.a,{className:"has-error fz_14",component:"p",content:"gateway.min_deposit_warning_amount",minDeposit:2*this.props.gateFee,coin:this.props.deposit_asset}),s.a.createElement(u.a,{className:"has-error fz_14",component:"p",content:"gateway.min_deposit_warning_asset",minDeposit:2*this.props.gateFee,coin:this.props.deposit_asset})))):s.a.createElement("div",{className:"Blocktrades__gateway grid-block no-padding no-margin"},s.a.createElement("div",{className:"small-12 medium-5"},s.a.createElement(u.a,{component:"h4",content:"gateway.withdraw_summary"}),s.a.createElement("div",{className:"small-12 medium-10"},s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement(u.a,{component:"td",content:"gateway.asset_to_withdraw"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},s.a.createElement(v.a,{name:this.props.receive_asset.get("symbol"),replace:!1}))),s.a.createElement("tr",null,s.a.createElement(u.a,{component:"td",content:"gateway.asset_to_receive"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},this.props.deposit_asset)),s.a.createElement("tr",null,s.a.createElement(u.a,{component:"td",content:"gateway.intermediate"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},s.a.createElement(w.a,{account:this.props.issuer_account.get("id")}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(u.a,{content:"gateway.balance"}),":"),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},s.a.createElement(g.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol"),replace:!1}))))))),s.a.createElement("div",{className:"small-12 medium-7"},s.a.createElement(u.a,{component:"h4",content:"gateway.withdraw_inst"}),s.a.createElement("label",{className:"left-label"},s.a.createElement(u.a,{content:"gateway.withdraw_to",asset:this.props.deposit_asset}),":"),s.a.createElement("div",{className:"button-group",style:{paddingTop:20}},s.a.createElement("button",{className:"button success",style:{fontSize:"1.3rem"},onClick:this.onWithdraw.bind(this)},s.a.createElement(u.a,{content:"gateway.withdraw_now"})," "))),s.a.createElement(_.a,{id:d,overlay:!0},s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(h.a,{account:this.props.account.get("name"),issuer:this.props.issuer_account.get("name"),asset:this.props.receive_asset.get("symbol"),url:this.state.url,output_coin_name:this.props.deposit_asset_name,gateFee:n,output_coin_symbol:this.props.deposit_asset,output_coin_type:this.props.deposit_coin_type,output_wallet_type:this.props.deposit_wallet_type,output_supports_memos:this.props.supports_output_memos,memo_prefix:C,modal_id:d,balance:this.props.account.get("balances").toJS()[this.props.receive_asset.get("id")]}))))}}]),t}();T.propTypes={url:N.a.string,gateway:N.a.string,deposit_coin_type:N.a.string,deposit_asset_name:N.a.string,deposit_account:N.a.string,receive_coin_type:N.a.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount,deposit_asset:N.a.string,deposit_wallet_type:N.a.string,receive_asset:p.a.ChainAsset,deprecated_in_favor_of:p.a.ChainAsset,deprecated_message:N.a.string,action:N.a.string,supports_output_memos:N.a.bool.isRequired},T.defaultProps={autosubscribe:!1};var j=Object(d.a)(T),x=a(9),I=a(11),D=a(181),P=a(6),W=a.n(P),B=(a(8),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}());var q=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=e.viewSettings.get(e.provider+"Action","deposit");return a.state={activeCoin:a._getActiveCoin(e,{action:n}),action:n},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),B(t,[{key:"_getActiveCoin",value:function(e,t){var a=e.viewSettings.get("activeCoin_"+e.provider+"_"+t.action,null),n=null;return"blocktrades"==e.provider&&"deposit"==t.action&&(n="BTC"),"openledger"==e.provider&&"deposit"==t.action&&(n="BTC"),"blocktrades"==e.provider&&"withdraw"==t.action&&(n="TRADE.BTC"),"openledger"==e.provider&&"withdraw"==t.action&&(n="OPEN.BTC"),a||n}},{key:"componentWillReceiveProps",value:function(e){e.provider!==this.props.provider&&this.setState({activeCoin:this._getActiveCoin(e,this.state.action)})}},{key:"onSelectCoin",value:function(e){this.setState({activeCoin:e.target.value});var t={};t["activeCoin_"+this.props.provider+"_"+this.state.action]=e.target.value,I.a.changeViewSetting(t)}},{key:"changeAction",value:function(e){var t,a,n,s=this._getActiveCoin(this.props,{action:e});this.setState({action:e,activeCoin:s}),I.a.changeViewSetting((t={},a=this.props.provider+"Action",n=e,a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t))}},{key:"render",value:function(){var e=this,t=this.props,a=t.coins,n=t.account,i=t.provider,o=this.state,r=o.activeCoin,l=o.action;if(!a.length)return s.a.createElement(k.a,null);var c=a.filter(function(e){return!(!e||!e.symbol)&&("deposit"===l?e.depositAllowed:e.withdrawalAllowed)}),p=c.map(function(e){var t="deposit"===l?e.backingCoinType.toUpperCase():e.symbol;return s.a.createElement("option",{value:t,key:e.symbol},t)}).filter(function(e){return null!==e}),d=c.filter(function(e){return"deposit"===l?e.backingCoinType.toUpperCase()===r:e.symbol===r})[0];d||(d=c[0]);var m={blocktrades:{name:"blocktrades",id:"1.2.32567",support:"support@blocktrades.us"},openledger:{name:d.intermediateAccount,id:"1.2.96397",support:"https://openledger.io"}}[i],h="deposit"===this.state.action;return s.a.createElement("div",{style:this.props.style},s.a.createElement("div",{className:"grid-block no-margin vertical medium-horizontal no-padding"},s.a.createElement("div",{className:"medium-4"},s.a.createElement("div",null,s.a.createElement("label",{style:{minHeight:"2rem"},className:"left-label"},s.a.createElement(u.a,{content:"gateway.choose_"+l}),":"," "),s.a.createElement("select",{className:"external-coin-types bts-select",onChange:this.onSelectCoin.bind(this),value:r},p))),s.a.createElement("div",{className:"medium-6 medium-offset-1"},s.a.createElement("label",{style:{minHeight:"2rem"},className:"left-label"},s.a.createElement(u.a,{content:"gateway.gateway_text"}),":"),s.a.createElement("div",{style:{paddingBottom:15}},s.a.createElement("ul",{className:"button-group segmented no-margin"},s.a.createElement("li",{className:"deposit"===l?"is-active":""},s.a.createElement("a",{onClick:this.changeAction.bind(this,"deposit")},s.a.createElement(u.a,{content:"gateway.deposit"}))),s.a.createElement("li",{className:"withdraw"===l?"is-active":""},s.a.createElement("a",{onClick:this.changeAction.bind(this,"withdraw")},s.a.createElement(u.a,{content:"gateway.withdraw"}))))))),d?s.a.createElement("div",null,s.a.createElement("div",{style:{marginBottom:15}},s.a.createElement(j,{key:i+"."+d.symbol,gateway:i,issuer_account:m.name,account:n,deposit_asset:d.backingCoinType.toUpperCase(),deposit_asset_name:d.name,deposit_coin_type:d.backingCoinType.toLowerCase(),deposit_account:d.depositAccount,deposit_wallet_type:d.walletType,gateFee:d.gateFee,receive_asset:d.symbol,receive_coin_type:d.symbol.toLowerCase(),supports_output_memos:d.supportsMemos,isAvailable:d.isAvailable,action:this.state.action}),s.a.createElement("label",{className:"left-label"},"Support"),s.a.createElement("div",null,s.a.createElement(u.a,{content:"gateway.support_block"}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("a",{href:(-1===m.support.indexOf("@")?"":"mailto:")+m.support,rel:"noopener noreferrer"},m.support))),d&&d.symbol?s.a.createElement(D.b,{asset:d.symbol,fromAccount:h?m.id:this.props.account.get("id"),to:h?this.props.account.get("id"):m.id},function(t){var a=t.asset,n=t.to,i=t.fromAccount;return s.a.createElement(D.a,{accountsList:W.a.List([e.props.account.get("id")]),limit:10,compactView:!0,fullHeight:!0,filter:"transfer",title:s.a.createElement(u.a,{content:"gateway.recent_"+e.state.action}),customFilter:{fields:["to","from","asset_id"],values:{to:n.get("id"),from:i.get("id"),asset_id:a.get("id")}}})}):null):null)}}]),t}(),R=(Object(i.connect)(q,{listenTo:function(){return[x.a]},getProps:function(){return{viewSettings:x.a.getState().viewSettings}}}),a(15)),F=a(89),M=a.n(F),L=a(71),U=a(50),H=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var G=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={deposit_amount:null,deposit_info:null,deposit_error:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),H(t,[{key:"onDepositAmountChange",value:function(e){var t=e.amount;e.asset;this.setState({deposit_amount:t})}},{key:"onSubmitDeposit",value:function(){var e=this,t=this.props.receive_asset,a=(l.a.get_asset_precision(t.get("precision")),this.state.deposit_amount.replace(/,/g,""));console.log("deposit_amount: ",a);var n={jsonrpc:"2.0",method:"getDepositAccount",params:{bitsharesAccountName:this.props.account.get("name"),currency:this.props.deposit_asset,amount:a},id:1};fetch(this.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(n))}).then(function(e){return e.json()}).then(function(t){"result"in t?e.setState({deposit_info:t.result}):"error"in json_reponse&&"message"in t.error?e.setState({deposit_error:t.error.message}):e.setState({deposit_error:"Unable to approve deposit, please contact OpenLedger or try again later"})}).catch(function(t){e.setState({deposit_error:"Unable to approve deposit, please contact OpenLedger or try again later"})})}},{key:"onClose",value:function(){this.setState({deposit_amount:null,deposit_info:null,deposit_error:null}),y.a.publish(this.props.modal_id,"close")}},{key:"render",value:function(){if(this.state.deposit_error)return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,"Deposit Error")),s.a.createElement("div",{className:"content-block"},s.a.createElement("p",null,this.state.deposit_error)),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onClose.bind(this),value:"Close"}))));if(this.state.deposit_info){if("link"in this.state.deposit_info)return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,"Deposit Information")),s.a.createElement("div",{className:"content-block"},s.a.createElement("p",null,"Click"," ",s.a.createElement("a",{href:this.state.deposit_info.link,rel:"noopener noreferrer",target:"_blank"},"here")," ","for deposit instructions")),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onClose.bind(this),value:"Close"}))));var e=[];for(var t in this.state.deposit_info)this.state.deposit_info.hasOwnProperty(t)&&e.push(s.a.createElement("tr",null,s.a.createElement("td",null,t),s.a.createElement("td",null,this.state.deposit_info[t])));return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,"Deposit Information")),s.a.createElement("div",{className:"content-block"},s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,e))),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onClose.bind(this),value:S.a.translate("account.perm.cancel")}))))}return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,"Deposit ",this.props.deposit_asset)),s.a.createElement("div",{className:"content-block"},s.a.createElement(U.a,{label:"modal.deposit.amount",amount:this.state.deposit_amount,asset:this.props.receive_asset.get("id"),assets:[this.props.receive_asset.get("id")],placeholder:"0.0",onChange:this.onDepositAmountChange.bind(this),display_balance:null})),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmitDeposit.bind(this),value:S.a.translate("modal.deposit.submit")}),s.a.createElement("input",{type:"submit",className:" button",onClick:this.onClose.bind(this),value:S.a.translate("account.perm.cancel")}))))}}]),t}();G.propTypes={account:p.a.ChainAccount.isRequired,issuer_account:p.a.ChainAccount.isRequired,deposit_asset:N.a.string,receive_asset:p.a.ChainAsset.isRequired,rpc_url:N.a.string};var J=Object(d.a)(G),K=a(23),V=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var z=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={withdraw_amount:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),V(t,[{key:"onWithdrawAmountChange",value:function(e){var t=e.amount;e.asset;this.setState({withdraw_amount:t})}},{key:"onSubmit",value:function(){var e=this,t=this.props.receive_asset,a=l.a.get_asset_precision(t.get("precision")),n=this.state.withdraw_amount.replace(/,/g,""),s={jsonrpc:"2.0",method:"getMemoForFiatWithdrawal",params:{bitsharesAccountName:this.props.account.get("name"),currency:this.props.deposit_asset,amount:n},id:1};fetch(this.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(s))}).then(function(e){return e.json()}).then(function(s){if(!("result"in s))throw"error"in s&&"message"in s.error?json_repsonse.error.message:"Unable to approve withdrawal, please contact OpenLedger or try again later";K.a.transfer(e.props.account.get("id"),e.props.issuer_account.get("id"),parseInt(n*a,10),t.get("id"),s.result)}).catch(function(e){alert(e)})}},{key:"render",value:function(){var e=null,t=this.props.account.get("balances").toJS();if(Object.keys(t).length>0){var a=this.props.receive_asset.get("id");e=a?s.a.createElement("span",null,s.a.createElement(u.a,{component:"span",content:"transfer.available"}),":"," ",s.a.createElement(L.a,{balance:t[a]})):"No funds"}else e="No funds";return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,"Withdraw ",this.props.deposit_asset)),s.a.createElement("div",{className:"content-block"},s.a.createElement(U.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.receive_asset.get("id"),assets:[this.props.receive_asset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:e})),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmit.bind(this),value:S.a.translate("modal.withdraw.submit")}),s.a.createElement(M.a,{close:this.props.modal_id},s.a.createElement("div",{className:"button"},s.a.createElement(u.a,{content:"account.perm.cancel"}))))))}}]),t}();z.propTypes={account:p.a.ChainAccount.isRequired,issuer_account:p.a.ChainAccount.isRequired,deposit_asset:N.a.string,receive_asset:p.a.ChainAsset.isRequired,rpc_url:N.a.string};var X=Object(d.a)(z),Q=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ee=function(e){function t(e){Y(this,t);var a=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return $(t,s.a.Component),Q(t,[{key:"getWithdrawModalId",value:function(){return"withdraw_fiat_openledger_"+this.props.receive_asset.get("symbol")}},{key:"getDepositModalId",value:function(){return"deposit_fiat_openledger_"+this.props.receive_asset.get("symbol")}},{key:"onWithdraw",value:function(){y.a.publish(this.getWithdrawModalId(),"open")}},{key:"onDeposit",value:function(){y.a.publish(this.getDepositModalId(),"open")}},{key:"render",value:function(){if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return s.a.createElement("tr",{style:{display:"none"}},s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null));R.a.getWallet();var e=this.props.account.get("balances"),t=(this.props.receive_asset.get("symbol"),e.toJS());if(Object.keys(t).length>0){var a=this.props.receive_asset.get("id");a&&s.a.createElement("span",null,s.a.createElement(u.a,{component:"span",content:"transfer.available"}),":"," ",s.a.createElement(L.a,{balance:t[a]}))}var n=this.getDepositModalId(),i=this.getWithdrawModalId(),o=null;o=this.props.deposit_allowed?s.a.createElement("td",null,s.a.createElement("button",{className:"button outline",onClick:this.onDeposit.bind(this)}," ",s.a.createElement(u.a,{content:"gateway.deposit"})," "),s.a.createElement(_.a,{id:n,overlay:!0},s.a.createElement(M.a,{close:n},s.a.createElement("a",{href:"#",className:"close-button"},"×")),s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(J,{account:this.props.account.get("name"),issuer_account:this.props.issuer_account.get("name"),receive_asset:this.props.receive_asset.get("symbol"),rpc_url:this.props.rpc_url,deposit_asset:this.props.deposit_asset,modal_id:n})))):s.a.createElement("td",null,"Click"," ",s.a.createElement("a",{href:"https://openledger.info/v/",rel:"noopener noreferrer",target:"_blank"},"here")," ","to register for deposits of ",this.props.deposit_asset);var r=null;return r=this.props.withdraw_allowed?s.a.createElement("td",null,s.a.createElement("button",{className:"button outline",onClick:this.onWithdraw.bind(this)}," ",s.a.createElement(u.a,{content:"gateway.withdraw"})," "),s.a.createElement(_.a,{id:i,overlay:!0},s.a.createElement(M.a,{close:i},s.a.createElement("a",{href:"#",className:"close-button"},"×")),s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(X,{account:this.props.account.get("name"),issuer_account:this.props.issuer_account.get("name"),receive_asset:this.props.receive_asset.get("symbol"),rpc_url:this.props.rpc_url,deposit_asset:this.props.deposit_asset,modal_id:i})))):s.a.createElement("td",null,"Click"," ",s.a.createElement("a",{href:"https://openledger.info/v/",rel:"noopener noreferrer",target:"_blank"},"here")," ","to register for withdrawals of ",this.props.deposit_asset),s.a.createElement("tr",null,s.a.createElement("td",null,this.props.deposit_asset),o,s.a.createElement("td",null,s.a.createElement(g.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol")})),r)}}]),t}();ee.propTypes={url:N.a.string,gateway:N.a.string,deposit_coin_type:N.a.string,deposit_asset_name:N.a.string,deposit_account:N.a.string,receive_coin_type:N.a.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount,deposit_asset:N.a.string,receive_asset:p.a.ChainAsset,deposit_allowed:N.a.bool,withdraw_allowed:N.a.bool},ee=Object(d.a)(ee);var te=function(e){function t(e){Y(this,t);var a=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={allowedFiatCurrencies:{deposit:[],withdraw:[]}};var n={jsonrpc:"2.0",id:1,method:"isValidatedForFiat",params:{bitsharesAccountName:a.props.account.get("name")}};return fetch(a.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(n))}).then(function(e){return e.json()}).then(function(e){"result"in e&&a.setState({allowedFiatCurrencies:e.result})}).catch(function(e){a.setState({allowedFiatCurrencies:{deposit:[],withdraw:[]}})}),a}return $(t,s.a.Component),Q(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.update_timer)}},{key:"render",value:function(){return this.props.account&&this.props.issuer_account,s.a.createElement("div",null)}}]),t}();te.propTypes={rpc_url:N.a.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount};te=Object(d.a)(te);var ae=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ne=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={current_status:"never_loaded",withdrawals:null,deposits:null,error:null},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),ae(t,[{key:"onShowOpenLedgerTransactionHistory",value:function(){var e=this,t={jsonrpc:"2.0",method:"getRequestsList",params:{bitsharesAccountName:this.props.account.get("name")},id:1};fetch(this.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(t))}).then(function(e){return e.json()}).then(function(t){if(!("result"in t))throw"error"in t&&"message"in t.error?json_repsonse.error.message:"Unexpected response";e.setState({current_status:"loaded",withdrawals:t.result.withdrawals,deposits:t.result.deposits,error:null})}).catch(function(t){e.setState({current_status:"error",withdrawals:null,deposits:null,error:"Error getting transaction history: "+t})})}},{key:"render",value:function(){if(!this.props.account)return null;var e=null;if("loaded"===this.state.current_status){var t=[];if(this.state.withdrawals.length){for(var a=0;a<this.state.withdrawals.length;++a)t.push(s.a.createElement("tr",null,s.a.createElement("td",null,this.state.withdrawals[a].amount," ",this.state.withdrawals[a].currency),s.a.createElement("td",null,this.state.withdrawals[a].status)));e=s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement(u.a,{content:"openledger.withdraw_amount"})),s.a.createElement("th",null,s.a.createElement(u.a,{content:"openledger.status"})))),s.a.createElement("tbody",null,t))}else e=s.a.createElement(u.a,{component:"p",content:"openledger.withdraw_none"})}var n=null;if("loaded"===this.state.current_status)if(this.state.deposits.length){var i=[];for(a=0;a<this.state.deposits.length;++a)i.push(s.a.createElement("tr",null,s.a.createElement("td",null,this.state.deposits[a].amount," ",this.state.deposits[a].currency),s.a.createElement("td",null,s.a.createElement("a",{href:this.state.deposits[a].link,rel:"noopener noreferrer",target:"_blank"},"link")),s.a.createElement("td",null,this.state.deposits[a].status)));n=s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement(u.a,{content:"openledger.deposit_amount"})),s.a.createElement("th",null,s.a.createElement(u.a,{content:"openledger.deposit_details"})),s.a.createElement("th",null,s.a.createElement(u.a,{content:"openledger.status"})))),s.a.createElement("tbody",null,i))}else n=s.a.createElement(u.a,{component:"p",content:"openledger.deposit_none"});var o=null;if("error"===this.state.current_status)o=s.a.createElement("div",{className:"content-block"},s.a.createElement("button",{className:"button outline",onClick:this.onShowOpenLedgerTransactionHistory.bind(this)},s.a.createElement(u.a,{content:"openledger.retry"})),s.a.createElement("p",null,this.state.error));else if("loading"===this.state.current_status)o=s.a.createElement("div",{className:"content-block"},s.a.createElement("button",{className:"button outline",onClick:this.onShowOpenLedgerTransactionHistory.bind(this),disabled:"true"},s.a.createElement(u.a,{content:"openledger.show_transaction_history"})),s.a.createElement(u.a,{component:"p",content:"openledger.loading"}));else{var r="never_loaded"===this.state.current_status?s.a.createElement(u.a,{content:"openledger.show_transaction_history"}):s.a.createElement(u.a,{content:"openledger.refresh_transaction_history"});o=s.a.createElement("div",{className:"content-block"},s.a.createElement("br",null),s.a.createElement(u.a,{component:"h4",content:"openledger.header_transaction_history"}),s.a.createElement("button",{className:"button outline",onClick:this.onShowOpenLedgerTransactionHistory.bind(this)},r),e,n)}return o}}]),t}();ne.propTypes={rpc_url:N.a.string,account:p.a.ChainAccount};Object(d.a)(ne),a(843);var se=a(68),ie=a(14),oe=(a(844),a(86)),re=a(88),le=a(85),ce=new le.a(""),ue={},pe=1e4;function de(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return 1==t?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return me(e,E.d.BASE+E.d.DEPOSIT_RECORD_LIST,t)}(e,a):2==t?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return me(e,E.d.BASE+E.d.WITHDRAW_RECORD_LIST,t)}(e,a):new Promise(function(e){return e()})}function me(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return-1==a?he(e,t,pe):0==a?function(e,t){e.requestChannel||(e.requestChannel=0);e.version||(e.version="1.0");e.timestamp||(e.timestamp=(new Date).getTime());e.outerChannel||(e.outerChannel="Bitshares");var a=JSON.stringify(e);if(ue[a])return;ue[a]=!0,new Promise(function(e,n){fetch(t,{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:a}).then(function(t){t.json().then(function(t){delete ue[a],0!==t.code&&(console.log(t),n({code:t.code,message:t.message})),e(t.data)}).catch(function(e){delete ue[a],n({code:-1,message:e.message})})})})}(e,t):he(e,t,a)}function he(e,t,a){e.requestChannel||(e.requestChannel=0),e.version||(e.version="1.0"),e.timestamp||(e.timestamp=(new Date).getTime()),e.outerChannel||(e.outerChannel="Bitshares");var n=JSON.stringify(e);if(!ue[n])return ue[n]=!0,Promise.race([new Promise(function(e,a){fetch(t,{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:n}).then(function(t){t.json().then(function(t){delete ue[n],0!==t.code&&(console.log(t),a({code:t.code,message:t.message})),e(t.data)}).catch(function(e){delete ue[n],a({code:-1,message:e.message})})})}),new Promise(function(e,t){setTimeout(function(){t({code:-2,message:"Request timeout."})},a)})])}var _e={has:function(e){return ce.has("gdex_history_address_"+e)},set:function(e){var t=e.wallet,a=e.addresses;ce.set("gdex_history_address_"+t,a)},get:function(e){return ce.get("gdex_history_address_"+e,[])},setLast:function(e){var t=e.wallet,a=e.address;ce.set("gdex_history_address_last_"+t,a)},getLast:function(e){return ce.get("gdex_history_address_last_"+e,"")}},fe=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ye=new le.a("__gdex__user_"),ge=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.current_gdex_address_cache_version_string="1",this.day=86400}return fe(e,[{key:"getUserInfo",value:function(e){var t=ye.get(e,null);if(!t)return null;var a=Math.floor((new Date).getTime()/1e3);return Math.abs(t.ctime-a)>this.day?(ye.remove(e),null):t}},{key:"cacheUserInfo",value:function(e,t,a){var n=ye.get(e,{});n!={}&&(n={user_id:t,status:a,ctime:Math.floor((new Date).getTime()/1e3)},ye.set(e,n))}},{key:"delUserInfo",value:function(e){ye.has(e)&&ye.del(e)}},{key:"getIndexForDepositKey",value:function(e,t,a){return[this.current_gdex_address_cache_version_string,e,t,a].reduce(function(e,t){return e.concat("[",t,"]")},"")}},{key:"getCachedInputAddress",value:function(e,t,a){var n=this.getIndexForDepositKey(e,t,a),s=ye.get("deposit_keys",{})[n]||null;if(s){if(s.address){var i=Math.floor((new Date).getTime()/1e3);return Math.abs(s.ctime-i)>this.day?(this.clearInputAddress(e,t,a),null):s}return null}}},{key:"cacheInputAddress",value:function(e,t,a,n,s){var i=this.getIndexForDepositKey(e,t,a),o=ye.get("deposit_keys",{});o[i]={address:n,memo:s,ctime:Math.floor((new Date).getTime()/1e3)},ye.set("deposit_keys",o)}},{key:"clearInputAddress",value:function(e,t,a){var n=this.getIndexForDepositKey(e,t,a),s=ye.get("deposit_keys",null);s&&s[n]&&(s[n]={address:null,memo:null,ctime:null},ye.set("deposit_keys",s))}}]),e}(),ve=a(217),we=a.n(ve),be=a(92),Ee=a(251),ke=a.n(Ee),Ce=a(41),Se=a(19),Ae=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ne=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={withdraw_amount:a.props.amount_to_withdraw,withdraw_address:_e.getLast(e.output_coin_name),withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null,options_is_valid:!1,withdraw_address_selected:_e.getLast(e.output_coin_name),memo:"",withdraw_address_first:!0,empty_withdraw_value:!1,below_minumum_withdraw_value:!1,precision_error:!1,memo_error:!1,memo_length_error:!1,from_account:e.account,fee_asset_id:"1.3.0",feeStatus:{},withdraw_address_error_code:null,withdraw_address_error_message:null},a._validateAddress(a.state.withdraw_address,e),a._checkBalance=a._checkBalance.bind(a),a._updateFee=Object(be.a)(a._updateFee.bind(a),250),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Ae(t,[{key:"componentWillMount",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:"componentWillUnmount",value:function(){this.unMounted=!0}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.output_coin_name!=this.props.output_coin_name&&this.setState({withdraw_address:_e.getLast(e.output_coin_name),withdraw_address_selected:_e.getLast(e.output_coin_name)}),e.account!==this.state.from_account&&e.account!==this.props.account&&this.setState({from_account:e.account,feeStatus:{},fee_asset_id:"1.3.0",feeAmount:new Se.a({amount:0})},function(){t._updateFee(),t._checkFeeStatus()})}},{key:"_assembleMemo",value:function(){var e=this,t=this.props.memo_rule,a="";try{if(t)return t.split(";").forEach(function(t){switch(t[0]){case"C":a+=t.slice(2);break;case"D":a+=e.state.withdraw_address;break;case"B":a+=t.slice(2);break;case"S":a+=e.state.memo}}),a.length>100?(this.setState({memo_length_error:!0}),null):(this.setState({memo_length_error:!1}),this.setState({memo_error:!1}),a)}catch(e){console.log(e)}return this.setState({memo_error:!0}),null}},{key:"_updateFee",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.fee_asset_id,n=t.from_account,s=this._getAvailableAssets(t).fee_asset_types;if(1===s.length&&s[0]!==a&&(a=s[0]),!n)return null;Object(Ce.b)({accountID:n.get("id"),feeID:a,options:["price_per_kbyte"],data:{type:"memo",content:this._assembleMemo()}}).then(function(t){var a=t.fee,n=t.hasBalance,s=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:a,hasBalance:n,hasPoolBalance:s,error:!n||!s},e._checkBalance)})}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.from_account;if(a){var n=this._getAvailableAssets(t).fee_asset_types,s={},i=[];n.forEach(function(n){i.push(Object(Ce.b)({accountID:a.get("id"),feeID:n,options:["price_per_kbyte"],data:{type:"memo",content:e.props.output_coin_name+":"+t.withdraw_address+(t.memo?":"+t.memo:"")}}))}),Promise.all(i).then(function(a){n.forEach(function(e,t){s[e]=a[t]}),l.a.are_equal_shallow(t.feeStatus,s)||e.setState({feeStatus:s}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:"onMemoChanged",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:"onWithdrawAmountChange",value:function(e){var t=e.amount;this.setState({withdraw_amount:t,empty_withdraw_value:void 0!==t&&!parseFloat(t)},this._checkBalance)}},{key:"onSelectChanged",value:function(e){var t=_e.get(this.props.output_coin_symbol)[e];_e.setLast({wallet:this.props.output_coin_symbol,address:t}),this.setState({withdraw_address_selected:t,options_is_valid:!1,withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:"onWithdrawAddressChanged",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_selected:t,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:"_validateAddress",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.address?me(e,E.d.BASE+E.d.CHECK_WITHDRAY_ADDRESS,t):new Promise(function(e){return e()})})({assetId:a.output_coin_id,assetName:a.output_coin_name,address:e}).then(function(e){t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:e.valid,withdraw_address_error_code:null,withdraw_address_error_message:null})}).catch(function(e){var a=e.message;e.code<0&&(a="System error: please try again later"),t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:null,withdraw_address_error_code:e.code,withdraw_address_error_message:a})})}},{key:"_checkPrecision",value:function(){var e=this.state.withdraw_amount,t=this.props.output_coin_precision;"undefined"!==t&&("string"!=typeof e&&(e=e.toString()),-1!==(e=e.trim()).indexOf(".")&&e.length-e.indexOf(".")-1>t?this.setState({precision_error:!0}):this.setState({precision_error:!1}))}},{key:"_checkBalance",value:function(){var e=this.state,t=e.feeAmount,a=e.withdraw_amount,n=this.props,s=n.asset,i=n.balance,o=n.minWithdrawAmount;if(i){if(t){var r=Object(Ce.a)(a,s,t,i);if(null!==r){if(this.setState({balanceError:!r}),"string"==typeof a&&(a=parseFloat(String.prototype.replace.call(a,/,/g,""))),"string"==typeof o&&(o=parseFloat(String.prototype.replace.call(o,/,/g,""))),!(a<o))return this.setState({below_minumum_withdraw_value:!1}),this._checkPrecision(),r;this.setState({below_minumum_withdraw_value:!0})}}}else this.setState({balanceError:!0})}},{key:"onSubmit",value:function(){if(!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&null!==this.state.withdraw_amount)if(this.state.withdraw_address_is_valid)if(parseFloat(this.state.withdraw_amount)>0){if(_e.has(this.props.output_coin_symbol)){var e=_e.get(this.props.output_coin_symbol);-1==e.indexOf(this.state.withdraw_address)&&(e.push(this.state.withdraw_address),_e.set({wallet:this.props.output_coin_symbol,addresses:e}))}else{var t=[];t.push(this.state.withdraw_address),_e.set({wallet:this.props.output_coin_symbol,addresses:t})}_e.setLast({wallet:this.props.output_coin_symbol,address:this.state.withdraw_address});var a=this.props.asset,n=this.state.feeAmount,s=parseFloat(String.prototype.replace.call(this.state.withdraw_amount,/,/g,"")),i=new Se.a({asset_id:a.get("id"),precision:a.get("precision"),real:s});K.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),i.getAmount(),a.get("id"),this._assembleMemo(),null,n?n.asset_id:"1.3.0"),this.setState({empty_withdraw_value:!1})}else this.setState({empty_withdraw_value:!0});else y.a.publish(this.getWithdrawModalId(),"open")}},{key:"onSubmitConfirmation",value:function(){if(y.a.publish(this.getWithdrawModalId(),"close"),_e.has(this.props.output_coin_symbol)){var e=_e.get(this.props.output_coin_symbol);-1==e.indexOf(this.state.withdraw_address)&&(e.push(this.state.withdraw_address),_e.set({wallet:this.props.output_coin_symbol,addresses:e}))}else{var t=[];t.push(this.state.withdraw_address),_e.set({wallet:this.props.output_coin_symbol,addresses:t})}_e.setLast({wallet:this.props.output_coin_symbol,address:this.state.withdraw_address});var a=this.props.asset,n=l.a.get_asset_precision(a.get("precision")),s=String.prototype.replace.call(this.state.withdraw_amount,/,/g,""),i=this.state.feeAmount;K.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),parseInt(s*n,10),a.get("id"),this._assembleMemo(),null,i?i.asset_id:"1.3.0")}},{key:"onDropDownList",value:function(){_e.has(this.props.output_coin_symbol)&&(!1===this.state.options_is_valid&&(this.setState({options_is_valid:!0}),this.setState({withdraw_address_first:!1})),!0===this.state.options_is_valid&&this.setState({options_is_valid:!1}))}},{key:"getWithdrawModalId",value:function(){return"confirmation"}},{key:"onAccountBalance",value:function(){var e=this.state.feeAmount;if(Object.keys(this.props.account.get("balances").toJS()).includes(this.props.asset.get("id"))){var t=new Se.a({amount:this.props.balance.get("balance"),asset_id:this.props.asset.get("id"),precision:this.props.asset.get("precision")});t.asset_id===e.asset_id&&t.minus(e),this.setState({withdraw_amount:t.getAmount({real:!0}),empty_withdraw_value:!1},this._checkBalance)}}},{key:"setNestedRef",value:function(e){this.nestedRef=e}},{key:"onFeeChanged",value:function(e){var t=e.asset;this.setState({fee_asset_id:t.get("id")},this._updateFee)}},{key:"_getAvailableAssets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.from_account,a=e.feeStatus;var n=[];if(!t||!t.get("balances"))return{fee_asset_types:n};var s=e.from_account.get("balances").toJS();for(var i in n=Object.keys(s).sort(l.a.sortID),s){var o=m.b.getObject(i),r=m.b.getObject(s[i]);if(r&&0===r.get("balance")&&-1!==n.indexOf(i)&&n.splice(n.indexOf(i),1),o){var c=!1;try{c=new Se.f({base:new Se.a(o.getIn(["options","core_exchange_rate","base"]).toJS()),quote:new Se.a(o.getIn(["options","core_exchange_rate","quote"]).toJS())}).isValid()}catch(e){c=!1}"1.3.0"===o.get("id")||c||n.splice(n.indexOf(i),1)}}return{fee_asset_types:n=n.filter(function(e){return(void 0===a[t=e]||a[t]&&a[t].hasPoolBalance)&&function(e){return void 0===a[e]||a[e]&&a[e].hasBalance}(e);var t})}}},{key:"render",value:function(){var e=this.state,t=e.withdraw_address_selected,a=e.memo,n=_e.get(this.props.output_coin_symbol),i=null,o=this.props.account.get("balances").toJS(),r=Object.keys(o),l=this.getWithdrawModalId(),c=null,p=null,d=null;this.state.options_is_valid&&(p=s.a.createElement("div",{className:n.length?"blocktrades-options":"blocktrades-disabled-options"},n.map(function(e,t){return s.a.createElement("a",{key:t,onClick:this.onSelectChanged.bind(this,t)},e)},this))),!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&(this.state.withdraw_address_is_valid||(c=this.state.withdraw_address_error_code?s.a.createElement("div",{className:"has-error",style:{paddingTop:10}},this.state.withdraw_address_error_code,":"," ",this.state.withdraw_address_error_message):s.a.createElement("div",{className:"has-error",style:{paddingTop:10}},s.a.createElement(u.a,{content:"gateway.valid_address",coin_type:this.props.output_coin_name})),d=s.a.createElement(ke.a,{id:l,overlay:!0},s.a.createElement(M.a,{close:l},s.a.createElement("a",{href:"#",className:"close-button"},"×")),s.a.createElement("br",null),s.a.createElement("label",null,s.a.createElement(u.a,{content:"modal.confirmation.title"})),s.a.createElement("br",null),s.a.createElement("div",{className:"content-block"},s.a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmitConfirmation.bind(this),value:S.a.translate("modal.confirmation.accept")}),s.a.createElement(M.a,{close:l},s.a.createElement("a",{className:"secondary button"},s.a.createElement(u.a,{content:"modal.confirmation.cancel"})))))));var m=1,h=null;this.props.output_supports_memos&&(h=s.a.createElement("div",{className:"content-block"},s.a.createElement("label",null,s.a.createElement(u.a,{component:"span",content:"transfer.memo"})),s.a.createElement("textarea",{rows:"3",value:a,tabIndex:m++,onChange:this.onMemoChanged.bind(this)}),this.state.memo_error?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(u.a,{content:"transfer.errors.memo_error"})):null,this.state.memo_length_error?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(u.a,{content:"transfer.errors.memo_length_error"})):null));var _=this._getAvailableAssets().fee_asset_types;if(r.length>0){var f=this.props.asset.get("id");if(f){var y=o[f];i=s.a.createElement("span",{style:{borderBottom:"#A09F9F 1px dotted",cursor:"pointer"}},s.a.createElement(u.a,{component:"span",content:"transfer.available"})," : ",s.a.createElement("span",{className:"set-cursor",onClick:this.onAccountBalance.bind(this)},y?s.a.createElement(L.a,{balance:o[f]}):0))}else i="No funds"}else i="No funds";return s.a.createElement("form",{className:"grid-block vertical full-width-content"},s.a.createElement("div",{className:"grid-container"},s.a.createElement("div",{className:"content-block"},s.a.createElement("h3",null,s.a.createElement(u.a,{content:"gateway.withdraw_coin",coin:this.props.output_coin_symbol,symbol:this.props.output_coin_name}))),s.a.createElement("div",{className:"content-block"},s.a.createElement(U.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.asset.get("id"),assets:[this.props.asset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:i}),this.state.empty_withdraw_value?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(u.a,{content:"transfer.errors.valid"})):null,this.state.balanceError?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(u.a,{content:"transfer.errors.insufficient"})):null,this.state.below_minumum_withdraw_value?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(u.a,{content:"transfer.errors.minimum_amount",amount:this.props.minWithdrawAmount,symbol:this.props.asset.get("symbol")})):null,this.state.precision_error?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(u.a,{content:"transfer.errors.precision",precision:this.props.output_coin_precision})):null),this.state.feeAmount?s.a.createElement("div",{className:"content-block gate_fee"},s.a.createElement(U.a,{refCallback:this.setNestedRef.bind(this),label:"transfer.fee",disabled:!0,amount:this.state.feeAmount.getAmount({real:!0}),onChange:this.onFeeChanged.bind(this),asset:this.state.feeAmount.asset_id,assets:_,tabIndex:m++}),this.state.hasBalance?null:s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(u.a,{content:"transfer.errors.noFeeBalance"})),this.state.hasPoolBalance?null:s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(u.a,{content:"transfer.errors.noPoolBalance"}))):null,this.props.gateFee?s.a.createElement("div",{className:"amount-selector right-selector",style:{paddingBottom:20}},s.a.createElement("label",{className:"left-label"},s.a.createElement(u.a,{content:"gateway.fee"})),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("input",{type:"text",disabled:!0,value:this.props.gateFee}),s.a.createElement("div",{className:"form-label select floating-dropdown"},s.a.createElement("div",{className:"dropdown-wrapper inactive"},s.a.createElement("div",null,this.props.output_coin_symbol))))):null,s.a.createElement("div",{className:"content-block"},s.a.createElement("label",{className:"left-label"},s.a.createElement(u.a,{component:"span",content:"modal.withdraw.address"})),s.a.createElement("div",{className:"blocktrades-select-dropdown"},s.a.createElement("div",{className:"inline-label"},s.a.createElement("input",{type:"text",value:t,tabIndex:"4",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:"off"}),s.a.createElement("span",{onClick:this.onDropDownList.bind(this)},"▼"))),s.a.createElement("div",{className:"blocktrades-position-options"},p),c),h,s.a.createElement("div",{className:"button-group"},s.a.createElement("div",{onClick:this.onSubmit.bind(this),className:"button"+(this.state.below_minumum_withdraw_value||this.state.memo_error||this.state.memo_length_error||this.state.error||this.state.balanceError||this.state.precision_error?" disabled":"")},s.a.createElement(u.a,{content:"modal.withdraw.submit"})),s.a.createElement(M.a,{close:this.props.modal_id},s.a.createElement("div",{className:"button"},s.a.createElement(u.a,{content:"account.perm.cancel"})))),d))}}]),t}();Ne.propTypes={account:p.a.ChainAccount.isRequired,issuer:p.a.ChainAccount.isRequired,asset:p.a.ChainAsset.isRequired,memo_rule:N.a.string.isRequired,balance:p.a.ChainObject,output_supports_memos:N.a.bool.isRequired};var Oe=Object(d.a)(Ne),Te=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var De=function(e){function t(){je(this,t);var e=xe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={receive_address:null,isAvailable:!0,qrcode:""},e.deposit_address_cache=new ge,e._copy=e._copy.bind(e),document.addEventListener("copy",e._copy),e}return Ie(t,s.a.Component),Te(t,[{key:"getDepositAddress",value:function(){this._getDepositAddress(this.props.user_id,this.props.account.get("name"),this.props.coin,this.props.action)}},{key:"_getDepositAddress",value:function(e,t,a,n){if("deposit"==n){var s=this.deposit_address_cache.getCachedInputAddress(t,a.outerSymbol,a.innerSymbol);if(s&&s!=this.state.receive_address)this.setState({receive_address:s});else{var i=this;(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return me(e,E.d.BASE+E.d.GET_DEPOSIT_ADDRESS,t)})({btsAssetId:a.innerAssetId,outAssetId:a.outerAssetId,uid:e,userAccount:t}).then(function(e){if(e.address&&e.address.address){var n={address:e.address.address,memo:e.address.memo};i.deposit_address_cache.cacheInputAddress(t,a.outerSymbol,a.innerSymbol,n.address,n.memo),i.setState({receive_address:n})}else i.setState({receive_address:null})}).catch(function(e){i.setState({receive_address:null}),console.log(e)})}}}},{key:"componentWillMount",value:function(){this.getDepositAddress()}},{key:"componentWillReceiveProps",value:function(e){e.user_id===this.props.user_id&&e.action===this.props.action&&e.coin==this.props.coin||this._getDepositAddress(e.user_id,e.account.get("name"),e.coin,e.action)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("copy",this._copy)}},{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.issuer_account.get("name")+"_"+this.props.coin.innerSymbol}},{key:"onWithdraw",value:function(){y.a.publish(this.getWithdrawModalId(),"open")}},{key:"onShowQrcode",value:function(e){this.setState({qrcode:e},function(){return y.a.publish("qrcode","open")})}},{key:"_copy",value:function(e){try{this.state.clipboardText&&e.clipboardData.setData("text/plain",this.state.clipboardText),e.preventDefault()}catch(e){console.error(e)}}},{key:"toClipboard",value:function(e){try{this.setState({clipboardText:e},function(){document.execCommand("copy")})}catch(e){console.error(e)}}},{key:"render",value:function(){var e=s.a.createElement("div",{style:{display:"none",minHeight:150}});if(!this.props.account||!this.props.issuer_account||!this.props.coin)return e;var t=this.props,a=t.coin,n=t.btsCoin;if(!n)return e;var i=this.state.receive_address,o=this.state.qrcode,r=this.getWithdrawModalId(),l=null,c="",p="",d=a.outerSymbol+":";"deposit"===this.props.action&&(i&&(l=s.a.createElement("span",null,i.address),c=i.address,i.memo&&(s.a.createElement("span",null,i.memo),p=i.memo)),d="");var m=null,h=this.props.account.get("balances");return h&&(m=h.toJS()[n.get("id")]),"deposit"===this.props.action?s.a.createElement("div",{className:"Blocktrades__gateway grid-block no-padding no-margin"},s.a.createElement("div",{className:"small-12 medium-5"},s.a.createElement(u.a,{component:"h4",content:"gateway.deposit_summary"}),s.a.createElement("div",{className:"small-12 medium-10"},s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement(u.a,{component:"td",content:"gateway.asset_to_deposit"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},a.outerSymbol)),s.a.createElement("tr",null,s.a.createElement(u.a,{component:"td",content:"gateway.asset_to_receive"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},s.a.createElement(v.a,{name:a.innerSymbol,replace:!1}))),s.a.createElement("tr",null,s.a.createElement(u.a,{component:"td",content:"gateway.intermediate"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},s.a.createElement(w.a,{account:this.props.issuer_account.get("id")}))),s.a.createElement("tr",null,s.a.createElement(u.a,{component:"td",content:"gateway.your_account"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},s.a.createElement(w.a,{account:this.props.account.get("id")}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(u.a,{content:"gateway.balance"}),":"),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},s.a.createElement(g.a,{account:this.props.account.get("name"),asset:a.innerSymbol,replace:!1}))))))),s.a.createElement("div",{className:"small-12 medium-7"},s.a.createElement(u.a,{component:"h4",content:"gateway.deposit_inst"}),s.a.createElement("label",{className:"left-label"},s.a.createElement(u.a,{content:"gateway.deposit_to",asset:a.outerSymbol}),":"),s.a.createElement("p",{style:{color:"red"}},s.a.createElement(u.a,{content:"gateway.deposit_warning",asset:a.outerSymbol})),p?s.a.createElement("p",{style:{color:"red"}},s.a.createElement(u.a,{content:"gateway.deposit_warning_memo",asset:a.outerSymbol})):null,s.a.createElement("div",null,s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(u.a,{content:"gateway.address"}),":"),s.a.createElement("td",null,l),s.a.createElement("td",null,s.a.createElement("div",{style:{width:"125px"},className:"button",onClick:this.toClipboard.bind(this,c)},s.a.createElement(u.a,{content:"transfer.copy_address"}))),s.a.createElement("td",null,s.a.createElement("div",{className:"button",onClick:this.onShowQrcode.bind(this,c)},s.a.createElement(u.a,{content:"modal.qrcode.label"})))),p?s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(u.a,{content:"gateway.memo"}),":"),s.a.createElement("td",null,p),s.a.createElement("td",null,s.a.createElement("div",{style:{width:"125px"},className:"button",onClick:this.toClipboard.bind(this,p)},s.a.createElement(u.a,{content:"transfer.copy_memo"}))),s.a.createElement("td",null,s.a.createElement("div",{className:"button",onClick:this.onShowQrcode.bind(this,p)},s.a.createElement(u.a,{content:"modal.qrcode.label"})))):null)),s.a.createElement(_.a,{id:"qrcode",overlay:!0},s.a.createElement(Pe,{text:o}))))):s.a.createElement("div",{className:"Blocktrades__gateway grid-block no-padding no-margin"},s.a.createElement("div",{className:"small-12 medium-5"},s.a.createElement(u.a,{component:"h4",content:"gateway.withdraw_summary"}),s.a.createElement("div",{className:"small-12 medium-10"},s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement(u.a,{component:"td",content:"gateway.asset_to_withdraw"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},s.a.createElement(v.a,{name:a.innerSymbol,replace:!1}))),s.a.createElement("tr",null,s.a.createElement(u.a,{component:"td",content:"gateway.asset_to_receive"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},a.outerSymbol)),s.a.createElement("tr",null,s.a.createElement(u.a,{component:"td",content:"gateway.intermediate"}),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},s.a.createElement(w.a,{account:this.props.issuer_account.get("id")}))),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(u.a,{content:"gateway.balance"}),":"),s.a.createElement("td",{style:{fontWeight:"bold",color:"#049cce",textAlign:"right"}},s.a.createElement(g.a,{account:this.props.account.get("name"),asset:a.innerSymbol,replace:!1}))))))),s.a.createElement("div",{className:"small-12 medium-7"},s.a.createElement(u.a,{component:"h4",content:"gateway.withdraw_inst"}),s.a.createElement("label",{className:"left-label"},s.a.createElement(u.a,{content:"gateway.withdraw_to",asset:this.props.deposit_asset}),":"),s.a.createElement("div",{className:"button-group",style:{paddingTop:20}},s.a.createElement("button",{className:"button success",style:{fontSize:"1.3rem"},onClick:this.onWithdraw.bind(this)},s.a.createElement(u.a,{content:"gateway.withdraw_now"})," "))),s.a.createElement(_.a,{id:r,overlay:!0},s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(Oe,{account:this.props.account.get("name"),issuer:this.props.issuer_account.get("name"),asset:a.innerSymbol,output_coin_name:a.outerAssetName,gateFee:a.gateFee,output_coin_id:a.outerAssetId,output_coin_symbol:a.outerSymbol,output_supports_memos:1==a.needMemo,minWithdrawAmount:a.minTransactionAmount,output_coin_precision:a.relationPrecision,memo_prefix:d,memo_rule:this.props.memo_rule,modal_id:r,balance:m}))))}}]),t}();De.propTypes={account:p.a.ChainAccount,issuer_account:p.a.ChainAccount,gateway:N.a.string,btsCoin:p.a.ChainAsset,memo_rule:N.a.string},De.defaultProps={autosubscribe:!1};var Pe=function(e){function t(e){return je(this,t),xe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return Ie(t,s.a.Component),Te(t,[{key:"render",value:function(){var e=this.props.text;return s.a.createElement("div",{className:"small-12",style:{textAlign:"center"}},s.a.createElement(we.a,{size:200,value:e}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("label",null,e))}}]),t}(),We=Object(d.a)(De),Be=a(12),qe=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Re={1:"confirming",2:"waiting",3:"transfering",4:"success",5:"fail"},Fe={1:"confirming",2:"auditing",3:"audited",4:"refused",5:"transfering",6:"success",7:"fail"},Me=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={headerHeight:85,pageNum:0,totalNum:0,nextPageEnabled:!1,allData:{},historyStatusType:1==e.recordType?"deposit_history_status":"withdraw_history_status",historyStatusValue:1==e.recordType?Re:Fe},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),qe(t,[{key:"componentWillMount",value:function(){this.getTransactionHistory()}},{key:"componentWillReceiveProps",value:function(e){this.props.recordType==e.recordType&&this.props.assetId==e.assetId&&this.props.assetName==e.assetName&&this.props.userId==e.userId&&this.props.userAccount==e.userAccount||this._getTransactionHistory(e.userId,e.assetId,e.assetName,e.recordType,e.userAccount,!0)}},{key:"shouldComponentUpdate",value:function(e,t){return!l.a.are_equal_shallow(this.props.userId,e.userId)||(this.state.allData!=t.allData||this.state.pageNum!=t.pageNum)}},{key:"_getTransactionHistory",value:function(e,t,a,n,s){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=this.props.pageSize,r=this.state,l=r.pageNum,c=r.allData,u=r.historyStatusValue,p=r.historyStatusType;1==i?(l=1,c={},p=1==n?"deposit_history_status":"withdraw_history_status",u=1==n?Re:Fe):l+=1;var d=this;de({uid:e,assetId:t,pageNum:l,pageSize:o,userAccount:s},n).then(function(e){e.records&&(e.records.forEach(function(e){c[e.txid]={txid:e.txid,amount:e.amount,time:e.ctime,unixtime:Date.parse(e.ctime),status:["gateway",p,u[e.status]].join("."),failReason:e.failReason,assetName:a}}),d.setState({totalNum:e.total,nextPageEnabled:e.total>l*o,allData:c,pageNum:l,historyStatusType:p,historyStatusValue:u}))}).catch(function(){d.setState({totalNum:0,nextPageEnabled:!1,allData:{},pageNum:0})})}},{key:"getTransactionHistory",value:function(){var e=this.props,t=e.userId,a=e.assetId,n=e.assetName,s=e.recordType,i=e.userAccount;this._getTransactionHistory(t,a,n,s,i,!1)}},{key:"render",value:function(){var e=this.props,t=e.assetName,a=e.compactView,n=e.style,i=e.maxHeight,o=this.state,r=o.headerHeight,l=o.allData,c=[];Object.keys(l).forEach(function(e){c.push(l[e])}),c.sort(function(e,t){return t.unixtime-e.unixtime}),(n=n||{}).width="100%",n.height="100%",l.length;var p=c.length?c.map(function(e){return s.a.createElement("tr",{key:e.txid},s.a.createElement("td",{style:{textAlign:"left"},className:"left-td column-hide-tiny"},s.a.createElement(u.a,{content:e.status})),s.a.createElement("td",{style:{padding:"8px 5px",textAlign:"left",fontSize:14}},s.a.createElement(u.a,{content:"gateway.transaction_history_info",amount:e.amount,assetName:t,txid:e.txid})),s.a.createElement("td",null,e.time))}):[s.a.createElement("tr",{key:"no_recent"},s.a.createElement("td",{colSpan:a?"2":"3"},s.a.createElement(u.a,{content:"operation.no_recent"})))];return p.push(s.a.createElement("tr",{className:"total-value",key:"total_value"},s.a.createElement("td",{className:"column-hide-tiny"}),s.a.createElement("td",null),s.a.createElement("td",{style:{textAlign:"center"}}," ",this.state.nextPageEnabled?s.a.createElement("a",{onClick:this.getTransactionHistory.bind(this)},s.a.createElement(Be.a,{name:"chevron-down",title:"icons.chevron_down.transactions",className:"icon-14px"})):null))),s.a.createElement("div",{className:"recent-transactions no-overflow",style:n},s.a.createElement("div",{className:"generic-bordered-box"},this.props.dashboard?null:s.a.createElement("div",{ref:"header"},s.a.createElement("div",{className:"block-content-header"},s.a.createElement("span",null,this.props.title?this.props.title:s.a.createElement(u.a,{content:"account.recent"})))),s.a.createElement("div",{className:"box-content grid-block no-margin",style:this.props.fullHeight?null:{maxHeight:i-r},ref:"transactions"},s.a.createElement("table",{className:"table"+(a?" compact":"")+(this.props.dashboard?" dashboard-table":"")},s.a.createElement("thead",null,s.a.createElement("tr",{key:"history_header"},s.a.createElement("th",null,s.a.createElement(u.a,{content:"gateway.status"})),s.a.createElement("th",null,s.a.createElement(u.a,{content:"gateway.info"})),s.a.createElement("th",null,s.a.createElement(u.a,{content:"gateway.time"})))),s.a.createElement("tbody",null,p)))))}}]),t}();Me.propTypes={compactView:N.a.bool,maxHeight:N.a.number,fullHeight:N.a.bool,userId:N.a.number,assetId:N.a.number,assetName:N.a.string,recordType:N.a.number,userAccount:N.a.string},Me.defaultProps={maxHeight:500,fullHeight:!1,pageSize:10};var Le=Me,Ue=a(55),He=a.n(Ue),Ge=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Je=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={locale:e.settings.get("locale","en")},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Ge(t,[{key:"componentDidMount",value:function(){if(this.refs.agreement){var e=this.refs.agreement;He.a.initialize(e)}}},{key:"componentDidUpdate",value:function(){if(this.refs.agreement){var e=this.refs.agreement;He.a.update(e)}}},{key:"_getAgreement",value:function(e){switch(e){case"zh":case"cn":return s.a.createElement("div",{className:"container",ref:"agreement",style:{height:"500px",overflow:"auto",position:"relative"}},s.a.createElement("h2",{style:{textAlign:"center"}},"用户服务协议"),s.a.createElement("p",null,"OBSIDIAN TECHNOLOGY CO. PTE. LTD. 是一家根据新加坡共和国法律成立的公司，GDEX是由该公司运营的本地硬币网关(以下称“GDEX”或“本网关”)，主访问入口为https://www.gdex.io，GDEX是一个在本地硬币平台为用户提供数字资产充提服务（以下称“该服务”或“服务”）的平台。为了本协议表述之方便，公司和该网关在本协议中合称使用“我们”或其他第一人称称呼。使用该服务的自然人或其他主体均为本网关的用户，本协议为表述之便利，以下使用“您”或其他第二人称。我们和您在本协议中合称为“双方”，我们或您单称为“一方”。"),s.a.createElement("p",null,"重要提示："),s.a.createElement("p",null,"我们在此特别提醒您："),s.a.createElement("p",null," ","1. 数字资产本身不由任何金融机构或公司或本网关发行；"),s.a.createElement("p",null," ","2. 数字资产市场是全新的、未经确认的，而且可能不会增长；"),s.a.createElement("p",null," ","3. 数字资产主要由投机者大量使用，零售和商业市场使用相对较少，数字资产交易存在极高风险，其全天不间断交易，没有涨跌限制，价格容易受庄家、全球政府政策的影响而大幅波动；"),s.a.createElement("p",null," ","4. 因各国法律、法规和规范性文件的制定或者修改，数字资产交易随时可能被暂停或被禁止。"),s.a.createElement("p",null,"数字资产交易有极高风险，并不适合绝大部分人士。您了解和理解此投资有可能导致部分损失或全部损失，所以您应该以能承受的损失程度来决定投资的金额。您了解和理解数字资产会产生衍生风险，所以如有任何疑问，建议先寻求理财顾问的协助。此外，除了上述提及过的风险以外，还会有未能预测的风险存在。您应慎重考虑并用清晰的判断能力去评估自己的财政状况及上述各项风险而作出任何买卖数字资产的决定，并承担由此产生的全部损失，我们对此不承担任何责任。"),s.a.createElement("p",null,"敬告您："),s.a.createElement("p",null,"1.您了解本地硬币是基于区块链的去中心化交易平台，其基础账号服务和交易撮合服务都由本地硬币平台提供。亦有其它机构或个人在本地硬币平台上发行资产及／或提供服务。您了解本网关仅作为您向本地硬币平台充提数字资产的工具。本网关只对自身发行的交易代币资产（名称以GDEX.为前缀）负责，不对本地硬币上其它机构或个人发行的资产负责，本网关不参与您的任何交易，您应自行谨慎判断确定相关数字资产及/或信息的真实性、合法性和有效性，并自行承担因此产生的责任与损失。"),s.a.createElement("p",null," ","2. 本地硬币去中心化交易系统存有风险，包括但不限于软件，硬件和互联网链结的失败，用户账户系统的安全风险等。由于我们不能控制互联网以及本地硬币平台的可靠性和可用性，我们不会对上述风险造成的用户损失承担任何责任。"),s.a.createElement("p",null," ","3. 禁止使用本网关从事洗钱、走私、商业贿赂等一切非法交易活动，若发现此类事件，本网关将采取各种可使用之手段，包括但不限于中止提供服务，通知相关权力机关等，我们不承担由此产生的所有责任并保留向相关人士追究责任的权利。"),s.a.createElement("p",null,"一、总则"),s.a.createElement("p",null," ","1.1 您在使用本网关提供的服务之前，应仔细阅读本协议，如有不理解之处或其他必要，请咨询专业律师。如您不同意本协议及/或随时对其的修改，请您立即停止使用本网关提供的服务。使用本网关的任何服务即表示您已了解并完全同意本协议各项内容，包括本网关对本协议随时所做的任何修改。"),s.a.createElement("p",null," ","1.2 使用本网关提供的服务和功能，您将被视为已阅读，理解并："),s.a.createElement("p",null," 1.2.1 接受本协议所有条款及条件的约束。"),s.a.createElement("p",null," ","1.2.2 您确认您已年满21周岁或根据不同的可适用的法律规定的具有可订立合同的法定年龄，并有充分的能力接受这些条款，并订立交易，使用本网关进行数字资产交易。"),s.a.createElement("p",null," ","1.2.3 您保证交易中涉及到的属于您的数字资产均为合法取得并所有。"),s.a.createElement("p",null," ","1.2.4 您同意您为您自身的交易或非交易行为承担全部责任和任何收益或亏损。"),s.a.createElement("p",null," ","1.2.5 您同意遵守任何有关法律的规定，就税务目的而言，包括报告任何交易利润。"),s.a.createElement("p",null," ","1.2.6 本协议只是就您与我们之间达成的权利义务关系进行约束，而并不涉及本网关用户之间或其他网关和您之间因数字资产交易而产生的法律关系及法律纠纷。"),s.a.createElement("p",null,"二、协议修订"),s.a.createElement("p",null,"我们保留不时修订本协议、并以公示的方式进行公告、不再单独通知您的权利，变更后的协议会在本协议首页标注变更时间，一经在公布，立即自动生效。您应不时浏览及关注本协议的更新变更时间及更新内容，如您不同意相关变更，应当立即停止使用本网关服务；您继续使用本网关服务，即表示您接受并同意经修订的协议的约束。"),s.a.createElement("p",null,"三、服务"),s.a.createElement("p",null,"本网关只为您提供向本地硬币平台冲入和提取数字资产的服务，本网关并不作为买家或卖家参与买卖数字资产行为本身；本网关不提供任何国家法定货币充入和提取的相关服务。"),s.a.createElement("p",null," 3.1 服务内容"),s.a.createElement("p",null," ","3.1.1 您有权通过本网关向本地硬币平台冲入或提取数字资产。"),s.a.createElement("p",null," 3.1.2 本网关承诺为您提供的其他服务。"),s.a.createElement("p",null," 3.2.服务规则"),s.a.createElement("p",null," 您承诺遵守下列本网关服务规则："),s.a.createElement("p",null," ","3.2.1 您应当遵守法律法规、规章、及政策要求的规定，保证账户中所有数字资产来源的合法性，不得在本网关或利用本网关服务从事非法或其他损害本网关或第三方权益的活动，如发送或接收任何违法、违规、侵犯他人权益的信息，发送或接收传销材料或存在其他危害的信息或言论，未经本网关授权使用或伪造本网关电子邮件题头信息等。"),s.a.createElement("p",null," ","3.2.2 您在使用本网关服务之前应充分了解本地硬币账号的使用常识，做好相应账号的备份及密码保存工作，对于本地硬币账户安全问题造成的损失，本网关不承担任何责任。"),s.a.createElement("p",null," ","3.2.3 您在使用本网关提供的服务过程中，所产生的应纳税赋，以及一切硬件、软件、服务及其它方面的费用，均由您独自承担。"),s.a.createElement("p",null," ","3.2.4 您应当遵守本网关不时发布和更新的本协议以及其他服务条款和操作规则，有权随时终止使用本网关提供的服务。"),s.a.createElement("p",null,"四、本网关的权利和义务"),s.a.createElement("p",null,"4.1 本网关有权在发现本网关上显示的任何信息存在明显错误时，对信息予以更正。"),s.a.createElement("p",null,"4.2 本网关保留随时修改、中止或终止本网关服务的权利，本网关行使修改或中止服务的权利不需事先告知您；本网关终止本网关一项或多项服务的，终止自本网关在网关上发布终止公告之日生效。"),s.a.createElement("p",null," ","4.3 本网关应当采取必要的技术手段和管理措施保障本网关的正常运行。"),s.a.createElement("p",null,"五、赔偿"),s.a.createElement("p",null," ","5.1 在任何情况下，我们对您的直接损害的赔偿责任均不会超过您从使用本网关服务产生的为期三（ 3）个月的总费用。"),s.a.createElement("p",null,"六、寻求禁令救济的权利"),s.a.createElement("p",null,"我们和您均承认普通法对违约或可能违约情况的救济措施是可能是不足以弥补我们遭受的全部损失的，故非违约方有权在违约或可能违约情况下寻求禁令救济以及普通法或衡平法允许的其他所有的补救措施。"),s.a.createElement("p",null,"七、责任限制与免责"),s.a.createElement("p",null," ","7.1 您了解并同意，在任何情况下，我们不就以下各事项承担责任："),s.a.createElement("p",null," 7.1.1 收入的损失；"),s.a.createElement("p",null," 7.1.2 交易利润或合同损失；"),s.a.createElement("p",null," 7.1.3 业务中断"),s.a.createElement("p",null," 7.1.4 预期可节省的货币的损失；"),s.a.createElement("p",null," 7.1.5 信息的损失；"),s.a.createElement("p",null," 7.1.6 机会、商誉或声誉的损失；"),s.a.createElement("p",null," 7.1.7 数据的损坏或损失；"),s.a.createElement("p",null," 7.1.8 购买替代产品或服务的成本；"),s.a.createElement("p",null," ","7.1.9 任何由于侵权（包括过失）、违约或其他任何原因产生的间接的、特殊的或附带性的损失或损害，不论这种损失或损害是否可以为我们合理预见；不论我们是否事先被告知存在此种损 失或损害的可能性。"),s.a.createElement("p",null," ","7.2 您了解并同意，我们不对因下述任一情况而导致您的任何损害赔偿承担责任："),s.a.createElement("p",null," ","7.2.1 我们有合理的理由认为您的具体交易事项可能存在重大违法或违约情形。"),s.a.createElement("p",null," ","7.2.2 我们有合理的理由认为您在本网关的行为涉嫌违法或不当。"),s.a.createElement("p",null," ","7.2.3 通过本网关服务购买或获取任何数据、信息或进行交易等行为或替代行为产生的费用及损失。"),s.a.createElement("p",null," 7.2.4 您对本网关服务的误解。"),s.a.createElement("p",null," ","7.2.5 任何非因我们的原因而引起的与本网关提供的服务有关的其它损失。"),s.a.createElement("p",null," ","7.3 我们对由于信息网络设备维护、信息网络连接故障、电脑、通讯或其他系统的故障、电力故障、天气原因、意外事故、罢工、劳动争议、暴乱、起义、骚乱、生产力或生产资料不足、火灾、洪水、风暴、爆炸、战争、银行或其他合作方原因、数字资产市场崩溃、政府行为、 司法或行政机关的命令、其他不在我们可控范围内或我们无能力控制的行为或第三方的原因而造成的不能服务或延迟服务，以及造成的您的损失，我们不承担任何责任。"),s.a.createElement("p",null," ","7.4 我们不能保证本网关包含的全部信息、程序、文本等完全安全，不受任何病毒、木马等恶意程序的干扰和破坏，故您登陆、使用本网关任何服务或下载及使用该下载的任何程序、信息、数据等均是您个人的决定并自行承担风险及可能产生的损失。"),s.a.createElement("p",null," ","7.5 我们对本网关中链接的任何第三方网关的任何信息、产品及业务及其他任何形式的不属于我们的主体的内容等不做任何保证和承诺，您如果使用第三方网关提供的任何服务、信息及产品等均为您个人决定且承担由此产生的一切责任。"),s.a.createElement("p",null," ","7.6 我们对于您使用本网关服务不做任何明示或暗示的保证，包括但不限于本网关提供服务的适用性、没有错误或疏漏、持续性、准确性、可靠性、适用于某一特定用途。同时，我们也不对本网关提供的服务所涉及的技术及信息的有效性、准确性、正确性、可靠性、质量、稳定、完整和及时性作出任何承诺和保证。是否登陆或使用本网关提供的服务是您个人的决定且自行承担风险及可能产生的损失。我们对于数字资产的市场、价值及价格等不做任何明示或暗示的保证，您理解并了解数字资产市场是不稳定的，价格和价值随时会大幅波动或崩盘，交易数字资产是您个人的自由选择及决定且自行承担风险及可能产生的损失。"),s.a.createElement("p",null," ","7.7 本协议中规定的我们的保证和承诺是由我们就本协议和本网关提供的服务的唯一保证和陈述，并取代任何其他途径和方式产生的保证和承诺，无论是书面的或口头的，明示的或暗示的。所有这些保证和陈述仅仅代表我们自身的承诺和保证，并不保证任何第三方遵守本协议中的保证和承诺。"),s.a.createElement("p",null," ","7.8 我们并不放弃本协议中未提及的在法律适用的最大范围内我们享有的限制、免除或抵销我们损害赔偿责任的任何权利。"),s.a.createElement("p",null," ","7.9 使用本网关服务即表示认可我们按照本协议中规定的规则进行的任何操作，产生的任何风险均由您承担。"),s.a.createElement("p",null,"八、知识产权"),s.a.createElement("p",null," ","8.1 本网关所包含的全部智力成果包括但不限于网关标志、数据库、网关设计、文字和图表、软件、照片、录像、音乐、声音及其前述组合，软件编译、相关源代码和软件 (包括小应用程序和脚本) 的知识产权权利均归本网关所有。您不得为商业目的复制、更改、拷贝、发送或使用前述任何材料或内容。"),s.a.createElement("p",null," ","8.2 本网关名称中包含的所有权利 (包括但不限于商誉和商标、标志) 均归公司所有。"),s.a.createElement("p",null," ","8.3 您接受本协议即视为您主动将其在本网关发表的任何形式的信息的著作权， 包括但不限于：复制权、发行权、出租权、展览权、表演权、放映权、广播权、信息网络传播权、摄制权、改编权、翻译权、汇编权 以及应当由著作权人享有的其他可转让权利无偿独家转让给本网关所有，本网关有权利就任何主体侵权单独提起诉讼并获得全部赔偿。 本协议效力及于您在本网关发布的任何受著作权法保护的作品内容， 无论该内容形成于本协议签订前还是本协议签订后。"),s.a.createElement("p",null," ","8.4 您在使用本网关服务过程中不得非法使用或处分本网关或他人的知识产权权利。您不得将已发表于本网关的信息以任何形式发布或授权其它网关（及媒体）使用。"),s.a.createElement("p",null," ","8.5 您使用本网关提供的任何服务均不视为我们向您转让任何知识产权。"),s.a.createElement("p",null,"九、可分割性"),s.a.createElement("p",null,"如本协议中的任何条款被任何有管辖权的法院认定为不可执行的，无效的或非法的，并不影响本协议的其余条款的效力。"),s.a.createElement("p",null,"十、非代理关系"),s.a.createElement("p",null,"本协议中的任何规定均不可被认为创造了、暗示了或以其他方式将我们视为您的代理人、受托人或其他代表人，本协议有其他规定的除外。"),s.a.createElement("p",null,"十一、弃权"),s.a.createElement("p",null,"我们或您任何一方对追究本协议约定的违约责任或其他责任的弃权并不能认定或解释为对其他违约责任的弃权；未行使任何权利或救济不得以任何方式被解释为对该等权利或救济的放弃。"),s.a.createElement("p",null,"十二、标题"),s.a.createElement("p",null,"所有标题仅供协议表述方便，并不用于扩大或限制该协议条款的内容或范围。"),s.a.createElement("p",null,"十三、适用法律"),s.a.createElement("p",null,"本协议全部内容均为根据新加坡共和国法律订立的合同，其成立、解释、内容及执行均适用新加坡共和国相关法律规定；任何因或与本协议约定的服务有关而产生的索赔或诉讼，都应依照新加坡共和国的法律进行管辖并加以解释和执行。为避免疑义，这一条款明确适用于任何针对我们的侵权索赔。任何针对我们或者是和我们有关的索赔或诉讼的管辖法院或诉讼地均在新加坡共和国。您无条件地获得在新加坡共和国法院进行诉讼和上诉的排他性的管辖权。您也无条件地同意与本协议款有关的争议或问题或产生的任何索赔请求和诉讼的发生地或法院均排他性得在新加坡共和国。不方便法院的原则不适用于根据本服务条款的选择的法院。"),s.a.createElement("p",null,"十四、协议的生效和解释"),s.a.createElement("p",null,"14.1 本协议于您点击本网关注册页面的同意注册并完成注册程序、获得本网关账号和密码时生效，对本网关和您均具有约束力。"),s.a.createElement("p",null,"14.2 本协议的最终解释权归本网关所有。"));default:return s.a.createElement("div",{className:"container",ref:"agreement",style:{height:"500px",overflow:"auto",position:"relative"}},s.a.createElement("h2",{style:{textAlign:"center"}},"Service Agreement"),s.a.createElement("p",null,"OBSIDIAN TECHNOLOGY CO. PTE. LTD. (hereinafter referred to as the 'Company') is a company incorporated under the laws in Singapore Republic, GDEX (hereinafter referred to as 'GDEX' or 'the Gateway') is a cryptocurrency gateway to Bitshares which is operated by the company. The main access point for GDEX is https://gdex.io, GDEX is a gateway that provide cryptocurrency deposit and withdraw service (hereinafter referred to as 'the Service') to/from Localcoin. For the convenience of wording in this Agreement, the Company and the Gateway are referred to as 'We' or other applicable forms of first person pronouns in this Agreement. All natural persons or other subjects who use the Service shall be users of the Gateway. For the convenience of wording in this Agreement, the users are referred to as 'You' or any other applicable forms of the second-person pronouns. For the convenience of wording in this Agreement, you and us are collectively referred to as 'both parties', and individually as 'one party'."),s.a.createElement("p",null,"Important reminder:"),s.a.createElement("p",null,"We hereby remind you that:"),s.a.createElement("p",null,"1. The digital assets themselves are not offered by any financial institution, corporation or the Gateway;"),s.a.createElement("p",null,"2. The digital asset market is new and unconfirmed, and will not necessarily expand;"),s.a.createElement("p",null,"3. Digital assets are primarily used by speculators, and are used relatively less on retail and commercial markets; digital asset transactions are highly risky, due to the fact that they are traded throughout 24-hour a day without limits on the rise or fall in price, and market makers and global government policies may cause major fluctuations in their prices;"),s.a.createElement("p",null,"4. Digital asset transactions may be suspended or prohibited at any time due to the enactment or modification of national laws, regulations and regulatory documents. Digital assets trading is highly risky and therefore not suitable for the vast majority of people. You acknowledge and understand that investment in digital assets may result in partial or total loss of your investment and therefore you are advised to decide the amount of your investment on the basis of your loss-bearing capacity. You acknowledge and understand that digital assets may generate derivative risks. Therefore, if you have any doubt, you are advised to seek assistance from a financial adviser first. Furthermore, aside from the above-mentioned risks, there may also be unpredictable risks. Therefore, you are advised to carefully consider and use clear judgment to assess your financial position and the abovementioned risks before making any decisions on buying and selling digital assets; any and all losses arising therefrom will be borne by you and we shall not be held liable in any manner whatsoever."),s.a.createElement("p",null,"5. You understand that Localcoin is a decentralized exchange based on blockchain, the basic account service and the trade processing service are provided by Localcoin, there are also other institutions or single persons that issue assets and/or provide service on Localcoin. You understand that the Gateway is only used for you to deposit/withdraw cryptocurrency to/from Localcoin. The Gateway only undertake the due obligations for the availability of own issued assets (with 'GDEX.' as prefix of the name), do not undertake the due obligations for the account service and the trade processing service provided by Localcoin, do not undertake the due obligations for availability of the assets issued by other institutions or single persons."," "),s.a.createElement("p",null,"6. There are risk in both Internet and Localcoin, include but not limit to failure for software, hardware to connect to Internet, security risk for Localcoin accounting system. As the availability and reliability of Internet and Localcoin are not under our control, we do not undertake obligations for the loss caused by the risks mentioned above."),s.a.createElement("p",null,"7.it is prohibited to use the Gateway for money laundering, smuggling, bribery，if any user are found relevant to these actions, the Gateway will take various actions, include but not limited to terminating the Service to the user, informing relevant authority."))}}},{key:"render",value:function(){var e=this.props.locale;return this._getAgreement(e)}}]),t}();Je.propTypes={locale:N.a.string};var Ke=Object(i.connect)(Je,{listenTo:function(){return[x.a]},getProps:function(){return{settings:x.a.getState().settings}}}),Ve=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ze=new(a(845))("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCH+QtHPKcWxdL25xL4pCuu16tKh6yPx/TFnd/8\ncSt2TC+sPuYsD0h/sy4VKNxhBb7F7U/TLXjMxNcSfPVPjPM3X2LvOlmU9LOEcJGrmlmOOiyO/kws\nyKKOhR4UyZ1NghhfHjuyDBj6V8fCL+xBZTJWsh/X61Z0wLCwOzXcQCsNJwIDAQAB\n-----END PUBLIC KEY-----"),Xe=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=e.viewSettings.get(e.provider+"Action","deposit");return a.state={coins:null,activeCoinInfo:a._getActiveCoinInfo(e,{action:n}),action:n,down:!1,isAvailable:!0,user_info:null,isAgree:!1,agreeChecked:!0,agreeNotice:!1,locale:e.viewSettings.get("locale"),intermediate:null,memo_rule:null},a.user_info_cache=new ge,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Ve(t,[{key:"_getActiveCoinInfo",value:function(e,t){var a=e.viewSettings.get("activeCoin_"+e.provider+"_"+t.action,null),n=e.viewSettings.get("activeCoinId_"+e.provider,null),s=null;s="deposit"==t.action?"BTC":"GDEX.BTC";var i=a||s,o=n||1002;return this._getWithdrawRule(o),{name:i,id:o}}},{key:"_transformCoin",value:function(e){var t=[];try{e.filter(function(e){return 0!=e.status}).forEach(function(e){var a={};1==e.type?(a.innerAssetId=e.assetId,a.innerAssetName=e.assetName,a.innerSymbol=e.assetSymbol,a.outerAssetId=e.relationId,a.outerAssetName=e.relationSymbol,a.outerSymbol=e.relationSymbol,a.status=e.withdrawStatus,a.gateFee=e.withdrawFees,a.needMemo=e.needMemo,a.minTransactionAmount=e.minWithdrawAmount,a.type=e.type,a.relationPrecision=e.relationPrecision):2==e.type?(a.innerAssetId=e.relationId,a.innerAssetName=e.relationSymbol,a.innerSymbol=e.relationSymbol,a.outerAssetId=e.assetId,a.outerAssetName=e.assetName,a.outerSymbol=e.assetSymbol,a.status=e.depositStatus,a.gateFee=e.depositFees,a.needMemo=e.needMemo,a.minTransactionAmount=e.minDepositAmount,a.type=e.type,a.relationPrecision=e.relationPrecision):a=null,a&&t.push(a)})}catch(e){console.log("Transform coin failed: ",e)}return t}},{key:"_getUserInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e||(e=this.props.account.get("name")),t||(t=this.state.isAgree),t){var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return me(e,E.d.BASE+E.d.GET_USER_INFO,t)}({userAccount:e,isAgree:t}),n=this;a.then(function(t){var a=t.user;n.setState({isAgree:!0,user_info:{user_id:a.uid,status:a.status}}),0==a.status&&a.agreeAgreement?n.user_info_cache.cacheUserInfo(e,a.uid,a.status):n.user_info_cache.delUserInfo(e)}),a.catch(function(e){console.log("Exception in fetching user info: "+e)})}}},{key:"_getCoins",value:function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.requestType||(e.requestType=0),e.assetType||(e.assetType=0),e.version||(e.version="1.1"),me(e,E.d.BASE+E.d.ASSET_LIST,t)}({userAccount:this.props.account.get("name")}),t=this;e.then(function(e){var a=t._transformCoin(e.assets);t.setState({isAvailable:!0,coins:a})},function(e){console.log("fail"+e)}),e.catch(function(e){console.log(e),t.setState({isAvailable:!1})})}},{key:"_checkIsAgree",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=this.props.account.get("name"));var t=this.user_info_cache.getUserInfo(e);if(t)this.setState({user_info:t,isAgree:!0});else{var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return me(e,E.d.BASE+E.d.USER_AGREEMENT,t)}({userAccount:e}),n=this;a.then(function(t){t.agree?(n.setState({isAgree:!0}),n._getUserInfo(e,!0)):n.setState({isAgree:!1})},function(e){console.log("fail"+e)}),a.catch(function(e){console.log(e),n.setState({isAvailable:!1})})}}},{key:"componentWillMount",value:function(){this._checkIsAgree(),this._getCoins()}},{key:"_getWithdrawAssetId",value:function(e){var t=1,a="innerSymbol";return"deposit"==this.state.action&&(t=2,a="outerSymbol"),this.state.coins.filter(function(n){return n.type==t&&n[a]==e})[0].innerAssetId}},{key:"onSelectCoin",value:function(e){var t=this.state.activeCoinInfo;t.name=e.target.value;var a=this._getWithdrawAssetId(e.target.value);t.id=a,this.setState({activeCoinInfo:t}),this._getWithdrawRule(a);var n={};n["activeCoin_"+this.props.provider+"_"+this.state.action]=e.target.value,n["activeCoinId_"+this.props.provider]=a,I.a.changeViewSetting(n)}},{key:"_getWithdrawRule",value:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return me(e,E.d.BASE+E.d.WITHDRAW_RULE,t)}({assetId:e}),a=this;t.then(function(e){var t=ze.decryptPublic(e.transferToAccount,"utf-8");a.setState({intermediate:t,memo_rule:e.memoRule})},function(e){console.log("fail"+e),a.setState({intermediate:null})}),t.catch(function(e){console.log(e),a.setState({intermediate:null})})}},{key:"changeAction",value:function(e){var t,a,n,s=this._getActiveCoinInfo(this.props,{action:e});this.setState({action:e,activeCoinInfo:s}),I.a.changeViewSetting((t={},a=this.props.provider+"Action",n=e,a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t))}},{key:"componentWillReceiveProps",value:function(e){this.props.account!=e.account&&this._checkIsAgree(e.account.get("name"))}},{key:"_updateCheck",value:function(){this.setState({agreeChecked:!this.state.agreeChecked}),this.setState({agreeNotice:!1})}},{key:"_showUserAgreement",value:function(){y.a.publish("gdex_agreement","open")}},{key:"_registerUser",value:function(){this.state.agreeChecked?this._getUserInfo(null,!0):this.setState({agreeNotice:!0})}},{key:"render",value:function(){var e=this.props.account,t=this.state,a=t.coins,n=t.activeCoinInfo,i=t.action,o=t.isAvailable,r=t.user_info,l=t.isAgree,c=t.agreeChecked,p=t.agreeNotice,d=t.intermediate,m=t.memo_rule,h="https://support.gdex.io/",f="602573197",y="https://t.me/GDEXer",g=s.a.createElement("div",null,s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(u.a,{content:"gateway.support_gdex"}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("p",null,"Help:"," ",s.a.createElement("a",{href:h,target:"_blank",rel:"noopener noreferrer"},h)),s.a.createElement("p",null,"QQ:"," ",s.a.createElement("a",{target:"_blank",href:"//shang.qq.com/wpa/qunwpa?idkey=5d192c325146762cf5a9256038fed9faef4fcace21a36882854354dd1d599f11",rel:"noopener noreferrer"},f)),s.a.createElement("p",null,"Telegram:"," ",s.a.createElement("a",{href:y,target:"_blank",rel:"noopener noreferrer"},y)));if(!l)return s.a.createElement("div",null,s.a.createElement("span",null,s.a.createElement("input",{type:"checkbox",style:{marginRight:"10px"},checked:c,onChange:this._updateCheck.bind(this)}),s.a.createElement(u.a,{className:"txtlabel",content:"gateway.agreement.hint"}),s.a.createElement("a",{onClick:this._showUserAgreement.bind(this)}," ",s.a.createElement(u.a,{className:"txtlabel",content:"gateway.agreement.name"}))),p?s.a.createElement("div",{className:"has-error",style:{paddingTop:10}},s.a.createElement(u.a,{className:"txtlabel",content:"gateway.agreement.notice"})):null,s.a.createElement("div",{className:"buttonGroup"},s.a.createElement("span",{style:{marginTop:"20px"},onClick:this._registerUser.bind(this),className:" button"},s.a.createElement(u.a,{className:"txtlabel",content:"gateway.agreement.register"}))),s.a.createElement(_.a,{id:"gdex_agreement",overlay:!0},s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(Ke,{locale:this.props.settings.get("locale","en")}))),g);if(!a&&o)return s.a.createElement(k.a,null);if(!o)return s.a.createElement("div",null,s.a.createElement(u.a,{className:"txtlabel cancel",content:"gateway.unavailable",component:"h4"}));var v=null,w=null,b=null;"deposit"==i?(w="outerAssetId",v="outerSymbol",b=2):(w="innerAssetId",v="innerSymbol",b=1);var E=(a=a.filter(function(e){return e.type==b})).map(function(e){return s.a.createElement("option",{value:e[v],key:e[v]},e[v])}).filter(function(e){return null!==e}),C=a.filter(function(e){return e[v]==n.name})[0],S=null;return C&&0==C.status?r?0!=r.status&&(S=s.a.createElement("label",{className:"left-label"},s.a.createElement(u.a,{className:"txtlabel cancel",content:"gateway.frozen",account:e.get("name"),component:"h4"}))):S=s.a.createElement("label",{className:"left-label"},s.a.createElement(u.a,{className:"txtlabel cancel",content:"gateway.user_unavailable",component:"h4"})):S=s.a.createElement("label",{className:"left-label"},s.a.createElement(u.a,{className:"txtlabel cancel",content:"gateway.asset_unavailable",asset:n.name,component:"h4"})),s.a.createElement("div",{style:this.props.style},s.a.createElement("div",{className:"grid-block no-margin vertical medium-horizontal no-padding"},s.a.createElement("div",{className:"medium-4"},s.a.createElement("div",null,s.a.createElement("label",{style:{minHeight:"2rem"},className:"left-label"},s.a.createElement(u.a,{content:"gateway.choose_"+i}),":"," "),s.a.createElement("select",{className:"external-coin-types bts-select",onChange:this.onSelectCoin.bind(this),value:n.name},E))),s.a.createElement("div",{className:"medium-6 medium-offset-1"},s.a.createElement("label",{style:{minHeight:"2rem"},className:"left-label"},s.a.createElement(u.a,{content:"gateway.gateway_text"}),":"),s.a.createElement("div",{style:{paddingBottom:15}},s.a.createElement("ul",{className:"button-group segmented no-margin"},s.a.createElement("li",{className:"deposit"===i?"is-active":""},s.a.createElement("a",{onClick:this.changeAction.bind(this,"deposit")},s.a.createElement(u.a,{content:"gateway.deposit"}))),s.a.createElement("li",{className:"withdraw"===i?"is-active":""},s.a.createElement("a",{onClick:this.changeAction.bind(this,"withdraw")},s.a.createElement(u.a,{content:"gateway.withdraw"}))))))),S||s.a.createElement("div",null,s.a.createElement("div",{style:{marginBottom:15}},s.a.createElement(We,{account:e,coin:C,issuer_account:d,user_id:r.user_id,action:this.state.action,gateway:"gdex",btsCoin:C.innerSymbol,memo_rule:m})),s.a.createElement(Le,{userId:r.user_id,userAccount:e.get("name"),assetId:C[w],assetName:C[v],compactView:!0,fullHeight:!0,recordType:"deposit"==i?1:2,filter:"transfer",title:s.a.createElement(u.a,{content:"gateway.recent_"+this.state.action})})),g)}}]),t}(),Qe=(Object(i.connect)(Xe,{listenTo:function(){return[x.a]},getProps:function(){return{viewSettings:x.a.getState().viewSettings,settings:x.a.getState().settings}}}),a(198)),Ye=a(100),Ze=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function $e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function tt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var at=function(e){function t(e){$e(this,t);var a=et(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={olService:e.viewSettings.get("olService","gateway"),rudexService:e.viewSettings.get("rudexService","gateway"),btService:e.viewSettings.get("btService","bridge"),metaService:e.viewSettings.get("metaService","bridge"),activeService:e.viewSettings.get("activeService",0)},a}return tt(t,s.a.Component),Ze(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.account!==this.props.account||e.servicesDown!==this.props.servicesDown||!l.a.are_equal_shallow(e.blockTradesBackedCoins,this.props.blockTradesBackedCoins)||!l.a.are_equal_shallow(e.openLedgerBackedCoins,this.props.openLedgerBackedCoins)||t.olService!==this.state.olService||t.rudexService!==this.state.rudexService||t.btService!==this.state.btService||t.metaService!==this.state.metaService||t.activeService!==this.state.activeService}},{key:"componentWillMount",value:function(){o.a.getFinalFeeAsset(this.props.account,"transfer")}},{key:"toggleOLService",value:function(e){this.setState({olService:e}),I.a.changeViewSetting({olService:e})}},{key:"toggleRuDEXService",value:function(e){this.setState({rudexService:e}),I.a.changeViewSetting({rudexService:e})}},{key:"toggleBTService",value:function(e){this.setState({btService:e}),I.a.changeViewSetting({btService:e})}},{key:"toggleMetaService",value:function(e){this.setState({metaService:e}),I.a.changeViewSetting({metaService:e})}},{key:"onSetService",value:function(e){this.setState({activeService:parseInt(e.target.value)}),I.a.changeViewSetting({activeService:parseInt(e.target.value)})}},{key:"renderServices",value:function(e,t){var a=[],n=this.props.account;return a.push({name:Qe.a.label,template:s.a.createElement(Qe.a,{account:n})}),a}},{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.servicesDown,i=this.state.activeService,o=this.props.openLedgerBackedCoins.map(function(e){return e}).sort(function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0}),r=this.props.rudexBackedCoins.map(function(e){return e}).sort(function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0}),l=this.renderServices(o,r),c=l.map(function(e,t){return{key:t,label:e.name}}),p=["Winex","GDEX","OPEN","RUDEX","TRADE","BITKAPITAL",Qe.a.label][i],d=n.get(p);return s.a.createElement("div",{className:"content deposit-withdraw-layout"},s.a.createElement("h2",{className:"content__heading"},S.a.translate("gateway.title")),s.a.createElement("div",{className:this.props.contained?"":"grid-content",style:{paddingTop:"2rem"}},s.a.createElement("div",{className:"grid-block vertical medium-horizontal no-margin no-padding"},s.a.createElement("div",{className:"medium-6 show-for-medium"},s.a.createElement(se.a,{path:"components/DepositWithdraw",section:"deposit-short"})),s.a.createElement("div",{className:"medium-5 medium-offset-1"},s.a.createElement(se.a,{account:a.get("name"),path:"components/DepositWithdraw",section:"receive"}))),s.a.createElement("div",null,s.a.createElement("div",{className:"grid-block vertical medium-horizontal no-margin no-padding"},s.a.createElement("div",{className:"medium-6 small-order-2 medium-order-1"},s.a.createElement(u.a,{component:"label",className:"left-label",content:"gateway.service"}),s.a.createElement(Ye.a,{options:c,selected:{key:i,label:l[i].name},onChange:function(t){return e.onSetService.bind(e)(t)}}),d?s.a.createElement(u.a,{style:{color:"red",marginBottom:"1em",display:"block"},content:"gateway.unavailable_"+p}):null),s.a.createElement("div",{className:"medium-5 medium-offset-1 small-order-1 medium-order-2",style:{paddingBottom:20}},s.a.createElement(u.a,{component:"label",className:"left-label",content:"gateway.your_account"}),s.a.createElement("div",{className:"inline-label"},s.a.createElement(re.a,{size:{height:40,width:40},account:a.get("name"),custom_image:null}),s.a.createElement("input",{type:"text",value:a.get("name"),placeholder:null,disabled:!0,onChange:function(){},onKeyDown:function(){},tabIndex:1}))))),s.a.createElement("div",{className:"grid-content no-padding",style:{paddingTop:15}},d?null:i&&l[i]?l[i].template:l[0].template)))}}]),t}();at.propTypes={account:p.a.ChainAccount.isRequired,contained:N.a.bool},at.defaultProps={contained:!1},at=Object(d.a)(at);var nt=function(e){function t(){return $e(this,t),et(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return tt(t,s.a.Component),Ze(t,[{key:"componentWillMount",value:function(){Object(r.c)()}},{key:"render",value:function(){return s.a.createElement(at,this.props)}}]),t}();t.default=Object(i.connect)(nt,{listenTo:function(){return[ie.a,x.a,oe.a]},getProps:function(){return{account:ie.a.getState().currentAccount,viewSettings:x.a.getState().viewSettings,openLedgerBackedCoins:oe.a.getState().backedCoins.get("OPEN",[]),rudexBackedCoins:oe.a.getState().backedCoins.get("RUDEX",[]),blockTradesBackedCoins:oe.a.getState().backedCoins.get("TRADE",[]),winexBackedCoins:oe.a.getState().backedCoins.get("WIN",[]),servicesDown:oe.a.getState().down||{}}}})},843:function(e,t,a){"use strict";(function(e){var t=a(92),n=a(0),s=a.n(n),i=a(1),o=a.n(i),r=a(7),l=a(13),c=a(36),u=a(21),p=a.n(u),d=a(113),m=a(362),h=a(571),_=a(5),f=a(23),y=a(33),g=a(27),v=a(41),w=a(19),b=(a(4),a(53)),E=a(2),k=a.n(E),C=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,s=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){s=!0,i=e}finally{try{!n&&r.return&&r.return()}finally{if(s)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),S=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=function(a){function n(e){N(this,n);var a=O(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return a.state={error:null,conversion_memo:null,feeStatus:{}},a._updateFee=Object(t.a)(a._updateFee.bind(a),150),a._checkFeeStatus=a._checkFeeStatus.bind(a),a._checkBalance=a._checkBalance.bind(a),a}return T(n,s.a.Component),S(n,[{key:"_getFeeID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this._getCurrentBalance(e);return e.account.get("balances").has("1.3.0")?"1.3.0":t?t.get("asset_type"):"1.3.0"}},{key:"componentWillMount",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:"componentWillUnmount",value:function(){this.unMounted=!0}},{key:"componentWillReceiveProps",value:function(e){e.amount.equals(this.props.amount)&&e.account_id===this.props.account_id||this._updateFee()}},{key:"_updateFee",value:function(){var e=this,t=this._getFeeID();Object(b.g)(this.props).then(function(a){Object(v.b)({accountID:e.props.account_id,feeID:t,options:["price_per_kbyte"],data:{type:"memo",content:a.inputMemo}}).then(function(t){var a=t.fee,n=t.hasBalance,s=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:a,hasBalance:n,hasPoolBalance:s,error:!n||!s},e._checkFeeStatus)})})}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.account;if(t){var a=Object.keys(this.props.account.get("balances").toJS());a.length||(a=["1.3.0"]);var n={},s=[];Object(b.g)(this.props).then(function(i){a.forEach(function(e){s.push(Object(v.b)({accountID:t.get("id"),feeID:e,options:["price_per_kbyte"],data:{type:"memo",content:i.inputMemo}}))}),Promise.all(s).then(function(t){e.unMounted||(a.forEach(function(e,a){n[e]=t[a]}),_.a.are_equal_shallow(e.state.feeStatus,n)||e.setState({feeStatus:n}),e._checkBalance())}).catch(function(e){console.error(e)})})}}},{key:"_getCurrentBalance",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).balance}},{key:"_checkBalance",value:function(){var e=this.state.feeAmount,t=this.props,a=t.asset,n=t.amount,s=this._getCurrentBalance();if(s&&e){var i=Object(v.a)(n.getAmount({real:!0}),a,e,s);if(null!==i)return this.setState({balanceError:!i}),i}}},{key:"onTrxIncluded",value:function(e){e.included&&e.broadcasted_transaction?(y.a.unlisten(this.onTrxIncluded),y.a.reset()):e.closed&&(y.a.unlisten(this.onTrxIncluded),y.a.reset())}},{key:"onConvert",value:function(){var t=this,a=this.props,n=a.input_coin_type,s=a.output_coin_type,i=a.amount,o=this.state.balanceError;Object(b.g)(this.props).then(function(a){if(a.inputCoinType!=n||a.outputCoinType!=s)throw new Error("unexpected reply from initiate-trade");n!=a.inputCoinType||s!=a.outputCoinType||o||(t.setState({conversion_memo:a.inputMemo}),t.setState({error:null}),f.a.transfer(t.props.account_id,"1.2.32567",i.getAmount(),t.props.asset.get("id"),a.inputMemo?new e(a.inputMemo,"utf-8"):"",null,t._getFeeID()).then(function(){y.a.unlisten(t.onTrxIncluded),y.a.listen(t.onTrxIncluded)}).catch(function(e){var a=e.message?e.message.split("\n")[1]:null;console.log("error: ",e,a),t.setState({error:a})}))}).catch(function(){t.setState({conversion_memo:null})})}},{key:"render",value:function(){var e="button disabled";return Object.keys(this.props.account_balances.toJS()).includes(this.props.asset.get("id"))&&!this.state.balanceError&&this.state.hasBalance&&this.props.amount.getAmount()>0&&(e="button"),s.a.createElement("span",null,s.a.createElement("button",{className:e,onClick:this.onConvert.bind(this)},s.a.createElement(o.a,{content:""}),s.a.createElement(o.a,{content:"gateway.convert_now"})),this.state.balanceError?s.a.createElement("div",{style:{paddingTop:15},className:"has-error"},s.a.createElement(o.a,{content:"transfer.errors.insufficient"})):null)}}]),n}();j.propTypes={balance:r.a.ChainObject,input_coin_type:k.a.string.isRequired,output_coin_type:k.a.string.isRequired,account_name:k.a.string.isRequired,account_id:k.a.string.isRequired,url:k.a.string.isRequired},j=Object(l.a)(j);var x=function(e){function t(){return N(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,s.a.Component),S(t,[{key:"render",value:function(){var e=s.a.createElement(j,{asset:this.props.asset,account:this.props.account,input_coin_type:this.props.input_coin_type,output_coin_type:this.props.output_coin_type,account_name:this.props.account_name,amount:new w.a({real:this.props.amount,asset_id:this.props.asset.get("id"),precision:this.props.asset.get("precision")}),account_id:this.props.account_id,account_balances:this.props.account_balances,url:this.props.url,balance:this.props.account.get("balances").toJS()[this.props.asset.get("id")]});return s.a.createElement("span",null,e)}}]),t}();x.propTypes={asset:r.a.ChainAsset.isRequired,input_coin_type:k.a.string.isRequired,output_coin_type:k.a.string.isRequired,account_name:k.a.string.isRequired,account_id:k.a.string.isRequired,url:k.a.string.isRequired},x=Object(l.a)(x);var I=function(e){function t(){return N(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,s.a.Component),S(t,[{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.gateway+"_bridge"}},{key:"onWithdraw",value:function(){p.a.publish(this.getWithdrawModalId(),"open")}},{key:"render",value:function(){var e=this.getWithdrawModalId(),t="button disabled";return Object.keys(this.props.account.get("balances").toJS()).includes(this.props.asset.get("id"))&&!(this.props.amount_to_withdraw.indexOf(" ")>=0)&&!isNaN(this.props.amount_to_withdraw)&&this.props.amount_to_withdraw>0&&this.props.amount_to_withdraw<=this.props.balance.toJS().balance/_.a.get_asset_precision(this.props.asset.get("precision"))&&(t="button"),s.a.createElement("span",null,s.a.createElement("span",null,s.a.createElement("button",{className:t,onClick:this.onWithdraw.bind(this)},s.a.createElement(o.a,{content:""}),s.a.createElement(o.a,{content:"gateway.withdraw_now"})," ")),s.a.createElement(c.a,{id:e,overlay:!0},s.a.createElement("br",null),s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(m.a,{key:""+this.props.key,account:this.props.account.get("name"),issuer:this.props.issuer,asset:this.props.asset.get("id"),output_coin_name:this.props.output_coin_name,output_coin_symbol:this.props.output_coin_symbol,output_coin_type:this.props.output_coin_type,output_supports_memos:this.props.output_supports_memos,amount_to_withdraw:this.props.amount_to_withdraw,modal_id:e,url:this.props.url,output_wallet_type:this.props.output_wallet_type,balance:this.props.account.get("balances").toJS()[this.props.asset.get("id")]}))))}}]),t}();I.propTypes={balance:r.a.ChainObject,url:k.a.string.isRequired},I=Object(l.a)(I);var D=function(e){function t(){return N(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,s.a.Component),S(t,[{key:"render",value:function(){var e=s.a.createElement(I,{key:this.props.key,account:this.props.account,issuer:this.props.issuer,asset:this.props.asset,output_coin_name:this.props.output_coin_name,output_coin_symbol:this.props.output_coin_symbol,output_coin_type:this.props.output_coin_type,output_supports_memos:this.props.output_supports_memos,amount_to_withdraw:this.props.amount_to_withdraw,url:this.props.url,gateway:this.props.gateway,output_wallet_type:this.props.output_wallet_type,balance:this.props.account.get("balances").toJS()[this.props.asset.get("id")]});return s.a.createElement("span",null,e)}}]),t}();D.propTypes={account:r.a.ChainAccount.isRequired,asset:r.a.ChainAsset.isRequired,output_coin_type:k.a.string.isRequired,url:k.a.string.isRequired},D=Object(l.a)(D);var P=function(e){function t(e){N(this,t);var a=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.refresh_interval=12e4,a.deposit_address_cache=new h.a,a.coin_info_request_states={request_in_progress:0,request_complete:1,request_failed:2},a.estimation_directions={output_from_input:0,input_from_output:1},a.state={coin_symbol:"btc",key_for_withdrawal_dialog:"btc",supports_output_memos:"",url:g.a.BASE,error:null,deposit_input_coin_type:null,deposit_output_coin_type:null,input_address_and_memo:null,deposit_estimated_input_amount:a.props.initial_deposit_estimated_input_amount||"1.0",deposit_estimated_output_amount:null,deposit_limit:null,deposit_error:null,failed_calculate_deposit:null,withdraw_input_coin_type:null,withdraw_output_coin_type:null,withdraw_estimated_input_amount:a.props.initial_withdraw_estimated_input_amount||"1.0",withdraw_estimated_output_amount:null,withdraw_limit:null,withdraw_error:null,failed_calculate_withdraw:null,conversion_input_coin_type:null,conversion_output_coin_type:null,conversion_estimated_input_amount:a.props.initial_conversion_estimated_input_amount||"1.0",conversion_estimated_output_amount:null,conversion_limit:null,conversion_error:null,failed_calculate_conversion:null,coin_info_request_state:a.coin_info_request_states.request_in_progress,input_address_requests_in_progress:{},deposit_estimate_direction:a.estimation_directions.output_from_input,deposit_limit_cache:{},deposit_limit_requests_in_progress:{},coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null,conversion_memo:null,announcements:[]},a}return T(t,s.a.Component),S(t,[{key:"urlConnection",value:function(e,t){var a=this;this.setState({url:e});var n=fetch(e+"/announcements/enabled/trade",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()});Promise.resolve(n).then(function(e){e.sort(function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0}),a.setState({announcements:e})}).catch(function(e){a.setState({announcements:[]})});var s=fetch(e+"/coins",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),i=fetch(e+"/wallets",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),o=fetch(e+"/trading-pairs",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),r=fetch(e+"/active-wallets",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()});Promise.all([s,i,o,r]).then(function(e){var t=C(e,4),n=t[0],s=(t[1],t[2]),i=t[3],o={};n.forEach(function(e){return o[e.coinType]=e});var r={},l={},c={};s.forEach(function(e){var t=o[e.inputCoinType],a=o[e.outputCoinType];t.backingCoinType!=e.outputCoinType&&a.backingCoinType!=e.inputCoinType&&0==t.restricted&&0==a.restricted&&-1!=i.indexOf(t.walletType)&&-1!=i.indexOf(a.walletType)&&("bitshares2"!=t.walletType&&"bitshares2"==a.walletType?(r[e.inputCoinType]=r[e.inputCoinType]||[],r[e.inputCoinType].push(e.outputCoinType)):"bitshares2"==t.walletType&&"bitshares2"!=a.walletType?(l[e.inputCoinType]=l[e.inputCoinType]||[],l[e.inputCoinType].push(e.outputCoinType)):"bitshares2"==t.walletType&&"bitshares2"==a.walletType&&(c[e.inputCoinType]=c[e.inputCoinType]||[],c[e.inputCoinType].push(e.outputCoinType)))});var u=null,p=null,d=Object.keys(r);if(d.forEach(function(e){r[e].sort()}),d.length){u=a.props.initial_deposit_input_coin_type&&a.props.initial_deposit_input_coin_type in r?a.props.initial_deposit_input_coin_type:d[0];var m=r[u];p=a.props.initial_deposit_output_coin_type&&-1!=m.indexOf(a.props.initial_deposit_output_coin_type)?a.props.initial_deposit_output_coin_type:m[0]}var h=null,_=null,f=null,y=null,g=Object.keys(l);if(g.forEach(function(e){l[e].sort()}),g.length){h=a.props.initial_withdraw_input_coin_type&&a.props.initial_withdraw_input_coin_type in l?a.props.initial_withdraw_input_coin_type:g[0];var v=l[h];_=a.props.initial_withdraw_output_coin_type&&-1!=v.indexOf(a.props.initial_withdraw_output_coin_type)?a.props.initial_withdraw_output_coin_type:v[0]}var w=Object.keys(c);if(w.forEach(function(e){c[e].sort()}),w.length){f=a.props.initial_conversion_input_coin_type&&a.props.initial_conversion_input_coin_type in c?a.props.initial_conversion_input_coin_type:w[0];var b=c[f];y=a.props.initial_conversion_output_coin_type&&-1!=b.indexOf(a.props.initial_conversion_output_coin_type)?a.props.initial_conversion_output_coin_type:b[0]}var E=a.getCachedOrGeneratedInputAddress(u,p),k=a.getCachedOrFreshDepositLimit("deposit",u,p),S=a.getAndUpdateOutputEstimate("deposit",u,p,a.state.deposit_estimated_input_amount),A=a.getAndUpdateOutputEstimate("withdraw",h,_,a.state.withdraw_estimated_input_amount),N=a.getCachedOrFreshDepositLimit("withdraw",h,_),O=a.getAndUpdateOutputEstimate("conversion",f,y,a.state.conversion_estimated_input_amount),T=a.getCachedOrFreshDepositLimit("conversion",f,y);a.unMounted||a.setState({coin_info_request_state:a.coin_info_request_states.request_complete,coins_by_type:o,allowed_mappings_for_deposit:r,allowed_mappings_for_withdraw:l,allowed_mappings_for_conversion:c,deposit_input_coin_type:u,deposit_output_coin_type:p,input_address_and_memo:E,deposit_limit:k,deposit_estimated_output_amount:S,deposit_estimate_direction:a.estimation_directions.output_from_input,withdraw_input_coin_type:h,withdraw_output_coin_type:_,withdraw_limit:N,withdraw_estimated_output_amount:A,conversion_input_coin_type:f,conversion_output_coin_type:y,conversion_limit:T,conversion_estimated_output_amount:O,withdraw_estimate_direction:a.estimation_directions.output_from_input,conversion_estimate_direction:a.estimation_directions.output_from_input,supports_output_memos:o.btc.supportsOutputMemos})}).catch(function(e){a.setState({coin_info_request_state:t,coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null})})}},{key:"updateEstimates",value:function(){if(this.state.deposit_input_coin_type&&this.state.deposit_output_coin_type){var e=this.getCachedOrGeneratedInputAddress(this.state.deposit_input_coin_type,this.state.deposit_output_coin_type),t=this.getCachedOrFreshDepositLimit("deposit",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type),a=this.state.deposit_estimated_input_amount,n=this.state.deposit_estimated_output_amount;this.state.deposit_estimate_direction==this.estimation_directions.output_from_input?n=this.getAndUpdateOutputEstimate("deposit",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type,a):a=this.getAndUpdateInputEstimate("deposit",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type,n);var s=this.getCachedOrFreshDepositLimit("withdraw",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type),i=this.state.withdraw_estimated_input_amount,o=this.state.withdraw_estimated_output_amount;this.state.withdraw_estimate_direction==this.estimation_directions.output_from_input?o=this.getAndUpdateOutputEstimate("withdraw",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type,i):i=this.getAndUpdateinputEstimate("withdraw",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type,o);var r=this.getCachedOrFreshDepositLimit("conversion",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type),l=this.state.conversion_estimated_input_amount,c=this.state.conversion_estimated_output_amount;this.state.conversion_estimate_direction==this.estimation_directions.output_from_input?c=this.getAndUpdateOutputEstimate("conversion",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type,l):l=this.getAndUpdateinputEstimate("conversion",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type,c),this.setState({input_address_and_memo:e,deposit_limit:t,deposit_estimated_input_amount:a,deposit_estimated_output_amount:n,withdraw_limit:s,withdraw_estimated_input_amount:i,withdraw_estimated_output_amount:o,conversion_limit:r,conversion_estimated_input_amount:l,conversion_estimated_output_amount:c,key_for_withdrawal_dialog:i})}}},{key:"componentWillMount",value:function(){var e=this,t=this.state.url;this.urlConnection(t,0);var a=fetch(t+"/coins",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),n=fetch(t+"/trading-pairs",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),s=fetch(t+"/active-wallets",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()});Promise.all([a,n,s]).then(function(e){var t=C(e,3),a=t[0],n=t[1],s=t[2],i={};a.forEach(function(e){return i[e.coinType]=e}),n.forEach(function(e){var t=i[e.inputCoinType],a=i[e.outputCoinType];t.backingCoinType!=e.outputCoinType&&a.backingCoinType!=e.inputCoinType&&-1!=s.indexOf(t.walletType)&&s.indexOf(a.walletType)})}).catch(function(t){e.urlConnection("https://api.blocktrades.info/v2",2),e.setState({coin_info_request_state:0,coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null})})}},{key:"componentDidMount",value:function(){this.update_timer=setInterval(this.updateEstimates.bind(this),this.refresh_interval)}},{key:"componentWillUnmount",value:function(){clearInterval(this.update_timer),this.unMounted=!0}},{key:"getCachedInputAddress",value:function(e,t,a){var n=this.props.account.get("name");return this.deposit_address_cache.getCachedInputAddress(this.props.gateway,n,e,t)}},{key:"cacheInputAddress",value:function(e,t,a,n){var s=this.props.account.get("name");this.deposit_address_cache.cacheInputAddress(this.props.gateway,s,e,t,a,n)}},{key:"getCachedOrGeneratedInputAddress",value:function(e,t){var a=this,n=this.getCachedInputAddress(e,t);if(n)return n;if(this.state.input_address_requests_in_progress[e]=this.state.input_address_requests_in_progress[e]||{},this.state.input_address_requests_in_progress[e][t])return null;var s=JSON.stringify({inputCoinType:e,outputCoinType:t,outputAddress:this.props.account.get("name")});return this.state.input_address_requests_in_progress[e][t]=!0,fetch(this.state.url+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:s}).then(function(n){n.json().then(function(n){if(console.assert(n.inputCoinType==e,"unexpected reply from initiate-trade"),console.assert(n.outputCoinType==t,"unexpected reply from initiate-trade"),n.inputCoinType!=e||n.outputCoinType!=t)throw Error("unexpected reply from initiate-trade");a.cacheInputAddress(n.inputCoinType,n.outputCoinType,n.inputAddress,n.inputMemo),delete a.state.input_address_requests_in_progress[e][t],a.state.deposit_input_coin_type==n.inputCoinType&&a.state.deposit_output_coin_type==n.outputCoinType&&a.setState({input_address_and_memo:{address:n.inputAddress,memo:n.inputMemo}})},function(n){delete a.state.input_address_requests_in_progress[e][t],a.state.deposit_input_coin_type==e&&a.state.deposit_output_coin_type==t&&a.setState({input_address_and_memo:{address:"error generating address",memo:null}})})},function(n){delete a.state.input_address_requests_in_progress[e][t],a.state.deposit_input_coin_type==e&&a.state.deposit_output_coin_type==t&&a.setState({input_address_and_memo:{address:"error generating address",memo:null}})}),null}},{key:"getCachedDepositLimit",value:function(e,t){if(this.state.deposit_limit_cache[e]=this.state.deposit_limit_cache[e]||{},this.state.deposit_limit_cache[e][t]){var a=this.state.deposit_limit_cache[e][t];if(new Date-a.timestamp<this.refresh_interval)return a;delete this.state.deposit_limit_cache[e][t]}return null}},{key:"cacheDepositLimit",value:function(e,t,a){a.timestamp=new Date,this.state.deposit_limit_cache[e]=this.state.deposit_limit_cache[e]||{},this.state.deposit_limit_cache[e][t]=a}},{key:"getCachedOrFreshDepositLimit",value:function(e,t,a){var n=this,s=this.getCachedDepositLimit(t,a);if(s)return s;this.state.deposit_limit_requests_in_progress[t]=this.state.input_address_requests_in_progress[t]||{},this.state.deposit_limit_requests_in_progress[t][a]=!0;var i=this.state.url+"/deposit-limits?inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(a);return fetch(i,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}).then(function(s){if(!n.unMounted){if(console.assert(s.inputCoinType==t&&s.outputCoinType==a,"unexpected reply from deposit-limits"),s.inputCoinType!=t||s.outputCoinType!=a)throw Error("unexpected reply from deposit-limits");var i={timestamp:new Date,limit:s.depositLimit};n.cacheDepositLimit(t,a,i),delete n.state.deposit_limit_requests_in_progress[t][a],n.state[e+"_input_coin_type"]==t&&n.state[e+"_output_coin_type"]==a&&n.setState(A({},e+"_limit",i))}},function(e){delete n.state.deposit_limit_requests_in_progress[t][a]}),null}},{key:"getAndUpdateOutputEstimate",value:function(e,t,a,n){var s=this;if(!this.unMounted){"deposit"==e&&this.setState({failed_calculate_deposit:null}),"withdraw"==e&&this.setState({failed_calculate_withdraw:null}),"conversion"==e&&this.setState({failed_calculate_conversion:null});var i=this.state.url+"/estimate-output-amount?inputAmount="+encodeURIComponent(n)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(a);return fetch(i,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}).then(function(i){if(!s.unMounted)if(i.error){if(s.state[e+"_input_coin_type"]==t&&s.state[e+"_output_coin_type"]==a&&s.state[e+"_estimated_input_amount"]==n&&s.state[e+"_estimate_direction"]==s.estimation_directions.output_from_input){var o=i.error.message;"deposit"==e&&s.setState({failed_calculate_deposit:"Failed to calculate"}),"withdraw"==e&&s.setState({failed_calculate_withdraw:"Failed to calculate"}),"conversion"==e&&s.setState({failed_calculate_conversion:"Failed to calculate"});o.startsWith("Internal Server Error: ")&&(o=o.substr("Internal Server Error: ".length)),s.setState(A({},e+"_error",o))}}else{var r;if(console.assert(i.inputCoinType==t&&i.outputCoinType==a&&i.inputAmount==n,"unexpected reply from estimate-output-amount"),i.inputCoinType!=t||i.outputCoinType!=a||i.inputAmount!=n)throw Error("unexpected reply from estimate-output-amount");s.state[e+"_input_coin_type"]==t&&s.state[e+"_output_coin_type"]==a&&s.state[e+"_estimated_input_amount"]==n&&s.state[e+"_estimate_direction"]==s.estimation_directions.output_from_input&&s.setState((A(r={},e+"_estimated_output_amount",i.outputAmount),A(r,e+"_error",null),r))}},function(e){}),null}}},{key:"getAndUpdateInputEstimate",value:function(e,t,a,n){var s=this;if(!this.unMounted){"deposit"==e&&this.setState({failed_calculate_deposit:null}),"withdraw"==e&&this.setState({failed_calculate_withdraw:null}),"conversion"==e&&this.setState({failed_calculate_conversion:null});var i=this.state.url+"/estimate-input-amount?outputAmount="+encodeURIComponent(n)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(a);return fetch(i,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}).then(function(i){var o;s.unMounted||(console.assert(i.inputCoinType==t&&i.outputCoinType==a&&i.outputAmount==n,"unexpected reply from estimate-input-amount"),i.inputCoinType==t&&i.outputCoinType==a&&i.outputAmount==n||("deposit"==e&&s.setState({failed_calculate_deposit:"Failed to calculate"}),"withdraw"==e&&s.setState({failed_calculate_withdraw:"Failed to calculate"}),"conversion"==e&&s.setState({failed_calculate_conversion:"Failed to calculate"})),s.state[e+"_input_coin_type"]==t&&s.state[e+"_output_coin_type"]==a&&s.state[e+"_estimated_output_amount"]==n&&s.state[e+"_estimate_direction"]==s.estimation_directions.input_from_output&&s.setState((A(o={},e+"_estimated_input_amount",i.inputAmount),A(o,"key_for_withdrawal_dialog",i.inputAmount),o)))},function(e){}),null}}},{key:"onInputAmountChanged",value:function(e,t){var a,n=t.target.value;""==n&&(n="0");var s=this.getAndUpdateOutputEstimate(e,this.state[e+"_input_coin_type"],this.state[e+"_output_coin_type"],n);this.setState((A(a={},e+"_estimated_input_amount",n),A(a,e+"_estimated_output_amount",s),A(a,e+"_estimate_direction",this.estimation_directions.output_from_input),A(a,"key_for_withdrawal_dialog",n),a))}},{key:"onOutputAmountChanged",value:function(e,t){var a,n=t.target.value;""==n&&(n="0");var s=this.getAndUpdateInputEstimate(e,this.state[e+"_input_coin_type"],this.state[e+"_output_coin_type"],n);this.setState((A(a={},e+"_estimated_output_amount",n),A(a,e+"_estimated_input_amount",s),A(a,e+"_estimate_direction",this.estimation_directions.input_from_output),a))}},{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.gateway+"_bridge"}},{key:"onWithdraw",value:function(){p.a.publish(this.getWithdrawModalId(),"open")}},{key:"onInputCoinTypeChanged",value:function(e,t){var a,n=this,s=null,i="_estimated_output_amount",o=t.target.value,r=this.state["allowed_mappings_for_"+e][o],l=r[0];-1!=r.indexOf(this.state[e+"_output_coin_type"])&&(l=this.state[e+"_output_coin_type"]);var c=this.state.input_address_and_memo;"deposit"==e&&(c=this.getCachedOrGeneratedInputAddress(o,l));var u=this.getCachedOrFreshDepositLimit(e,o,l);this.state[e+"_estimated_input_amount"]?s=this.getAndUpdateOutputEstimate(e,o,l,this.state[e+"_estimated_input_amount"]):(s=this.getAndUpdateInputEstimate(e,o,l,this.state[e+"_estimated_output_amount"]),i="_estimated_input_amount"),"withdraw"==e&&r.forEach(function(e){l===e&&n.setState({coin_symbol:o+"input",supports_output_memos:n.state.coins_by_type[e].supportsOutputMemos})}),this.setState((A(a={},e+"_input_coin_type",o),A(a,e+"_output_coin_type",l),A(a,"input_address_and_memo",c),A(a,e+"_limit",u),A(a,e+i,s),A(a,e+"_estimate_direction",this.estimation_directions.output_from_input),a))}},{key:"onOutputCoinTypeChanged",value:function(e,t){var a,n=this,s=null,i="_estimated_output_amount",o=t.target.value,r=this.state.allowed_mappings_for_withdraw[this.state.withdraw_input_coin_type];"withdraw"==e&&r.forEach(function(e){o===e&&n.setState({coin_symbol:o+"output",supports_output_memos:n.state.coins_by_type[e].supportsOutputMemos,key_for_withdrawal_dialog:o})});var l=this.state.input_address_and_memo;"deposit"==e&&(l=this.getCachedOrGeneratedInputAddress(this.state[e+"_input_coin_type"],o));var c=this.getCachedOrFreshDepositLimit(e,this.state[e+"_input_coin_type"],o);this.state[e+"_estimated_input_amount"]?s=this.getAndUpdateOutputEstimate(e,this.state[e+"_input_coin_type"],o,this.state[e+"_estimated_input_amount"]):(s=this.getAndUpdateInputEstimate(e,this.state[e+"_input_coin_type"],o,this.state[e+"_estimated_output_amount"]),i="_estimated_input_amount"),this.setState((A(a={},e+"_output_coin_type",o),A(a,"input_address_and_memo",l),A(a,e+"_limit",c),A(a,e+i,s),A(a,e+"_estimate_direction",this.estimation_directions.output_from_input),a))}},{key:"render",value:function(){var e=this;if(!this.props.account||!this.props.issuer_account||!this.props.gateway)return s.a.createElement("div",null);var t=void 0,a=void 0,n=void 0,i=void 0,r=void 0,l=void 0,c=void 0;if(this.state.coin_info_request_state==this.coin_info_request_states.request_failed)return s.a.createElement("div",null,s.a.createElement("p",null,"Error connecting to blocktrades.us, please try again later"));if(this.state.coin_info_request_state==this.coin_info_request_states.never_requested||this.state.coin_info_request_state==this.coin_info_request_states.request_in_progress)return s.a.createElement("div",null,s.a.createElement("p",null,"Retrieving current trade data from blocktrades.us"));var u=null,p=s.a.createElement(o.a,{content:"gateway.calc"});null!=this.state.failed_calculate_deposit&&(p=this.state.failed_calculate_deposit);var m=s.a.createElement(o.a,{content:"gateway.calc"});null!=this.state.failed_calculate_withdraw&&(m=this.state.failed_calculate_withdraw);var h=s.a.createElement(o.a,{content:"gateway.calc"});if(null!=this.state.failed_calculate_conversion&&(h=this.state.failed_calculate_conversion),Object.getOwnPropertyNames(this.state.allowed_mappings_for_deposit).length>0){var f=[];Object.keys(this.state.allowed_mappings_for_deposit).sort().forEach(function(t){f.push(s.a.createElement("option",{key:t,value:t||""},e.state.coins_by_type[t].symbol))});var y=s.a.createElement("select",{style:{width:"11rem"},className:"external-coin-types",value:this.state.deposit_input_coin_type||"",onChange:this.onInputCoinTypeChanged.bind(this,"deposit")},f),g=[];this.state.allowed_mappings_for_deposit[this.state.deposit_input_coin_type].forEach(function(t){g.push(s.a.createElement("option",{key:t,value:t||""},e.state.coins_by_type[t].walletSymbol))});var v=s.a.createElement("select",{style:{width:"11rem"},className:"native-coin-types",value:this.state.deposit_output_coin_type||"",onChange:this.onOutputCoinTypeChanged.bind(this,"deposit")},g),w=this.state.input_address_and_memo?this.state.input_address_and_memo:{address:"unknown",memo:null},b=this.state.deposit_estimated_input_amount,E=this.state.deposit_estimated_output_amount,k=b?s.a.createElement("input",{style:{width:"11rem"},type:"text",value:b||"",onChange:this.onInputAmountChanged.bind(this,"deposit")}):p,C=E?s.a.createElement("input",{style:{width:"11rem"},type:"text",value:E||"",onChange:this.onOutputAmountChanged.bind(this,"deposit")}):p,S=s.a.createElement("span",null,"updating");this.state.deposit_limit&&(S=this.state.deposit_limit.limit?s.a.createElement("div",{className:"blocktrades-bridge"},s.a.createElement("span",{className:"deposit-limit"},s.a.createElement(o.a,{content:"gateway.limit",amount:_.a.format_number(this.state.deposit_limit.limit,8),symbol:this.state.coins_by_type[this.state.deposit_input_coin_type].walletSymbol}))):null);var A=null;this.state.deposit_error&&(A=s.a.createElement("div",null,this.state.deposit_error)),n=s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement(o.a,{content:"gateway.deposit"})),s.a.createElement("th",null,s.a.createElement(o.a,{content:"gateway.balance"})),s.a.createElement("th",null,s.a.createElement(o.a,{content:"gateway.deposit_to",asset:this.state.deposit_input_coin_type}))));var N=null;N=w.memo?s.a.createElement(o.a,{unsafe:!0,content:"gateway.address_with_memo",address:w.address,memo:w.memo}):s.a.createElement("span",null,w.address),a=s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"blocktrades-bridge"},s.a.createElement("div",{className:"inline-block"},s.a.createElement("div",null,y),s.a.createElement("div",null,k)),"→",s.a.createElement("div",{className:"inline-block"},s.a.createElement("div",null,v),s.a.createElement("div",null,C)),s.a.createElement("div",null,A))),s.a.createElement("td",null,s.a.createElement(d.a,{account:this.props.account.get("name"),asset:this.state.coins_by_type[this.state.deposit_output_coin_type].walletSymbol})),s.a.createElement("td",null,N,s.a.createElement("br",null),S)))}if(Object.getOwnPropertyNames(this.state.allowed_mappings_for_withdraw).length>0){this.getWithdrawModalId();this.state.coins_by_type[this.state.withdraw_input_coin_type].symbol;u=this.state.withdraw_estimated_input_amount;var O=[];Object.keys(this.state.allowed_mappings_for_withdraw).sort().forEach(function(t){O.push(s.a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].walletSymbol))});var T=s.a.createElement("select",{style:{width:"11rem"},className:"native-coin-types",value:this.state.withdraw_input_coin_type,onChange:this.onInputCoinTypeChanged.bind(this,"withdraw")},O),j=[];this.state.allowed_mappings_for_withdraw[this.state.withdraw_input_coin_type].forEach(function(t){j.push(s.a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].symbol))});var I=s.a.createElement("select",{style:{width:"11rem"},className:"external-coin-types",value:this.state.withdraw_output_coin_type,onChange:this.onOutputCoinTypeChanged.bind(this,"withdraw")},j),P=this.state.withdraw_estimated_input_amount,W=P?s.a.createElement("input",{style:{width:"11rem"},type:"text",value:P||"",onChange:this.onInputAmountChanged.bind(this,"withdraw")}):m,B=this.state.withdraw_estimated_output_amount,q=B?s.a.createElement("input",{style:{width:"11rem"},type:"text",value:B||"",onChange:this.onOutputAmountChanged.bind(this,"withdraw")}):m,R=s.a.createElement(D,{key:this.state.key_for_withdrawal_dialog,account:this.props.account.get("name"),issuer:this.props.issuer_account.get("name"),asset:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol,output_coin_name:this.state.coins_by_type[this.state.withdraw_output_coin_type].name,output_coin_symbol:this.state.coins_by_type[this.state.withdraw_output_coin_type].symbol,output_coin_type:this.state.withdraw_output_coin_type,output_supports_memos:this.state.supports_output_memos,amount_to_withdraw:u,url:this.state.url,gateway:this.props.gateway,output_wallet_type:this.state.coins_by_type[this.state.withdraw_output_coin_type].walletType}),F=null;this.state.withdraw_error&&(F=s.a.createElement("div",null,this.state.withdraw_error));var M=s.a.createElement("span",null,"...");this.state.withdraw_limit&&(M=this.state.withdraw_limit.limit?s.a.createElement("div",{className:"blocktrades-bridge"},s.a.createElement("span",{className:"deposit-limit"},s.a.createElement(o.a,{content:"gateway.limit",amount:_.a.format_number(this.state.withdraw_limit.limit,8),symbol:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol}))):s.a.createElement("div",{className:"blocktrades-bridge"},s.a.createElement("span",{className:"deposit-limit"},"no limit"))),r=s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement(o.a,{content:"gateway.withdraw"})),s.a.createElement("th",null,s.a.createElement(o.a,{content:"gateway.balance"})),s.a.createElement("th",null))),i=s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"blocktrades-bridge"},s.a.createElement("div",{className:"inline-block"},s.a.createElement("div",null,T),s.a.createElement("div",null,W)),"→",s.a.createElement("div",{className:"inline-block"},s.a.createElement("div",null,I),s.a.createElement("div",null,q)),s.a.createElement("div",null,F))),s.a.createElement("td",null,s.a.createElement(d.a,{account:this.props.account.get("name"),asset:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol})),s.a.createElement("td",null,R,s.a.createElement("br",null),M)))}if(Object.getOwnPropertyNames(this.state.allowed_mappings_for_conversion).length>0){var L=[];Object.keys(this.state.allowed_mappings_for_conversion).sort().forEach(function(t){L.push(s.a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].walletSymbol))});var U=s.a.createElement("select",{style:{width:"11rem"},className:"native-coin-types",value:this.state.conversion_input_coin_type,onChange:this.onInputCoinTypeChanged.bind(this,"conversion")},L),H=[];this.state.allowed_mappings_for_conversion[this.state.conversion_input_coin_type].forEach(function(t){H.push(s.a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].symbol))});var G=s.a.createElement("select",{style:{width:"11rem"},className:"external-coin-types",value:this.state.conversion_output_coin_type,onChange:this.onOutputCoinTypeChanged.bind(this,"conversion")},H),J=this.state.conversion_estimated_input_amount,K=J?s.a.createElement("input",{style:{width:"11rem"},type:"text",value:J||"",onChange:this.onInputAmountChanged.bind(this,"conversion")}):h,V=this.state.conversion_estimated_output_amount,z=V?s.a.createElement("input",{style:{width:"11rem"},type:"text",value:V||"",onChange:this.onOutputAmountChanged.bind(this,"conversion")}):h,X=s.a.createElement(x,{asset:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol,account:this.props.account,input_coin_type:this.state.conversion_input_coin_type,output_coin_type:this.state.conversion_output_coin_type,account_name:this.props.account.get("name"),amount:this.state.conversion_estimated_input_amount,account_id:this.props.account.get("id"),account_balances:this.props.account.get("balances"),url:this.state.url}),Q=null;this.state.conversion_error&&(Q=s.a.createElement("div",null,this.state.conversion_error));var Y=s.a.createElement("span",null,"...");this.state.conversion_limit&&(Y=this.state.conversion_limit.limit?s.a.createElement("div",{className:"blocktrades-bridge"},s.a.createElement("span",{className:"deposit-limit"},s.a.createElement(o.a,{content:"gateway.limit",amount:_.a.format_number(this.state.conversion_limit.limit,8),symbol:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol}))):s.a.createElement("div",{className:"blocktrades-bridge"},s.a.createElement("span",{className:"deposit-limit"},"no limit"))),c=s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement(o.a,{content:"gateway.convert"})),s.a.createElement("th",null,s.a.createElement(o.a,{content:"gateway.balance"})),s.a.createElement("th",null))),l=s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{className:"blocktrades-bridge"},s.a.createElement("div",{className:"inline-block"},s.a.createElement("div",null,U),s.a.createElement("div",null,K)),"→",s.a.createElement("div",{className:"inline-block"},s.a.createElement("div",null,G),s.a.createElement("div",null,z)),s.a.createElement("div",null,Q))),s.a.createElement("td",null,s.a.createElement(d.a,{account:this.props.account.get("name"),asset:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol})),s.a.createElement("td",null,X,s.a.createElement("br",null),Y)))}return this.state.announcements.length>0&&(t=s.a.createElement("div",{className:"blocktrades-announcements-container"},this.state.announcements.map(function(e,t){var a="txtann info";return 10===e.status?a="txtann error":20===e.status?a="txtann warning":30===e.status?a="txtann success":40===e.status&&(a="txtann info"),1===e.format&&e.message.replace(/\r\n|\r|\n/g,"<br />"),s.a.createElement("div",{className:"blocktrades-announcements "+a,key:t},e.message)},this))),s.a.createElement("div",null,s.a.createElement("div",{style:{paddingBottom:15}},s.a.createElement(o.a,{component:"h5",content:"gateway.bridge_text"})),t,s.a.createElement("table",{className:"table"},n,a,r,i,c,l))}}]),t}();P.propTypes={url:k.a.string,gateway:k.a.string,account:r.a.ChainAccount,issuer_account:r.a.ChainAccount,initial_deposit_input_coin_type:k.a.string,initial_deposit_output_coin_type:k.a.string,initial_deposit_estimated_input_amount:k.a.string,initial_withdraw_input_coin_type:k.a.string,initial_withdraw_output_coin_type:k.a.string,initial_withdraw_estimated_input_amount:k.a.string,initial_conversion_input_coin_type:k.a.string,initial_conversion_output_coin_type:k.a.string,initial_conversion_estimated_input_amount:k.a.string};Object(l.a)(P)}).call(this,a(31).Buffer)},844:function(e,t,a){"use strict";(function(e){var t=a(0),n=a.n(t),s=a(7),i=a(13),o=a(1),r=a.n(o),l=a(8),c=a.n(l),u=a(33),p=a(23),d=a(11),m=a(113),h=a(5),_=(a(9),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}());var f=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return t.state={action:e.viewSettings.get("bktAction","deposit"),min:50,max:1e5},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,n.a.Component),_(a,[{key:"_renderDeposits",value:function(){}},{key:"_renderWithdrawals",value:function(){return n.a.createElement("form",{onSubmit:this._onSubmit.bind(this)},n.a.createElement("div",{style:{padding:"20px 0"}},n.a.createElement(r.a,{content:"gateway.balance"}),":  ",n.a.createElement("span",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},n.a.createElement(m.a,{account:this.props.account.get("name"),asset:this.props.asset.get("symbol")}))),n.a.createElement("label",null,n.a.createElement(r.a,{content:"exchange.quantity"}),n.a.createElement("input",{ref:"amount",required:!0,id:"amount",type:"number",min:this.state.min,max:this.state.max})),n.a.createElement("label",null,n.a.createElement(r.a,{content:"gateway.iban"}),n.a.createElement("input",{ref:"iban",required:!0,id:"iban",type:"text"})),n.a.createElement("button",{className:"button",type:"submit"},n.a.createElement(r.a,{content:"gateway.withdraw_now"})))}},{key:"changeAction",value:function(e){this.setState({action:e}),d.a.changeViewSetting({bktAction:e})}},{key:"_onSubmit",value:function(t){var a=this;t.preventDefault();var n=this.state,s=n.min,i=n.max,o=this.props,r=o.asset,l=o.account,c=o.bitKapital,d=parseInt(this.refs.amount.value,10),m=this.refs.iban.value;console.log("amount:",d,"iban:",m);var _=h.a.get_asset_precision(r.get("precision"));d<s||d>i||p.a.transfer(l.get("id"),c.get("id"),parseInt(d*_,10),r.get("id"),new e("BOZDURMA - "+m.toUpperCase(),"utf-8"),null,r.get("id")).then(function(){u.a.unlisten(a.onTrxIncluded),u.a.listen(a.onTrxIncluded)})}},{key:"onTrxIncluded",value:function(e){e.included&&e.broadcasted_transaction?(u.a.unlisten(this.onTrxIncluded),u.a.reset()):e.closed&&(u.a.unlisten(this.onTrxIncluded),u.a.reset())}},{key:"render",value:function(){var e=this.props,t=(e.jianjolly,e.onay,e.account,this.state.action);return n.a.createElement("div",{className:"BitKapital"},n.a.createElement("div",{className:"content-block"},n.a.createElement("div",{style:{paddingBottom:15}},n.a.createElement("div",{style:{marginRight:10},onClick:this.changeAction.bind(this,"deposit"),className:c()("button","deposit"===t?"active":"outline")},n.a.createElement(r.a,{content:"gateway.deposit"})),n.a.createElement("div",{onClick:this.changeAction.bind(this,"withdraw"),className:c()("button","withdraw"===t?"active":"outline")},n.a.createElement(r.a,{content:"gateway.withdraw"}))),"deposit"===t?this._renderDeposits():this._renderWithdrawals()))}}]),a}();f.propTypes={jianjolly:s.a.ChainAccount.isRequired,onay:s.a.ChainAccount.isRequired,bitKapital:s.a.ChainAccount.isRequired,asset:s.a.ChainAsset.isRequired},f.defaultProps={jianjolly:"1.2.126253",bitKapital:"1.2.130090",onay:"1.2.139289",asset:"KAPITAL"};Object(i.a)(f)}).call(this,a(31).Buffer)},867:function(e,t){},868:function(e,t){}}]);
=======
(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{126:function(e,t,a){"use strict";a.d(t,"b",function(){return C}),a.d(t,"a",function(){return S});var n=a(0),r=a.n(n),o=a(17),s=a(7),i=a(13),l=a(48),c=a(5),u=a(16),p=a(32),d=a(1),h=a.n(d),m=a(3),f=a.n(m),b=a(39),g=a.n(b),_=a(271),v=a(40),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},E=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function w(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=function(e){function t(e){return k(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return A(t,_["a"]),E(t,[{key:"componentDidMount",value:function(){g.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||!c.a.are_equal_shallow(e.pulsate,this.props.pulsate)||e.toAsset!==this.props.toAsset||e.fromAsset!==this.props.fromAsset||e.amount!==this.props.amount}},{key:"getValue",value:function(){var e=this.props,t=e.amount,a=e.toAsset,n=e.fromAsset,r=e.fullPrecision,o=e.marketStats,s=e.coreAsset;return v.a.convertValue(t,a,n,o,s,r)}},{key:"render",value:function(){var e=this.props,t=e.amount,a=e.toAsset,n=e.fromAsset,s=e.fullPrecision,i=w(e,["amount","toAsset","fromAsset","fullPrecision"]),l=a.get("id"),u=a.get("symbol");s||(t=c.a.get_asset_amount(t,n));var p=this.getValue();return p||0===p?r.a.createElement(o.a,y({noPrefix:!0,amount:p,asset:l,decimalOffset:-1!==u.indexOf("BTC")?4:this.props.fullDecimals?0:this.props.noDecimals?a.get("precision"):a.get("precision")-2},i)):r.a.createElement("div",{className:"tooltip inline-block","data-place":"bottom","data-tip":f.a.translate("tooltip.no_price"),style:{fontSize:"0.9rem"}},r.a.createElement(h.a,{content:"account.no_price"}))}}]),t}();x.defaultProps={fullPrecision:!0,noDecimals:!1,fullDecimals:!1,hide_asset:!1},x=Object(l.a)(x,{propNames:["toAsset","fromAsset","coreAsset"],defaultProps:{toAsset:"1.3.0",coreAsset:"1.3.0"}});var C=function(e){function t(){return k(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return A(t,r.a.Component),E(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,a=w(e,["refCallback"]);return r.a.createElement(x,y({},a,{ref:t}))}}]),t}();C=Object(u.connect)(C,{listenTo:function(){return[p.a]},getProps:function(){return{marketStats:p.a.getState().allMarketStats}}});var S=function(e){function t(){return k(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return A(t,r.a.Component),E(t,[{key:"render",value:function(){var e=this.props,t=e.balance,a=w(e,["balance"]),n=!!t.getIn(["balance","amount"]),o=Number(n?t.getIn(["balance","amount"]):t.get("balance")),s=n?t.getIn(["balance","asset_id"]):t.get("asset_type");return isNaN(o)?r.a.createElement("span",null,"--"):r.a.createElement(C,y({amount:o,fromAsset:s,noDecimals:!0},a))}}]),t}();S.propTypes={balance:s.a.ChainObject.isRequired},S=Object(i.a)(S,{keep_updating:!0})},145:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(5),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),s(t,[{key:"render",value:function(){var e=this.props,t=e.price,a=e.preFormattedPrice,n=e.quote,s=e.base,i=(e.component,a||o.a.price_to_text(t,n,s));return i.full>=1?r.a.createElement("span",null,r.a.createElement("span",{className:"price-integer"},i.int,"."),i.dec?r.a.createElement("span",{className:"price-integer"},i.dec):null,i.trailing?r.a.createElement("span",{className:"price-decimal"},i.trailing):null):i.full>=.1?r.a.createElement("span",null,r.a.createElement("span",{className:"price-decimal"},i.int,"."),i.dec?r.a.createElement("span",{className:"price-integer"},i.dec):null,i.trailing?r.a.createElement("span",{className:"price-decimal"},i.trailing):null):r.a.createElement("span",null,r.a.createElement("span",{className:"price-decimal"},i.int,"."),i.dec?r.a.createElement("span",{className:"price-decimal"},i.dec):null,i.trailing?r.a.createElement("span",{className:"price-integer"},i.trailing):null)}}]),t}();t.a=i},216:function(e,t,a){"use strict";var n=a(524),r=a(0),o=a.n(r),s=a(2),i=a.n(s),l=a(21),c=a.n(l),u=a(36),p=a(89),d=a.n(p),h=a(1),m=a.n(h),f=a(7),b=a(13),g=a(17),_=a(5),v=a(8),y=a.n(v),E=a(52),w=a(71),k=a(82),O=a(15),A=a(63),x=a(3),C=a.n(x),S=a(68),N=a(6),P=a.n(N),j=a(4),T=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var M=function(e){function t(e){I(this,t);var a=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state=a._initialState(e),a}return D(t,o.a.Component),T(t,[{key:"_initialState",value:function(e){var t=e?this._getCurrentPosition(e):{};if(t.collateral){var a=_.a.get_asset_amount(t.debt,e.quote_asset),n=_.a.get_asset_amount(t.collateral,e.backing_asset);return{short_amount:a?a.toString():null,collateral:n?n.toString():null,collateral_ratio:this._getCollateralRatio(a,n),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:a,collateral:n}}}return{short_amount:0,collateral:0,collateral_ratio:this._getInitialCollateralRatio(e),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:0,collateral:0}}}},{key:"componentDidMount",value:function(){var e=this._initialState(this.props);this.setState(e),this._setUpdatedPosition(e)}},{key:"shouldComponentUpdate",value:function(e,t){return!(_.a.are_equal_shallow(t,this.state)&&P.a.is(e.quote_asset,this.props.quote_asset)&&!e.backing_asset.get("symbol")!==this.props.backing_asset.get("symbol")&&P.a.is(e.account,this.props.account)&&P.a.is(e.call_orders,this.props.call_orders))}},{key:"componentWillReceiveProps",value:function(e){var t=this.state,a=t.short_amount,n=t.collateral,r=t.collateral_ratio;if(e.account!==this.props.account||e.hasCallOrders!==this.props.hasCallOrders||e.quote_asset.get("id")!==this.props.quote_asset.get("id")){var o=this._initialState(e),s=!1;(a||n||r)&&(o.short_amount=a,o.collateral=n,o.collateral_ratio=r,s=!0),this.setState(o),s&&this._validateFields(o)}}},{key:"_getInitialErrors",value:function(){return{collateral_balance:null,ratio_too_high:null}}},{key:"confirmClicked",value:function(e){e.preventDefault(),c.a.publish(this.props.modalId,"close")}},{key:"_onBorrowChange",value:function(e){var t=this._getFeedPrice(),a=e.amount.replace(/,/g,""),n={short_amount:a,collateral:(this.state.collateral_ratio*(a/t)).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:this.state.collateral_ratio};this.setState(n),this._validateFields(n),this._setUpdatedPosition(n)}},{key:"_onCollateralChange",value:function(e){var t=e.amount.replace(/,/g,""),a=this._getFeedPrice(),r=t/(this.state.short_amount/a),o=this._isPredictionMarket(this.props)?{short_amount:t,collateral:t,collateral_ratio:1}:{short_amount:this.state.short_amount,collateral:t,collateral_ratio:Object(n.a)(r)?r:this._getInitialCollateralRatio(this.props)};this.setState(o),this._validateFields(o),this._setUpdatedPosition(o)}},{key:"_onRatioChange",value:function(e){var t=this._getFeedPrice(),a=e.target;new RegExp(/[[:digit:]]/).test(a.value)||(a.value=a.value.replace(/[^0-9.]/g,"")),"."==a.value.charAt(0)&&(a.value="0.");var n=a.value,r={short_amount:this.state.short_amount,collateral:(this.state.short_amount/t*n).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:n};this.setState(r),this._validateFields(r),this._setUpdatedPosition(r)}},{key:"_maximizeCollateral",value:function(){var e=this.props?this._getCurrentPosition(this.props):{},t=0;e.collateral&&(t=_.a.get_asset_amount(e.collateral,this.props.backing_asset));var a=Math.floor(Math.min(this.props.backing_balance.get("balance")/_.a.get_asset_precision(this.props.backing_asset)+t-10,this.state.short_amount/this._getFeedPrice()*1e3));this._onCollateralChange(new Object({amount:a.toString()}))}},{key:"_maximizeDebt",value:function(){var e=this.props?this._getCurrentPosition(this.props):{},t=0;e.collateral&&(t=_.a.get_asset_amount(e.collateral,this.props.backing_asset));var a=this.props.backing_balance.get("balance")/_.a.get_asset_precision(this.props.backing_asset)+t-10,n={short_amount:a/this.state.collateral_ratio*this._getFeedPrice(),collateral:a,collateral_ratio:this.state.collateral_ratio};this.setState(n),this._validateFields(n),this._setUpdatedPosition(n)}},{key:"_payDebt",value:function(){var e=this.props?this._getCurrentPosition(this.props):{debt:0};if(!(e.debt<=0)){var t=_.a.get_asset_amount(Math.max(e.debt-this.props.bitasset_balance.get("balance"),0),this.props.quote_asset);this._onBorrowChange({amount:t.toString()})}}},{key:"_setUpdatedPosition",value:function(e){this.setState({newPosition:parseFloat(e.short_amount)/parseFloat(e.collateral)})}},{key:"_validateFields",value:function(e){var t=this._getInitialErrors(),a=this.state.original_position,n=this.props.backing_balance?this.props.backing_balance.toJS():{balance:0};parseFloat(e.collateral)-a.collateral>_.a.get_asset_amount(n.balance,this.props.backing_asset.toJS())&&(t.collateral_balance=C.a.translate("borrow.errors.collateral"));var r=e.short_amount>=0&&e.collateral>=0&&(e.short_amount!=a.debt||e.collateral!=a.collateral),o=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3;parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:o)?(t.below_maintenance=C.a.translate("borrow.errors.below",{mr:o}),r=!1):parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:o+.5)&&(t.close_maintenance=C.a.translate("borrow.errors.close",{mr:o}),r=!0),this.setState({errors:t,isValid:r})}},{key:"_onSubmit",value:function(e){e.preventDefault();var t=_.a.get_asset_precision(this.props.quote_asset.get("precision")),a=_.a.get_asset_precision(this.props.backing_asset.get("precision")),n=this._getCurrentPosition(this.props),r=k.a.new_transaction();r.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.account.get("id"),delta_collateral:{amount:parseInt(this.state.collateral*a-n.collateral,10),asset_id:this.props.backing_asset.get("id")},delta_debt:{amount:parseInt(this.state.short_amount*t-n.debt,10),asset_id:this.props.quote_asset.get("id")}}),O.a.process_transaction(r,null,!0).catch(function(e){}),c.a.publish(this.props.modalId,"close")}},{key:"_getCurrentPosition",value:function(e){var t={collateral:null,debt:null};return e&&e.hasCallOrders&&e.call_orders&&(t=(t=e.call_orders.filter(function(e){return!!e}).find(function(t){return t.getIn(["call_price","quote","asset_id"])===e.quote_asset.get("id")}))?t.toJS():{collateral:null,debt:null}),t}},{key:"_getFeedPrice",value:function(){return this.props?this._isPredictionMarket(this.props)?1:1/_.a.get_asset_price(this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.backing_asset,this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.quote_asset):1}},{key:"_getInitialCollateralRatio",value:function(e){return this._isPredictionMarket(e)?1:0}},{key:"_getCollateralRatio",value:function(e,t){return t/(e/this._getFeedPrice())}},{key:"_isPredictionMarket",value:function(e){return e.quote_asset.getIn(["bitasset","is_prediction_market"])}},{key:"render",value:function(){var e=this,t=this.props,a=t.quote_asset,n=t.bitasset_balance,r=t.backing_asset,s=t.backing_balance,i=this.state,l=i.short_amount,c=i.collateral,u=i.collateral_ratio,p=i.errors,h=i.isValid,f=_.a.get_asset_precision(this.props.quote_asset.get("precision")),b=_.a.get_asset_precision(this.props.backing_asset.get("precision"));u&&!isNaN(u)&&u>0&&u<1e3||(u=0),n=n?n.toJS():{balance:0,id:null},s=s?s.toJS():{balance:0,id:null};var v=y()("form-group",{"has-error":p.collateral_balance}),k=y()("form-group",{"has-error":p.below_maintenance},{"has-warning":p.close_maintenance}),O=y()("button btn large",{disabled:p.collateral_balance||!h},{outline:p.collateral_balance||!h},{inverted:h}),x=this._getCurrentPosition(this.props),N=s.id?j.b.getObject(s.id):null,P=(N?N.get("balance"):0)-parseInt(this.state.collateral*b-x.collateral,10),T=o.a.createElement("span",null,o.a.createElement("span",null,o.a.createElement(m.a,{component:"span",content:"transfer.available"}),":"," ",n.id?o.a.createElement(w.a,{balance:n.id}):o.a.createElement(g.a,{amount:0,asset:a.get("id")})),o.a.createElement("a",{onClick:this._payDebt.bind(this)},o.a.createElement(m.a,{content:"borrow.pay_max_debt"})),"|",0!=u?o.a.createElement("a",{onClick:this._maximizeDebt.bind(this)},o.a.createElement(m.a,{content:"borrow.use_max"})):o.a.createElement("span",{className:"disabled-link","data-place":"left","data-tip":C.a.translate("borrow.maximize_debt_set_ratio_slider")},o.a.createElement(m.a,{content:"borrow.use_max"}))),I=o.a.createElement("span",null,o.a.createElement("span",null,o.a.createElement(m.a,{component:"span",content:"transfer.available"}),":"," ",s.id?o.a.createElement(g.a,{amount:P,asset:r.get("id")}):o.a.createElement(g.a,{amount:0,asset:r.get("id")})),o.a.createElement("a",{onClick:this._maximizeCollateral.bind(this)},o.a.createElement(m.a,{content:"borrow.use_max"}))),q=this._getFeedPrice(),D=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3,M=(this.props.quote_asset.getIn(["bitasset","current_feed","maximum_short_squeeze_ratio"]),this._isPredictionMarket(this.props));return!M&&isNaN(q)?o.a.createElement("div",null,o.a.createElement("form",{className:"grid-container text-center no-overflow",noValidate:!0},o.a.createElement(m.a,{component:"h3",content:"borrow.no_valid",asset_symbol:a.get("symbol")})),o.a.createElement("div",{className:"grid-content button-group text-center no-overflow"},o.a.createElement(d.a,{close:this.props.modalId},o.a.createElement("div",{className:" button btn large outline"},o.a.createElement(m.a,{content:"account.perm.cancel"}))))):o.a.createElement("div",null,o.a.createElement("form",{className:"grid-container small-10 small-offset-1 no-overflow",noValidate:!0},o.a.createElement(m.a,{component:"h3",content:"borrow.title",asset_symbol:a.get("symbol")}),o.a.createElement("div",{style:{textAlign:"left"}},this.props.hide_help?null:o.a.createElement(S.a,{path:"components/"+(M?"BorrowModalPrediction":"BorrowModal"),debt:a.get("symbol"),collateral:r.get("symbol"),borrower:this.props.account.get("name"),mr:D}),M?null:o.a.createElement("div",{style:{paddingBottom:"1rem"}},o.a.createElement("div",{className:"borrow-price-feeds"},o.a.createElement("span",{className:"borrow-price-label"},o.a.createElement(m.a,{content:"transaction.feed_price"}),": "),o.a.createElement(A.a,{noPopOver:!0,quote_amount:a.getIn(["bitasset","current_feed","settlement_price","base","amount"]),quote_asset:a.getIn(["bitasset","current_feed","settlement_price","base","asset_id"]),base_asset:a.getIn(["bitasset","current_feed","settlement_price","quote","asset_id"]),base_amount:a.getIn(["bitasset","current_feed","settlement_price","quote","amount"])})),o.a.createElement("b",null),o.a.createElement("div",{className:"borrow-price-final "+(p.below_maintenance?"has-error":p.close_maintenance?"has-warning":"")},o.a.createElement("span",{className:"borrow-price-label"},o.a.createElement(m.a,{content:"exchange.your_price"}),": "),this.state.newPosition?o.a.createElement(A.a,{noPopOver:!0,quote_amount:D*this.state.short_amount*f,quote_asset:a.get("id"),base_asset:r.get("id"),base_amount:this.state.collateral*b}):null)),o.a.createElement("div",{className:"form-group"},o.a.createElement(E.a,{label:"transaction.borrow_amount",amount:l.toString(),onChange:this._onBorrowChange.bind(this),asset:a.get("id"),assets:[a.get("id")],display_balance:T,placeholder:"0.0",tabIndex:1})),o.a.createElement("div",{className:v},o.a.createElement(E.a,{label:"transaction.collateral",amount:c.toString(),onChange:this._onCollateralChange.bind(this),asset:r.get("id"),assets:[r.get("id")],display_balance:I,placeholder:"0.0",tabIndex:1}),p.collateral_balance?o.a.createElement("div",{className:"float-left",style:{paddingTop:5}},p.collateral_balance):null),M?null:o.a.createElement("div",null,o.a.createElement("div",{className:k,style:{marginBottom:"1.5rem"}},o.a.createElement(m.a,{component:"label",content:"borrow.coll_ratio"}),o.a.createElement("span",null,o.a.createElement("input",{value:0==u?null:u,onChange:this._onRatioChange.bind(this),type:"text",style:{width:"12%",float:"right",marginTop:-10}}),o.a.createElement("input",{style:{width:"85%"},min:"0",max:"6",step:"0.01",onChange:this._onRatioChange.bind(this),value:u,type:"range"})),p.below_maintenance||p.close_maintenance?o.a.createElement("div",{style:{height:"1em",maxWidth:"85%"},className:"float-left"},p.below_maintenance,p.close_maintenance):null)),o.a.createElement("div",{className:"no-padding grid-content button-group no-overflow"},o.a.createElement("div",{onClick:this._onSubmit.bind(this),className:O},o.a.createElement(m.a,{content:"borrow.adjust"})),o.a.createElement("div",{onClick:function(t){t.preventDefault(),e.setState(e._initialState(e.props))},className:"outline btn large"},o.a.createElement(m.a,{content:"wallet.reset"}))))))}}]),t}();M.propTypes={quote_asset:f.a.ChainAsset.isRequired,bitasset_balance:f.a.ChainObject,backing_asset:f.a.ChainAsset.isRequired,backing_balance:f.a.ChainObject,call_orders:f.a.ChainObjectsList,hasCallOrders:i.a.bool},M=Object(b.a)(M);var R=function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={smallScreen:!1,open:!1},e}return D(t,o.a.Component),T(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){c.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"componentWillMount",value:function(){this.setState({smallScreen:window.innerHeight<=800})}},{key:"render",value:function(){var e=this.props,t=e.quote_asset,a=e.backing_asset,n=e.account,r=n.get("balances").toJS(),s=void 0,i=void 0;if(r)for(var l in r)l===a&&(s=r[l]),l===t&&(i=r[l]);return this.state.open?o.a.createElement(u.a,{id:this.props.modalId,overlay:!0,onClose:this.onClose.bind(this),ref:this.props.modalId,overlayClose:!0},o.a.createElement("div",{className:"grid-block vertical"},o.a.createElement(M,{quote_asset:t,call_orders:n.get("call_orders",Object(N.List)()).toList(),hasCallOrders:n.get("call_orders")&&n.get("call_orders").size>0,modalId:this.props.modalId,bitasset_balance:i,backing_balance:s,backing_asset:a,hide_help:this.state.smallScreen,account:n}))):null}}]),t}();t.a=R},274:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(0),r=a.n(n),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(e){function t(){return i(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,r.a.Component),s(t,[{key:"onPaste",value:function(e){var t=e.clipboardData.getData("text"),a=t.match(/\./g);(a?a.length:0)>1&&e.preventDefault(),parseFloat(t)!=t&&e.preventDefault()}},{key:"onKeyPress",value:function(e){if(!e.nativeEvent.ctrlKey){"."===e.key&&""===e.target.value&&(e.target.value="0");var t=e.target.value+e.key,a=t.match(/\./g),n=a?a.length:0;"."===e.key&&n>1&&e.preventDefault(),parseFloat(t)!=t&&e.preventDefault(),this.props.onKeyPress&&this.props.onKeyPress(e)}}}]),t}(),p=function(e){function t(){return i(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return c(t,u),s(t,[{key:"componentWillReceiveProps",value:function(e){this.props.value&&!e.value&&(this.refs.input.value="")}},{key:"render",value:function(){return r.a.createElement("input",o({ref:"input",type:"text"},this.props,{onPaste:this.onPaste.bind(this),onKeyPress:this.onKeyPress.bind(this)}))}}]),t}();t.b=p},324:function(e,t,a){"use strict";a.d(t,"a",function(){return y}),a.d(t,"b",function(){return _});var n=a(0),r=a.n(n),o=a(48),s=a(8),i=a.n(s),l=a(35),c=a(32),u=a(16),p=a(5),d=a(63),h=a(40),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){function t(e){f(this,t);var a=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.statsInterval=null;var n=h.a.getMarketName(e.base,e.quote).marketName;return a.state={marketName:n},a}return g(t,r.a.Component),m(t,[{key:"_checkStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{close:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{close:{}};return e.volumeBase!==t.volumeBase||!p.a.are_equal_shallow(e.close&&e.close.base,t.close&&t.close.base)||!p.a.are_equal_shallow(e.close&&e.close.quote,t.close&&t.close.quote)}},{key:"shouldComponentUpdate",value:function(e){return this._checkStats(e.allMarketStats.get(this.state.marketName),this.props.allMarketStats.get(this.state.marketName))||e.base.get("id")!==this.props.base.get("id")||e.quote.get("id")!==this.props.quote.get("id")}},{key:"componentWillMount",value:function(){l.a.getMarketStats(this.props.base,this.props.quote),this.statsChecked=new Date,this.statsInterval=setInterval(l.a.getMarketStats.bind(this,this.props.base,this.props.quote),35e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.statsInterval)}}]),t}(),v=function(e){function t(e){return f(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return g(t,_),m(t,[{key:"shouldComponentUpdate",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)}},{key:"render",value:function(){var e=this.props.allMarketStats,t=this.state.marketName,a=e.get(t),n=a&&a.price?a.price:null;return r.a.createElement("span",{className:i()("",this.props.className)},n?r.a.createElement(d.a,{base_amount:n.base.amount,base_asset:n.base.asset_id,quote_amount:n.quote.amount,quote_asset:n.quote.asset_id,force_direction:this.props.force_direction,hide_symbols:this.props.hide_symbols}):"n/a")}}]),t}();v=Object(o.a)(v,{propNames:["quote","base"]});var y=function(e){function t(){return f(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,r.a.Component),m(t,[{key:"render",value:function(){return r.a.createElement(v,this.props)}}]),t}();y=Object(u.connect)(y,{listenTo:function(){return[c.a]},getProps:function(){return{allMarketStats:c.a.getState().allMarketStats}}})},325:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(2),s=a.n(o),i=a(10),l=a(3),c=a.n(l),u=a(55),p=a.n(u),d=a(5),h=a(1),m=a.n(h),f=a(22),b=a(272),g=a.n(b),_=a(107),v=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(function(e){function t(){return y(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,r.a.Component),v(t,[{key:"render",value:function(){var e=this.props,t=e.baseSymbol,a=e.quoteSymbol;return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{textAlign:"right"}},r.a.createElement(m.a,{content:"exchange.price"}),r.a.createElement("br",null),t?r.a.createElement("span",{className:"header-sub-title"},"(",r.a.createElement(f.a,{name:t}),"/",r.a.createElement(f.a,{name:a}),")"):null),r.a.createElement("th",{style:{textAlign:"right"}},r.a.createElement(m.a,{content:"transfer.amount"}),r.a.createElement("br",null),a?r.a.createElement("span",{className:"header-sub-title"},"(",r.a.createElement(f.a,{name:a}),")"):null),r.a.createElement("th",{style:{textAlign:"right"}},r.a.createElement(m.a,{content:"transaction.settlement_date"}),r.a.createElement("br",null),r.a.createElement("span",{style:{visibility:"hidden"},className:"header-sub-title"},"d"))))}}]),t}()).defaultProps={quoteSymbol:null,baseSymbol:null};var k=function(e){function t(){return y(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,r.a.Component),v(t,[{key:"render",value:function(){var e=this.props,t=e.base,a=e.quote,n=e.order,o=e.showSymbols,s="1.3.0"==t.get("id")?n.getPrice()/(1+n.offset_percent/1e4):n.getPrice()*(1+n.offset_percent/1e4),i=o?" "+a.get("symbol"):null;return r.a.createElement("tr",{style:{paddingRight:5}},r.a.createElement("td",{style:{textAlign:"right",width:"25%"}},d.a.format_number(s,a.get("precision"))," ",i),r.a.createElement("td",{style:{textAlign:"right",width:"25%"}},d.a.format_number(n[n.isBid()?"amountToReceive":"amountForSale"]().getAmount({real:!0}),a.get("precision"))),r.a.createElement("td",{style:{textAlign:"right",width:"25%"}},d.a.format_number(n[n.isBid()?"amountForSale":"amountToReceive"]().getAmount({real:!0}),t.get("precision"))),r.a.createElement("td",{style:{textAlign:"right",width:"25%"},className:"tooltip","data-tip":new Date(n.settlement_date)},c.a.localize(new Date(n.settlement_date),{type:"date",format:-1!==g()().toLowerCase().indexOf("en-us")?"market_history_us":"market_history"})))}}]),t}();k.defaultProps={showSymbols:!1,invert:!1};var O=function(e){function t(){return y(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,r.a.Component),v(t,[{key:"shouldComponentUpdate",value:function(e){return e.currentAccount!==this.props.currentAccount||e.orders!==this.props.orders}},{key:"render",value:function(){var e=this.props,t=e.orders,a=e.base,n=e.quote,o=null;if(!(t.size>0&&a&&n))return null;var s=0;return o=t.sort(function(e,t){return e.isBefore(t)?-1:1}).map(function(e){return Date.now()<e.settlement_date?r.a.createElement(k,{key:s++,order:e,base:a,quote:n}):null}).toArray(),r.a.createElement(_.a,{component:"tbody",transitionName:"newrow"},o)}}]),t}();O.defaultProps={base:{},quote:{},orders:{},quoteSymbol:"",baseSymbol:""},O.propTypes={base:s.a.object.isRequired,quote:s.a.object.isRequired,orders:s.a.object.isRequired,quoteSymbol:s.a.string.isRequired,baseSymbol:s.a.string.isRequired};var A=O,x=a(145),C=a(11),S=a(8),N=a.n(S),P=a(12),j=a(4),T=a(19),I=a(126),q=a(324),D=a(63),M=a(39),R=a.n(M);a.d(t,"b",function(){return z}),a.d(t,"c",function(){return W}),a.d(t,"a",function(){return J});var L=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function H(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var U={textAlign:"left"},W=function(e){function t(){return B(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return H(t,r.a.Component),L(t,[{key:"render",value:function(){var e=this.props,t=e.baseSymbol,a=e.quoteSymbol,n=e.dashboard,o=e.isMyAccount;return n?r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:U,colSpan:"5"},r.a.createElement(m.a,{content:"exchange.description"})),r.a.createElement("th",{style:U},r.a.createElement(m.a,{content:"exchange.price"})),r.a.createElement("th",{style:U},r.a.createElement(m.a,{content:"exchange.price_market"})),r.a.createElement("th",{style:{textAlign:"right"}},r.a.createElement(m.a,{content:"exchange.value"})),r.a.createElement("th",null,r.a.createElement(m.a,{content:"account.trade"})),o?r.a.createElement("th",{id:"cancelAllOrders",style:{cursor:"pointer"}},r.a.createElement(m.a,{content:"wallet.cancel"})):null)):r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{textAlign:this.props.leftAlign?"left":""}},r.a.createElement(m.a,{className:"header-sub-title",content:"exchange.price"})),r.a.createElement("th",{style:this.props.leftAlign?{textAlign:"left"}:null},t?r.a.createElement("span",{className:"header-sub-title"},r.a.createElement(f.a,{dataPlace:"top",name:a})):null),r.a.createElement("th",{style:this.props.leftAlign?{textAlign:"left"}:null},t?r.a.createElement("span",{className:"header-sub-title"},r.a.createElement(f.a,{dataPlace:"top",name:t})):null),r.a.createElement("th",{style:{textAlign:this.props.leftAlign?"left":""}},r.a.createElement(m.a,{className:"header-sub-title",content:"transaction.expiration"})),r.a.createElement("th",null)))}}]),t}();W.defaultProps={quoteSymbol:null,baseSymbol:null};var z=function(e){function t(){return B(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return H(t,r.a.Component),L(t,[{key:"shouldComponentUpdate",value:function(e){return e.order.for_sale!==this.props.order.for_sale||e.order.id!==this.props.order.id||e.quote!==this.props.quote||e.base!==this.props.base||e.order.market_base!==this.props.order.market_base}},{key:"render",value:function(){var e=this.props,t=e.base,a=e.quote,n=e.order,o=e.showSymbols,s=e.dashboard,l=e.isMyAccount,u=e.settings,p=n.isBid(),h=n.isCall(),b=h?"orderHistoryCall":p?"orderHistoryBid":"orderHistoryAsk",g=o?r.a.createElement("span",null," "+t.get("symbol")+"/"+a.get("symbol")):null,_=o?" "+t.get("symbol"):null,v=o?" "+a.get("symbol"):null,y=u?u.get("unit"):"1.3.0",E=p?"value positive":"value negative",w=p?"value negative":"value positive";return s?r.a.createElement("tr",{key:n.id,className:"clickable"},r.a.createElement("td",{colSpan:"5",style:U,onClick:this.props.onFlip},p?r.a.createElement(m.a,{content:"exchange.buy_description",baseAsset:d.a.format_number(n[p?"amountToReceive":"amountForSale"]().getAmount({real:!0}),t.get("precision"),!1),quoteAsset:d.a.format_number(n[p?"amountForSale":"amountToReceive"]().getAmount({real:!0}),a.get("precision"),!1),baseName:r.a.createElement(f.a,{noTip:!0,customClass:E,name:a.get("symbol")}),quoteName:r.a.createElement(f.a,{noTip:!0,customClass:w,name:t.get("symbol")})}):r.a.createElement(m.a,{content:"exchange.sell_description",baseAsset:d.a.format_number(n[p?"amountToReceive":"amountForSale"]().getAmount({real:!0}),t.get("precision"),!1),quoteAsset:d.a.format_number(n[p?"amountForSale":"amountToReceive"]().getAmount({real:!0}),a.get("precision"),!1),baseName:r.a.createElement(f.a,{noTip:!0,customClass:E,name:a.get("symbol")}),quoteName:r.a.createElement(f.a,{noTip:!0,customClass:w,name:t.get("symbol")})})),r.a.createElement("td",{style:U,onClick:this.props.onFlip},r.a.createElement(D.a,{base_amount:n.sellPrice().base.amount,base_asset:n.sellPrice().base.asset_id,quote_amount:n.sellPrice().quote.amount,quote_asset:n.sellPrice().quote.asset_id,force_direction:t.get("symbol"),hide_symbols:!0})),r.a.createElement("td",{style:U,onClick:this.props.onFlip},r.a.createElement(q.a,{base:t.get("id"),quote:a.get("id"),force_direction:t.get("symbol"),hide_symbols:!0,hide_asset:!0})),r.a.createElement("td",{style:{textAlign:"right"},onClick:this.props.onFlip},r.a.createElement(I.b,{hide_asset:!0,amount:n.amountForSale().getAmount(),fromAsset:n.amountForSale().asset_id,noDecimals:!0,toAsset:y})," ",r.a.createElement(f.a,{name:y})),r.a.createElement("td",null,r.a.createElement(i.b,{to:"/market/"+a.get("symbol")+"_"+t.get("symbol")},r.a.createElement(P.a,{name:"trade",title:"icons.trade.trade",className:"icon-14px"}))),l?r.a.createElement("td",{className:"text-center",style:{padding:"2px 5px"}},h?null:r.a.createElement("span",{style:{marginRight:0},className:"order-cancel"},r.a.createElement("input",{type:"checkbox",className:"orderCancel",onChange:this.props.onCheckCancel}))):null):r.a.createElement("tr",{key:n.id},r.a.createElement("td",{className:b,style:{paddingLeft:10}},r.a.createElement(x.a,{price:n.getPrice(),base:t,quote:a}),g),r.a.createElement("td",null,d.a.format_number(n[p?"amountToReceive":"amountForSale"]().getAmount({real:!0}),a.get("precision"))," ",v),r.a.createElement("td",null,d.a.format_number(n[p?"amountForSale":"amountToReceive"]().getAmount({real:!0}),t.get("precision"))," ",_),r.a.createElement("td",{style:{width:"25%",textAlign:"right"},className:"tooltip","data-tip":new Date(n.expiration)},h?null:c.a.localize(new Date(n.expiration),{type:"date",format:"short_custom"})),r.a.createElement("td",{className:"text-center",style:{width:"6%"}},h?null:r.a.createElement("a",{style:{marginRight:0},className:"order-cancel",onClick:this.props.onCancel},r.a.createElement(P.a,{name:"cross-circle",title:"icons.cross_circle.cancel_order",className:"icon-14px"}))))}}]),t}();z.defaultProps={showSymbols:!1};var J=function(e){function t(e){B(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={activeTab:e.activeTab},a._getOrders=a._getOrders.bind(a),a}return H(t,r.a.Component),L(t,[{key:"componentDidMount",value:function(){var e=this.refs.container;e&&p.a.initialize(e)}},{key:"componentDidUpdate",value:function(){var e=this.refs.container;e&&p.a.update(e)}},{key:"_getOrders",value:function(){var e,t=this.props,a=t.currentAccount,n=t.base,r=t.quote,o=t.feedPrice,s=a.get("orders"),i=a.get("call_orders"),l=n.get("id"),c=r.get("id"),u=(F(e={},n.get("id"),{precision:n.get("precision")}),F(e,r.get("id"),{precision:r.get("precision")}),e),p=s.toArray().map(function(e){var t=j.b.getObject(e);if(!t)return null;var a=t.getIn(["sell_price","base","asset_id"]),n=t.getIn(["sell_price","quote","asset_id"]);return a===l&&n===c||a===c&&n===l?new T.d(t.toJS(),u,r.get("id")):void 0}).filter(function(e){return!!e}),d=i.toArray().map(function(e){try{var t=j.b.getObject(e);if(!t)return null;var a=t.getIn(["call_price","base","asset_id"]),n=t.getIn(["call_price","quote","asset_id"]);if(a===l&&n===c||a===c&&n===l)return o?new T.b(t.toJS(),u,r.get("id"),o):null}catch(e){return null}}).filter(function(e){return!!e}).filter(function(e){try{return e.isMarginCalled()}catch(e){return!1}});return p.concat(d)}},{key:"_changeTab",value:function(e){C.a.changeViewSetting({ordersTab:e}),this.setState({activeTab:e});var t=this.refs.container;t.scrollTop=0,p.a.update(t),setTimeout(R.a.rebuild,1e3)}},{key:"render",value:function(){var e=this,t=this.props,a=t.base,n=t.quote,o=t.quoteSymbol,s=t.baseSymbol,i=t.settleOrders,l=this.state.activeTab;if(!a||!n)return null;var c=void 0,u=!!(a.get("bitasset_data_id")&&i.size>0),p=!!(n.get("bitasset_data_id")&&i.size>0);if(l&&(u||p)||(l="my_orders"),"my_orders"==l){var d=this._getOrders(),h=r.a.createElement("tr",null,r.a.createElement("td",{style:{textAlign:"center"},colSpan:"5"},r.a.createElement(m.a,{content:"account.no_orders"}))),b=d.filter(function(e){return e.isBid()}).sort(function(e,t){return t.getPrice()-e.getPrice()}).map(function(t){var o=t.getPrice();return r.a.createElement(z,{price:o,key:t.id,order:t,base:a,quote:n,onCancel:e.props.onCancel.bind(e,t.id)})}),g=d.filter(function(e){return!e.isBid()}).sort(function(e,t){return e.getPrice()-t.getPrice()}).map(function(t){var o=t.getPrice();return r.a.createElement(z,{price:o,key:t.id,order:t,base:a,quote:n,onCancel:e.props.onCancel.bind(e,t.id)})}),v=[];g.length&&(v=v.concat(g)),b.length&&(v=v.concat(b)),v.sort(function(e,t){return e.props.price-t.props.price}),c=r.a.createElement(_.a,{component:"tbody",transitionName:"newrow"},v.length?v:h)}l&&"open_settlement"==l&&(c=r.a.createElement(A,{key:"settle_orders",orders:i,base:a,quote:n,baseSymbol:s,quoteSymbol:o}));var y="mymarkets-header clickable",E=N()(y,{inactive:"my_orders"!==l}),w=N()(y,{inactive:"open_settlement"!==l}),k=u||p?"50%":"100%",O=u||p?"inherit":"none",x="open_settlement"===l?this.props.className+" settle":this.props.className;return r.a.createElement("div",{key:"open_orders",className:x},r.a.createElement("div",{className:"exchange-bordered small-12"},r.a.createElement("div",{className:"grid-block shrink left-orderbook-header"},r.a.createElement("div",{style:{width:k},className:E,onClick:this._changeTab.bind(this,"my_orders")},r.a.createElement(m.a,{content:"exchange.my_orders"})),r.a.createElement("div",{style:{display:O},className:w,onClick:this._changeTab.bind(this,"open_settlement")},r.a.createElement(m.a,{content:"exchange.settle_orders"}))),r.a.createElement("div",{className:"grid-block shrink left-orderbook-header market-right-padding-only"},r.a.createElement("table",{className:"open-orders__headings table order-table text-right fixed-table market-right-padding"},"my_orders"==l?r.a.createElement(W,{rightAlign:!0,type:"sell",baseSymbol:s,quoteSymbol:o}):r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(m.a,{className:"header-sub-title",content:"exchange.price"})),r.a.createElement("th",null,r.a.createElement("span",{className:"header-sub-title"},r.a.createElement(f.a,{dataPlace:"top",name:o}))),r.a.createElement("th",null,r.a.createElement("span",{className:"header-sub-title"},r.a.createElement(f.a,{dataPlace:"top",name:s}))),r.a.createElement("th",null))))),r.a.createElement("div",{className:"table-container grid-block no-overflow",ref:"container",style:{overflow:"hidden",maxHeight:200,paddingRight:"0.6rem"}},r.a.createElement("table",{className:"open-orders__table table order-table text-right fixed-table market-right-padding"},c))))}}]),t}();J.defaultProps={base:{},quote:{},orders:{},quoteSymbol:"",baseSymbol:""},J.propTypes={base:s.a.object.isRequired,quote:s.a.object.isRequired,orders:s.a.object.isRequired,quoteSymbol:s.a.string.isRequired,baseSymbol:s.a.string.isRequired}},353:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(1),s=a.n(o),i=a(5),l=a(71),c=a(3),u=a.n(c),p=a(52),d=a(74),h=a(4),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={amount:0,showError:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),m(t,[{key:"onAmountChanged",value:function(e){var t=e.amount,a=e.asset;this.setState({amount:t,asset:a})}},{key:"getBalance",value:function(){var e=this,t=this.props.account.get("balances"),a=0;return t&&t.forEach(function(t,n){if(n==e.props.assetId){var r=h.b.getObject(t);a=r.get("balance")}}),a}},{key:"onSubmit",value:function(){var e=i.a.get_asset_precision(this.state.asset.get("precision")),t=this.state.amount.replace(/,/g,"");t*=e;var a=this.getBalance();t<=0||t>a?this.setState({showError:!0}):(this.setState({showError:!1}),d.a.reserveAsset(t,this.props.assetId,this.props.account.get("id")),this.props.onClose())}},{key:"render",value:function(){var e=this,t=this.props.assetId;return r.a.createElement("form",{className:"grid-block vertical full-width-content"},r.a.createElement(s.a,{component:"h3",content:"modal.reserve.title"}),r.a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},r.a.createElement("div",{className:"content-block",onClick:function(){e.setState({showError:!1})}},r.a.createElement(p.a,{label:"modal.reserve.amount",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:t,assets:[t],display_balance:r.a.createElement(l.a,{balance:this.props.account.getIn(["balances",t])}),tabIndex:1})),this.state.showError?r.a.createElement("p",{className:"errorModal"},u.a.translate("exchange.invalid_amount")):null,r.a.createElement("div",{className:"content-block button-group"},r.a.createElement("input",{type:"submit",className:"button success btn large inverted",onClick:this.onSubmit.bind(this),value:u.a.translate("modal.reserve.submit"),tabIndex:2}),r.a.createElement("div",{className:"button btn large outline",onClick:this.props.onClose,tabIndex:3},u.a.translate("cancel")))))}}]),t}();t.a=f},444:function(e,t,a){"use strict";(function(e){var n=a(92),r=a(0),o=a.n(r),s=a(21),i=a.n(s),l=a(36),c=a(1),u=a.n(c),p=a(19),d=a(5),h=a(13),m=a(7),f=a(23),b=a(39),g=a.n(b),_=a(3),v=a.n(_),y=a(53),E=a(251),w=a(12),k=a(43),O=a(41),A=a(22),x=a(4),C=a(274),S=(a(27),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}),N=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I=function(t){function a(e){P(this,a);var t=j(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return t.state={toAddress:y.a.getLast(e.walletType),withdrawValue:"",amountError:null,symbol:e.asset.get("symbol"),to_withdraw:new p.a({asset_id:e.asset.get("id"),precision:e.asset.get("precision")}),fee_asset_id:"1.3.0",feeStatus:{},loading:!1,emptyAddressDeposit:!1},t._validateAddress(t.state.toAddress,e),t.addDepositAddress=t.addDepositAddress.bind(t),t._checkFeeStatus=t._checkFeeStatus.bind(t),t._checkBalance=t._checkBalance.bind(t),t._getCurrentBalance=t._getCurrentBalance.bind(t),t._getFee=t._getFee.bind(t),t._updateFee=Object(n.a)(t._updateFee.bind(t),250),t}return T(a,C["a"]),N(a,[{key:"componentWillMount",value:function(){this._getDepositAddress(),this._updateFee(),this._checkFeeStatus()}},{key:"componentWillReceiveProps",value:function(e){e.asset&&this.props.asset&&e.asset.get("id")!==this.props.asset.get("id")&&this.setState({to_withdraw:new p.a({asset_id:e.asset.get("id"),precision:e.asset.get("precision")}),gateFee:e.asset.get("gateFee"),intermediateAccount:e.asset.get("intermediateAccount"),symbol:e.asset.get("symbol"),memo:"",withdrawValue:"",receive_address:null,toAddress:y.a.getLast(e.walletType)},this._getDepositAddress)}},{key:"_getDepositAddress",value:function(){if(this.props.backingCoinType){var e=Object(y.h)({coin:"open."+this.props.backingCoinType.toLowerCase(),account:this.props.account,stateCallback:this.addDepositAddress});e?this.setState({receive_address:e}):Object(y.i)(this._getDepositObject())}}},{key:"_getDepositObject",value:function(){return{inputCoinType:this.props.backingCoinType.toLowerCase(),outputCoinType:this.props.symbol.toLowerCase(),outputAddress:this.props.sender.get("name"),stateCallback:this.addDepositAddress}}},{key:"requestDepositAddressLoad",value:function(){this.setState({loading:!0,emptyAddressDeposit:!1}),Object(y.i)(this._getDepositObject())}},{key:"addDepositAddress",value:function(e){e.error&&("no_address"===e.error.message?this.setState({emptyAddressDeposit:!0}):this.setState({emptyAddressDeposit:!1})),this.setState({receive_address:e,loading:!1})}},{key:"componentDidUpdate",value:function(){g.a.rebuild()}},{key:"onSubmit",value:function(t){if(t.preventDefault(),0===this.state.to_withdraw.getAmount())return this.setState({amountError:"transfer.errors.pos"});if(this.props.intermediateAccount){var a=this._getFee(),n=this._getGateFee(),r=this.state.to_withdraw.clone(),o=r.clone(this._getCurrentBalance().get("balance"));r.plus(n),o.lt(r)&&(r=this.state.to_withdraw.clone()),f.a.transfer(this.props.sender.get("id"),this.props.intermediateAccount,this.state.to_withdraw.getAmount(),this.state.to_withdraw.asset_id,this.props.backingCoinType.toLowerCase()+":"+this.state.toAddress+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,a.asset_id)}}},{key:"_updateAmount",value:function(){var e=this._getFee(),t=this._getCurrentBalance(),a=new p.a({amount:t?t.get("balance"):0,asset_id:this.props.asset.get("id"),precision:this.props.asset.get("precision")});a.asset_id===e.asset_id&&a.minus(e),this.state.to_withdraw.setAmount({sats:a.getAmount()}),this.setState({withdrawValue:a.getAmount({real:!0}),amountError:null},this._checkBalance)}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.sender;if(t){var a=["1.3.0",this.state.to_withdraw.asset_id],n={},r=[];a.forEach(function(a){r.push(Object(O.b)({accountID:t.get("id"),feeID:a,options:["price_per_kbyte"],data:{type:"memo",content:e.props.backingCoinType.toLowerCase()+":"+e.state.toAddress+(e.state.memo?":"+e.state.memo:"")}}))}),Promise.all(r).then(function(t){a.forEach(function(e,a){n[e]=t[a]}),d.a.are_equal_shallow(e.state.feeStatus,n)||e.setState({feeStatus:n}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:"_updateFee",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.fee_asset_id;if(!this.props.sender)return null;Object(O.b)({accountID:this.props.sender.get("id"),feeID:t,options:["price_per_kbyte"],data:{type:"memo",content:this.props.backingCoinType.toLowerCase()+":"+this.state.toAddress+(this.state.memo?":"+this.state.memo:"")}}).then(function(t){var a=t.fee,n=t.hasBalance,r=t.hasPoolBalance;e.setState({feeAmount:a,hasBalance:n,hasPoolBalance:r,error:!n||!r},e._checkFeeStatus)})}},{key:"_getCurrentBalance",value:function(){var e=this;return this.props.balances.find(function(t){return t&&t.get("asset_type")===e.props.asset.get("id")})}},{key:"_checkBalance",value:function(){var e=this.state,t=e.feeAmount,a=e.to_withdraw,n=this.props.asset,r=this._getCurrentBalance();if(r&&t){var o=Object(O.a)(a.getAmount({real:!0}),n,this._getFee(),r,this._getGateFee());if(null!==o)return this.state.balanceError!==!o&&this.setState({balanceError:!o}),o}}},{key:"_getFee",value:function(){var e={getAmount:function(){return 0},asset_id:this.state.fee_asset_id};if(!this.state.feeStatus||!this.state.feeAmount)return e;var t=this.state.feeStatus["1.3.0"],a=this.state.feeStatus[this.state.to_withdraw.asset_id];return t&&t.hasBalance?t.fee:t&&!t.hasBalance&&a&&a.hasBalance?a.fee:t?t.fee:e}},{key:"_onInputAmount",value:function(e){try{this.state.to_withdraw.setAmount({real:parseFloat(e.target.value||0)}),this.setState({withdrawValue:e.target.value,amountError:null},this._checkBalance)}catch(e){console.error("err:",e)}}},{key:"_onInputTo",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address_check_in_progress:!0,withdraw_address_selected:t,validAddress:null,toAddress:t}),this._validateAddress(t)}},{key:"_onMemoChanged",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:"_validateAddress",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(y.j)({url:"",walletType:a.walletType,newAddress:e}).then(function(a){t.state.toAddress===e&&t.setState({withdraw_address_check_in_progress:!1,validAddress:!!a})}).catch(function(e){console.error("Error when validating address:",e)})}},{key:"_openRegistrarSite",value:function(e){e.preventDefault(),window.open(SettingsStore.site_registr,"_blank").opener=null}},{key:"_getGateFee",value:function(){var e=this.props,t=e.gateFee,a=e.asset;return new p.a({real:parseFloat(t?t.replace(",",""):0),asset_id:a.get("id"),precision:a.get("precision")})}},{key:"_renderWithdraw",value:function(){var e=this.state.amountError,t=d.a.replaceName(this.props.asset).name,a=1,n=this.props.supportsMemos,r=this._getFee(),s=this._getGateFee(),i=this.state.feeStatus[r.asset_id],l=x.b.getAsset(r.asset_id),c=i&&!i.hasBalance||this.state.balanceError||!this.state.toAddress||!this.state.withdrawValue;return o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement(u.a,{content:"gateway.withdraw_funds",asset:t})),this._renderCurrentBalance(),o.a.createElement("div",{className:"SimpleTrade__withdraw-row"},o.a.createElement("label",{className:"left-label"},v.a.translate("modal.withdraw.amount")),o.a.createElement("div",{className:"inline-label input-wrapper"},o.a.createElement("input",{tabIndex:a++,type:"number",min:"0",onKeyPress:this.onKeyPress.bind(this),value:this.state.withdrawValue,onChange:this._onInputAmount.bind(this)}),o.a.createElement("div",{className:"form-label select floating-dropdown"},o.a.createElement("div",{className:"dropdown-wrapper inactive"},o.a.createElement("div",null,t)))),e?o.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},o.a.createElement(u.a,{content:e})):null,this.state.balanceError?o.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},o.a.createElement(u.a,{content:"transfer.errors.insufficient"})):null),o.a.createElement("div",{className:"SimpleTrade__withdraw-row"},o.a.createElement("label",{className:"left-label"},v.a.translate("transfer.fee")),o.a.createElement("div",{className:"inline-label input-wrapper"},o.a.createElement("input",{type:"text",disabled:!0,value:r.getAmount({real:!0})}),o.a.createElement("div",{className:"form-label select floating-dropdown"},o.a.createElement("div",{className:"dropdown-wrapper inactive"},o.a.createElement("div",null,l?o.a.createElement(A.a,{name:l.get("symbol")}):null)))),i&&!i.hasBalance?o.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},o.a.createElement(u.a,{content:"transfer.errors.insufficient"})):null),o.a.createElement("div",{className:"SimpleTrade__withdraw-row"},o.a.createElement("label",{className:"left-label"},v.a.translate("gateway.fee")),o.a.createElement("div",{className:"inline-label input-wrapper"},o.a.createElement("input",{type:"text",disabled:!0,value:s.getAmount({real:!0})}),o.a.createElement("div",{className:"form-label select floating-dropdown"},o.a.createElement("div",{className:"dropdown-wrapper inactive"},o.a.createElement("div",null,o.a.createElement(A.a,{name:this.props.asset.get("symbol")}))))),i&&!i.hasBalance?o.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},o.a.createElement(u.a,{content:"transfer.errors.insufficient"})):null),o.a.createElement("div",{className:"SimpleTrade__withdraw-row"},o.a.createElement("label",{className:"left-label"},v.a.translate("modal.withdraw.address")),o.a.createElement("div",{className:"inline-label input-wrapper"},o.a.createElement("input",{placeholder:v.a.translate("gateway.withdraw_placeholder",{asset:t}),tabIndex:a++,type:"text",value:this.state.toAddress,onChange:this._onInputTo.bind(this)}),o.a.createElement("div",{className:"form-label select floating-dropdown"},o.a.createElement("div",{className:"dropdown-wrapper inactive"},o.a.createElement("div",{"data-place":"right","data-tip":v.a.translate("tooltip.withdraw_address",{asset:t})},"?")))),!this.state.validAddress&&this.state.toAddress?o.a.createElement("div",{className:"has-error",style:{paddingTop:10}},o.a.createElement(u.a,{content:"gateway.valid_address",coin_type:t})):null),n?o.a.createElement("div",{className:"SimpleTrade__withdraw-row"},o.a.createElement("label",{className:"left-label"},v.a.translate("transfer.memo")),o.a.createElement("div",{className:"inline-label input-wrapper"},o.a.createElement("textarea",{rows:"3",value:this.state.memo,tabIndex:a++,onChange:this._onMemoChanged.bind(this)})),!this.state.validAddress&&this.state.toAddress?o.a.createElement("div",{className:"has-error",style:{paddingTop:10}},o.a.createElement(u.a,{content:"gateway.valid_address",coin_type:t})):null):null,o.a.createElement("div",{className:"button-group SimpleTrade__withdraw-row"},o.a.createElement("button",{tabIndex:a++,className:"button"+(c?" disabled":""),onClick:this.onSubmit.bind(this),type:"submit"},o.a.createElement(u.a,{content:"gateway.withdraw_now"}))))}},{key:"_renderDeposit",value:function(){var e=this.state,t=e.receive_address,a=e.loading,n=e.emptyAddressDeposit,r=d.a.replaceName(this.props.asset).name,s=t&&"memo"in t&&t.memo,i=t&&t.address||"",l=1;return o.a.createElement("div",{className:i?"":"no-overflow"},o.a.createElement("p",null,o.a.createElement(u.a,{unsafe:!0,content:"gateway.add_funds",account:this.props.sender.get("name")})),this._renderCurrentBalance(),o.a.createElement("div",{className:"SimpleTrade__withdraw-row"},o.a.createElement("p",{style:{marginBottom:10},"data-place":"right","data-tip":v.a.translate("tooltip.deposit_tip",{asset:r})},o.a.createElement(u.a,{className:"help-tooltip",content:"gateway.deposit_to",asset:r}),":",o.a.createElement("label",{className:"fz_12 left-label"},o.a.createElement(u.a,{content:"gateway.deposit_notice_delay"}))),i?o.a.createElement("label",null,n?o.a.createElement(u.a,{content:"gateway.please_generate_address"}):o.a.createElement("span",{className:"inline-label"},o.a.createElement("input",{readOnly:!0,type:"text",value:i}),o.a.createElement(E.a,{text:i})," ")):o.a.createElement(k.a,{type:"three-bounce"}),s?o.a.createElement("label",null,o.a.createElement("span",{className:"inline-label"},o.a.createElement("input",{readOnly:!0,type:"text",value:v.a.translate("transfer.memo")+": "+t.memo}),o.a.createElement(E.a,{text:t.memo}))):null,t&&t.error?o.a.createElement("div",{className:"has-error",style:{paddingTop:10}},t.error.message):null),o.a.createElement("div",{className:"button-group SimpleTrade__withdraw-row"},o.a.createElement("button",{tabIndex:l++,className:"button spinner-button-circle",onClick:this.requestDepositAddressLoad.bind(this),type:"submit"},a?o.a.createElement(k.a,{type:"circle"}):null,o.a.createElement(u.a,{content:"gateway.generate_new"}))))}},{key:"_renderCurrentBalance",value:function(){var e=d.a.replaceName(this.props.asset).name,t="deposit"===this.props.action,a=this._getCurrentBalance(),n=a?new p.a({asset_id:a.get("asset_type"),precision:this.props.asset.get("precision"),amount:a.get("balance")}):null,r=t?o.a.createElement("span",{style:{border:"2px solid black",borderLeft:"none"},className:"form-label"},e):o.a.createElement("button",{"data-place":"right","data-tip":v.a.translate("tooltip.withdraw_full"),className:"button",style:{border:"2px solid black",borderLeft:"none"},onClick:this._updateAmount.bind(this,a?parseInt(a.get("balance"),10):0)},o.a.createElement(w.a,{name:"clippy",title:"icons.clippy.withdraw_full"}));return o.a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{fontSize:"1rem"}},o.a.createElement("label",{style:{fontSize:"1rem"}},v.a.translate("gateway.balance_asset",{asset:e}),":",o.a.createElement("span",{className:"inline-label"},o.a.createElement("input",{disabled:!0,style:{color:"black",border:"2px solid black",padding:10,width:"100%"},value:n?n.getAmount({real:!0}):0}),r)))}},{key:"render",value:function(){var e=this.props,t=e.asset,a="deposit"===e.action;if(!t)return null;var n=d.a.replaceName(t).name,r=this.props.isDown?o.a.createElement("div",null,o.a.createElement(u.a,{className:"txtlabel cancel",content:"gateway.unavailable_OPEN",component:"p"})):this.props.isAvailable?a?this._renderDeposit():this._renderWithdraw():o.a.createElement("div",null,o.a.createElement(u.a,{className:"txtlabel cancel",content:"gateway.unavailable",component:"p"}));return o.a.createElement("div",{className:"SimpleTrade__modal"},o.a.createElement("div",{className:"Modal__header"},o.a.createElement("h3",null,o.a.createElement(u.a,{content:a?"gateway.deposit":"modal.withdraw.submit"})," ",n)),o.a.createElement("div",{className:"Modal__divider"}),o.a.createElement("div",{className:"grid-block vertical no-overflow",style:{zIndex:1002,paddingLeft:"2rem",paddingRight:"2rem",paddingTop:"1rem"}},r))}}]),a}();I.propTypes={sender:m.a.ChainAccount.isRequired,asset:m.a.ChainAsset.isRequired,coreAsset:m.a.ChainAsset.isRequired,globalObject:m.a.ChainAsset.isRequired},I.defaultProps={coreAsset:"1.3.0",globalObject:"2.0.0"},I=Object(h.a)(I);var q=function(e){function t(){P(this,t);var e=j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return T(t,o.a.Component),N(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){i.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){return this.state.open?o.a.createElement(l.a,{className:"test",onClose:this.onClose.bind(this),overlay:!0,id:this.props.modalId},this.state.open?o.a.createElement(I,S({},this.props,{open:this.state.open})):null):null}}]),t}();t.a=q}).call(this,a(31).Buffer)},445:function(e,t,a){"use strict";a.d(t,"a",function(){return D});var n=a(0),r=a.n(n),o=a(1),s=a.n(o),i=a(122),l=a(146),c=a(7),u=a(13),p=a(5),d=a(4),h=a(107),m=a(55),f=a.n(m),b=a(3),g=a.n(b),_=a(12),v=a(8),y=a.n(v),E=a(2),w=a.n(E),k=a(50),O=a(39),A=a.n(O),x=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P=d.c.operations,j={textAlign:"left"},T={textAlign:"right"};function I(e,t){return t.block_num===e.block_num?t.virtual_op-e.virtual_op:t.block_num-e.block_num}function q(e){return e?'"'+e.textContent.replace(/[\s\t\r\n]/gi," ")+'"':""}var D=function(e){function t(e){C(this,t);var a=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={limit:e.limit||20,csvExport:!1,headerHeight:85,openFilter:!1,filter:"all"},a._updateTooltip=a._updateTooltip.bind(a),a._downloadCSV=a._downloadCSV.bind(a),a._findActiveFilter=a._findActiveFilter.bind(a),a._renderFilters=a._renderFilters.bind(a),a}return N(t,r.a.Component),x(t,[{key:"componentDidMount",value:function(){if(this._updateTooltip(),!this.props.fullHeight){var e=this.refs.transactions;f.a.initialize(e),this._setHeaderHeight()}}},{key:"_setHeaderHeight",value:function(){var e=this.refs.header.offsetHeight;e!==this.state.headerHeight&&this.setState({headerHeight:e})}},{key:"shouldComponentUpdate",value:function(e,t){if(!p.a.are_equal_shallow(this.props.accountsList,e.accountsList))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(this.state.headerHeight!==t.headerHeight)return!0;if(this.state.openFilter!==t.openFilter)return!0;if(this.state.filter!==t.filter)return!0;if(this.props.customFilter&&(!p.a.are_equal_shallow(this.props.customFilter.fields,e.customFilter.fields)||!p.a.are_equal_shallow(this.props.customFilter.values,e.customFilter.values)))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(t.limit!==this.state.limit||t.csvExport!==this.state.csvExport)return!0;for(var a=0;a<e.accountsList.length;++a){var n=e.accountsList[a],r=this.props.accountsList[a];if(n&&r&&n.get("history")!==r.get("history"))return!0}return!1}},{key:"componentDidUpdate",value:function(){if(this._updateTooltip(),this.state.csvExport){this.state.csvExport=!1;var e=document.getElementById("csv_export_container").childNodes,t="",a=!0,n=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var l=o.value.childNodes;""!==t&&(t+="\n"),t+=[q(l[0]),q(l[1]),q(l[2]),q(l[3])].join(",")}}catch(e){n=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw r}}var c=new Blob([t],{type:"text/csv;charset=utf-8"}),u=new Date;Object(i.saveAs)(c,"btshist-"+u.getFullYear()+"-"+("0"+(u.getMonth()+1)).slice(-2)+"-"+("0"+u.getDate()).slice(-2)+"-"+("0"+u.getHours()).slice(-2)+("0"+u.getMinutes()).slice(-2)+".csv")}if(!this.props.fullHeight){var p=this.refs.transactions;f.a.update(p),this._setHeaderHeight()}}},{key:"_onIncreaseLimit",value:function(){this.setState({limit:this.state.limit+30})}},{key:"_getHistory",value:function(e,t,a){var n=[],r=new Set,o=!0,s=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(u){var p=u.get("history");p&&(n=n.concat(p.toJS().filter(function(e){return!r.has(e.id)&&r.add(e.id)})))}}}catch(e){s=!0,i=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw i}}return t&&(n=n.filter(function(e){return e.op[0]===P[t]})),a&&(n=n.filter(function(e){return a.fields.reduce(function(t,n){switch(n){case"asset_id":return t&&e.op[1].amount[n]===a.values[n];default:return t&&e.op[1][n]===a.values[n]}},!0)})),n}},{key:"_downloadCSV",value:function(){this.setState({csvExport:!0})}},{key:"_onChangeFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"_findActiveFilter",value:function(e){var t=this;return e.find(function(e){return e===t.state.filter})}},{key:"_updateTooltip",value:function(){A.a.rebuild()}},{key:"_renderFilters",value:function(e){var t=this,a=this._findActiveFilter(e);return a?r.a.createElement("div",{className:y()("select",{"is-open":this.state.openFilter})},r.a.createElement("span",{className:"placeholder",onClick:function(e){e.preventDefault(),t.setState({openFilter:!t.state.openFilter})}},g.a.translate("transaction.trxTypes."+a)),r.a.createElement("ul",null,e.filter(function(e){return e!==a}).map(function(e){return r.a.createElement("li",{key:""+e,onClick:function(a){a.preventDefault(),t.setState({filter:e}),t.setState({openFilter:!1})}},g.a.translate("transaction.trxTypes."+e))}))):null}},{key:"render",value:function(){var e=this,t=this.props,a=t.accountsList,n=t.compactView,o=t.filter,i=t.customFilter,c=t.style,u=(t.maxHeight,this.state),p=u.limit,d=(u.headerHeight,1===a.length&&a[0]?a[0].get("id"):null),m=this._getHistory(a,this.props.showFilters&&"all"!==this.state.filter?this.state.filter:o,i).sort(I),f=m.length;A.a.rebuild();var b=null;b=["all","transfer","limit_order_create","limit_order_cancel","fill_order","account_create","account_update","asset_create","witness_withdraw_pay","vesting_balance_withdraw"];var v=m.length?m.slice(0,p).map(function(e){return r.a.createElement(l.a,{includeOperationId:!0,operationId:e.id,style:j,key:e.id,op:e.op,result:e.result,block:e.block_num,current:d,hideFee:!0,inverted:!1,hideOpLabel:n,fullDate:!0})}):[r.a.createElement("tr",{key:"no_recent"},r.a.createElement("td",{colSpan:n?"2":"3"},r.a.createElement(s.a,{content:"operation.no_recent"})))];return(this.props.showMore&&f>this.props.limit||p<f)&&v.push(r.a.createElement("tr",{className:"total-value",key:"total_value"},r.a.createElement("td",{className:"column-hide-tiny"}),r.a.createElement("td",{style:T}),r.a.createElement("td",{style:{textAlign:"center"}}," ",r.a.createElement("a",{onClick:this._onIncreaseLimit.bind(this)},r.a.createElement(_.a,{name:"chevron-down",title:"icons.chevron_down.transactions",className:"icon-14px"}))),r.a.createElement("td",null," "))),r.a.createElement("div",{className:"recent-transactions no-overflow",style:c},r.a.createElement("div",{className:"generic-bordered-box"},this.props.dashboard?null:r.a.createElement("div",{ref:"header"},r.a.createElement("div",{className:"block-content-header"},r.a.createElement("span",null,this.props.title?this.props.title:r.a.createElement(s.a,{content:"account.recent"})))),r.a.createElement("div",{className:"dashboard__actions"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-3"},this.props.showFilters?this._renderFilters(b):null)))),r.a.createElement("div",{className:"dashboard__adaptive"},r.a.createElement("table",{className:"dashboard__table transactions-list blue-bg with-borders"+(n?"compact":"")+(this.props.dashboard?" dashboard-table":"")},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"column-hide-tiny",style:j},r.a.createElement(s.a,{content:"account.transactions.id"})),r.a.createElement("th",{className:"column-hide-tiny",style:j},r.a.createElement(s.a,{content:"account.transactions.type",onLoad:this._updateTooltip()})),r.a.createElement("th",{style:j},r.a.createElement(s.a,{content:"account.transactions.fee"})),r.a.createElement("th",{style:j},r.a.createElement(s.a,{content:"account.transactions.info"})),r.a.createElement("th",{style:j},r.a.createElement(s.a,{content:"account.transactions.time"})))),r.a.createElement(h.a,{component:"tbody",transitionName:"newrow"},v))),f>0?r.a.createElement("div",{className:"export-row",style:{marginTop:"20px"}},r.a.createElement("a",{className:"csv-export",href:"#",onClick:function(t){t.preventDefault(),e._downloadCSV()}},r.a.createElement("img",{src:k.csvIcon,alt:""}),g.a.translate("transaction.csv_tip"))):null,f>0&&this.state.csvExport&&r.a.createElement("div",{id:"csv_export_container",style:{display:"none"}},r.a.createElement("div",null,r.a.createElement("div",null,"DATE"),r.a.createElement("div",null,"OPERATION"),r.a.createElement("div",null,"MEMO"),r.a.createElement("div",null,"AMOUNT")),m.map(function(e){return r.a.createElement(l.a,{key:e.id,op:e.op,result:e.result,block:e.block_num,inverted:!1,csvExportMode:!0})}))))}}]),t}();D.propTypes={accountsList:c.a.ChainAccountsList.isRequired,compactView:w.a.bool,limit:w.a.number,maxHeight:w.a.number,fullHeight:w.a.bool,showFilters:w.a.bool},D.defaultProps={limit:25,maxHeight:500,fullHeight:!1,showFilters:!1},D=Object(u.a)(D);var M=function(e){function t(){return C(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,r.a.Component),x(t,[{key:"render",value:function(){return r.a.createElement("span",{className:"wrapper"},this.props.children(this.props))}}]),t}();M.propTypes={asset:c.a.ChainAsset.isRequired,to:c.a.ChainAccount.isRequired,fromAccount:c.a.ChainAccount.isRequired},M.defaultProps={asset:"1.3.0"},M=Object(u.a)(M)},524:function(e,t,a){"use strict";var n=a(64).a.isFinite;t.a=function(e){return"number"==typeof e&&n(e)}},573:function(e,t,a){var n;n=function(e){var t=function(e){var t=e.each,a=e.extend,n=e.isArray,r=e.isObject,o=e.isNumber,s=e.merge,i=e.pick,l=e.reduce;return{getColor:function(t,a){var n,r,o,s,l=a.index,c=a.mapOptionsToLevel,u=a.parentColor,p=a.parentColorIndex,d=a.series,h=a.colors,m=a.siblings,f=d.points;return t&&(f=f[t.i],t=c[t.level]||{},(n=f&&t.colorByPoint)&&(o=f.index%(h?h.length:d.chart.options.chart.colorCount),r=h&&h[o]),h=f&&f.options.color,n=t&&t.color,(c=u)&&(c=(c=t&&t.colorVariation)&&"brightness"===c.key?e.color(u).brighten(l/m*c.to).get():u),n=i(h,n,r,c,d.color),s=i(f&&f.options.colorIndex,t&&t.colorIndex,o,p,a.colorIndex)),{color:n,colorIndex:s}},getLevelOptions:function(e){var t,i,c,u,p=null;if(r(e))for(p={},c=o(e.from)?e.from:1,u=e.levels,i={},t=r(e.defaults)?e.defaults:{},n(u)&&(i=l(u,function(e,n){var i,l;return r(n)&&o(n.level)&&(i="boolean"==typeof(l=s({},n)).levelIsConstant?l.levelIsConstant:t.levelIsConstant,delete l.levelIsConstant,delete l.level,n=n.level+(i?0:c-1),r(e[n])?a(e[n],l):e[n]=l),e},{})),u=o(e.to)?e.to:1,e=0;e<=u;e++)p[e]=s({},t,r(i[e])?i[e]:{});return p},setTreeValues:function e(n,r){var o=r.before,s=r.idRoot,l=r.mapIdToNode[s],c=r.points[n.i],u=c&&c.options||{},p=0,d=[];return a(n,{levelDynamic:n.level-("boolean"!=typeof r.levelIsConstant||r.levelIsConstant?0:l.level),name:i(c&&c.name,""),visible:s===n.id||"boolean"==typeof r.visible&&r.visible}),"function"==typeof o&&(n=o(n,r)),t(n.children,function(t,o){var s=a({},r);a(s,{index:o,siblings:n.children.length,visible:n.visible}),t=e(t,s),d.push(t),t.visible&&(p+=t.val)}),n.visible=0<p||n.visible,o=i(u.value,p),a(n,{children:d,childrenTotal:p,isLeaf:n.visible&&!p,val:o}),n},updateRootId:function(e){var t;return r(e)&&(t=r(e.options)?e.options:{},t=i(e.rootNode,t.rootId,""),r(e.userOptions)&&(e.userOptions.rootId=t),e.rootNode=t),t}}}(e);!function(e,t){var a=e.seriesType,n=e.seriesTypes,r=e.map,o=e.merge,s=e.extend,i=e.noop,l=e.each,c=t.getColor,u=t.getLevelOptions,p=e.grep,d=e.isNumber,h=e.isObject,m=e.isString,f=e.pick,b=e.Series,g=e.stableSort,_=e.Color,v=e.reduce,y=function(e,t,a){a=a||this,!1!==(e=t.call(a,e))&&y(e,t,a)},E=t.updateRootId;a("treemap","scatter",{showInLegend:!1,marker:!1,colorByPoint:!1,dataLabels:{enabled:!0,defer:!1,verticalAlign:"middle",formatter:function(){return this.point.name||this.point.id},inside:!0},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}</b>: {point.value}<br/>"},ignoreHiddenPoint:!0,layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,drillUpButton:{position:{align:"right",x:-10,y:10}},borderColor:"#e6e6e6",borderWidth:1,opacity:.15,states:{hover:{borderColor:"#999999",brightness:n.heatmap?0:.1,halo:!1,opacity:.75,shadow:!1}}},{pointArrayMap:["value"],axisTypes:n.heatmap?["xAxis","yAxis","colorAxis"]:["xAxis","yAxis"],directTouch:!0,optionalAxis:"colorAxis",getSymbol:i,parallelArrays:["x","y","value","colorValue"],colorKey:"colorValue",translateColors:n.heatmap&&n.heatmap.prototype.translateColors,colorAttribs:n.heatmap&&n.heatmap.prototype.colorAttribs,trackerGroups:["group","dataLabelsGroup"],getListOfParents:function(t,a){return function(t,a,n){n=n||this,e.objectEach(t,function(e,r){a.call(n,e,r,t)})}(t=v(t||[],function(e,t,a){return void 0===e[t=f(t.parent,"")]&&(e[t]=[]),e[t].push(a),e},{}),function(t,n,r){""!==n&&-1===e.inArray(n,a)&&(l(t,function(e){r[""].push(e)}),delete r[n])}),t},getTree:function(){var e=r(this.data,function(e){return e.id});e=this.getListOfParents(this.data,e);return this.nodeMap=[],this.buildNode("",-1,0,e,null)},init:function(t,a){b.prototype.init.call(this,t,a),this.options.allowDrillToNode&&e.addEvent(this,"click",this.onClickDrillToNode)},buildNode:function(e,t,a,n,r){var o,s=this,i=[],c=s.points[t],u=0;return l(n[e]||[],function(t){o=s.buildNode(s.points[t].id,t,a+1,n,e),u=Math.max(o.height+1,u),i.push(o)}),t={id:e,i:t,children:i,height:u,level:a,parent:r,visible:!1},s.nodeMap[t.id]=t,c&&(c.node=t),t},setTreeValues:function(e){var t,a=this,n=a.options,r=a.nodeMap[a.rootNode],o=(n="boolean"!=typeof n.levelIsConstant||n.levelIsConstant,0),i=[],c=a.points[e.i];return l(e.children,function(e){e=a.setTreeValues(e),i.push(e),e.ignore||(o+=e.val)}),g(i,function(e,t){return e.sortIndex-t.sortIndex}),t=f(c&&c.options.value,o),c&&(c.value=t),s(e,{children:i,childrenTotal:o,ignore:!(f(c&&c.visible,!0)&&0<t),isLeaf:e.visible&&!o,levelDynamic:e.level-(n?0:r.level),name:f(c&&c.name,""),sortIndex:f(c&&c.sortIndex,-t),val:t}),e},calculateChildrenAreas:function(e,t){var a,n=this,r=n.options,s=n.mapOptionsToLevel[e.level+1],i=f(n[s&&s.layoutAlgorithm]&&s.layoutAlgorithm,r.layoutAlgorithm),c=r.alternateStartingDirection;e=p(e.children,function(e){return!e.ignore}),s&&s.layoutStartingDirection&&(t.direction="vertical"===s.layoutStartingDirection?0:1),a=n[i](t,e),l(e,function(e,r){r=a[r],e.values=o(r,{val:e.childrenTotal,direction:c?1-t.direction:t.direction}),e.pointValues=o(r,{x:r.x/n.axisRatio,width:r.width/n.axisRatio}),e.children.length&&n.calculateChildrenAreas(e,e.values)})},setPointValues:function(){var e=this,t=e.xAxis,a=e.yAxis;l(e.points,function(n){var r,o,s,i=n.node,l=i.pointValues;s=(e.pointAttribs(n)["stroke-width"]||0)%2/2,l&&i.visible?(i=Math.round(t.translate(l.x,0,0,0,1))-s,r=Math.round(t.translate(l.x+l.width,0,0,0,1))-s,o=Math.round(a.translate(l.y,0,0,0,1))-s,l=Math.round(a.translate(l.y+l.height,0,0,0,1))-s,n.shapeType="rect",n.shapeArgs={x:Math.min(i,r),y:Math.min(o,l),width:Math.abs(r-i),height:Math.abs(l-o)},n.plotX=n.shapeArgs.x+n.shapeArgs.width/2,n.plotY=n.shapeArgs.y+n.shapeArgs.height/2):(delete n.plotX,delete n.plotY)})},setColorRecursive:function(e,t,a,n,r){var o,s=this,i=(i=s&&s.chart)&&i.options&&i.options.colors;e&&(o=c(e,{colors:i,index:n,mapOptionsToLevel:s.mapOptionsToLevel,parentColor:t,parentColorIndex:a,series:s,siblings:r}),(t=s.points[e.i])&&(t.color=o.color,t.colorIndex=o.colorIndex),l(e.children||[],function(t,a){s.setColorRecursive(t,o.color,o.colorIndex,a,e.children.length)}))},algorithmGroup:function(e,t,a,n){this.height=e,this.width=t,this.plot=n,this.startDirection=this.direction=a,this.lH=this.nH=this.lW=this.nW=this.total=0,this.elArr=[],this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(e,t){return Math.max(e/t,t/e)}},this.addElement=function(e){this.lP.total=this.elArr[this.elArr.length-1],this.total+=e,0===this.direction?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH)),this.elArr.push(e)},this.reset=function(){this.lW=this.nW=0,this.elArr=[],this.total=0}},algorithmCalcPoints:function(e,t,a,n){var r,o,s,i,c,u=a.lW,p=a.lH,d=a.plot,h=0,m=a.elArr.length-1;t?(u=a.nW,p=a.nH):c=a.elArr[a.elArr.length-1],l(a.elArr,function(e){(t||h<m)&&(0===a.direction?(r=d.x,o=d.y,i=e/(s=u)):(r=d.x,o=d.y,s=e/(i=p)),n.push({x:r,y:o,width:s,height:i}),0===a.direction?d.y+=i:d.x+=s),h+=1}),a.reset(),0===a.direction?a.width-=u:a.height-=p,d.y=d.parent.y+(d.parent.height-a.height),d.x=d.parent.x+(d.parent.width-a.width),e&&(a.direction=1-a.direction),t||a.addElement(c)},algorithmLowAspectRatio:function(e,t,a){var n,r=[],o=this,s={x:t.x,y:t.y,parent:t},i=0,c=a.length-1,u=new this.algorithmGroup(t.height,t.width,t.direction,s);return l(a,function(a){n=a.val/t.val*t.height*t.width,u.addElement(n),u.lP.nR>u.lP.lR&&o.algorithmCalcPoints(e,!1,u,r,s),i===c&&o.algorithmCalcPoints(e,!0,u,r,s),i+=1}),r},algorithmFill:function(e,t,a){var n,r,o,s,i,c=[],u=t.direction,p=t.x,d=t.y,h=t.width,m=t.height;return l(a,function(a){n=a.val/t.val*t.height*t.width,r=p,o=d,0===u?(h-=s=n/(i=m),p+=s):(m-=i=n/(s=h),d+=i),c.push({x:r,y:o,width:s,height:i}),e&&(u=1-u)}),c},strip:function(e,t){return this.algorithmLowAspectRatio(!1,e,t)},squarified:function(e,t){return this.algorithmLowAspectRatio(!0,e,t)},sliceAndDice:function(e,t){return this.algorithmFill(!0,e,t)},stripes:function(e,t){return this.algorithmFill(!1,e,t)},translate:function(){var e,t,a=this,n=a.options,r=E(a);b.prototype.translate.call(a),t=a.tree=a.getTree(),e=a.nodeMap[r],a.mapOptionsToLevel=u({from:e.level+1,levels:n.levels,to:t.height,defaults:{levelIsConstant:a.options.levelIsConstant,colorByPoint:n.colorByPoint}}),""===r||e&&e.children.length||(a.drillToNode("",!1),r=a.rootNode,e=a.nodeMap[r]),y(a.nodeMap[a.rootNode],function(e){var t=!1,n=e.parent;return e.visible=!0,(n||""===n)&&(t=a.nodeMap[n]),t}),y(a.nodeMap[a.rootNode].children,function(e){var t=!1;return l(e,function(e){e.visible=!0,e.children.length&&(t=(t||[]).concat(e.children))}),t}),a.setTreeValues(t),a.axisRatio=a.xAxis.len/a.yAxis.len,a.nodeMap[""].pointValues=r={x:0,y:0,width:100,height:100},a.nodeMap[""].values=r=o(r,{width:r.width*a.axisRatio,direction:"vertical"===n.layoutStartingDirection?0:1,val:t.val}),a.calculateChildrenAreas(t,r),a.colorAxis?a.translateColors():n.colorByPoint||a.setColorRecursive(a.tree),n.allowDrillToNode&&(n=e.pointValues,a.xAxis.setExtremes(n.x,n.x+n.width,!1),a.yAxis.setExtremes(n.y,n.y+n.height,!1),a.xAxis.setScale(),a.yAxis.setScale()),a.setPointValues()},drawDataLabels:function(){var e,t,a=this,n=a.mapOptionsToLevel,r=p(a.points,function(e){return e.node.visible});l(r,function(r){t=n[r.node.level],e={style:{}},r.node.isLeaf||(e.enabled=!1),t&&t.dataLabels&&(e=o(e,t.dataLabels),a._hasPointLabels=!0),r.shapeArgs&&(e.style.width=r.shapeArgs.width,r.dataLabel&&r.dataLabel.css({width:r.shapeArgs.width+"px"})),r.dlOptions=o(e,r.options.dataLabels)}),b.prototype.drawDataLabels.call(this)},alignDataLabel:function(e){n.column.prototype.alignDataLabel.apply(this,arguments),e.dataLabel&&e.dataLabel.attr({zIndex:(e.node.zIndex||0)+1})},pointAttribs:function(e,t){var a=h(this.mapOptionsToLevel)?this.mapOptionsToLevel:{},n=e&&a[e.node.level]||{},r=(a=this.options,t&&a.states[t]||{}),o=e&&e.getClassName()||"";return e={stroke:e&&e.borderColor||n.borderColor||r.borderColor||a.borderColor,"stroke-width":f(e&&e.borderWidth,n.borderWidth,r.borderWidth,a.borderWidth),dashstyle:e&&e.borderDashStyle||n.borderDashStyle||r.borderDashStyle||a.borderDashStyle,fill:e&&e.color||this.color},-1!==o.indexOf("highcharts-above-level")?(e.fill="none",e["stroke-width"]=0):-1!==o.indexOf("highcharts-internal-node-interactive")?(t=f(r.opacity,a.opacity),e.fill=_(e.fill).setOpacity(t).get(),e.cursor="pointer"):-1!==o.indexOf("highcharts-internal-node")?e.fill="none":t&&(e.fill=_(e.fill).brighten(r.brightness).get()),e},drawPoints:function(){var e=this,t=p(e.points,function(e){return e.node.visible});l(t,function(t){var a="level-group-"+t.node.levelDynamic;e[a]||(e[a]=e.chart.renderer.g(a).attr({zIndex:1e3-t.node.levelDynamic}).add(e.group)),t.group=e[a]}),n.column.prototype.drawPoints.call(this),e.options.allowDrillToNode&&l(t,function(t){t.graphic&&(t.drillId=e.options.interactByLeaf?e.drillToByLeaf(t):e.drillToByGroup(t))})},onClickDrillToNode:function(e){var t=(e=e.point)&&e.drillId;m(t)&&(e.setState(""),this.drillToNode(t))},drillToByGroup:function(e){var t=!1;return 1!=e.node.level-this.nodeMap[this.rootNode].level||e.node.isLeaf||(t=e.id),t},drillToByLeaf:function(e){var t=!1;if(e.node.parent!==this.rootNode&&e.node.isLeaf)for(e=e.node;!t;)(e=this.nodeMap[e.parent]).parent===this.rootNode&&(t=e.id);return t},drillUp:function(){var e=this.nodeMap[this.rootNode];e&&m(e.parent)&&this.drillToNode(e.parent)},drillToNode:function(e,t){var a=this.nodeMap[e];this.idPreviousRoot=this.rootNode,this.rootNode=e,""===e?this.drillUpButton=this.drillUpButton.destroy():this.showDrillUpButton(a&&a.name||e),this.isDirty=!0,f(t,!0)&&this.chart.redraw()},showDrillUpButton:function(e){var t=this;e=e||"< Back";var a,n,r=t.options.drillUpButton;r.text&&(e=r.text),this.drillUpButton?(this.drillUpButton.placed=!1,this.drillUpButton.attr({text:e}).align()):(n=(a=r.theme)&&a.states,this.drillUpButton=this.chart.renderer.button(e,null,null,function(){t.drillUp()},a,n&&n.hover,n&&n.select).addClass("highcharts-drillup-button").attr({align:r.position.align,zIndex:7}).add().align(r.position,!1,r.relativeTo||"plotBox"))},buildKDTree:i,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,getExtremes:function(){b.prototype.getExtremes.call(this,this.colorValueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,b.prototype.getExtremes.call(this)},getExtremesFromAll:!0,bindAxes:function(){var t={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,dataMin:0,minPadding:0,max:100,dataMax:100,maxPadding:0,startOnTick:!1,title:null,tickPositions:[]};b.prototype.bindAxes.call(this),e.extend(this.yAxis.options,t),e.extend(this.xAxis.options,t)},utils:{recursive:y,reduce:v}},{getClassName:function(){var t=e.Point.prototype.getClassName.call(this),a=this.series,n=a.options;return this.node.level<=a.nodeMap[a.rootNode].level?t+=" highcharts-above-level":this.node.isLeaf||f(n.interactByLeaf,!n.allowDrillToNode)?this.node.isLeaf||(t+=" highcharts-internal-node"):t+=" highcharts-internal-node-interactive",t},isValid:function(){return this.id||d(this.value)},setState:function(t){e.Point.prototype.setState.call(this,t),this.graphic&&this.graphic.attr({zIndex:"hover"===t?1:0})},setVisible:n.pie.prototype.pointClass.prototype.setVisible})}(e,t)},e.exports?e.exports=n:n(Highcharts)},574:function(e,t,a){var n;n=function(e){!function(e){var t,a=e.addEvent,n=e.Axis,r=e.Chart,o=e.color,s=e.each,i=e.extend,l=e.isNumber,c=e.Legend,u=e.LegendSymbolMixin,p=e.noop,d=e.merge,h=e.pick;e.ColorAxis||(t=e.ColorAxis=function(){this.init.apply(this,arguments)},i(t.prototype,n.prototype),i(t.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{overflow:"justify",rotation:0},minColor:"#e6ebf5",maxColor:"#003399",tickLength:5,showInLegend:!0},keepProps:["legendGroup","legendItemHeight","legendItemWidth","legendItem","legendSymbol"].concat(n.prototype.keepProps),init:function(e,t){var a,r="vertical"!==e.options.legend.layout;this.coll="colorAxis",a=d(this.defaultColorAxisOptions,{side:r?2:1,reversed:!r},t,{opposite:!r,showEmpty:!1,title:null,visible:e.options.legend.enabled}),n.prototype.init.call(this,e,a),t.dataClasses&&this.initDataClasses(t),this.initStops(),this.horiz=r,this.zoomEnabled=!1,this.defaultLegendLength=200},initDataClasses:function(e){var t,a=this.chart,n=0,r=a.options.chart.colorCount,i=this.options,l=e.dataClasses.length;this.dataClasses=t=[],this.legendItems=[],s(e.dataClasses,function(e,s){e=d(e),t.push(e),e.color||("category"===i.dataClassColor?(s=a.options.colors,r=s.length,e.color=s[n],e.colorIndex=n,++n===r&&(n=0)):e.color=o(i.minColor).tweenTo(o(i.maxColor),2>l?.5:s/(l-1)))})},setTickPositions:function(){if(!this.dataClasses)return n.prototype.setTickPositions.call(this)},initStops:function(){this.stops=this.options.stops||[[0,this.options.minColor],[1,this.options.maxColor]],s(this.stops,function(e){e.color=o(e[1])})},setOptions:function(e){n.prototype.setOptions.call(this,e),this.options.crosshair=this.options.marker},setAxisSize:function(){var e,t,a=this.legendSymbol,n=this.chart,r=n.options.legend||{};a?(this.left=r=a.attr("x"),this.top=e=a.attr("y"),this.width=t=a.attr("width"),this.height=a=a.attr("height"),this.right=n.chartWidth-r-t,this.bottom=n.chartHeight-e-a,this.len=this.horiz?t:a,this.pos=this.horiz?r:e):this.len=(this.horiz?r.symbolWidth:r.symbolHeight)||this.defaultLegendLength},normalizedValue:function(e){return this.isLog&&(e=this.val2lin(e)),1-(this.max-e)/(this.max-this.min||1)},toColor:function(e,t){var a,n,r,o,s=this.stops,i=this.dataClasses;if(i){for(o=i.length;o--;)if(a=(r=i[o]).from,s=r.to,(void 0===a||e>=a)&&(void 0===s||e<=s)){n=r.color,t&&(t.dataClass=o,t.colorIndex=r.colorIndex);break}}else{for(e=this.normalizedValue(e),o=s.length;o--&&!(e>s[o][0]););a=s[o]||s[o+1],e=1-((s=s[o+1]||a)[0]-e)/(s[0]-a[0]||1),n=a.color.tweenTo(s.color,e)}return n},getOffset:function(){var e=this.legendGroup,t=this.chart.axisOffset[this.side];e&&(this.axisParent=e,n.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=t)},setLegendColor:function(){var e,t=this.reversed;e=t?1:0,t=t?0:1,e=this.horiz?[e,0,t,0]:[0,t,0,e],this.legendColor={linearGradient:{x1:e[0],y1:e[1],x2:e[2],y2:e[3]},stops:this.stops}},drawLegendSymbol:function(e,t){var a=e.padding,n=e.options,r=this.horiz,o=h(n.symbolWidth,r?this.defaultLegendLength:12),s=h(n.symbolHeight,r?12:this.defaultLegendLength),i=h(n.labelPadding,r?16:30);n=h(n.itemDistance,10);this.setLegendColor(),t.legendSymbol=this.chart.renderer.rect(0,e.baseline-11,o,s).attr({zIndex:1}).add(t.legendGroup),this.legendItemWidth=o+a+(r?n:i),this.legendItemHeight=s+a+(r?i:0)},setState:function(e){s(this.series,function(t){t.setState(e)})},visible:!0,setVisible:p,getSeriesExtremes:function(){var e=this.series,t=e.length;for(this.dataMin=1/0,this.dataMax=-1/0;t--;)e[t].getExtremes(),void 0!==e[t].valueMin&&(this.dataMin=Math.min(this.dataMin,e[t].valueMin),this.dataMax=Math.max(this.dataMax,e[t].valueMax))},drawCrosshair:function(e,t){var a,r=t&&t.plotX,o=t&&t.plotY,s=this.pos,i=this.len;t&&((a=this.toPixels(t[t.series.colorKey]))<s?a=s-2:a>s+i&&(a=s+i+2),t.plotX=a,t.plotY=this.len-a,n.prototype.drawCrosshair.call(this,e,t),t.plotX=r,t.plotY=o,this.cross&&!this.cross.addedToColorAxis&&this.legendGroup&&(this.cross.addClass("highcharts-coloraxis-marker").add(this.legendGroup),this.cross.addedToColorAxis=!0,this.cross.attr({fill:this.crosshair.color})))},getPlotLinePath:function(e,t,a,r,o){return l(o)?this.horiz?["M",o-4,this.top-6,"L",o+4,this.top-6,o,this.top,"Z"]:["M",this.left,o,"L",this.left-6,o+6,this.left-6,o-6,"Z"]:n.prototype.getPlotLinePath.call(this,e,t,a,r)},update:function(e,t){var a=this.chart,r=a.legend;s(this.series,function(e){e.isDirtyData=!0}),e.dataClasses&&r.allItems&&(s(r.allItems,function(e){e.isDataClass&&e.legendGroup&&e.legendGroup.destroy()}),a.isDirtyLegend=!0),a.options[this.coll]=d(this.userOptions,e),n.prototype.update.call(this,e,t),this.legendItem&&(this.setLegendColor(),r.colorizeItem(this,!0))},remove:function(){this.legendItem&&this.chart.legend.destroyItem(this),n.prototype.remove.call(this)},getDataClassLegendSymbols:function(){var t,a=this,n=this.chart,r=this.legendItems,o=n.options.legend,l=o.valueDecimals,c=o.valueSuffix||"";return r.length||s(this.dataClasses,function(o,d){var h=!0,m=o.from,f=o.to;t="",void 0===m?t="< ":void 0===f&&(t="> "),void 0!==m&&(t+=e.numberFormat(m,l)+c),void 0!==m&&void 0!==f&&(t+=" - "),void 0!==f&&(t+=e.numberFormat(f,l)+c),r.push(i({chart:n,name:t,options:{},drawLegendSymbol:u.drawRectangle,visible:!0,setState:p,isDataClass:!0,setVisible:function(){h=this.visible=!h,s(a.series,function(e){s(e.points,function(e){e.dataClass===d&&e.setVisible(h)})}),n.legend.colorizeItem(this,h)}},o))}),r},name:""}),s(["fill","stroke"],function(t){e.Fx.prototype[t+"Setter"]=function(){this.elem.attr(t,o(this.start).tweenTo(o(this.end),this.pos),null,!0)}}),a(r,"afterGetAxes",function(){var e=this.options.colorAxis;this.colorAxis=[],e&&new t(this,e)}),a(c,"afterGetAllItems",function(t){var a=[],n=this.chart.colorAxis[0];for(n&&n.options&&n.options.showInLegend&&(n.options.dataClasses?a=n.getDataClassLegendSymbols():a.push(n),s(n.series,function(a){e.erase(t.allItems,a)})),n=a.length;n--;)t.allItems.unshift(a[n])}),a(c,"afterColorizeItem",function(e){e.visible&&e.item.legendColor&&e.item.legendSymbol.attr({fill:e.item.legendColor})}),a(c,"afterUpdate",function(e,t,a){this.chart.colorAxis[0]&&this.chart.colorAxis[0].update({},a)}))}(e),function(e){var t=e.defined,a=e.each,n=e.noop,r=e.seriesTypes;e.colorPointMixin={isValid:function(){return null!==this.value&&1/0!==this.value&&-1/0!==this.value},setVisible:function(e){var t=this,n=e?"show":"hide";a(["graphic","dataLabel"],function(e){t[e]&&t[e][n]()})},setState:function(t){e.Point.prototype.setState.call(this,t),this.graphic&&this.graphic.attr({zIndex:"hover"===t?1:0})}},e.colorSeriesMixin={pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:n,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:r.column.prototype.pointAttribs,translateColors:function(){var e=this,t=this.options.nullColor,n=this.colorAxis,r=this.colorKey;a(this.data,function(a){var o=a[r];(o=a.options.color||(a.isNull?t:n&&void 0!==o?n.toColor(o,a):a.color||e.color))&&(a.color=o)})},colorAttribs:function(e){var a={};return t(e.color)&&(a[this.colorProp||"fill"]=e.color),a}}}(e),function(e){var t=e.colorPointMixin,a=e.each,n=e.merge,r=e.noop,o=e.pick,s=e.Series,i=e.seriesType,l=e.seriesTypes;i("heatmap","scatter",{animation:!1,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}}},n(e.colorSeriesMixin,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var e;l.scatter.prototype.init.apply(this,arguments),(e=this.options).pointRange=o(e.pointRange,e.colsize||1),this.yAxis.axisPointRange=e.rowsize||1},translate:function(){var e=this.options,t=this.xAxis,n=this.yAxis,r=e.pointPadding||0,s=function(e,t,a){return Math.min(Math.max(t,e),a)};this.generatePoints(),a(this.points,function(a){var i=(e.colsize||1)/2,l=(e.rowsize||1)/2,c=s(Math.round(t.len-t.translate(a.x-i,0,1,0,1)),-t.len,2*t.len),u=(i=s(Math.round(t.len-t.translate(a.x+i,0,1,0,1)),-t.len,2*t.len),s(Math.round(n.translate(a.y-l,0,1,0,1)),-n.len,2*n.len)),p=(l=s(Math.round(n.translate(a.y+l,0,1,0,1)),-n.len,2*n.len),o(a.pointPadding,r));a.plotX=a.clientX=(c+i)/2,a.plotY=(u+l)/2,a.shapeType="rect",a.shapeArgs={x:Math.min(c,i)+p,y:Math.min(u,l)+p,width:Math.abs(i-c)-2*p,height:Math.abs(l-u)-2*p}}),this.translateColors()},drawPoints:function(){l.column.prototype.drawPoints.call(this),a(this.points,function(e){e.graphic.attr(this.colorAttribs(e))},this)},animate:r,getBox:r,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,alignDataLabel:l.column.prototype.alignDataLabel,getExtremes:function(){s.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,s.prototype.getExtremes.call(this)}}),e.extend({haloPath:function(e){if(!e)return[];var t=this.shapeArgs;return["M",t.x-e,t.y-e,"L",t.x-e,t.y+t.height+e,t.x+t.width+e,t.y+t.height+e,t.x+t.width+e,t.y-e,"Z"]}},t))}(e)},e.exports?e.exports=n:n(Highcharts)},74:function(e,t,a){"use strict";var n=a(25),r=a(20),o=a(5),s=a(82),i=a(106),l=a(15),c=a(4),u=a(79),p=a.n(u),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var h={},m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return d(e,[{key:"fundPool",value:function(e,t,a,n){var r=s.a.new_transaction(),i=o.a.get_asset_precision(t.get("precision"));return r.add_type_operation("asset_fund_fee_pool",{fee:{amount:0,asset_id:"1.3.0"},from_account:e,asset_id:a.get("id"),amount:n*i}),function(e){return l.a.process_transaction(r,null,!0).then(function(){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- fundPool error -----\x3e",t),e(!1)})}}},{key:"updateFeedProducers",value:function(e,t,a){var n=s.a.new_transaction();return n.add_type_operation("asset_update_feed_producers",{fee:{amount:0,asset_id:"1.3.0"},issuer:e,asset_to_update:t.get("id"),new_feed_producers:a}),function(e){return l.a.process_transaction(n,null,!0).then(function(){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- updateFeedProducers error -----\x3e",t),e(!1)})}}},{key:"claimPoolFees",value:function(e,t,a){var n=s.a.new_transaction(),r=o.a.get_asset_precision(t.get("precision"));return n.add_type_operation("asset_claim_fees",{fee:{amount:0,asset_id:0},issuer:e,amount_to_claim:{asset_id:t.get("id"),amount:a*r}}),function(e){return l.a.process_transaction(n,null,!0).then(function(t){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- claimFees error -----\x3e",t),e(!1)})}}},{key:"createAsset",value:function(e,t,a,n,r,i,u,d,h){console.log("create asset:",t,"flags:",a,"isBitAsset:",i,"bitasset_opts:",d);var m=s.a.new_transaction(),f=o.a.get_asset_precision(t.precision);p.a.config({DECIMAL_PLACES:t.precision});var b=new p.a(t.max_supply).times(f).toString(),g=new p.a(t.max_market_fee||0).times(f).toString(),_=o.a.get_asset_precision(c.b.getAsset(r.base.asset_id).get("precision")),v={fee:{amount:0,asset_id:0},issuer:e,symbol:t.symbol,precision:parseInt(t.precision,10),common_options:{max_supply:b,market_fee_percent:100*t.market_fee_percent||0,max_market_fee:g,issuer_permissions:n,flags:a,core_exchange_rate:{base:{amount:r.base.amount*_,asset_id:r.base.asset_id},quote:{amount:r.quote.amount*f,asset_id:"1.3.1"}},whitelist_authorities:[],blacklist_authorities:[],whitelist_markets:[],blacklist_markets:[],description:h,extensions:null},is_prediction_market:u,extensions:null};return i&&(v.bitasset_opts=d),m.add_type_operation("asset_create",v),function(e){return l.a.process_transaction(m,null,!0).then(function(t){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- createAsset error -----\x3e",t),e(!1)})}}},{key:"updateAsset",value:function(e,t,a,n,r,i,u,d,h,m,f,b,g,_,v){var y=s.a.new_transaction();if(v){var E=o.a.get_asset_precision(r.get("precision"));p.a.config({DECIMAL_PLACES:r.get("precision")});var w=new p.a(a.max_supply).times(E).toString(),k=new p.a(a.max_market_fee||0).times(E).toString(),O=c.b.getAsset(n.quote.asset_id),A=o.a.get_asset_precision(O.get("precision")),x=c.b.getAsset(n.base.asset_id),C=o.a.get_asset_precision(x.get("precision")),S=new p.a(n.quote.amount).times(A).toString(),N=new p.a(n.base.amount).times(C).toString();console.log("auths:",b);var P={fee:{amount:0,asset_id:0},asset_to_update:r.get("id"),extensions:r.get("extensions"),issuer:e,new_issuer:t,new_options:{max_supply:w,max_market_fee:k,market_fee_percent:100*a.market_fee_percent,description:f,issuer_permissions:u,flags:i,whitelist_authorities:b.whitelist_authorities.toJS(),blacklist_authorities:b.blacklist_authorities.toJS(),whitelist_markets:b.whitelist_markets.toJS(),blacklist_markets:b.blacklist_markets.toJS(),extensions:r.getIn(["options","extensions"]),core_exchange_rate:{quote:{amount:S,asset_id:n.quote.asset_id},base:{amount:N,asset_id:n.base.asset_id}}}};e!==t&&t||delete P.new_issuer,y.add_type_operation("asset_update",P)}if(console.log("bitasset_opts:",h,"original_bitasset_opts:",m),d&&(h.feed_lifetime_sec!==m.feed_lifetime_sec||h.minimum_feeds!==m.minimum_feeds||h.force_settlement_delay_sec!==m.force_settlement_delay_sec||h.force_settlement_offset_percent!==m.force_settlement_offset_percent||h.maximum_force_settlement_volume!==m.maximum_force_settlement_volume||h.short_backing_asset!==m.short_backing_asset)){var j={fee:{amount:0,asset_id:0},asset_to_update:r.get("id"),issuer:e,new_options:h};y.add_type_operation("asset_update_bitasset",j)}return console.log("feedProducers:",g,"originalFeedProducers:",_),d&&!o.a.are_equal_shallow(g,_)&&y.add_type_operation("asset_update_feed_producers",{fee:{amount:0,asset_id:"1.3.0"},issuer:e,asset_to_update:r.get("id"),new_feed_producers:g}),l.a.process_transaction(y,null,!0).then(function(e){return!0}).catch(function(e){return console.log("[AssetActions.js:150] ----- updateAsset error -----\x3e",e),!1})}},{key:"issueAsset",value:function(e,t,a,n,r){i.a.issue_asset(e,t,a,n,r)}},{key:"getAssetList",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e+"_"+t;return function(s){if(!h[o]){var i;if(h[o]=!0,s({loading:!0}),i=r.Apis.instance().db_api().exec("list_assets",[e,t]).then(function(e){var t=[],a=[];e.forEach(function(e){c.b._updateObject(e,!1),a.push(e.dynamic_asset_data_id),e.bitasset_data_id&&t.push(e.bitasset_data_id)});var n=r.Apis.instance().db_api().exec("get_objects",[a]),i=t.length>0?r.Apis.instance().db_api().exec("get_objects",[t]):null;Promise.all([n,i]).then(function(t){return delete h[o],s({assets:e,dynamic:t[0],bitasset_data:t[1],loading:!1}),e&&e.length})}).catch(function(e){console.log("Error in AssetActions.getAssetList: ",e),s({loading:!1}),delete h[o]}),n){["BRIDGE","GDEX","RUDEX","OPEN","WIN"].forEach(function(t){a.getAssetList(t+"."+e,10)})}return i}}}},{key:"lookupAsset",value:function(e,t){var a=c.b.getAsset(e);return a?{assets:[a],searchID:t,symbol:e}:function(a){setTimeout(function(){var n=c.b.getAsset(e);n&&a({assets:[n],searchID:t,symbol:e})},200)}}},{key:"reserveAsset",value:function(e,t,a){var n=s.a.new_transaction();return n.add_type_operation("asset_reserve",{fee:{amount:0,asset_id:0},amount_to_reserve:{amount:e,asset_id:t},payer:a,extensions:[]}),l.a.process_transaction(n,null,!0).then(function(e){return!0}).catch(function(e){return console.log("[AssetActions.js:150] ----- reserveAsset error -----\x3e",e),!1})}}]),e}();t.a=n.a.createActions(m)},8016:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(6),s=a.n(o),i=a(1),l=a.n(i),c=a(71),u=a(104),p=a(21),d=a.n(p),h=a(36),m=a(7),f=a(13),b=a(5),g=a(82),_=a(15),v=a(3),y=a.n(v),E=a(4),w=a(52),k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=function(e){function t(){O(this,t);var e=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={amount:0},e}return x(t,r.a.Component),k(t,[{key:"onAmountChanged",value:function(e){var t=e.amount;e.asset;this.setState({amount:t})}},{key:"onSubmit",value:function(e){e.preventDefault(),d.a.publish("settlement_modal","close");var t=b.a.get_asset_precision(this.props.asset.get("precision")),a=this.state.amount.replace(/,/g,"");a*=t;var n=g.a.new_transaction();return n.add_type_operation("asset_settle",{fee:{amount:0,asset_id:0},account:this.props.account.get("id"),amount:{amount:a,asset_id:this.props.asset.get("id")}}),_.a.process_transaction(n,null,!0).then(function(e){return console.log("asset settle result:",e),!0}).catch(function(e){return console.error("asset settle error: ",e),!1})}},{key:"render",value:function(){var e=this.props,t=e.asset,a=e.account,n=this.state.amount;if(!t)return null;var o=t.get("id"),s=a.get("balances"),i=null,u=0;s&&s.forEach(function(e){var t=E.b.getObject(e);if(!t.get("balance"))return null;t.get("asset_type")===o&&(i=e,u=t.get("balance"))});var p=b.a.get_asset_precision(t.get("precision")),d=n?n.replace(/,/g,""):0,h=parseFloat(d)>0&&parseFloat(d)*p<=parseFloat(u)?"button btn large outline":"button disabled btn large outline",m=r.a.createElement("span",null,r.a.createElement(l.a,{content:"exchange.balance"}),": ",i?r.a.createElement(c.a,{balance:i}):"0 "+t.get("symbol"));return r.a.createElement("form",{className:"grid-block vertical full-width-content"},r.a.createElement(l.a,{component:"h3",style:{textAlign:"center"},content:"modal.settle.title",asset:t.get("symbol")}),r.a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},r.a.createElement("div",{className:"content-block"},r.a.createElement(w.a,{label:"modal.settle.amount",amount:n,onChange:this.onAmountChanged.bind(this),display_balance:m,asset:o,assets:[o],tabIndex:1})),r.a.createElement("div",{className:"content-block"},r.a.createElement("input",{type:"submit",className:h,onClick:this.onSubmit.bind(this),value:y.a.translate("modal.settle.submit")}))))}}]),t}();C.propTypes={asset:m.a.ChainAsset.isRequired,account:m.a.ChainAccount.isRequired},C=Object(f.a)(C);var S=function(e){function t(){O(this,t);var e=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return x(t,r.a.Component),k(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){d.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){return r.a.createElement(h.a,{id:this.props.modalId,onClose:this.onClose.bind(this),overlay:!0,ref:"settlement_modal"},r.a.createElement("div",{className:"grid-block vertical"},r.a.createElement(C,this.props)))}}]),t}(),N=a(126),P=a(76),j=a(48),T=a(16),I=a(32),q=a(39),D=a.n(q),M=a(324),R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},L=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function V(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var H=function(e){function t(e){return F(this,t),B(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return V(t,M["b"]),L(t,[{key:"componentDidMount",value:function(){D.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.base!==this.props.base}},{key:"getValue",value:function(){var e=this.props.marketStats;return e&&e.change?e.change:0}},{key:"render",value:function(){var e=this.getValue(),t=0===parseFloat(e)?"":parseFloat(e)<0?"change-down":"change-up",a=r.a.createElement(P.b,{style:"decimal",value:e,minimumFractionDigits:2,maximumFractionDigits:2});return r.a.createElement("span",{className:"value "+t},a,"%")}}]),t}();H.defaultProps={fullPrecision:!1,noDecimals:!1,hide_asset:!1},H=Object(j.a)(H,{propNames:["quote","base"],defaultProps:{quote:"1.3.0"}});var U=function(e){function t(){return F(this,t),B(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return V(t,r.a.Component),L(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,a=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["refCallback"]);return r.a.createElement(H,R({},a,{ref:t}))}}]),t}();U=Object(T.connect)(U,{listenTo:function(){return[I.a]},getProps:function(e){return{marketStats:I.a.getState().allMarketStats.get(e.marketId),allMarketStats:I.a.getState().allMarketStats}}});var W=a(22),z=a(17),J=a(63),K=a(216),G=a(12),X=a(10),Y=a(29),Z=a(2),Q=a.n(Z),$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ee=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function te(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var oe={textAlign:"right"},se={textAlign:"left"},ie=function(e){function t(){return ae(this,t),ne(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return re(t,r.a.Component),ee(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.object.getIn(["call_price","quote","asset_id"]);this.refs[t].show()}},{key:"_onClosePosition",value:function(e){e.preventDefault();var t=g.a.new_transaction();t.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.object.get("borrower"),delta_collateral:{amount:-this.props.object.get("collateral"),asset_id:this.props.object.getIn(["call_price","base","asset_id"])},delta_debt:{amount:-this.props.object.get("debt"),asset_id:this.props.object.getIn(["call_price","quote","asset_id"])}}),_.a.process_transaction(t,null,!0)}},{key:"_getBalance",value:function(){var e=this.props.account,t=this.props.object.getIn(["call_price","quote","asset_id"]),a=e.get("balances"),n=0;return a&&a.forEach(function(e,a){if(a==t){var r=E.b.getObject(e);n=r.get("balance")}}),n}},{key:"_getFeedPrice",value:function(){return this.props?1/b.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_getCollateralRatio",value:function(){var e=this.props.object.toJS();return b.a.get_asset_amount(e.collateral,this.props.collateralAsset)/(b.a.get_asset_amount(e.debt,this.props.debtAsset)/this._getFeedPrice())}},{key:"_getMR",value:function(){return this.props.debtAsset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3}},{key:"_getStatusClass",value:function(){var e=this._getCollateralRatio(),t=this._getMR();return isNaN(e)?null:e<t?"danger":e<t+.5?"warning":""}},{key:"_getCRTip",value:function(){var e=this._getStatusClass(),t=this._getMR();return e&&""!==e?"danger"===e?y.a.translate("tooltip.cr_danger",{mr:t}):"warning"===e?y.a.translate("tooltip.cr_warning",{mr:t}):null:null}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.context.router.push(e)}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,a=e.collateralAsset,n=e.object.toJS(),s=this._getCollateralRatio(),i=b.a.get_asset_amount(n.debt,this.props.debtAsset),c=this._getBalance(),p=this._getStatusClass(),d="/asset/"+t.get("symbol"),h="/market/"+t.get("symbol")+"_"+a.get("symbol"),m=r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:d,onClick:this._onNavigate.bind(this,d)},r.a.createElement(l.a,{content:"account.asset_details"}))),r.a.createElement("li",null,r.a.createElement("a",{href:h,onClick:this._onNavigate.bind(this,h)},r.a.createElement(W.a,{name:t.get("symbol")})," :"," ",r.a.createElement(W.a,{name:a.get("symbol")}))));return r.a.createElement("tr",{className:"margin-row"},r.a.createElement("td",{style:se},r.a.createElement(X.b,{to:"/asset/"+t.get("symbol")},r.a.createElement(W.a,{noTip:!0,name:t.get("symbol")}))),r.a.createElement("td",{style:oe},r.a.createElement(z.a,{amount:c,asset:n.call_price.quote.asset_id,assetInfo:m,hide_asset:!0})),r.a.createElement("td",{style:oe},r.a.createElement(z.a,{amount:n.debt,asset:n.call_price.quote.asset_id,assetInfo:m,hide_asset:!0})),r.a.createElement("td",{style:oe,className:"column-hide-medium"},r.a.createElement(z.a,{decimalOffset:5,amount:n.collateral,asset:n.call_price.base.asset_id})),r.a.createElement("td",{"data-place":"bottom","data-tip":this._getCRTip(),className:"center-content "+p},b.a.format_number(s,2)),r.a.createElement("td",{style:oe},r.a.createElement(u.a,{noTip:!0,balances:Object(o.List)(),debt:te({},t.get("id"),n.debt),collateral:te({},a.get("id"),parseInt(n.collateral,10)),hide_asset:!0})),r.a.createElement("td",{style:oe,className:"column-hide-small"},r.a.createElement(J.a,{base_amount:n.call_price.base.amount,base_asset:n.call_price.base.asset_id,quote_amount:n.call_price.quote.amount,quote_asset:n.call_price.quote.asset_id,hide_symbols:!0})),r.a.createElement("td",{style:oe,className:"column-hide-small"},r.a.createElement(J.a,{base_amount:t.getIn(["bitasset","current_feed","settlement_price","base","amount"]),base_asset:n.call_price.quote.asset_id,quote_amount:t.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),quote_asset:n.call_price.base.asset_id,hide_symbols:!0})),r.a.createElement("td",{className:"center-content column-hide-small",style:se},r.a.createElement(J.a,{base_amount:n.call_price.base.amount,base_asset:n.call_price.base.asset_id,quote_amount:n.call_price.quote.amount,quote_asset:n.call_price.quote.asset_id,hide_value:!0})),r.a.createElement("td",null,r.a.createElement("div",{"data-place":"left","data-tip":y.a.translate("tooltip.update_position"),style:{paddingBottom:5}},r.a.createElement("a",{onClick:this._onUpdatePosition.bind(this)},r.a.createElement(G.a,{name:"adjust",title:"icons.adjust",className:"icon-14px rotate90"})))),r.a.createElement("td",null,r.a.createElement("div",{"data-place":"left","data-tip":y.a.translate("tooltip.close_position",{amount:i,asset:t.get("symbol")}),style:{paddingBottom:5}},r.a.createElement("a",{onClick:this._onClosePosition.bind(this)},r.a.createElement(G.a,{name:"cross-circle",title:"icons.cross_circle.close_position",className:"icon-14px"}))),t?r.a.createElement(K.a,{ref:"cp_modal_"+n.call_price.quote.asset_id,modalId:"cp_modal_"+n.call_price.quote.asset_id,quote_asset:n.call_price.quote.asset_id,backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}();ie.propTypes={debtAsset:m.a.ChainAsset.isRequired,collateralAsset:m.a.ChainAsset.isRequired},ie.defaultProps={tempComponent:"tr"},ie.contextTypes={router:Q.a.object},ie=Object(f.a)(ie);var le=function(e){function t(){return ae(this,t),ne(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return re(t,r.a.Component),ee(t,[{key:"render",value:function(){var e=this.props,t=e.object,a=e.account,n=t.getIn(["call_price","quote","asset_id"]),o=t.getIn(["call_price","base","asset_id"]);return r.a.createElement(ie,$({debtAsset:n,collateralAsset:o,account:a},this.props))}}]),t}();le.propTypes={object:m.a.ChainObject.isRequired},le=Object(f.a)(le);var ce=function(e){function t(){return ae(this,t),ne(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return re(t,r.a.Component),ee(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.debtAsset.get("id");this.refs[t].show()}},{key:"_getFeedPrice",value:function(){return this.props?1/b.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.context.router.push(e)}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,a=e.collateralAsset,n=e.account,o=t.get("id"),s=n.get("balances"),i=0;s&&s.forEach(function(e,t){if(t==o){var a=E.b.getObject(e);i=a.get("balance")}});var c="/asset/"+t.get("symbol"),u="/market/"+t.get("symbol")+"_"+a.get("symbol"),p=r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:c,onClick:this._onNavigate.bind(this,c)},r.a.createElement(l.a,{content:"account.asset_details"}))),r.a.createElement("li",null,r.a.createElement("a",{href:u,onClick:this._onNavigate.bind(this,u)},r.a.createElement(W.a,{name:t.get("symbol")})," :"," ",r.a.createElement(W.a,{name:a.get("symbol")}))));return r.a.createElement("tr",{className:"margin-row"},r.a.createElement("td",{style:se},r.a.createElement(X.b,{to:"/asset/"+t.get("symbol")},r.a.createElement(W.a,{noTip:!0,name:t.get("symbol")}))),r.a.createElement("td",{style:oe},r.a.createElement(z.a,{amount:i,asset:t.get("id"),assetInfo:p,hide_asset:!0})),r.a.createElement("td",{style:oe},r.a.createElement(z.a,{amount:0,asset:t.get("id"),assetInfo:p,hide_asset:!0})),r.a.createElement("td",{style:oe,className:"column-hide-medium"},r.a.createElement(z.a,{decimalOffset:5,amount:0,asset:a.get("id")})),r.a.createElement("td",null),r.a.createElement("td",{style:oe}),r.a.createElement("td",{style:oe,className:"column-hide-small"}),r.a.createElement("td",{style:oe,className:"column-hide-small"}),r.a.createElement("td",{className:"center-content column-hide-small",style:se}),r.a.createElement("td",null,r.a.createElement("div",{"data-place":"left","data-tip":y.a.translate("tooltip.update_position"),style:{paddingBottom:5}},r.a.createElement("a",{onClick:this._onUpdatePosition.bind(this)},r.a.createElement(G.a,{name:"adjust",title:"icons.adjust",className:"icon-14px rotate90"})))),r.a.createElement("td",null,t?r.a.createElement(K.a,{ref:"cp_modal_"+t.get("id"),modalId:"cp_modal_"+t.get("id"),quote_asset:t.get("id"),backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}();ce.propTypes={debtAsset:m.a.ChainAsset.isRequired,collateralAsset:m.a.ChainAsset.isRequired},ce.defaultProps={tempComponent:"tr"},ce.contextTypes={router:Q.a.object},ce=Object(f.a)(ce);var ue=function(e){function t(){return ae(this,t),ne(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return re(t,r.a.Component),ee(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.callOrders,o=t.bitAssets;if(n=n.filter(function(e){return!!e}),!(o=o.filter(function(e){return!!e})).length)return null;if(n.forEach(function(e){if(e){var t=o.findIndex(function(t){return t&&t.get("id")===e.getIn(["call_price","quote","asset_id"])});-1!==t&&o.splice(t,1)}}),!o.length)return null;var s=o.map(function(t){return r.a.createElement(ce,$({key:t.get("id"),debtAsset:t.get("id"),collateralAsset:t.getIn(["bitasset","options","short_backing_asset"]),account:a},e.props))});return r.a.createElement("tbody",null,s)}}]),t}();ue.propTypes={callOrders:m.a.ChainObjectsList},ue=Object(f.a)(ue),ue=Object(j.a)(ue,{propNames:["bitAssets"],defaultProps:{bitAssets:["1.3.103","1.3.113","1.3.120","1.3.121","1.3.958","1.3.1325","1.3.1362","1.3.105","1.3.106"]},asList:!0});var pe=function(e){var t=e.callOrders,a=e.account,n=e.className,o=e.children,i=e.preferredUnit;return r.a.createElement("div",{className:"dashboard__adaptive"},r.a.createElement("table",{className:"dashboard__table "+n},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:se},r.a.createElement(l.a,{content:"explorer.asset.title"})),r.a.createElement("th",{style:oe},r.a.createElement(l.a,{content:"exchange.balance"})),r.a.createElement("th",{style:oe},r.a.createElement(l.a,{content:"transaction.borrow_amount"})),r.a.createElement("th",{style:oe,className:"column-hide-medium"},r.a.createElement(l.a,{content:"transaction.collateral"})),r.a.createElement("th",null,r.a.createElement("div",{className:"tooltip inline-block","data-place":"top","data-tip":y.a.translate("tooltip.coll_ratio")},r.a.createElement(l.a,{content:"borrow.coll_ratio"}))),r.a.createElement("th",null,r.a.createElement(Y.a,{noLink:!0,string:"account.total",keys:[{type:"asset",value:i,arg:"asset"}]})),r.a.createElement("th",{style:oe,className:"column-hide-small"},r.a.createElement("div",{className:"tooltip inline-block","data-place":"top","data-tip":y.a.translate("tooltip.call_price")},r.a.createElement(l.a,{content:"exchange.call"}))),r.a.createElement("th",{style:oe,className:"column-hide-small"},r.a.createElement(l.a,{content:"exchange.price"})),r.a.createElement("th",{className:"column-hide-small",style:se},r.a.createElement(l.a,{content:"explorer.assets.units"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"borrow.adjust_short"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"transfer.close"})))),r.a.createElement("tbody",null,t.sort(function(e,t){return e.split(".")[2]-t.split(".")[2]}).map(function(e){return r.a.createElement(le,{key:e,object:e,account:a})})),r.a.createElement(ue,{account:a,callOrders:s.a.List(t)}),r.a.createElement("tbody",null,o)))},de=a(445),he=a(254),me=a(112),fe=a(14),be=a(195),ge=a(46),_e=function(e){var t=this;this.id=e.toJS?e.get(0):e[0],this.weight=e.toJS?e.get(1):e[1],this.isAvailable=function(e){return e.includes?e.includes(t.id):-1!==e.indexOf(t)}},ve={AccountPermission:function(e,t,a){var n=this;this.id=e.get("id"),this.weight=t,this.threshold=e.getIn([a,"weight_threshold"]),this.accounts=[],this.keys=e.getIn([a,"key_auths"]).map(function(e){return new _e(e)}).toArray(),this.isAvailable=function(e){return e.includes?e.includes(n.id):-1!==e.indexOf(n)},this._sumWeights=function(e){if(n.isNested()||n.isMultiSig()){var t=n.accounts.reduce(function(t,a){return t+(a._sumWeights(e)?a.weight:0)},0);return Math.floor(t/n.threshold)}return n.isAvailable(e)?n.weight:0},this.getStatus=function(e,t){if(n.isNested()){var a=n.accounts.reduce(function(t,a){return t+a._sumWeights(e)},0);return n.keys.length&&(a+=n.sumKeys(t)),a}var r=n._sumWeights(e);return n.isMultiSig()&&(r+=n.sumKeys(t)),r},this.sumKeys=function(e){return n.keys.reduce(function(t,a){return t+(a.isAvailable(e)?a.weight:0)},0)},this.isNested=function(){return n.accounts.length>0},this.isMultiSig=function(){return n.keys.reduce(function(e,t){return e||t.weight<n.threshold},!1)},this.getMissingSigs=function(e){var t=[],a=[];return n.isNested()?a=n.accounts.reduce(function(t,a){return t.concat(a.getMissingSigs(e))},[]):n.isAvailable(e)||t.push(n.id),t.concat(a)},this.getMissingKeys=function(e){var t=[],a=[];return n.keys.length&&(n.isNested()||n.isMultiSig())&&n.keys.forEach(function(a){a.isAvailable(e)||t.push(a.id)}),n.isNested()&&(a=n.accounts.reduce(function(t,a){return t.concat(a.getMissingKeys(e))},[])),t.concat(a)}},listToIDs:function(e){var t=[];return e.forEach(function(e){e&&t.push(e.get?e.get("id"):e)}),t},unravel:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<3){var r=E.b.getAccount(e.id);r&&r.getIn([t,"account_auths"]).size&&r.getIn([t,"account_auths"]).forEach(function(r){var o=E.b.getAccount(r.get(0));o&&e.accounts.push(a.unravel(new a.AccountPermission(o,r.get(1),t),t,n+1))})}return e},unnest:function(e,t){var a=this,n=[];return e.forEach(function(e){var r=E.b.getAccount(e),o=a.unravel(new a.AccountPermission(r,null,t),t);n.push(o)}),n},flatten_auths:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.List();return e.size?(e.forEach(function(e){t.includes(e.get(0))||(t=t.push(e.get(0)))}),t):t}},ye=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),ye(t,[{key:"componentDidMount",value:function(){D.a.rebuild()}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.children,n=e.dataTip,o=e.content;return r.a.createElement("span",{className:"tooltip "+t,"data-html":!0,"data-tip":n||y.a.translate(o)},a)}}]),t}(),we=function(){return r.a.createElement(Ee,{className:"error appended",content:"explorer.proposals.authority_depth_warning"},"/!\\")},ke=function(){return r.a.createElement(Ee,{className:"error appended",content:"explorer.proposals.children_authority_depth_warning"},"/!\\")},Oe=function(){return r.a.createElement(Ee,{className:"warning",content:"explorer.proposals.pending_approval"},r.a.createElement(l.a,{content:"explorer.proposals.pending"}))},Ae=function(){return r.a.createElement(Ee,{className:"warning",content:"explorer.proposals.pending_review"},r.a.createElement(l.a,{content:"explorer.proposals.review"}))},xe=function(){return r.a.createElement(Ee,{className:"error",content:"explorer.proposals.failed_execute"},r.a.createElement(l.a,{content:"explorer.proposals.failed"}))},Ce=function(e){var t=e.onToggle,a=e.expanded;return r.a.createElement("a",{className:"expand-button",onClick:t},"[",a?"-":"+","]")},Se=function(e){return e.approved?r.a.createElement(G.a,{name:"checkmark-circle",size:"1x",className:"success",title:"icons.checkmark_circle.operation_succeed"}):r.a.createElement(G.a,{name:"cross-circle",size:"1x",className:"error",title:"icons.cross_circle.operation_failed"})},Ne=function(e){var t=e.available,a=e.permission,n=e.weight,o=e.level;return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement(Se,{approved:a.isAvailable(t)}),a.id.substr(0,20-4*o),"..."),r.a.createElement("td",null,n)))},Pe=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n>t||!(!a.isNested()&&!a.isMultiSig())&&a.accounts.some(function(a){return e(t,a,n+1)})},je=function(e,t,a){return e.accounts.reduce(function(e,n){return e+(Te(n,t,a)?n.weight:0)},0)+e.keys.reduce(function(e,t){return e+(t.isAvailable(a)?t.weight:0)},0)},Te=function(e,t,a){return e.isNested()||e.isMultiSig()?je(e,t,a)>=e.threshold:e.isAvailable(t)},Ie=function(e,t,a){return e&&e.threshold>10?b.a.get_percentage(e.getStatus(t,a),e.threshold)+" / 100%":e.getStatus(t,a)+" / "+e.threshold},qe=function(e,t){return t&&t>10?b.a.get_percentage(e,t):e},De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Me=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Be=function(e){function t(e){Re(this,t);var a=Le(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExpandToggle=function(){a.setState({expanded:!a.state.expanded})},a.state={expanded:!!e.expanded},a}return Fe(t,r.a.Component),Me(t,[{key:"render",value:function(){var e=this.props,t=e.account,a=e.available,n=e.availableKeys,o=e.permission,s=e.threshold,i=e.level,l=e.maxAuthorityDepth,c=e.hideRoot,u=this.state.expanded,p=Te(o,a,n),d=o.isNested(),h=o.isMultiSig(),m=qe(o.weight,s)||1,f=Ie(o,a,n),b=i>=l,g=d||h?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement(Se,{approved:p}),r.a.createElement(ge.a,{subpage:"permissions",account:t.get("id")})),r.a.createElement("td",null,u?r.a.createElement("span",{className:p?"success-text":""},m):m&&(m&&2===m.length?"  ":"")+m+" ",r.a.createElement(Ce,{onToggle:this.handleExpandToggle,expanded:u}),u&&r.a.createElement("span",{className:"appended"},"(",f,")"),b?r.a.createElement(we,null):Pe(l,o,i)&&!u&&r.a.createElement(ke,null))):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement(Se,{approved:p}),r.a.createElement(ge.a,{subpage:"permissions",account:t.get("id")})),r.a.createElement("td",null,!d&&m?(m&&2===m.length?"  ":"")+m+" ":null)),_=[];return(d||h)&&u&&(o.accounts.forEach(function(e){_.push(r.a.createElement(Ve,{key:e.id,account:e.id,accounts:e.accounts,permission:e,available:a,availableKeys:n,threshold:o.threshold,level:i+1,maxAuthorityDepth:l}))}),o.keys.length&&o.keys.forEach(function(e){return _.push(r.a.createElement(Ne,{key:e.id,permission:e,available:n,level:i+(c?0:1),weight:qe(e.weight,s)}))})),_.length>0?r.a.createElement("tbody",null,c||g,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"3",className:"heading-perm"},r.a.createElement("div",{className:c?"":"table-container"},r.a.createElement("table",null,_)),u&&0===i&&r.a.createElement("div",{className:"spacer"})))):r.a.createElement("tbody",null,g)}}]),t}();Be.propTypes={account:m.a.ChainAccount.isRequired,accounts:m.a.ChainAccountsList,level:Q.a.number.isRequired},Be.defaultProps={level:0};var Ve=Object(f.a)(Be),He=function(e){function t(e){Re(this,t);var a=Le(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExpandToggle=function(){return a.setState({expanded:!a.state.expanded})},a.state={requiredPermissions:[],expanded:e.expanded},a._updateState=a._updateState.bind(a),a}return Fe(t,r.a.Component),Me(t,[{key:"componentWillMount",value:function(){this._updateState(),E.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){E.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=ve.listToIDs(this.props.required),t=ve.listToIDs(this.props.available);this.setState({requiredPermissions:ve.unnest(e,this.props.type),required:e,available:t})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.type,t.added),n=t.removed,o=t.availableKeys,s=t.globalObject,i=t.reviewPeriodTime,l=t.noFail,c=this.state,u=c.requiredPermissions,p=(c.required,c.available),d=c.expanded;p=Object(be.a)(p),o=o.toJS(),a&&(p.push(a),o.push(a)),n&&(-1!==p.indexOf(n)&&p.splice(p.indexOf(n),1),-1!==o.indexOf(n)&&o.splice(o.indexOf(n),1));var h=u.reduce(function(e,t){return e+(Te(t,p,o)?1:0)},0),m=u.length,f=h===m,b=f&&!i&&!l,g=f&&i,_=s.get("parameters").get("max_authority_depth"),v=1===u.length,y=v?u[0]:null,E=!v&&h+" / "+m,w=u.map(function(t){return r.a.createElement(Ve,{key:t.id,account:t.id,accounts:t.accounts,permission:t,available:p,availableKeys:o,expanded:e.props.expanded||v,level:0,maxAuthorityDepth:_,hideRoot:v})});return r.a.createElement("div",{className:"nested-approval-state"},r.a.createElement("div",{className:"root-status"},b?r.a.createElement(xe,null):g?r.a.createElement(Ae,null):r.a.createElement(Oe,null)," ",y?y.threshold>1&&Ie(y,p,o):r.a.createElement("span",null,"(",E,")"),(!y||y.isMultiSig()||y.isNested())&&r.a.createElement(Ce,{onToggle:this.handleExpandToggle,expanded:d}),!d&&u.some(function(e){return Pe(_,e,0)})&&r.a.createElement(ke,null)),d&&r.a.createElement("table",null,w))}}]),t}();He.propTypes={required:m.a.ChainAccountsList,available:m.a.ChainAccountsList},He.defaultProps={type:"active",added:null,removed:null},He=Object(f.a)(He);var Ue=function(e){function t(){return Re(this,t),Le(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Fe(t,r.a.Component),Me(t,[{key:"render",value:function(){var e=this.props,t=e.proposal,a=e.type,n=t.get("available_"+a+"_approvals"),o=t.get("available_key_approvals"),s=t.get("required_"+a+"_approvals");return r.a.createElement(He,De({},this.props,{required:s,available:n,availableKeys:o,reviewPeriodTime:t.get("review_period_time")}))}}]),t}();Ue.propTypes={proposal:m.a.ChainObject.isRequired,type:Q.a.string.isRequired,globalObject:m.a.ChainObject.isRequired},Ue.defaultProps={type:"active",added:null,globalObject:"2.0.0"};var We=Object(f.a)(Ue),ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Je=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(n=(s=i.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ke=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ze=function(e,t,a){var n=[];e.forEach(function(e){n=n.concat(e.getMissingSigs(t))});var r=[];return e.forEach(function(e){r=r.concat(e.getMissingKeys(a))}),[n,r]},Qe=function(e){function t(e){Ge(this,t);var a=Xe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={active:null,key:null,owner:null,payee:null},a}return Ye(t,r.a.Component),Ke(t,[{key:"onActiveAccount",value:function(e,t,a,n){var r={};t[n]?(r.key=n,r[a]=null):n?(r[a]=e[n],r.key=null):(r[a]=null,r.key=null),this.setState(r)}},{key:"_onProposalAction",value:function(e){var t=this,a=e.toJS(),n=this.state,r=n.active,o=(n.key,n.owner,{fee_paying_account:n.payee||r,proposal:a.id,active_approvals_to_add:[],active_approvals_to_remove:[],owner_approvals_to_add:[],owner_approvals_to_remove:[],key_approvals_to_add:[],key_approvals_to_remove:[]}),s="approve"===this.props.action,i=[];["active","owner","key"].forEach(function(e){var n=t.state[e];if(n){var r=-1!==a["available_"+e+"_approvals"].indexOf(n);(s&&!r||!s&&r)&&("approve"===t.props.action?(o[e+"_approvals_to_add"]=[n],"key"===e&&i.push(n)):"reject"===t.props.action&&(o[e+"_approvals_to_remove"]=[n],"key"===e&&i.push(n)))}});var l=g.a.new_transaction();l.add_type_operation("proposal_update",o),_.a.process_transaction(l,null,!0,i),d.a.publish(this.props.modalId,"close")}},{key:"onChangePayee",value:function(e){var t=E.b.getAccount(e);t&&this.setState({payee:t.get("id")})}},{key:"onCancel",value:function(){d.a.publish(this.props.modalId,"close")}},{key:"render",value:function(){var e=this.props,t=e.proposal,a=e.type,n=[],o={},s="approve"===this.props.action;this.props.accounts.length&&this.props.accounts.forEach(function(e){(s?e&&!t.get("available_"+a+"_approvals").includes(e.get("id")):e&&t.get("available_"+a+"_approvals").includes(e.get("id")))&&(o[e.get("name")]=e.get("id"),n.push(e.get("name")))});var i=[],c={};this.props.keys.length&&this.props.keys.forEach(function(e){var a=fe.a.isMyKey(e),n=t.get("available_key_approvals").includes(e);(a&&s&&!n||a&&!s&&n)&&(c[e]=!0,i.push(e))});var u=fe.a.getMyAccounts();return r.a.createElement("form",{className:"grid-block vertical full-width-content"},r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"content-block"},r.a.createElement("h4",null,s?"Add approval":"Remove approval")),r.a.createElement("div",{className:"content-block",style:{paddingRight:"20%"}},r.a.createElement(We,{expanded:!0,proposal:t.get("id"),type:a,added:s?this.state.key?this.state.key:this.state[a]||null:null,removed:s?null:this.state.key?this.state.key:this.state[a]||null,noFail:!0})),r.a.createElement("div",{className:"content-block full-width-content"},r.a.createElement("div",{className:"full-width-content form-group"},r.a.createElement(l.a,{content:"modal.proposals.pay_with",component:"label"}),r.a.createElement(me.a,{account_names:u,onChange:this.onChangePayee.bind(this)})),n.length||i.length?r.a.createElement("div",{className:"full-width-content form-group"},r.a.createElement(l.a,{content:"modal.proposals.approval_"+(s?"add":"remove"),component:"label"}),r.a.createElement(me.a,{account_names:n.concat(i),onChange:this.onActiveAccount.bind(this,o,c,a)})):null,null),r.a.createElement("div",{className:"content-block"},r.a.createElement("input",{type:"submit",className:"button btn large outline",onClick:this._onProposalAction.bind(this,t),value:s?"Approve":"Remove"}),r.a.createElement("div",{onClick:this.onCancel.bind(this),className:" button btn large outline"},r.a.createElement(l.a,{content:"account.perm.cancel"})))))}}]),t}();Qe.propTypes={accounts:m.a.ChainAccountsList},Qe=Object(f.a)(Qe);var $e=function(e){function t(){Ge(this,t);var e=Xe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._updateState=e._updateState.bind(e),e}return Ye(t,r.a.Component),Ke(t,[{key:"componentWillMount",value:function(){this._updateState(),E.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){E.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=this.props,t=e.proposal,a=(e.account,t.get("required_active_approvals").size?"active":"owner"),n=ve.listToIDs(t.get("required_"+a+"_approvals")),r=ve.listToIDs(t.get("available_"+a+"_approvals")),o=ve.listToIDs(t.get("available_key_approvals"));this.setState({requiredPermissions:ve.unnest(n,a),available:r,availableKeys:o,type:a})}},{key:"render",value:function(){var e=this.props.action,t=this.state,a=t.requiredPermissions,n=t.available,o=t.availableKeys,s=t.type,i=Ze(a,n,o),l=Je(i,2),c=l[0],u=l[1];return r.a.createElement(Qe,ze({},this.props,{type:s,accounts:"approve"===e?c:n,keys:"approve"===e?u:o}))}}]),t}();$e.propTypes={account:m.a.ChainAccount.isRequired,proposal:m.a.ChainObject.isRequired},$e=Object(f.a)($e);var et=function(e){function t(){Ge(this,t);var e=Xe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return Ye(t,r.a.Component),Ke(t,[{key:"componentDidMount",value:function(){var e=this;d.a.subscribe(this.props.modalId,function(t,a){e.setState({open:"open"===a})})}},{key:"show",value:function(){d.a.publish(this.props.modalId,"open")}},{key:"render",value:function(){var e=this.props,t=e.modalId;e.proposal;return r.a.createElement(h.a,{id:t,overlay:!0,ref:t},this.state.open?r.a.createElement("div",{className:"grid-block vertical"},r.a.createElement($e,this.props)):null)}}]),t}(),tt=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(n=(s=i.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),at=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var nt=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.forceUpdate=e.forceUpdate.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),at(t,[{key:"componentDidMount",value:function(){E.b.subscribe(this.forceUpdate)}},{key:"componentWillUnmount",value:function(){E.b.unsubscribe(this.forceUpdate)}},{key:"_onApproveModal",value:function(e,t){this.refs[e+"_"+t]&&this.refs[e+"_"+t].show()}},{key:"_canReject",value:function(e){return e.available_active_approvals.length||e.available_owner_approvals.length||e.available_key_approvals.length}},{key:"render",value:function(){var e=this,t=this.props.account;if(!t)return null;var a=[];t.get("proposals").size&&t.get("proposals").forEach(function(e){var n=E.b.getObject(e);if(n){var r=n.get("proposed_transaction").get("operations");a.push({operations:r,account:t,proposal:n})}});var n=a.sort(function(e,t){return b.a.sortID(e.proposal.get("id"),t.proposal.get("id"),!0)}).reduce(function(t,a,n){var o=!1,s=a.proposal.get("id"),i=a.proposal.get("expiration_time"),c=a.operations.map(function(e,t){return"1.2.153124"===e.getIn([1,"to"])&&(o=!0),r.a.createElement(he.b,{key:a.proposal.get("id")+"_operation_"+t,expiration:i,index:t,op:e.toJS(),inverted:!1,hideFee:!0,hideOpLabel:!0,hideExpiration:!0,hideDate:!0,proposal:!0,id:s})}).toArray(),u=e._canReject(a.proposal.toJS()),p=a.proposal.get("id"),d=a.proposal.get("required_active_approvals").size?"active":"owner";t.push(r.a.createElement("tr",{key:p+"_id"},r.a.createElement("td",{colSpan:"4",className:"proposal"+(0===n?" first":"")},r.a.createElement(he.a,{id:s,expiration:i}))));var h=ve.listToIDs(a.proposal.get("available_"+d+"_approvals")),m=ve.listToIDs(a.proposal.get("available_key_approvals")),f=ve.listToIDs(a.proposal.get("required_"+d+"_approvals")),b=ve.unnest(f,d),g=Ze(b,h,m),_=tt(g,2),v=_[0],E=_[1],w=[];v.length&&v.forEach(function(e){e&&!a.proposal.get("available_"+d+"_approvals").includes(e)&&w.push(e)});var k=[];E.length&&E.forEach(function(e){fe.a.isMyKey(e)&&!a.proposal.get("available_key_approvals").includes(e)&&k.push(e)});var O=w.length+k.length>0;return t.push(r.a.createElement("tr",{className:"top-left-align",key:p+"_content"},r.a.createElement("td",null,c),r.a.createElement("td",null,b.map(function(e,t){return r.a.createElement("div",{className:"list-item",key:p+"_approver_"+t},r.a.createElement(ge.a,{subpage:"permissions",account:e.id}))})),r.a.createElement("td",null,r.a.createElement(We,{proposal:a.proposal.get("id"),type:d})),r.a.createElement("td",{className:"approval-buttons"},o?r.a.createElement("div",{"data-tip":y.a.translate("tooltip.propose_scam"),className:"tooltip has-error scam-error"},"SCAM"):r.a.createElement("button",{onClick:O?e._onApproveModal.bind(e,p,"approve"):function(){},className:"button primary hollow"+(O?"":" hidden")},r.a.createElement("span",null,r.a.createElement(l.a,{content:"proposal.approve"}))),r.a.createElement(et,{ref:p+"_approve",modalId:p+"_approve",account:a.account.get("id"),proposal:p,action:"approve"}),u?r.a.createElement("button",{onClick:e._onApproveModal.bind(e,p,"reject"),className:"button primary hollow"},r.a.createElement(l.a,{content:"proposal.reject"})):null,r.a.createElement(et,{ref:p+"_reject",modalId:p+"_reject",account:a.account.get("id"),proposal:p,action:"reject"})))),t.push(r.a.createElement("tr",{key:p+"_separator"},r.a.createElement("td",{colSpan:"4"},r.a.createElement("hr",null)))),t},[]);return r.a.createElement("table",{className:"table proposals compact "+this.props.className},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(l.a,{content:"proposal.proposals"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"proposal.approvers"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"proposal.status"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"proposal.action"})))),r.a.createElement("tbody",null,n))}}]),t}();nt.propTypes={account:m.a.ChainAccount.isRequired};var rt=Object(f.a)(nt),ot=a(11),st=a(45),it=a(49),lt=a.n(it),ct=a(9),ut=a(271),pt=a(40),dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ht=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var gt=function(e){function t(){return mt(this,t),ft(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return bt(t,ut["a"]),ht(t,[{key:"shouldComponentUpdate",value:function(e,a){return function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.base_amount!==this.props.base_amount||e.quote_amount!==this.props.quote_amount||e.decimals!==this.props.decimals||!b.a.are_equal_shallow(e.pulsate,this.props.pulsate)||!b.a.are_equal_shallow(a,this.state)}},{key:"getFinalPrice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,a=t.coreAsset,n=t.fromAsset,r=t.toAsset,o=t.marketStats;return pt.a.getFinalPrice(a,n,r,o,e)}},{key:"render",value:function(){var e=this.props,t=e.toAsset,a=e.forceDirection,n=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["toAsset","forceDirection"]),o=this.getFinalPrice();return 1===o?r.a.createElement("span",null,"1.00"):o?r.a.createElement(J.a,dt({force_direction:!!a&&t.get("symbol"),base_amount:o.base.amount,base_asset:o.base.asset_id,quote_amount:o.quote.amount,quote_asset:o.quote.asset_id},n)):r.a.createElement("span",null,"--")}}]),t}();gt.defaultProps={forceDirection:!0},gt=Object(j.a)(gt,{propNames:["toAsset","fromAsset","coreAsset"],defaultProps:{toAsset:"1.3.0",coreAsset:"1.3.0"}});var _t=function(e){function t(){return mt(this,t),ft(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return bt(t,r.a.Component),ht(t,[{key:"render",value:function(){var e=this;return r.a.createElement(lt.a,{stores:[ct.a,I.a],inject:{toAsset:function(){return e.props.toAsset||ct.a.getState().settings.get("unit","1.3.0")},marketStats:function(){return I.a.getState().allMarketStats}}},r.a.createElement(gt,dt({},this.props,{ref:this.props.refCallback})))}}]),t}(),vt=a(103),yt=(a(444),a(101)),Et=a(325),wt=a(35),kt=a(19),Ot=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function At(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var xt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectedOrders:[],filterValue:""},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),Ot(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("cancelAllOrders");e&&e.addEventListener("click",function(){var e=this._getFilteredOrders.call(this);e=e.toJS?e.toJS():e,this.setState({selectedOrders:e}),document.querySelectorAll(".orderCancel").forEach(function(e){e.checked||(e.checked=!0)})}.bind(this))}},{key:"_getFilteredOrders",value:function(){var e=this.state.filterValue;return(this.props.account.get("orders")||[]).filter(function(t){var a=E.b.getObject(t).toJS(),n=E.b.getAsset(a.sell_price.base.asset_id),r=E.b.getAsset(a.sell_price.quote.asset_id),o=n.get("symbol").toLowerCase(),s=r.get("symbol").toLowerCase();return o.indexOf(e)>-1||s.indexOf(e)>-1})}},{key:"_cancelLimitOrder",value:function(e,t){t.preventDefault(),wt.a.cancelLimitOrder(this.props.account.get("id"),e,!1).catch(function(e){console.log("cancel order error:",e)})}},{key:"_cancelLimitOrders",value:function(e){var t=this;wt.a.cancelLimitOrders(this.props.account.get("id"),this.state.selectedOrders).then(function(){t.resetSelected()}).catch(function(e){console.log("cancel orders error:",e)})}},{key:"onFlip",value:function(e){var t={};t[e]=!this.props.marketDirections.get(e),ot.a.changeMarketDirection(t)}},{key:"onCheckCancel",value:function(e,t){var a=this.state.selectedOrders;if(t.target.checked)this.setState({selectedOrders:a.concat([e])});else{var n=a.indexOf(e);n>-1&&this.setState({selectedOrders:a.slice(0,n).concat(a.slice(n+1))})}}},{key:"setFilterValue",value:function(e){this.setState({filterValue:e.target.value.toLowerCase()})}},{key:"resetSelected",value:function(){this.setState({selectedOrders:[]}),document.querySelectorAll(".orderCancel").forEach(function(e){e.checked&&(e.checked=!1)})}},{key:"cancelSelected",value:function(){this._cancelLimitOrders.call(this)}},{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.marketDirections,o=this.state,s=o.filterValue,i=o.selectedOrders,c=y.a.translate("account.perm.cancel"),u={},p={};if(!a.get("orders"))return null;var d=a.get("orders"),h=d.size;s&&(d=this._getFilteredOrders.call(this)),d.forEach(function(t){var a=E.b.getObject(t).toJS(),o=E.b.getAsset(a.sell_price.base.asset_id),s=E.b.getAsset(a.sell_price.quote.asset_id);if(o&&s){var i,l=(At(i={},o.get("id"),{precision:o.get("precision")}),At(i,s.get("id"),{precision:s.get("precision")}),i),d=pt.a.getMarketName(o,s).marketName,h=n.get(d);u[d]||(u[d]=h?{base:{id:o.get("id"),symbol:o.get("symbol"),precision:o.get("precision")},quote:{id:s.get("id"),symbol:s.get("symbol"),precision:s.get("precision")}}:{base:{id:s.get("id"),symbol:s.get("symbol"),precision:s.get("precision")},quote:{id:o.get("id"),symbol:o.get("symbol"),precision:o.get("precision")}});var m=new kt.d(a,l,u[d].quote.id),f=E.b.getAsset(u[d].base.id),b=E.b.getAsset(u[d].quote.id);p[d]||(p[d]=[]),p[d].push(r.a.createElement(Et.b,{ref:u[d].base.symbol,key:a.id,order:m,base:f,quote:b,cancel_text:c,showSymbols:!1,invert:!0,onCancel:e._cancelLimitOrder.bind(e,a.id),price:m.getPrice(),dashboard:!0,isMyAccount:e.props.isMyAccount,settings:e.props.settings,onFlip:e.onFlip.bind(e,d),onCheckCancel:e.onCheckCancel.bind(e,a.id)}))}});var m=[];for(var f in p)p[f].length&&(m.push(r.a.createElement("tbody",{key:f},p[f].sort(function(e,t){return e.props.price-t.props.price}))),0);return r.a.createElement("div",null,r.a.createElement("div",{className:"dashboard__actions"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-9"},d&&h?r.a.createElement("input",{type:"text",placeholder:y.a.translate("account.filter_orders"),style:{display:"inline-block",maxWidth:"50%",marginRight:"1em",marginBottom:"0"},onChange:this.setFilterValue.bind(this)}):null,i.length?r.a.createElement("button",{className:"btn large inverted"},r.a.createElement(l.a,{content:"account.reset_orders",onClick:this.resetSelected.bind(this)})):null,i.length?r.a.createElement("button",{className:"btn large outline"},r.a.createElement(l.a,{content:"account.submit_orders",onClick:this.cancelSelected.bind(this)})):null)))),r.a.createElement("div",{className:"dashboard__adaptive"},r.a.createElement("table",{className:"dashboard__table blue-bg with-borders"},r.a.createElement(Et.c,{settings:this.props.settings,dashboard:!0,isMyAccount:this.props.isMyAccount}),m,this.props.children)))}}]),t}(),Ct=xt=Object(T.connect)(xt,{listenTo:function(){return[ct.a]},getProps:function(){return{marketDirections:ct.a.getState().marketDirections}}}),St=(a(8),{}),Nt=6e4;var Pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},jt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Tt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),jt(t,[{key:"render",value:function(){var e=this.props,t=e.wrap,a=e.orders,n=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["wrap","orders"]),o=this.props.balances.filter(function(e){return!!e&&0!==e.get("balance")}).map(function(e){return e.get("asset_type")}),i=a.filter(function(e){return!!e}).reduce(function(e,t){var a=t.getIn(["sell_price","base","asset_id"]);return e[a]||(e[a]=0),e[a]+=parseInt(t.get("for_sale"),10),e},{});for(var l in i)-1===o.indexOf(l)&&o.push(l);var c=t;return r.a.createElement(c,Pt({},n,{orders:i,balanceAssets:s.a.List(o)}))}}]),t}();Tt.propTypes={balances:m.a.ChainObjectsList,orders:m.a.ChainObjectsList},Tt.defaultProps={balances:s.a.List(),orders:s.a.List()};var It=Object(f.a)(Tt),qt=a(178),Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Mt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Rt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Lt=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return a=n=Rt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.tick=function(){var e=n.props,t=e.onIcon,a=e.offIcon,r=(n.state||{}).name,o=void 0===r?t:r;n.setState({name:o===t?a:t})},Rt(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),Mt(t,[{key:"componentDidMount",value:function(){var e=this.props.duration;this.interval=setInterval(this.tick,e)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.onIcon,a=e.rest,n=(this.state||{}).name,o=void 0===n?t:n,s=this.props.title;return r.a.createElement(G.a,Dt({name:o,title:s},a))}}]),t}();Lt.propTypes={duration:Q.a.number.isRequired,offIcon:Q.a.string.isRequired,onIcon:Q.a.string.isRequired,title:Q.a.string.isRequired};var Ft=Lt,Bt=a(131),Vt=a.n(Bt),Ht=a(573),Ut=a.n(Ht),Wt=a(574),zt=a.n(Wt),Jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Kt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Yt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Ut()(Vt.a.Highcharts),zt()(Vt.a.Highcharts);var Zt=function(e){function t(){return Gt(this,t),Xt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Yt(t,r.a.Component),Kt(t,[{key:"render",value:function(){var e=this.props,t=e.balanceObjects,a=e.core_asset,n=e.marketStats,o=e.preferredAsset,s=null;if(t&&t.length>0){var i=0;s=t.forEach(function(e){if(e){var t="string"==typeof e?E.b.getObject(e):e,r=t.get("asset_type"),s=E.b.getAsset(r);if(s&&o){var l=Number(t.get("balance")),c=pt.a.convertValue(l,o,s,n,a);if(c){var u=b.a.get_asset_precision(o.get("precision"));i+=c/u}}}}),s=t.map(function(e,t){if(!e)return null;var r="string"==typeof e?E.b.getObject(e):e,s=r.get("asset_type"),l=E.b.getAsset(s);if(!l)return null;var c=Number(r.get("balance")),u=pt.a.convertValue(c,o,l,n,a);if(!u)return null;var p=u/b.a.get_asset_precision(o.get("precision")),d=p/i*100;return d<.5?null:p>=1?{name:l.get("symbol")+" ("+(0===i?0:d.toFixed(2))+"%)",value:p,color:Vt.a.Highcharts.getOptions().colors[t]}:null}).filter(function(e){return!!e})}s&&1===s.length&&0===s[0].value&&(s=null);var l={chart:{backgroundColor:"rgba(255, 0, 0, 0)",height:250,spacingLeft:0,spacingRight:0,spacingBottom:0},credits:{enabled:!1},legend:{enabled:!1},plotOptions:{treemap:{animation:!1,tooltip:{pointFormatter:function(){return"<b>"+this.name+"</b>: "+Vt.a.Highcharts.numberFormat(this.value,0)+" "+o.get("symbol")}}}},series:[{type:"treemap",levels:[{level:1,layoutAlgorithm:"sliceAndDice",dataLabels:{enabled:!0,align:"center",verticalAlign:"middle"}}],data:s}],title:{text:null}};return r.a.createElement("div",{className:"account-treemap"},r.a.createElement(Vt.a,{config:l}))}}]),t}();Zt.propTypes={assets:m.a.ChainAssetsList,preferredAsset:m.a.ChainAsset.isRequired},Zt.defaultProps={assets:[],preferredAsset:"1.3.0"},Zt=Object(f.a)(Zt);var Qt=function(e){function t(){return Gt(this,t),Xt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Yt(t,r.a.Component),Kt(t,[{key:"render",value:function(){var e=this.props.balanceObjects.filter(function(e){return!!e}).map(function(e){return e.get("asset_type")});return r.a.createElement(Zt,Jt({preferredAsset:this.props.settings.get("unit","1.3.0"),assets:e},this.props))}}]),t}();Qt.propTypes={balanceObjects:m.a.ChainObjectsList,core_asset:m.a.ChainAsset.isRequired},Qt.defaultProps={balanceObjects:[],core_asset:"1.3.0"},Qt=Object(f.a)(Qt);var $t=function(e){function t(){return Gt(this,t),Xt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Yt(t,r.a.Component),Kt(t,[{key:"render",value:function(){return r.a.createElement(lt.a,{stores:[ct.a,I.a],inject:{marketStats:function(){return I.a.getState().allMarketStats},settings:function(){return ct.a.getState().settings}}},r.a.createElement(Qt,Jt({},this.props,{ref:this.props.refCallback})))}}]),t}(),ea=a(180),ta=a(353),aa=a(286),na=a(91),ra=a(159),oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ia=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function la(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ca(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ua(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function pa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var da=function(e){function t(e){ca(this,t);var a=ua(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));for(var n in a.onCloseModal=function(){a.setState({currentAsset:null,currency:{asset:null,currency:null},depositAddress:null})},a.updateModal=function(){a.setState({isBridgeModalVisible:!1})},a.sortFunctions={qty:function(e,t,a){return Number(this.qtyRefs[e.key])<Number(this.qtyRefs[t.key])?this.state.sortDirection||a?-1:1:Number(this.qtyRefs[e.key])>Number(this.qtyRefs[t.key])?this.state.sortDirection||a?1:-1:void 0},alphabetic:function(e,t,a){return e.key>t.key?this.state.sortDirection||a?1:-1:e.key<t.key?this.state.sortDirection||a?-1:1:0},priceValue:function(e,t){var a=this.priceRefs[e.key],n=this.priceRefs[t.key];if(a&&n){var r=a.getFinalPrice(!0),o=n.getFinalPrice(!0);return null===r&&null!==o?1:null!==r&&null===o?-1:null===r&&null===o?this.sortFunctions.alphabetic(e,t,!0):this.state.sortDirection?r-o:o-r}},totalValue:function(e,t){var a=this.valueRefs[e.key],n=this.valueRefs[t.key];if(a&&n){var r=a.getValue(),o=n.getValue();return!r&&o?1:r&&!o?-1:r||o?this.state.sortDirection?r-o:o-r:this.sortFunctions.alphabetic(e,t,!0)}},changeValue:function(e,t){var a=this.changeRefs[e.key],n=this.changeRefs[t.key];if(a&&n){var r=a.getValue(),o=n.getValue(),s="NaN"!=parseFloat(r)?parseFloat(r):r,i="NaN"!=parseFloat(o)?parseFloat(o):o;return void 0===this.state.sortDirection||this.state.sortDirection?s-i:i-s}}},a._renderBuy=function(e,t,n){return t?r.a.createElement("span",null,r.a.createElement("a",{onClick:a.onShowModal.bind(a,e,"buy_tab")},r.a.createElement(Ft,{onIcon:"dollar",offIcon:"dollar",title:"icons.dollar.buy",duration:1e3,className:"icon-14px"}))):n},a.state={sortKey:e.viewSettings.get("portfolioSort","totalValue"),sortDirection:e.viewSettings.get("portfolioSortDirection",!0),settleAsset:"1.3.0",shownAssets:e.viewSettings.get("shownAssets","active"),depositAsset:null,withdrawAsset:null,bridgeAsset:null,alwaysShowAssets:["LLC","BTC","ETH","XMR","DASH","LTC","USDT","EUR","USD","GBP","CNY","RUB","UAH"],hide0balances:!1,isBridgeModalVisible:!1,currentAsset:null,type:"deposit",currency:{asset:null,currency:null},currencies:null,depositAddress:null,activeTab:"deposit_tab",isAssetsLoad:!0},a.qtyRefs={},a.priceRefs={},a.valueRefs={},a.changeRefs={},a.sortFunctions)a.sortFunctions[n]=a.sortFunctions[n].bind(a);return a._handleFilterInput=a._handleFilterInput.bind(a),a.onShowModal=a.onShowModal.bind(a),a}return pa(t,r.a.Component),ia(t,[{key:"onShowModal",value:function(e,a){var n=this;this.setState({isBridgeModalVisible:!1},function(){n.setState({isBridgeModalVisible:!0,currentAsset:e||null,activeTab:a})}),this.getAllowCurrencies(e);var r=this.props.account,o="object"===(void 0===r?"undefined":sa(r))?r.get("name"):"string"==typeof r?r:"";(new na.a).сreatePaymentAddress(o,e,t.MODE_BRIDGE,function(e){n.setState({depositAddress:e})})}},{key:"getAllowCurrencies",value:function(e){var t=this,a=new na.a,n=this;a.getAllowCurrency(function(a){a[t.state.type].forEach(function(t){t.asset==e&&n.setState({currency:t})})})}},{key:"_reserveButtonClick",value:function(e,t){t.preventDefault(),this.setState({reserve:e}),d.a.publish("reserve_asset","open")}},{key:"_reserveAsset",value:function(e,t){t.preventDefault(),d.a.publish("reserve_asset","close");var a=this.state.issue,n=this.props.assets.get(a.asset_id);a.amount*=b.a.get_asset_precision(n.precision),AssetActions.issueAsset(e,a)}},{key:"_handleFilterInput",value:function(e){e.preventDefault(),this.setState({filterValue:e.target.value})}},{key:"componentWillMount",value:function(){this._checkMarginStatus(),"#activity"===this.props.location.hash&&this.props.router.push("/account/"+this.props.account_name)}},{key:"_checkMarginStatus",value:function(){var e=this;(function(e){if(!e||e&&!e.get("call_orders",[]).size)return Promise.resolve(null);var t=e.get("name")+JSON.stringify(e.get("call_orders"));return St[t]?St[t].result?Promise.resolve(St[t].result):new Promise(function(e,a){St[t].queue.push({res:e,rej:a})}):new Promise(function(a,n){St[t]={queue:[{res:a,rej:n}],result:null},Object(E.f)("getObject",e.get("call_orders").toArray()).then(function(e){var a=[];e.forEach(function(e){var t=e.getIn(["call_price","base","asset_id"]),n=e.getIn(["call_price","quote","asset_id"]);-1===a.indexOf(t)&&a.push(t),-1===a.indexOf(n)&&a.push(n)}),Object(E.f)("getAsset",a,6e3).then(function(a){var n={};a.forEach(function(e){n[e.get("id")]=e.toJS()});var r={};e.forEach(function(e){var t=n[e.getIn(["call_price","quote","asset_id"])],a=n[e.getIn(["call_price","base","asset_id"])],o=t.bitasset.current_feed.settlement_price;if(o.base.asset_id===o.quote.asset_id)r[t.id]={ratio:null};else{var s=new kt.a({amount:e.get("collateral"),asset_id:a.id,precision:a.precision}),i=new kt.a({amount:e.get("debt"),asset_id:t.id,precision:t.precision}),l=t.bitasset.current_feed.maintenance_collateral_ratio/1e3,c=new kt.c({priceObject:t.bitasset.current_feed.settlement_price,market_base:t.bitasset.current_feed.settlement_price.quote.asset_id,sqr:t.bitasset.current_feed.maximum_short_squeeze_ratio,assets:n}),u={ratio:s.getAmount({real:!0})/(i.getAmount({real:!0})/c.toReal())};if(isNaN(u.ratio))return null;u.ratio<l?u.statusClass="danger":u.ratio<l+.5?u.statusClass="warning":u.statusClass=null,r[t.id]=u}}),St[t].queue.forEach(function(e){e.res(r)}),St[t]={result:r},setTimeout(function(){delete St[t]},Nt)})}).catch(function(){St[t].queue.forEach(function(e){e.rej()})})})})((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).account).then(function(t){var a=null;for(var n in t)a=t[n].statusClass||a;e.setState({globalMarginStatus:a})})}},{key:"componentWillReceiveProps",value:function(e){e.account!==this.props.account&&(this._checkMarginStatus(e),this.priceRefs={},this.valueRefs={},this.changeRefs={},setTimeout(this.forceUpdate.bind(this),500))}},{key:"shouldComponentUpdate",value:function(e,t){return!b.a.are_equal_shallow(e.backedCoins,this.props.backedCoins)||!b.a.are_equal_shallow(e.balances,this.props.balances)||e.account!==this.props.account||e.settings!==this.props.settings||e.hiddenAssets!==this.props.hiddenAssets||!b.a.are_equal_shallow(t,this.state)||this.state.filterValue!==t.filterValue}},{key:"componentDidUpdate",value:function(e,t){if(!this.state.isAssetsLoad){var a=this;setTimeout(function(){a.forceUpdate()},1e3)}}},{key:"_onSettleAsset",value:function(e,t){t.preventDefault(),this.setState({settleAsset:e}),this.refs.settlement_modal.show(),console.log("===================================="),console.log(this.refs.settlement_modal),console.log("====================================")}},{key:"_hideAsset",value:function(e,t){ot.a.hideAsset(e,t)}},{key:"_showDepositModal",value:function(e,t){var a=this;t.preventDefault(),this.setState({depositAsset:e},function(){a.refs.deposit_modal_new.show()})}},{key:"_showDepositWithdraw",value:function(e,t,a,n){var r,o=this;n.preventDefault(),this.setState((la(r={},"bridge_modal"===e?"bridgeAsset":"deposit_modal"===e?"depositAsset":"withdrawAsset",t),la(r,"fiatModal",a),r),function(){o.refs[e].show()})}},{key:"_getSeparator",value:function(e){return e?r.a.createElement("span",null," | "):null}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.props.router.push(e)}},{key:"triggerSend",value:function(e){var t=this;this.setState({send_asset:e},function(){t.send_modal&&t.send_modal.show()})}},{key:"_renderBalances",value:function(e,t,a){var n=this,o=this.props.core_asset,s=this.props,i=s.settings,l=s.hiddenAssets,u=s.orders,p=i.get("unit")||o.get("symbol"),d=i.get("showAssetPercent",!1),h=function(e,t){var a=e&&e.has("bitasset_data_id"),o="cp_modal_"+e.get("id");return{isBitAsset:a,borrowModal:a?r.a.createElement(K.a,{ref:o,modalId:"borrow_modal_"+e.get("id"),quote_asset:e.get("id"),backing_asset:e.getIn(["bitasset","options","short_backing_asset"]),account:t}):null,borrowLink:a?r.a.createElement("a",{onClick:function(){D.a.hide(),n.refs[o].show()}},r.a.createElement(G.a,{name:"dollar",title:"icons.dollar.borrow",className:"icon-14px"})):null}},m=[],f=Object(ra.a)();if(e.forEach(function(e){var t=E.b.getObject(e);if(t){var a=t.get("asset_type"),s=E.b.getObject(a);if(s){var i,g,_,v="",w=(s.get("symbol"),"1.3.0"!==s.get("id")),k=p!==o.get("symbol"),O=st.a.parseDescription(s.getIn(["options","description"])).market;-1===(v=s.get("symbol")).indexOf("OPEN.")||O||(O="USD");var A=O||p;w&&A===v&&(A=o.get("symbol")),i=w?r.a.createElement(X.b,{to:"/market/"+A+"_"+s.get("symbol")},r.a.createElement(G.a,{name:"trade",title:"icons.trade.trade",className:"icon-14px"})):k?r.a.createElement(X.b,{to:"/market/"+p+"_"+s.get("symbol")},r.a.createElement(G.a,{name:"trade",title:"icons.trade.trade",className:"icon-14px"})):"-",_=r.a.createElement("a",{onClick:n.triggerSend.bind(n,s.get("id"))},r.a.createElement(G.a,{name:"transfer",title:"icons.transfer",className:"icon-14px"}));var x=h(s,n.props.account),C=x.isBitAsset,S=x.borrowModal,P=x.borrowLink;g=r.a.createElement("a",{onClick:n._onSettleAsset.bind(n,s.get("id"))},r.a.createElement(G.a,{name:"settle",title:"icons.settle",className:"icon-14px"}));var j=!l.includes(a),T=!!t.get("balance"),I=!!u[a],q=Object(ea.a)(s.get("symbol"),n.props.backedCoins),D=f.includes(s.get("symbol")),M=q&&q.depositAllowed||"LLC"==s.get("symbol")||D,R=q&&q.withdrawalAllowed&&T&&0!=t.get("balance")||D,L=!!n.props.bridgeCoins.get(v)||"LLC"===s.get("symbol"),F=t.get("balance");n.qtyRefs[s.get("symbol")]=b.a.get_asset_amount(F,s),m.push(r.a.createElement("tr",{key:s.get("symbol"),style:{maxWidth:"100rem"}},r.a.createElement("td",{style:{textAlign:"left"}},r.a.createElement(vt.a,{showIcon:!0,asset:s.get("id")})),r.a.createElement("td",{style:{textAlign:"right"}},T||I?r.a.createElement(c.a,{balance:e,hide_asset:!0}):null),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},r.a.createElement(_t,{refCallback:function(e){e&&e.refs.bound_component&&(n.priceRefs[s.get("symbol")]=e.refs.bound_component)},fromAsset:s.get("id"),pulsate:{reverse:!0,fill:"forwards"},hide_symbols:!0})),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},r.a.createElement(U,{refCallback:function(e){e&&e.refs.bound_component&&(n.changeRefs[s.get("symbol")]=e.refs.bound_component)},base:s.get("id"),quote:p,marketId:s.get("symbol")+"_"+p,hide_symbols:!0})),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},T||I?r.a.createElement(N.a,{balance:e,toAsset:p,hide_asset:!0,refCallback:function(e){e&&e.refs.bound_component&&(n.valueRefs[s.get("symbol")]=e.refs.bound_component)}}):null),d?r.a.createElement("td",{style:{textAlign:"right"}},T?r.a.createElement(c.a,{balance:e,asPercentage:!0}):null):null,r.a.createElement("td",null,_),r.a.createElement("td",null,n._renderBuy(s.get("symbol"),L,"-")),r.a.createElement("td",null,M?r.a.createElement("span",null,r.a.createElement(G.a,{style:{cursor:"pointer"},name:"deposit",title:"icons.deposit.deposit",className:"icon-14x",onClick:n.onShowModal.bind(n,s.get("symbol"),"deposit_tab")})):"-"),r.a.createElement("td",null,R?r.a.createElement("span",null,r.a.createElement(G.a,{style:{cursor:"pointer"},name:"withdraw",title:"icons.withdraw",className:"icon-14px",onClick:n.onShowModal.bind(n,s.get("symbol"),"withdraw_tab")})):"-"),r.a.createElement("td",null,i),r.a.createElement("td",null,C?r.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":y.a.translate("tooltip.borrow",{asset:v})},P,S):"-"),r.a.createElement("td",null,C?r.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":y.a.translate("tooltip.settle",{asset:v})},g):"-"),r.a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":y.a.translate("tooltip.burn"),onClick:n._reserveButtonClick.bind(n,s.get("id"))},r.a.createElement("a",{style:{marginRight:0},className:j?"order-cancel":"action-plus"},r.a.createElement("span",{className:"icon fire icon-14px"},r.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},r.a.createElement("path",{d:"M10.031 32c-2.133-4.438-0.997-6.981 0.642-9.376 1.795-2.624 2.258-5.221 2.258-5.221s1.411 1.834 0.847 4.703c2.493-2.775 2.963-7.196 2.587-8.889 5.635 3.938 8.043 12.464 4.798 18.783 17.262-9.767 4.294-24.38 2.036-26.027 0.753 1.646 0.895 4.433-0.625 5.785-2.573-9.759-8.937-11.759-8.937-11.759 0.753 5.033-2.728 10.536-6.084 14.648-0.118-2.007-0.243-3.392-1.298-5.312-0.237 3.646-3.023 6.617-3.777 10.27-1.022 4.946 0.765 8.568 7.555 12.394z"}))))),r.a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":y.a.translate("tooltip."+(j?"hide_asset":"show_asset")),onClick:n._hideAsset.bind(n,a,j)},r.a.createElement("a",{style:{marginRight:0},className:j?"order-cancel":"action-plus"},r.a.createElement(G.a,{name:j?"cross-circle":"plus-circle",title:j?"icons.cross_circle.hide_asset":"icons.plus_circle.show_asset",className:"icon-14px"})))))}}}),t&&!this.state.hide0balances){var g=!0;this.setState({isAssetsLoad:!0}),t.filter(function(e){var t=!0;return m.forEach(function(a){a.key===e&&(t=!1)}),t}).forEach(function(e){var t=E.b.getAsset(e);if(t||(g=!1),t){var s=!l.includes(t.get("id")),i=(t.get("symbol").split("."),Object(ea.a)(t.get("symbol"),n.props.backedCoins)),c=f.includes(t.get("symbol")),u=i&&i.depositAllowed||"LLC"==t.get("symbol")||c,p=i&&i.withdrawalAllowed||c,d=!!n.props.bridgeCoins.get(t.get("symbol"))||"LLC"===t.get("symbol"),b="1.3.0"!==t.get("id"),_=st.a.parseDescription(t.getIn(["options","description"])).market;-1===t.get("symbol").indexOf("OPEN.")||_||(_="USD");var v=_||(o?o.get("symbol"):"LLC"),w=b?r.a.createElement(X.b,{to:"/market/"+v+"_"+t.get("symbol")},r.a.createElement(G.a,{name:"trade",title:"icons.trade.trade",className:"icon-14px"})):"-",k=h(t,n.props.account),O=k.isBitAsset,A=k.borrowModal,x=k.borrowLink;(s&&a||!s&&!a)&&m.push(r.a.createElement("tr",{key:t.get("symbol"),style:{maxWidth:"100rem"}},r.a.createElement("td",{style:{textAlign:"left"}},r.a.createElement(vt.a,{showIcon:!0,asset:t.get("id")})),r.a.createElement("td",{style:{textAlign:"right"}},"-"),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},"-"),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},"-"),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},"-"),r.a.createElement("td",null,"-"),r.a.createElement("td",null,n._renderBuy(t.get("symbol"),d,"-")),r.a.createElement("td",null,u?r.a.createElement("span",null,r.a.createElement(G.a,{style:{cursor:"pointer"},name:"deposit",title:"icons.deposit.deposit",className:"icon-14x",onClick:n.onShowModal.bind(n,t.get("symbol"),"deposit_tab")})):"-"),r.a.createElement("td",null,p?r.a.createElement("span",null,r.a.createElement(G.a,{style:{cursor:"pointer"},name:"withdraw",title:"icons.withdraw",className:"icon-14px",onClick:n.onShowModal.bind(n,t.get("symbol"),"withdraw_tab")})):"-"),r.a.createElement("td",null,w),r.a.createElement("td",null,O?r.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":y.a.translate("tooltip.borrow",{asset:t.get("symbol")})},x,A):"-"),r.a.createElement("td",null,"-"),r.a.createElement("td",{style:{textAlign:"center"}},"-"),r.a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":y.a.translate("tooltip."+(s?"hide_asset":"show_asset"))},r.a.createElement("a",{style:{marginRight:0},className:s?"order-cancel":"action-plus",onClick:n._hideAsset.bind(n,t.get("id"),s)},r.a.createElement(G.a,{name:s?"cross-circle":"plus-circle",title:s?"icons.cross_circle.hide_asset":"icons.plus_circle.show_asset",className:"icon-14px"})))))}}),this.setState({isAssetsLoad:g})}return m.sort(this.sortFunctions[this.state.sortKey]),m}},{key:"_changeShownAssets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"active";this.setState({shownAssets:e}),ot.a.changeViewSetting({shownAssets:e})}},{key:"_toggleSortOrder",value:function(e){this.state.sortKey===e?(ot.a.changeViewSetting({portfolioSortDirection:!this.state.sortDirection}),this.setState({sortDirection:!this.state.sortDirection})):(ot.a.changeViewSetting({portfolioSort:e}),this.setState({sortDirection:!1,sortKey:e}))}},{key:"_renderRadioButton",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.a.createElement("label",{className:"radio"},r.a.createElement("input",{className:"radio__input",type:"radio",name:"dashboard-filters",onChange:t,checked:a}),r.a.createElement("span",{className:"radio__styled"}),r.a.createElement("span",{className:"radio__label"},e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.hiddenAssets,o=t.settings,i=t.orders,c=t.location,p=this.state.shownAssets;if(!a)return null;var m=[],f={},g={};a.toJS&&a.has("call_orders")&&(m=a.get("call_orders").toJS());var _=void 0,v=void 0,w=a.get("balances"),k=s.a.List(),O=s.a.List();(m.forEach(function(e){var t=E.b.getObject(e);if(t){var a=t.getIn(["call_price","base","asset_id"]);f[a]?f[a]+=parseInt(t.get("collateral"),10):f[a]=parseInt(t.get("collateral"),10);var n=t.getIn(["call_price","quote","asset_id"]);g[n]?g[n]+=parseInt(t.get("debt"),10):g[n]=parseInt(t.get("debt"),10)}}),w)&&((w=w.filter(function(t,a){var n=E.b.getObject(t);return!(n&&!n.get("balance")&&!i[a])&&!(e.state.hide0balances&&n.get("balance")<=0)})).forEach(function(t,a){var r=E.b.getAsset(a),o="",s="";e.state.filterValue&&(s=e.state.filterValue?String(e.state.filterValue).toLowerCase():"",o=r.get("symbol").toLowerCase(),b.a.replaceName(r).isBitAsset&&(o="bit"+o));n.includes(a)&&o.includes(s)?O=O.push(t):o.includes(s)&&(k=k.push(t))}),_=this._renderBalances(k,this.state.filterValue?null:this.state.alwaysShowAssets,!0),v=this._renderBalances(O,this.state.filterValue?null:this.state.alwaysShowAssets));var A=r.a.createElement(u.a,{noTip:!0,balances:O,hide_asset:!0}),x=r.a.createElement(u.a,{noTip:!0,balances:k,hide_asset:!0}),C=r.a.createElement(u.a,{noTip:!0,balances:s.a.List(),openOrders:i,hide_asset:!0}),N=r.a.createElement(u.a,{noTip:!0,balances:s.a.List(),debt:g,collateral:f,hide_asset:!0}),P=r.a.createElement(u.a,{noTip:!0,balances:s.a.List(),debt:g,hide_asset:!0}),j=r.a.createElement(u.a,{noTip:!0,balances:s.a.List(),collateral:f,hide_asset:!0}),T=o.get("unit")||this.props.core_asset.get("symbol"),I=r.a.createElement(Y.a,{noLink:!0,string:"account.total",keys:[{type:"asset",value:T,arg:"asset"}]});_.push(r.a.createElement("tr",{key:"portfolio",className:"total-value"},r.a.createElement("td",{colSpan:"2",style:{textAlign:"left"}},I),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{style:{textAlign:"right"}},x),r.a.createElement("td",{colSpan:"9"}))),v.push(r.a.createElement("tr",{key:"portfolio",className:"total-value"},r.a.createElement("td",{colSpan:"2",style:{textAlign:"left"}},I),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{style:{textAlign:"right"}},A),r.a.createElement("td",{colSpan:"9"})));var q=o.get("showAssetPercent",!1),D=(this.props.backedCoins.get("OPEN",[]).find(function(t){return t.symbol===e.state.withdrawAsset}),this.props.bridgeCoins.get(this.state.bridgeAsset),[{title:"account.portfolio",subTitle:x,content:r.a.createElement("div",null,r.a.createElement("div",{className:"dashboard__actions"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-3 col-lg-6"},r.a.createElement("input",{type:"text",placeholder:"Filter",onChange:this._handleFilterInput})),r.a.createElement("div",{className:"col-xl-9 col-lg-12"},r.a.createElement("div",{className:"dashboard__actions__filters"},this._renderRadioButton(y.a.translate("account.hide_hidden"),"active"!=p?this._changeShownAssets.bind(this,"active"):function(){},!("active"!=p)),v.length?this._renderRadioButton(y.a.translate("account.show_hidden"),"hidden"!=p?this._changeShownAssets.bind(this,"hidden"):function(){},!("hidden"!=p)):null,this._renderRadioButton(y.a.translate("account.show_visual"),"visual"!=p?this._changeShownAssets.bind(this,"visual"):function(){},!("visual"!=p)),r.a.createElement("div",null,r.a.createElement("label",{className:"hide0balances"},r.a.createElement("input",{name:"isGoing",type:"checkbox",checked:this.state.hide0balances,onChange:function(t){return e.setState({hide0balances:!e.state.hide0balances})}}),r.a.createElement("span",null),r.a.createElement("span",null,y.a.translate("exchange.hide")," 0 ",y.a.translate("transfer.balances")))))))),this.state.isBridgeModalVisible?r.a.createElement(aa.a,{account:this.props.account,currency:this.state.currency,type:this.state.type,depositAddress:this.state.depositAddress,activeTab:this.state.activeTab,onCloseModal:this.onCloseModal,isDashboard:!0}):null),r.a.createElement(qt.a,{id:"send_modal_portfolio",refCallback:function(t){t&&(e.send_modal=t)},from_name:this.props.account.get("name"),asset_id:this.state.send_asset||"1.3.0"}),"visual"!=p?r.a.createElement("div",{className:"dashboard__adaptive"},r.a.createElement("table",{className:"dashboard__table blue-bg with-borders"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{textAlign:"left"},className:"clickable",onClick:this._toggleSortOrder.bind(this,"alphabetic")},r.a.createElement(l.a,{component:"span",content:"account.asset"})),r.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"qty"),className:"clickable",style:{textAlign:"right"}},r.a.createElement(l.a,{content:"account.qty"})),r.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"priceValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},r.a.createElement(l.a,{content:"exchange.price"})," (",r.a.createElement(W.a,{name:T,noTip:!0}),")"),r.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"changeValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},r.a.createElement(l.a,{content:"account.hour_24_short"})),r.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"totalValue"),style:{textAlign:"right"},className:"column-hide-small clickable"},r.a.createElement(Y.a,{noLink:!0,string:"account.eq_value_header",keys:[{type:"asset",value:T,arg:"asset"}],noTip:!0})),q?r.a.createElement("th",{style:{textAlign:"right"}},r.a.createElement(l.a,{component:"span",content:"account.percent"})):null,r.a.createElement("th",null,r.a.createElement(l.a,{content:"header.payments"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"exchange.buy"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"modal.deposit.submit"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"modal.withdraw.submit"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"account.trade"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"exchange.borrow_short"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"account.settle"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"modal.reserve.submit"})),r.a.createElement("th",{className:"column-hide-small"},r.a.createElement(l.a,{content:"active"==p?"exchange.hide":"account.perm.show"})))),r.a.createElement("tbody",null,"hidden"==p&&v.length?v:_))):r.a.createElement($t,{balanceObjects:k}))},{title:"account.open_orders",subTitle:C,content:r.a.createElement(Ct,this.props,r.a.createElement("tbody",null,r.a.createElement("tr",{className:"total-value"},r.a.createElement("td",{colSpan:"7",style:{textAlign:"right"}},I),r.a.createElement("td",{colSpan:"2",style:{textAlign:"left"}},C),this.props.isMyAccount?r.a.createElement("td",null):null)))},{title:"account.collaterals",subTitle:N,content:r.a.createElement(pe,{preferredUnit:T,className:"dashboard-table blue-bg with-borders",callOrders:m,account:a},r.a.createElement("tr",{className:"total-value"},r.a.createElement("td",null,I),r.a.createElement("td",null),r.a.createElement("td",null,P),r.a.createElement("td",{className:"column-hide-medium"},j),r.a.createElement("td",null),r.a.createElement("td",null,N),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{colSpan:"3"})))},{title:"account.activity",subTitle:"",content:r.a.createElement(de.a,{accountsList:s.a.fromJS([a.get("id")]),compactView:!1,showMore:!0,fullHeight:!0,limit:15,showFilters:!0,dashboard:!0})},{title:"account.proposed_transactions",subTitle:"",content:r.a.createElement("div",{className:"propsal-table-wrap"},r.a.createElement(rt,{className:"dashboard-table",account:a.get("id")}))}]);return r.a.createElement("div",{className:"dashboard-layout"},r.a.createElement(yt.a,{items:D,inner:!0,updateModal:this.updateModal,defaultActiveTab:"#activity"===c.hash?"account.activity":null}),r.a.createElement(h.a,{id:"reserve_asset",overlay:!0},r.a.createElement("br",null),r.a.createElement("div",{className:"grid-block vertical"},r.a.createElement(ta.a,{assetId:this.state.reserve,account:a,onClose:function(){d.a.publish("reserve_asset","close")}}))),r.a.createElement("div",null),r.a.createElement(S,{ref:"settlement_modal",modalId:"settlement_modal",asset:this.state.settleAsset,account:a.get("name")}))}}]),t}();da.MODE_BRIDGE="1",da=Object(j.a)(da,{propNames:["core_asset"]});var ha=function(e){function t(){return ca(this,t),ua(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return pa(t,r.a.Component),ia(t,[{key:"render",value:function(){return r.a.createElement(It,oa({},this.props,{wrap:da}))}}]),t}();t.default=ha}}]);
>>>>>>> live
