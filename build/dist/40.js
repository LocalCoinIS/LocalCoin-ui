(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{8016:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=(n(6),n(1),n(61),n(330),n(360),n(8),n(100),n(13)),o=n(59),i=n(15),l=n(34),s=n(23),u=(n(44),n(7)),d=n(10),p=(n(106),n(112),n(12),n(22),n(3)),f=n.n(p),m=(n(125),n(17),n(9)),g=n(14),v=n(16),h=n(5),_=(n(45),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}());var b="ws://127.0.0.1:8077/",y=(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ws=null,this.Dispose=function(){return t.ws.close()},this.isWalletExists=function(e,n){try{return t.ws.onopen=function(){e(),t.ws.onopen=null,t.ws.onerror=null},void(t.ws.onerror=function(){n(),t.ws.onopen=null,t.ws.onerror=null})}catch(e){}try{t.ws.onopen=null,t.ws.onerror=null}catch(e){}n()},this.getActivenodeByAccount=function(e,n){var a='{ "jsonrpc" : "2.0","method" : "get_activenode","params" : ["'+e+'"],"id" : 1  }';t.ws.onmessage=function(e){n(JSON.parse(e.data)),t.ws.onmessage=null},t.ws.send(a)},this.createActivenodeByAccount=function(e,n){var a='{ "jsonrpc" : "2.0","method" : "create_activenode","params" : ["'+e+'", true],"id" : 1  }';t.ws.onmessage=function(e){n(JSON.parse(e.data)),t.ws.onmessage=null},t.ws.send(a)},this.ws=new WebSocket(b)}_(e,[{key:"importAccountInWallet",value:function(e,t,n){var a=this,c='{ "jsonrpc" : "2.0","method" : "import_key","params" : ["'+e+'", "'+t+'"],"id" : 1  }';this.ws.onmessage=function(e){n(JSON.parse(e.data)),a.ws.onmessage=null},this.ws.send(c)}},{key:"lockWallet",value:function(e){var t=this;this.ws.onmessage=function(n){e(JSON.parse(n.data)),t.ws.onmessage=null},this.ws.send('{ "jsonrpc" : "2.0","method" : "lock","params" : [],"id" : 1  }')}},{key:"unlockWallet",value:function(e,t){var n=this,a='{ "jsonrpc" : "2.0","method" : "unlock","params" : ["'+e+'"],"id" : 1  }';this.ws.onmessage=function(e){t(JSON.parse(e.data)),n.ws.onmessage=null},this.ws.send(a)}},{key:"setPassWallet",value:function(e,t){var n=this,a='{ "jsonrpc" : "2.0","method" : "set_password","params" : ["'+e+'"],"id" : 1  }';this.ws.onmessage=function(e){t(JSON.parse(e.data)),n.ws.onmessage=null},this.ws.send(a)}}])}(),n(132),n(148)),w=n(4),A=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=w.c.operations,C=(Object.keys(O),511),S=function(e){function t(e){E(this,t);var n=k(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._handleAddNode=function(){n.setState({calculatePanel:!1})},n._unlockHandle=function(e){e.preventDefault(),i.a.isLocked()?l.a.unlock().then(function(){s.a.tryToSetCurrentAccount()}).catch(function(){}):l.a.lock()},n.canCreateTheActivenode=function(){return!(n.getWalletBalance()<C)&&(!!n.isLifetimeMember()&&!!n.isLocalNodeRunning())},n.activenodeCreate=function(){var e=g.a.getState().currentAccount,t=w.b.getAccount(e),a=new w.l;a.add_type_operation("activenode_create_operation",{fee:{amount:0,asset_id:"1.3.0"},activenode_account:t.get("id")}),i.a.process_transaction(a,null,!0).then(function(){return n.canCreateTheActivenode()&&n.setState({toUpdateConfig:!0}),!0})},n._createTheActivenodeHandle=function(){n.canCreateTheActivenode()&&n.activenodeCreate()},n.imIsActiveNodeView=function(){var e=g.a.getState().currentAccount;return c.a.createElement("div",{style:{margin:"0 auto",width:600,marginTop:100,background:"#efefef",padding:50,textAlign:"center"}},c.a.createElement("h2",{style:{textAlign:"center"}},f.a.translate("account.activenodes.your_node_up_and_running")),c.a.createElement("span",{style:{textAlign:"center"}},f.a.translate("account.activenodes.activenode_has_been_successfully")),c.a.createElement("br",null),c.a.createElement("span",{style:{textAlign:"center"}},f.a.translate("account.activenodes.you_have_to_keep_it_up")),c.a.createElement("br",null),c.a.createElement("span",{style:{textAlign:"center"}},f.a.translate("account.activenodes.if_you_do_not_keep_your_node")),c.a.createElement("br",null),c.a.createElement("span",{style:{textAlign:"center"}},f.a.translate("account.activenodes.you_can_check"),c.a.createElement(d.b,{to:"/account/"+e+"/vesting/",activeClassName:"active"},f.a.translate("account.activenodes.vesting_section"))))},n.unauthorizedView=function(){return c.a.createElement("div",{style:{margin:"0 auto",width:600,marginTop:100,background:"#efefef",padding:50,textAlign:"center"}},c.a.createElement("h2",{style:{textAlign:"center"}},f.a.translate("account.activenodes.nodes")),c.a.createElement("span",{style:{textAlign:"center"}},f.a.translate("account.activenodes.authorize_ti_view_and_manage_nodes")),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("button",{className:"button btn large inverted",onClick:n._unlockHandle},f.a.translate("account.activenodes.login")))},n.addTheNodeView=function(){return c.a.createElement("div",{style:{margin:"0 auto",width:600,marginTop:100,background:"#efefef",padding:50,textAlign:"center"}},c.a.createElement("h2",{style:{textAlign:"center"}},f.a.translate("account.activenodes.earn_coins_by_running_activenode")),c.a.createElement("span",null,f.a.translate("account.activenodes.currently_there_are")," ",n.getCountActivenodes(),f.a.translate("account.activenodes.activenodes_in_the_network")),c.a.createElement("br",null),c.a.createElement("span",null,f.a.translate("account.activenodes.approximate_daily_profit_is")," ",n.calculateDailyApproximate(),f.a.translate("account.activenodes.llc"),"."),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("button",{className:"button btn large inverted",onClick:n._handleAddNode},f.a.translate("account.activenodes.add_the_activenode")))},n.isLifetimeMember=function(){try{var e=w.b.getAccount(g.a.getState().currentAccount);return null!==e&&"1970-01-01T00:00:00"!==e.toJS().membership_expiration_date}catch(e){}return!1},n.getWalletBalance=function(){var e=0,t=w.b.getAccount(g.a.getState().currentAccount);return t?(t.get("balances").forEach(function(t,n){var a=w.b.getObject(t);if(!a)return"";var c=w.b.getAsset(n);if(c){var r=c.get("symbol");if(r&&"LLC"===r.toUpperCase()){var o=h.a.get_asset_precision(c.get("precision"));e=a.get("balance")/o}}}),e):0},n.isLocalNodeRunning=function(){var e=m.a.getState().settings.get("apiServer")+"";return-1!==e.indexOf("://127.0.0.1:")||-1!==e.indexOf("://localhost:")},n.activenodeRequirementsView=function(){return c.a.createElement("div",{style:{margin:"0 auto",width:600,marginTop:100,background:"#efefef",padding:50,textAlign:"center"}},c.a.createElement("h2",{style:{textAlign:"center"}},f.a.translate("account.activenodes.activenode_requirements")),c.a.createElement("input",{type:"checkbox",checked:n.getWalletBalance()>=C}),c.a.createElement("span",{style:{textAlign:"center"}},f.a.translate("account.activenodes.min_balance")),c.a.createElement("br",null),c.a.createElement("input",{type:"checkbox",checked:n.isLifetimeMember()}),c.a.createElement("span",{style:{textAlign:"center"}},f.a.translate("account.activenodes.lifetime_member")),c.a.createElement("br",null),c.a.createElement("input",{type:"checkbox",checked:n.isLocalNodeRunning()}),c.a.createElement("span",{style:{textAlign:"center"}},f.a.translate("account.activenodes.localhost_connection")),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("button",{style:{opacity:n.canCreateTheActivenode()?1:.3},className:"button btn large inverted",onClick:n._createTheActivenodeHandle},f.a.translate("account.activenodes.create_the_activenode")))},n.calculateDailyApproximate=function(){return.065/n.getCountActivenodes()*43200},n.getCountActivenodes=function(){try{var e=n.props.globalObject;if(null===e)return 1;e=e.toJS();var t=Object.keys(e.current_activenodes).length;return t<1?1:t}catch(e){}return null},n.getListActivenodes=function(){try{var e=n.props.globalObject;return null===e?null:(e=e.toJS()).current_activenodes}catch(e){}return null},n.updateConfigView=function(){var e=g.a.getState().currentAccount,t=w.b.getAccount(e).get("options").get("memo_key");return c.a.createElement("div",{style:{margin:"0 auto",width:600,marginTop:100,background:"#efefef",padding:50,textAlign:"center"}},c.a.createElement("h2",{style:{textAlign:"center"}},f.a.translate("account.activenodes.nodes")),c.a.createElement("span",{style:{textAlign:"center"}},f.a.translate("account.activenodes.open_in_witness_node_data_dir_file"),":"),c.a.createElement("br",null),c.a.createElement("span",{style:{textAlign:"center"}},"1. ",f.a.translate("account.activenodes.you_must_take_a_few_steps")),c.a.createElement("br",null),c.a.createElement("span",{style:{textAlign:"center"}},"2. ",f.a.translate("account.activenodes.update_add_in_file")," activenode-account = ",e),c.a.createElement("br",null),c.a.createElement("span",{style:{textAlign:"center"}},"3. ",f.a.translate("account.activenodes.update_add_in_file"),' activenode-private-key = ["',t,'","',f.a.translate("account.activenodes.enter_your_private_key"),'"]'),c.a.createElement("br",null),c.a.createElement("span",{style:{textAlign:"center"}},"4. ",f.a.translate("account.activenodes.restart_the_node")),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("button",{className:"button btn large inverted",onClick:function(){n.setState({imIsActiveNode:!0})}},"OK"))},n.state={toUpdateConfig:!1,imIsActiveNode:!1,calculatePanel:!0},n}return x(t,c.a.Component),A(t,[{key:"getP",value:function(e){return y.a.getState().addresses.get(e)}},{key:"render",value:function(){return this.state.imIsActiveNode?this.imIsActiveNodeView():(this.state.toUpdateConfig&&this.updateConfigView(),o.a.getState().locked?this.unauthorizedView():this.state.calculatePanel?this.addTheNodeView():this.activenodeRequirementsView())}}]),t}();S.propTypes={globalObject:u.a.ChainObject.isRequired,dynGlobalObject:u.a.ChainObject.isRequired},S.defaultProps={globalObject:"2.0.0",dynGlobalObject:"2.1.0"},S=Object(r.a)(S);var j=function(e){function t(){return E(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return x(t,c.a.Component),A(t,[{key:"render",value:function(){return c.a.createElement(S,this.props)}}]),t}();j=Object(v.connect)(j,{listenTo:function(){return[m.a]},getProps:function(){return{cardView:m.a.getState().viewSettings.get("cardView"),filterWitness:m.a.getState().viewSettings.get("filterWitness")}}});t.default=j}}]);