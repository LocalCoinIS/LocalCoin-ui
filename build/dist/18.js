(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{330:function(e,t,a){"use strict";var n=a(102),r=a(0),s=a.n(r),o=a(6),i=a.n(o),l=a(58),c=a.n(l),u=a(5),p=a(1),m=a.n(p),f=a(29),d=a(18),h=a(13),_=a(38),y=a(8),g=a(14),b=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),b(t,[{key:"render",value:function(){return this.props.account?s.a.createElement("span",null,this.props.account.get("name")):null}}]),t}();v.propTypes={account:y.a.ChainObject.isRequired},v.defaultProps={autosubscribe:!1};var k=Object(g.a)(v),E=a(17),w=a(31),S=a(10),x=a(3),M=a.n(x),A=a(115),C=a(28),O=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var T=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.statsInterval=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),O(t,[{key:"_onClick",value:function(e){"/market/"+e!==this.context.router.location.pathname&&(w.a.switchMarket(),this.context.router.push("/market/"+e))}},{key:"componentDidMount",value:function(){w.a.getMarketStats(this.props.base,this.props.quote),this.statsChecked=new Date,this.statsInterval=setInterval(w.a.getMarketStats.bind(this,this.props.base,this.props.quote),35e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.statsInterval)}},{key:"shouldComponentUpdate",value:function(e){return!u.a.are_equal_shallow(e,this.props)}},{key:"_onStar",value:function(e,t,a){a.preventDefault(),this.props.starred?S.a.removeStarMarket(e,t):S.a.addStarMarket(e,t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.quote,n=t.base,r=(t.noSymbols,t.stats),o=t.starred;if(!a||!n)return null;var i=Object(A.e)(),l=["USDT","EURT","TUSD","USDC","USDS"],c=n.get("symbol")+"_"+a.get("symbol"),p=!1;(l.includes(n.get("symbol"))&&!l.includes(a.get("symbol"))||i.includes(n.get("symbol"))&&!l.includes(a.get("symbol"))&&!i.includes(a.get("symbol")))&&(c=a.get("symbol")+"_"+n.get("symbol"),p=!0);var m=a.get("symbol")+"/"+n.get("symbol"),f=this.props.getDynamicObject(a.get("dynamic_asset_data_id")),d=this.props.getDynamicObject(n.get("dynamic_asset_data_id")),_=u.a.convertPrice(a,n),y={};this.props.leftAlign&&(y.textAlign="left");var g="button outline",b=null;this.props.compact&&(g+=" no-margin",b={marginBottom:0,fontSize:"0.75rem",padding:"4px 10px",borderRadius:"0px",letterSpacing:"0.05rem"});var v=this.props.quote.get("symbol"),w=this.props.base.get("symbol"),S=void 0===this.context.router.params.marketID?a.get("symbol")+"_"+n.get("symbol"):this.context.router.params.marketID.toUpperCase().trim(),x=void 0;-1!==S.indexOf("_"+v)||-1!==S.indexOf(w+"_")?x=w+"_"+v:i.includes(w)&&!l.includes(v)?(x=v+"_"+w,p=!0):x=(l.includes(v),w+"_"+v);var M=this.props.columns.map(function(t){switch(t.name){case"star":var i=o?"gold-star":"grey-star";return s.a.createElement("td",{onClick:e._onStar.bind(e,a.get("symbol"),n.get("symbol")),key:t.index},s.a.createElement(E.a,{className:i,name:"fi-star",title:"icons.fi_star.symbol"}));case"vol":var l=r?r.volumeBase:0;return s.a.createElement("td",{onClick:e._onClick.bind(e,x),className:"text-right",key:t.index},u.a.format_volume(l));case"change":var y=C.a.getState().allMarketStats.get(x),v=y?y.change:0,w=v>0?"+"+v:v,S=u.a.format_number(w,2),M="0.00"===S?"":S>0?"change-up":"change-down";return s.a.createElement("td",{onClick:e._onClick.bind(e,x),className:"text-right "+M,key:t.index},S+"%");case"marketName":return s.a.createElement("td",{onClick:e._onClick.bind(e,x),key:t.index},s.a.createElement("div",{className:g,style:b},m));case"market":var A=e.props.name;try{void 0!==A.props&&(A=A.props.children[0].props.name+"/"+A.props.children[2].props.name)}catch(e){}return s.a.createElement("td",{onClick:e._onClick.bind(e,x),key:t.index},A);case"price":var O,T=void 0,q=void 0,j=void 0,B=!1;r&&r.price?(T=p?r.price.quote.amount:r.price.base.amount,q=p?r.price.base.amount:r.price.quote.amount,j=p?a:n,B=p?n:a):r&&r.close&&r.close.quote.amount&&r.close.base.amount?(T=p?r.close.quote.amount:r.close.base.amount,q=p?r.close.base.amount:r.close.quote.amount,j=p?a:n,B=p?n:a):(T=p?_.quote.amount:_.base.amount,q=p?_.base.amount:_.quote.amount,j=p?a:n,B=p?n:a),O=u.a.get_asset_price(T,j,q,B,!0);var P=6;return-1!==["BTC","OPEN.BTC","TRADE.BTC","GOLD","SILVER"].indexOf(n.get("symbol"))&&(P=8),s.a.createElement("td",{onClick:e._onClick.bind(e,x),className:"text-right",key:t.index},u.a.format_numerical(u.a.format_number(O,O>1e3?0:O>10?2:P)));case"quoteSupply":return s.a.createElement("td",{onClick:e._onClick.bind(e,x),key:t.index},f?s.a.createElement(h.a,{style:{fontWeight:"bold"},amount:parseInt(f.get("current_supply"),10),asset:a.get("id")}):null);case"baseSupply":return s.a.createElement("td",{onClick:e._onClick.bind(e,x),key:t.index},d?s.a.createElement(h.a,{style:{fontWeight:"bold"},amount:parseInt(d.get("current_supply"),10),asset:n.get("id")}):null);case"issuer":return s.a.createElement("td",{onClick:e._onClick.bind(e,x),key:t.index},s.a.createElement(k,{account:a.get("issuer")}));case"add":return s.a.createElement("td",{style:{textAlign:"right"},key:t.index,onClick:e.props.onCheckMarket.bind(e,c)},s.a.createElement("input",{type:"checkbox",checked:!!e.props.isChecked||e.props.isDefault,disabled:e.props.isDefault,"data-tip":e.props.isDefault?"This market is a default market and cannot be removed":null}));case"remove":return s.a.createElement("td",{key:t.index,className:"clickable",onClick:e.props.removeMarket},s.a.createElement("span",{style:{marginBottom:"6px",marginRight:"6px",zIndex:999},className:"text float-right remove"},"–"))}}).sort(function(e,t){return e.key>t.key}),O="clickable";return this.props.currentMarket!==c&&this.props.currentMarket!==x||(O+=" activeMarket"),s.a.createElement("tr",{className:O,style:y},M)}}]),t}();T.defaultProps={noSymbols:!1},T.contextTypes={router:M.a.object.isRequired};var q=Object(_.a)(T,{propNames:["quote","base"],defaultProps:{tempComponent:"tr"},withDynamic:!0}),j=a(9),B=a(96),P=a(20),I=a(72),N=a(12),L=a.n(N),D=a(111),R=a(2),U=a.n(R),W=a(48),F=a(4),z=a(23),V=a.n(z),G=a(39),J=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Q=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={backingAsset:"",error:!1,valid:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),J(t,[{key:"_onMoveUp",value:function(e){var t=this.props.quotes.findIndex(function(t){return t===e});S.a.modifyPreferedBases({oldIndex:t,newIndex:t-1})}},{key:"_onMoveDown",value:function(e){var t=this.props.quotes.findIndex(function(t){return t===e});S.a.modifyPreferedBases({oldIndex:t,newIndex:t+1})}},{key:"_onRemove",value:function(e){var t=this.props.quotes.findIndex(function(t){return t===e});t>=0&&S.a.modifyPreferedBases({remove:t})}},{key:"_onAdd",value:function(e){-1===this.props.quotes.findIndex(function(t){return t===e.get("symbol")})&&S.a.modifyPreferedBases({add:e.get("symbol")})}},{key:"_onInputBackingAsset",value:function(e){this.setState({backingAsset:e.toUpperCase(),error:null})}},{key:"_onFoundBackingAsset",value:function(e){e&&(this.props.quotes.includes(e.get("symbol"))?this.setState({error:"Asset already being used",isValid:!1}):this.setState({isValid:!0}))}},{key:"render",value:function(){var e=this,t=this.state.error,a=this.props.quotes.size;return s.a.createElement(G.a,{id:"quote_selection",overlay:!0,modalHeader:"exchange.quote_selection",noLogo:!0},s.a.createElement("section",{className:"block-list no-border-bottom"},s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null),s.a.createElement("th",null,s.a.createElement(m.a,{content:"account.quote"})),s.a.createElement("th",{style:{textAlign:"center"}},s.a.createElement(m.a,{content:"exchange.move_down"})),s.a.createElement("th",{style:{textAlign:"center"}},s.a.createElement(m.a,{content:"exchange.move_up"})),s.a.createElement("th",{style:{textAlign:"center"}},s.a.createElement(m.a,{content:"exchange.remove"})))),s.a.createElement("tbody",null,this.props.quotes.map(function(t,n){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,n+1),s.a.createElement("td",null,t),s.a.createElement("td",{className:"text-center"},n!==a-1&&s.a.createElement(E.a,{onClick:e._onMoveDown.bind(e,t),name:"chevron-down",className:"clickable"})),s.a.createElement("td",{className:"text-center"},0!==n&&s.a.createElement(E.a,{onClick:e._onMoveUp.bind(e,t),name:"chevron-down",className:"clickable rotate180"})),s.a.createElement("td",{className:"text-center"},a>1&&s.a.createElement(E.a,{onClick:e._onRemove.bind(e,t),name:"cross-circle",className:"clickable"})))}))),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement(D.a,{label:"exchange.custom_quote",onChange:this._onInputBackingAsset.bind(this),asset:this.state.backingAsset,assetInput:this.state.backingAsset,tabIndex:1,style:{width:"100%",paddingRight:"10px"},onFound:this._onFoundBackingAsset.bind(this),onAction:this._onAdd.bind(this),action_label:"exchange.add_quote",disableActionButton:!!t,noLabel:!0}),s.a.createElement("div",{className:"error-area"},t))))}}]),t}(),Y=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw s}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),H=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var $=new Date,ee=function(e){function t(e){X(this,t);var a=K(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state=a._getInitialState(e),a}return Z(t,s.a.Component),H(t,[{key:"_getInitialState",value:function(e){var t=!!e.findMarketTab||e.viewSettings.get("myMarketsBase_"+e.index);return{open:void 0===t||t,inverseSort:e.viewSettings.get("myMarketsInvert",!0),sortBy:e.viewSettings.get("myMarketsSort","volume"),inputValue:""}}},{key:"componentWillReceiveProps",value:function(e){e.findMarketTab!==this.props.findMarketTab&&this.setState(this._getInitialState(e))}},{key:"shouldComponentUpdate",value:function(e,t){return!e.markets||!this.props.markets||(!u.a.are_equal_shallow(t,this.state)||!u.a.are_equal_shallow(e.markets,this.props.markets)||e.starredMarkets!==this.props.starredMarkets||e.marketStats!==this.props.marketStats||e.userMarkets!==this.props.userMarkets)}},{key:"_inverseSort",value:function(){S.a.changeViewSetting({myMarketsInvert:!this.state.myMarketsInvert}),this.setState({inverseSort:!this.state.inverseSort})}},{key:"_changeSort",value:function(e){var t=this.getCookie("gt_get_sort"),a=new Date;a.setFullYear(a.getFullYear()+1),"vol-true"!=t&&"name-true"!=t&&"name-false"!=t||"volume"!=e?"vol-false"!=t&&null!=t||"volume"!=e||(this.setCookie("gt_get_sort","vol-true",{expires:a.toGMTString()}),this._inverseSort()):this.setCookie("gt_get_sort","vol-false",{expires:a.toGMTString()}),"name-true"!=t&&"vol-true"!=t&&"vol-false"!=t||"name"!=e?"name-false"!=t&&null!=t||"name"!=e||(this.setCookie("gt_get_sort","name-true",{expires:a.toGMTString()}),this._inverseSort()):this.setCookie("gt_get_sort","name-false",{expires:a.toGMTString()}),e!==this.state.sortBy?(S.a.changeViewSetting({myMarketsSort:e}),this.setState({sortBy:e})):this._inverseSort()}},{key:"_onToggle",value:function(e){if(!this.props.findMarketTab){var t=!this.state.open;this.setState({open:t});var a={};a["myMarketsBase_"+this.props.index]=t,S.a.changeViewSetting(a)}}},{key:"_onToggleUserMarket",value:function(e){var t=e.split("_"),a=Y(t,2),n=a[0],r=a[1],s=!this.props.userMarkets.get(e);S.a.setUserMarket(n,r,s)}},{key:"setCookie",value:function(e,t,a){var n=(a=a||{}).expires;if("number"==typeof n&&n){var r=new Date;r.setTime(r.getTime()+1e3*n),n=a.expires=r}n&&n.toUTCString&&(a.expires=n.toUTCString());var s=e+"="+(t=encodeURIComponent(t));for(var o in a){s+="; "+o;var i=a[o];!0!==i&&(s+="="+i)}document.cookie=s}},{key:"getCookie",value:function(e){var t=document.cookie,a=e+"=",n=t.indexOf("; "+a),r=null;if(-1==n){if(0!=(n=t.indexOf(a)))return null;r=document.cookie.indexOf(";",n)}else n+=2,-1==(r=document.cookie.indexOf(";",n))&&(r=t.length);return decodeURI(t.substring(n+a.length,r)).replace(/"/g,"")}},{key:"render",value:function(){var e=this,t=this.props,a=t.columns,n=t.markets,r=t.base,o=t.marketStats,i=t.starredMarkets,l=t.current,c=this.state,u=c.sortBy,p=c.inverseSort,f=c.open;if(!n||!n.length)return null;var d=a.map(function(t){switch(t.name){case"market":var a="",n=e.getCookie("gt_get_sort");return"name"!=e.state.sortBy||"name-false"!=n&&null!=n?"name"==e.state.sortBy&&"name-true"==n&&(a=s.a.createElement("span",null,"▼")):a=s.a.createElement("span",null,"▲"),s.a.createElement("th",{key:t.name,className:"clickable",onClick:e._changeSort.bind(e,"name")},s.a.createElement(m.a,{content:"exchange.market"}),a);case"vol":var r="",o=e.getCookie("gt_get_sort");return"volume"!=e.state.sortBy||"vol-false"!=o&&null!=o?"volume"==e.state.sortBy&&"vol-true"==o&&(r=s.a.createElement("span",null,"▲")):r=s.a.createElement("span",null,"▼"),s.a.createElement("th",{key:t.name,className:"clickable",onClick:e._changeSort.bind(e,"volume"),style:{textAlign:"right"}},s.a.createElement(m.a,{content:"exchange.vol_short"}),r);case"price":return s.a.createElement("th",{key:t.name,style:{textAlign:"right"}},s.a.createElement(m.a,{content:"exchange.price"}));case"quoteSupply":return s.a.createElement("th",{key:t.name},s.a.createElement(m.a,{content:"exchange.base_supply"}));case"baseSupply":return s.a.createElement("th",{key:t.name},s.a.createElement(m.a,{content:"exchange.quote_supply"}));case"change":var i="";return"change"==e.state.sortBy&&e.state.inverseSort?i=s.a.createElement("span",null,"▲"):"change"==e.state.sortBy&&(i=s.a.createElement("span",null,"▼")),s.a.createElement("th",{key:t.name,className:"clickable",onClick:e._changeSort.bind(e,"change"),style:{textAlign:"right"}},s.a.createElement(m.a,{content:"exchange.change"}),i);case"issuer":return s.a.createElement("th",{key:t.name},s.a.createElement(m.a,{content:"explorer.assets.issuer"}));case"add":return s.a.createElement("th",{key:t.name,style:{textAlign:"right"}},s.a.createElement(m.a,{content:"account.perm.confirm_add"}));default:return s.a.createElement("th",{key:t.name})}}),h=n.map(function(t){return e.props.onlyLiquid&&o.get(t.id)&&0==o.get(t.id).volumeBase?null:s.a.createElement(q,{key:t.id,name:"others"===r?s.a.createElement("span",null,s.a.createElement(P.a,{name:t.quote}),":",s.a.createElement(P.a,{name:t.base})):s.a.createElement(P.a,{dataPlace:"left",name:t.quote}),quote:t.quote,base:t.base,columns:a,leftAlign:!0,compact:!0,noSymbols:!0,stats:o.get(t.id),starred:i.has(t.id),current:l===t.id,currentMarket:l,isChecked:e.props.userMarkets.has(t.id),isDefault:e.props.defaultMarkets&&e.props.defaultMarkets.has(t.id),onCheckMarket:e._onToggleUserMarket.bind(e),location:e.props.location,history:e.props.history})}).filter(function(e){return null!==e}).sort(function(t,a){var n=t.key.split("_"),r=a.key.split("_"),s=o.get(n[0]+"_"+n[1]),i=o.get(r[0]+"_"+r[1]),l=e.getCookie("gt_get_sort");switch(u){case"name":return"name-false"==l?p=!1:"name-true"==l&&(p=!0),n[0]>r[0]?p?-1:1:n[0]<r[0]?p?1:-1:n[1]>r[1]?p?-1:1:n[1]<r[1]?p?1:-1:0;case"volume":var c=s,m=i;if(s&&i){var f=s.volumeBase?s.volumeBase:0,d=i.volumeBase?i.volumeBase:0;return"vol-false"==l||null==l?d-f:f-d}return c=c?c.volumeBase:0,m=m?m.volumeBase:0,"vol-false"==l||null==l?m-c:c-m;case"change":return s&&i?p?i.change-s.change:s.change-i.change:0}});return s.a.createElement("div",{style:{paddingRight:10}},f?s.a.createElement("table",{className:"table table-hover text-right"},s.a.createElement("thead",null,s.a.createElement("tr",null,d)),h&&h.length?s.a.createElement("tbody",null,h):null):null)}}]),t}();ee.defaultProps={maxRows:20,onlyLiquid:!1};var te=function(e){function t(e){X(this,t);var a=K(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.clearInput=function(e){a.setState({myMarketFilter:""})},a.handleSearchUpdate=function(e){a.setState({myMarketFilter:e.target.value&&e.target.value.toUpperCase()})},a.state={inverseSort:e.viewSettings.get("myMarketsInvert",!0),sortBy:e.viewSettings.get("myMarketsSort","volume"),activeTab:e.viewSettings.get("favMarketTab","my-market"),activeMarketTab:e.viewSettings.get("activeMarketTab",0),lookupQuote:null,lookupBase:null,inputValue:"",minWidth:"100%",findBaseInput:"USD",activeFindBase:"USD"},a._onInputName=a._onInputName.bind(a),a._setMinWidth=a._setMinWidth.bind(a),a.getAssetList=Object(n.a)(I.a.getAssetList.defer,150),a}return Z(t,s.a.Component),H(t,[{key:"shouldComponentUpdate",value:function(e,t){return"find-market"===this.state.activeTab||"find-market"!==t.activeTab||e.searchAssets.size||this._lookupAssets("OPEN.",!0),!(i.a.is(e.searchAssets,this.props.searchAssets)&&i.a.is(e.markets,this.props.markets)&&i.a.is(e.starredMarkets,this.props.starredMarkets)&&i.a.is(e.defaultMarkets,this.props.defaultMarkets)&&i.a.is(e.marketStats,this.props.marketStats)&&u.a.are_equal_shallow(t,this.state)&&e.current===this.props.current&&e.minWidth===this.props.minWidth&&e.preferredBases===this.props.preferredBases&&e.onlyStars===this.props.onlyStars&&e.onlyLiquid===this.props.onlyLiquid&&e.assetsLoading===this.props.assetsLoading&&e.userMarkets===this.props.userMarkets)}},{key:"componentWillMount",value:function(){if(this.props.setMinWidth&&window.addEventListener("resize",this._setMinWidth,{capture:!1,passive:!0}),this.props.currrent){var e=this.props.current.split("_")[1],t=this.props.preferredBases.findIndex(function(t){return t===e});-1!==t&&t!==this.state.activeMarketTab&&this.setState({activeMarketTab:t})}}},{key:"componentDidMount",value:function(){var e=this.refs.favorites;c.a.initialize(e),this._setMinWidth(),"find-market"===this.state.activeTab&&this._lookupAssets("OPEN.",!0)}},{key:"componetWillUnmount",value:function(){this.props.setMinWidth&&window.removeEventListener("resize",this._setMinWidth)}},{key:"_setMinWidth",value:function(){this.props.setMinWidth&&this.refs.favorites&&"my-market"===this.props.activeTab&&this.state.minWidth!==this.refs.favorites.offsetWidth&&this.setState({minWidth:this.refs.favorites.offsetWidth})}},{key:"componentDidUpdate",value:function(){if(this.refs.favorites){var e=this.refs.favorites;c.a.update(e)}}},{key:"_inverseSort",value:function(){S.a.changeViewSetting({myMarketsInvert:!this.state.myMarketsInvert}),this.setState({inverseSort:!this.state.inverseSort})}},{key:"_changeSort",value:function(e){var t=this.getCookie("gt_get_sort"),a=new Date;a.setFullYear(a.getFullYear()+1),"vol-true"==t&&"volume"==e?this.setCookie("gt_get_sort","vol-false",{expires:a.toGMTString()}):"vol-false"!=t&&null!=t||"volume"!=e||(this.setCookie("gt_get_sort","vol-true",{expires:a.toGMTString()}),this._inverseSort()),e!==this.state.sortBy?(S.a.changeViewSetting({myMarketsSort:e}),this.setState({sortBy:e})):this._inverseSort()}},{key:"_goMarkets",value:function(){this.context.router.push("/markets")}},{key:"_changeTab",value:function(e){S.a.changeViewSetting({favMarketTab:e}),this.setState({activeTab:e}),this._setMinWidth()}},{key:"_onInputName",value:function(e){var t=e.target.value.trim().toUpperCase(),a=!F.d.is_valid_symbol_error(t,!0);if(this.setState({inputValue:t}),t&&t.length>=3&&!a)return this.setState({assetNameError:!0});this.setState({assetNameError:!1}),this._lookupAssets(t)}},{key:"_lookupAssets",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e||""===e){var a=new Date,n=e.toUpperCase().split(":"),r=n[0],s=2===n.length?n[1]:null;if(this.setState({lookupQuote:r,lookupBase:s}),S.a.changeViewSetting.defer({marketLookupInput:e.toUpperCase()}),this.state.lookupQuote!==r||t){if(r.length<1||a-$<=250)return!1;this.getAssetList(r,50)}else if(s&&this.state.lookupBase!==s){if(s.length<1||a-$<=250)return!1;this.getAssetList(s,50)}}}},{key:"toggleActiveMarketTab",value:function(e){S.a.changeViewSetting({activeMarketTab:e}),this.setState({activeMarketTab:e})}},{key:"_onInputBaseAsset",value:function(e){this.setState({findBaseInput:e.toUpperCase(),error:null})}},{key:"_onFoundBaseAsset",value:function(e){e&&this.setState({activeFindBase:e.get("symbol")})}},{key:"render",value:function(){var e=this,t=this.props,n=t.starredMarkets,r=t.defaultMarkets,o=t.marketStats,l=t.columns,c=t.searchAssets,u=t.assetsLoading,p=t.preferredBases,d=(t.core,t.current),h=t.viewSettings,_=t.onlyStars,y=t.userMarkets,g=this.state,b=g.activeMarketTab,v=g.activeTab,k=g.lookupQuote,E=g.lookupBase,x=s.a.createElement("tr",null),M="my-market"===v,A=p.map(function(e){return e});M||(p=(p=p.clear()).push(this.state.activeFindBase));var C={},O=[];k||(k="OPEN."),M||(b=0),c.filter(function(e){return E&&E.length?0===e.symbol.indexOf(E):-1!==e.symbol.indexOf(k)}).forEach(function(e){E&&E.length?0===e.symbol.indexOf(E)&&O.push(e.symbol):p.includes(e.symbol)&&e.symbol.length>=k.length&&e.symbol.length<k.length+3&&O.push(e.symbol)}),O=(O=O.concat(p.filter(function(e){return!E||!E.length||0===e.indexOf(E)}).toArray())).filter(function(e){return!(E&&E.length>1)||0===e.indexOf(E)});var T=[];c.size&&c.filter(function(e){try{if(e.options.description){var t=JSON.parse(e.options.description);if("visible"in t&&!t.visible)return!1}}catch(e){}return-1!==e.symbol.indexOf(k)&&e.symbol.length>=k.length}).forEach(function(e){O.forEach(function(t){var a=e.symbol+"_"+t;t!==e.symbol&&T.push([a,{quote:e.symbol,base:t}])})}),T=T.filter(function(e){return!E||e[1].quote===k}),T=i.a.Map(T);var q=M?r:T;M&&y.size&&y.forEach(function(e,t){q=q.set(t,e)}),q.size>0&&(x=q.filter(function(t){if(M){var a=t.quote+"_"+t.base;return e.state.myMarketFilter?-1!==a.indexOf(e.state.myMarketFilter):!(_&&!n.has(a))}return!(k.length<1)&&-1!==t.quote.indexOf(k)}).map(function(e){var t=e.quote+"_"+e.base;return p.includes(e.base)?(C[e.base]||(C[e.base]=[]),C[e.base].push({id:t,quote:e.quote,base:e.base}),null):{id:t,quote:e.quote,base:e.base}}).filter(function(e){return null!==e}).take(M?100:20).toArray());var j=x&&x.length,B="mymarkets-header clickable",P=L()(B,{inactive:!M}),I=L()(B,{inactive:M}),N={minWidth:this.state.minWidth,minHeight:"6rem"},R=a(2);return s.a.createElement("div",{className:this.props.className+" explorer_markets",style:this.props.style},s.a.createElement("div",{style:this.props.headerStyle,className:"grid-block shrink left-orderbook-header bottom-header"},s.a.createElement("div",{ref:"myMarkets",className:P,onClick:this._changeTab.bind(this,"my-market"),"data-intro":R.translate("walkthrough.my_markets_tab")},s.a.createElement(m.a,{content:"exchange.market_name"})),s.a.createElement("div",{className:I,onClick:this._changeTab.bind(this,"find-market"),"data-intro":R.translate("walkthrough.find_markets_tab")},s.a.createElement(m.a,{content:"exchange.more"}))),this.props.controls?s.a.createElement("div",{className:"small-12 medium-6",style:{padding:"1rem 0"}},this.props.controls?s.a.createElement("div",{style:{paddingBottom:"0.5rem"}},this.props.controls):null):null,M?s.a.createElement("div",{className:"grid-block vertical shrink",style:{width:"100%",textAlign:"left",padding:"0.5rem 0.5rem"}},s.a.createElement("div",null,s.a.createElement("label",{style:{margin:"0px 0 0"}},s.a.createElement("input",{style:{position:"relative",top:3},className:"no-margin",type:"checkbox",checked:this.props.onlyLiquid,onChange:function(){S.a.changeViewSetting({onlyLiquid:!e.props.onlyLiquid})}}),s.a.createElement("span",{style:{paddingLeft:"0.4rem"}},s.a.createElement(m.a,{content:"exchange.show_only_liquid"}))),s.a.createElement("label",{style:{margin:"0px 0 0"}},s.a.createElement("input",{style:{position:"relative",top:3},className:"no-margin",type:"checkbox",checked:this.props.onlyStars,onChange:function(){w.a.toggleStars()}}),s.a.createElement("span",{style:{paddingLeft:"0.4rem"}},s.a.createElement(f.a,{string:"exchange.show_only_star_formatter",keys:[{type:"icon",value:"fi-star",className:"gold-star",arg:"star_icon"}]})))),s.a.createElement("div",{className:"search-wrapper"},s.a.createElement("form",null,s.a.createElement("input",{autoComplete:"off",style:{fontSize:"0.9rem",height:"inherit",position:"relative",top:5,padding:2},type:"text",className:"no-margin market-filter-input",placeholder:U.a.translate("exchange.filter"),maxLength:"16",name:"focus",required:"required",value:this.state.myMarketFilter,onChange:this.handleSearchUpdate}),s.a.createElement("button",{className:"clear-text",type:"reset",onClick:this.clearInput})))):s.a.createElement("div",{style:{width:"100%",textAlign:"left",padding:"0.5rem 0.5rem"}},s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",{style:{width:"100%"}},s.a.createElement("td",null,s.a.createElement(D.a,{onAssetSelect:this._onFoundBaseAsset.bind(this),assets:A,onChange:this._onInputBaseAsset.bind(this),asset:this.state.findBaseInput,assetInput:this.state.findBaseInput,tabIndex:1,style:{width:"100%",paddingBottom:"1.5rem"},onFound:this._onFoundBaseAsset.bind(this),label:"exchange.quote",noLabel:!0,inputStyle:{fontSize:"0.9rem"}}))),s.a.createElement("tr",{style:{width:"100%"}},s.a.createElement("td",null,s.a.createElement("label",null,s.a.createElement(m.a,{content:"account.user_issued_assets.name"}),":"),s.a.createElement("input",{style:{fontSize:"0.9rem",position:"relative",top:1},type:"text",value:this.state.inputValue,onChange:this._onInputName,placeholder:U.a.translate("exchange.search"),maxLength:"16",tabIndex:2,ref:"findSearchInput"}),this.state.assetNameError?s.a.createElement("div",{className:"error-area",style:{paddingTop:10}},s.a.createElement("span",{style:{wordBreak:"break-all"}},s.a.createElement(m.a,{content:"explorer.asset.invalid",name:this.state.inputValue}))):null))))),s.a.createElement("ul",{className:"mymarkets-tabs"},p.map(function(t,a){return t?s.a.createElement("li",{key:t,onClick:e.toggleActiveMarketTab.bind(e,a),className:L()("mymarkets-tab",{active:b===a})},s.a.createElement("span",null,t)):null}),M&&j?s.a.createElement("li",{key:"others",style:{textTransform:"uppercase"},onClick:this.toggleActiveMarketTab.bind(this,p.size+1),className:L()("mymarkets-tab",{active:b===p.size+1})},s.a.createElement(m.a,{content:"exchange.others"})):null,M&&s.a.createElement("li",{key:"quote_edit",style:{textTransform:"uppercase"},onClick:function(){V.a.publish("quote_selection","open")},className:"mymarkets-tab"}," + ")),s.a.createElement("div",{style:N,className:"table-container grid-block vertical mymarkets-list explorer-markets",ref:"favorites"},u?s.a.createElement("div",{style:{position:"absolute",paddingTop:"3rem",textAlign:"center",width:"100%"}},s.a.createElement(W.a,{type:"three-bounce"})):null,p.filter(function(e){return e===p.get(b)}).map(function(t,a){return s.a.createElement(ee,{userMarkets:e.props.userMarkets,defaultMarkets:e.props.defaultMarkets,index:a,allowChange:!1,key:t,current:d,starredMarkets:n,marketStats:o,viewSettings:h,columns:M?l:e.props.findColumns||l,markets:C[t],base:t,maxRows:M?20:10,findMarketTab:!M,location:e.props.location,history:e.props.history,onlyLiquid:e.props.onlyLiquid&&M})}),b===p.size+1&&M&&j?s.a.createElement(ee,{userMarkets:this.props.userMarkets,index:p.size,current:d,starredMarkets:n,marketStats:o,viewSettings:h,columns:l,markets:x,base:"others",maxRows:M?20:10,findMarketTab:!M,location:this.props.location,history:this.props.history}):null),s.a.createElement(Q,{quotes:this.props.preferredBases}))}}]),t}();te.propTypes={core:y.a.ChainAsset.isRequired},te.defaultProps={activeTab:"my-market",core:"1.3.0",setMinWidth:!1},te.contextTypes={router:M.a.object.isRequired},te=Object(g.a)(te);var ae=function(e){function t(){return X(this,t),K(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Z(t,s.a.Component),H(t,[{key:"render",value:function(){return s.a.createElement(te,this.props)}}]),t}();t.a=Object(d.connect)(ae,{listenTo:function(){return[j.a,C.a,B.a]},getProps:function(){return{starredMarkets:j.a.getState().starredMarkets,onlyLiquid:j.a.getState().viewSettings.get("onlyLiquid",!1),defaultMarkets:j.a.getState().defaultMarkets,viewSettings:j.a.getState().viewSettings,preferredBases:j.a.getState().preferredBases,marketStats:C.a.getState().allMarketStats,userMarkets:j.a.getState().userMarkets,searchAssets:B.a.getState().assets,onlyStars:C.a.getState().onlyStars,assetsLoading:B.a.getState().assetsLoading}}})},5239:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(103),o=a(28),i=a(96),l=a(9),c=a(46),u=a.n(c),p=a(330),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),m(t,[{key:"render",value:function(){return r.a.createElement("div",{ref:"wrapper",className:"grid-block page-layout no-overflow"},r.a.createElement(p.a,{style:{width:"100%",padding:20},className:"no-overflow",headerStyle:{paddingTop:0,borderTop:"none"},columns:[{name:"add",index:1},{name:"star",index:2},{name:"market",index:3},{name:"quoteSupply",index:4},{name:"vol",index:5},{name:"price",index:6},{name:"change",index:7}]}))}}]),t}(),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),d(t,[{key:"render",value:function(){return r.a.createElement(u.a,{stores:[l.a,i.a,o.a],inject:{starredMarkets:function(){return l.a.getState().starredMarkets},viewSettings:function(){return l.a.getState().viewSettings},lookupResults:function(){return i.a.getState().lookupResults},marketBase:function(){return o.a.getState().marketBase}}},r.a.createElement(f,null))}}]),t}(),_=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),_(t,[{key:"render",value:function(){var e=r.a.createElement(h,null);return r.a.createElement("div",{className:"content"},r.a.createElement(s.a,{defaultActiveTab:"markets.title",defaultContent:e}))}}]),t}();t.default=y},72:function(e,t,a){"use strict";var n=a(24),r=a(19),s=a(5),o=a(76),i=a(100),l=a(15),c=a(4),u=a(81),p=a.n(u),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var f={},d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return m(e,[{key:"fundPool",value:function(e,t,a,n){var r=o.a.new_transaction(),i=s.a.get_asset_precision(t.get("precision"));return r.add_type_operation("asset_fund_fee_pool",{fee:{amount:0,asset_id:"1.3.0"},from_account:e,asset_id:a.get("id"),amount:n*i}),function(e){return l.a.process_transaction(r,null,!0).then(function(){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- fundPool error -----\x3e",t),e(!1)})}}},{key:"updateFeedProducers",value:function(e,t,a){var n=o.a.new_transaction();return n.add_type_operation("asset_update_feed_producers",{fee:{amount:0,asset_id:"1.3.0"},issuer:e,asset_to_update:t.get("id"),new_feed_producers:a}),function(e){return l.a.process_transaction(n,null,!0).then(function(){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- updateFeedProducers error -----\x3e",t),e(!1)})}}},{key:"claimPoolFees",value:function(e,t,a){var n=o.a.new_transaction(),r=s.a.get_asset_precision(t.get("precision"));return n.add_type_operation("asset_claim_fees",{fee:{amount:0,asset_id:0},issuer:e,amount_to_claim:{asset_id:t.get("id"),amount:a*r}}),function(e){return l.a.process_transaction(n,null,!0).then(function(t){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- claimFees error -----\x3e",t),e(!1)})}}},{key:"createAsset",value:function(e,t,a,n,r,i,u,m,f){console.log("create asset:",t,"flags:",a,"isBitAsset:",i,"bitasset_opts:",m);var d=o.a.new_transaction(),h=s.a.get_asset_precision(t.precision);p.a.config({DECIMAL_PLACES:t.precision});var _=new p.a(t.max_supply).times(h).toString(),y=new p.a(t.max_market_fee||0).times(h).toString(),g=s.a.get_asset_precision(c.b.getAsset(r.base.asset_id).get("precision")),b={fee:{amount:0,asset_id:0},issuer:e,symbol:t.symbol,precision:parseInt(t.precision,10),common_options:{max_supply:_,market_fee_percent:100*t.market_fee_percent||0,max_market_fee:y,issuer_permissions:n,flags:a,core_exchange_rate:{base:{amount:r.base.amount*g,asset_id:r.base.asset_id},quote:{amount:r.quote.amount*h,asset_id:"1.3.1"}},whitelist_authorities:[],blacklist_authorities:[],whitelist_markets:[],blacklist_markets:[],description:f,extensions:null},is_prediction_market:u,extensions:null};return i&&(b.bitasset_opts=m),d.add_type_operation("asset_create",b),function(e){return l.a.process_transaction(d,null,!0).then(function(t){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- createAsset error -----\x3e",t),e(!1)})}}},{key:"updateAsset",value:function(e,t,a,n,r,i,u,m,f,d,h,_,y,g,b){var v=o.a.new_transaction();if(b){var k=s.a.get_asset_precision(r.get("precision"));p.a.config({DECIMAL_PLACES:r.get("precision")});var E=new p.a(a.max_supply).times(k).toString(),w=new p.a(a.max_market_fee||0).times(k).toString(),S=c.b.getAsset(n.quote.asset_id),x=s.a.get_asset_precision(S.get("precision")),M=c.b.getAsset(n.base.asset_id),A=s.a.get_asset_precision(M.get("precision")),C=new p.a(n.quote.amount).times(x).toString(),O=new p.a(n.base.amount).times(A).toString();console.log("auths:",_);var T={fee:{amount:0,asset_id:0},asset_to_update:r.get("id"),extensions:r.get("extensions"),issuer:e,new_issuer:t,new_options:{max_supply:E,max_market_fee:w,market_fee_percent:100*a.market_fee_percent,description:h,issuer_permissions:u,flags:i,whitelist_authorities:_.whitelist_authorities.toJS(),blacklist_authorities:_.blacklist_authorities.toJS(),whitelist_markets:_.whitelist_markets.toJS(),blacklist_markets:_.blacklist_markets.toJS(),extensions:r.getIn(["options","extensions"]),core_exchange_rate:{quote:{amount:C,asset_id:n.quote.asset_id},base:{amount:O,asset_id:n.base.asset_id}}}};e!==t&&t||delete T.new_issuer,v.add_type_operation("asset_update",T)}if(console.log("bitasset_opts:",f,"original_bitasset_opts:",d),m&&(f.feed_lifetime_sec!==d.feed_lifetime_sec||f.minimum_feeds!==d.minimum_feeds||f.force_settlement_delay_sec!==d.force_settlement_delay_sec||f.force_settlement_offset_percent!==d.force_settlement_offset_percent||f.maximum_force_settlement_volume!==d.maximum_force_settlement_volume||f.short_backing_asset!==d.short_backing_asset)){var q={fee:{amount:0,asset_id:0},asset_to_update:r.get("id"),issuer:e,new_options:f};v.add_type_operation("asset_update_bitasset",q)}return console.log("feedProducers:",y,"originalFeedProducers:",g),m&&!s.a.are_equal_shallow(y,g)&&v.add_type_operation("asset_update_feed_producers",{fee:{amount:0,asset_id:"1.3.0"},issuer:e,asset_to_update:r.get("id"),new_feed_producers:y}),l.a.process_transaction(v,null,!0).then(function(e){return!0}).catch(function(e){return console.log("[AssetActions.js:150] ----- updateAsset error -----\x3e",e),!1})}},{key:"issueAsset",value:function(e,t,a,n,r){i.a.issue_asset(e,t,a,n,r)}},{key:"getAssetList",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=e+"_"+t;return function(o){if(!f[s]){var i;if(f[s]=!0,o({loading:!0}),i=r.Apis.instance().db_api().exec("list_assets",[e,t]).then(function(e){var t=[],a=[];e.forEach(function(e){c.b._updateObject(e,!1),a.push(e.dynamic_asset_data_id),e.bitasset_data_id&&t.push(e.bitasset_data_id)});var n=r.Apis.instance().db_api().exec("get_objects",[a]),i=t.length>0?r.Apis.instance().db_api().exec("get_objects",[t]):null;Promise.all([n,i]).then(function(t){return delete f[s],o({assets:e,dynamic:t[0],bitasset_data:t[1],loading:!1}),e&&e.length})}).catch(function(e){console.log("Error in AssetActions.getAssetList: ",e),o({loading:!1}),delete f[s]}),n){["BRIDGE","GDEX","RUDEX","OPEN","WIN"].forEach(function(t){a.getAssetList(t+"."+e,10)})}return i}}}},{key:"lookupAsset",value:function(e,t){var a=c.b.getAsset(e);return a?{assets:[a],searchID:t,symbol:e}:function(a){setTimeout(function(){var n=c.b.getAsset(e);n&&a({assets:[n],searchID:t,symbol:e})},200)}}},{key:"reserveAsset",value:function(e,t,a){var n=o.a.new_transaction();return n.add_type_operation("asset_reserve",{fee:{amount:0,asset_id:0},amount_to_reserve:{amount:e,asset_id:t},payer:a,extensions:[]}),l.a.process_transaction(n,null,!0).then(function(e){return!0}).catch(function(e){return console.log("[AssetActions.js:150] ----- reserveAsset error -----\x3e",e),!1})}}]),e}();t.a=n.a.createActions(d)},96:function(e,t,a){"use strict";var n=a(78),r=a(6),s=a.n(r),o=a(24),i=a(72),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.assets=s.a.Map(),e.asset_symbol_to_id={},e.searchTerms={},e.lookupResults=[],e.assetsLoading=!1,e.bindListeners({onGetAssetList:i.a.getAssetList,onLookupAsset:i.a.lookupAsset}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["a"]),l(t,[{key:"onGetAssetList",value:function(e){var t=this;if(!e)return!1;this.assetsLoading=e.loading,e.assets&&e.assets.forEach(function(a){for(var n=0;n<e.dynamic.length;n++)if(e.dynamic[n].id===a.dynamic_asset_data_id){a.dynamic=e.dynamic[n];break}if(a.bitasset_data_id){a.market_asset=!0;for(n=0;n<e.bitasset_data.length;n++)if(e.bitasset_data[n].id===a.bitasset_data_id){a.bitasset_data=e.bitasset_data[n];break}}else a.market_asset=!1;t.assets=t.assets.set(a.id,a),t.asset_symbol_to_id[a.symbol]=a.id})}},{key:"onLookupAsset",value:function(e){this.searchTerms[e.searchID]=e.symbol,this.lookupResults=e.assets}}]),t}();t.a=o.a.createStore(c,"AssetStore")}}]);