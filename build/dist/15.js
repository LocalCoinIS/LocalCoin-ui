(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{141:function(e,t,a){"use strict";a.d(t,"b",function(){return x}),a.d(t,"a",function(){return N});var n=a(0),r=a.n(n),s=a(17),o=a(6),i=a(13),l=a(50),c=a(5),u=a(15),p=a(31),d=a(1),h=a.n(d),m=a(3),f=a.n(m),b=a(42),g=a.n(b),v=a(275),_=a(44),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},E=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function w(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=function(e){function t(e){return k(this,t),A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return C(t,v["a"]),E(t,[{key:"componentDidMount",value:function(){g.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,a,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||!c.a.are_equal_shallow(e.pulsate,this.props.pulsate)||e.toAsset!==this.props.toAsset||e.fromAsset!==this.props.fromAsset||e.amount!==this.props.amount}},{key:"getValue",value:function(){var e=this.props,t=e.amount,a=e.toAsset,n=e.fromAsset,r=e.fullPrecision,s=e.marketStats,o=e.coreAsset;return _.a.convertValue(t,a,n,s,o,r)}},{key:"render",value:function(){var e=this.props,t=e.amount,a=e.toAsset,n=e.fromAsset,o=e.fullPrecision,i=w(e,["amount","toAsset","fromAsset","fullPrecision"]),l=a.get("id"),u=a.get("symbol");o||(t=c.a.get_asset_amount(t,n));var p=this.getValue();return p||0===p?r.a.createElement(s.a,y({noPrefix:!0,amount:p,asset:l,decimalOffset:-1!==u.indexOf("BTC")?4:this.props.fullDecimals?0:this.props.noDecimals?a.get("precision"):a.get("precision")-2},i)):r.a.createElement("div",{className:"tooltip inline-block","data-place":"bottom","data-tip":f.a.translate("tooltip.no_price"),style:{fontSize:"0.9rem"}},r.a.createElement(h.a,{content:"account.no_price"}))}}]),t}();O.defaultProps={fullPrecision:!0,noDecimals:!1,fullDecimals:!1,hide_asset:!1},O=Object(l.a)(O,{propNames:["toAsset","fromAsset","coreAsset"],defaultProps:{toAsset:"1.3.0",coreAsset:"1.3.0"}});var x=function(e){function t(){return k(this,t),A(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,r.a.Component),E(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,a=w(e,["refCallback"]);return r.a.createElement(O,y({},a,{ref:t}))}}]),t}();x=Object(u.connect)(x,{listenTo:function(){return[p.a]},getProps:function(){return{marketStats:p.a.getState().allMarketStats}}});var N=function(e){function t(){return k(this,t),A(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,r.a.Component),E(t,[{key:"render",value:function(){var e=this.props,t=e.balance,a=w(e,["balance"]),n=!!t.getIn(["balance","amount"]),s=Number(n?t.getIn(["balance","amount"]):t.get("balance")),o=n?t.getIn(["balance","asset_id"]):t.get("asset_type");return isNaN(s)?r.a.createElement("span",null,"--"):r.a.createElement(x,y({amount:s,fromAsset:o,noDecimals:!0},a))}}]),t}();N.propTypes={balance:o.a.ChainObject.isRequired},N=Object(i.a)(N,{keep_updating:!0})},153:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(5),o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.price,a=e.preFormattedPrice,n=e.quote,o=e.base,i=(e.component,a||s.a.price_to_text(t,n,o));return i.full>=1?r.a.createElement("span",null,r.a.createElement("span",{className:"price-integer"},i.int,"."),i.dec?r.a.createElement("span",{className:"price-integer"},i.dec):null,i.trailing?r.a.createElement("span",{className:"price-decimal"},i.trailing):null):i.full>=.1?r.a.createElement("span",null,r.a.createElement("span",{className:"price-decimal"},i.int,"."),i.dec?r.a.createElement("span",{className:"price-integer"},i.dec):null,i.trailing?r.a.createElement("span",{className:"price-decimal"},i.trailing):null):r.a.createElement("span",null,r.a.createElement("span",{className:"price-decimal"},i.int,"."),i.dec?r.a.createElement("span",{className:"price-decimal"},i.dec):null,i.trailing?r.a.createElement("span",{className:"price-integer"},i.trailing):null)}}]),t}();t.a=i},221:function(e,t,a){"use strict";var n=a(531),r=a(0),s=a.n(r),o=a(2),i=a.n(o),l=a(20),c=a.n(l),u=a(34),p=a(62),d=a.n(p),h=a(1),m=a.n(h),f=a(6),b=a(13),g=a(17),v=a(5),_=a(9),y=a.n(_),E=a(43),w=a(57),k=a(86),A=a(16),C=a(63),O=a(3),x=a.n(O),N=a(69),S=a(7),P=a.n(S),j=a(4),T=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R=function(e){function t(e){I(this,t);var a=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state=a._initialState(e),a}return D(t,s.a.Component),T(t,[{key:"_initialState",value:function(e){var t=e?this._getCurrentPosition(e):{};if(t.collateral){var a=v.a.get_asset_amount(t.debt,e.quote_asset),n=v.a.get_asset_amount(t.collateral,e.backing_asset);return{short_amount:a?a.toString():null,collateral:n?n.toString():null,collateral_ratio:this._getCollateralRatio(a,n),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:a,collateral:n}}}return{short_amount:0,collateral:0,collateral_ratio:this._getInitialCollateralRatio(e),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:0,collateral:0}}}},{key:"componentDidMount",value:function(){var e=this._initialState(this.props);this.setState(e),this._setUpdatedPosition(e)}},{key:"shouldComponentUpdate",value:function(e,t){return!(v.a.are_equal_shallow(t,this.state)&&P.a.is(e.quote_asset,this.props.quote_asset)&&!e.backing_asset.get("symbol")!==this.props.backing_asset.get("symbol")&&P.a.is(e.account,this.props.account)&&P.a.is(e.call_orders,this.props.call_orders))}},{key:"componentWillReceiveProps",value:function(e){var t=this.state,a=t.short_amount,n=t.collateral,r=t.collateral_ratio;if(e.account!==this.props.account||e.hasCallOrders!==this.props.hasCallOrders||e.quote_asset.get("id")!==this.props.quote_asset.get("id")){var s=this._initialState(e),o=!1;(a||n||r)&&(s.short_amount=a,s.collateral=n,s.collateral_ratio=r,o=!0),this.setState(s),o&&this._validateFields(s)}}},{key:"_getInitialErrors",value:function(){return{collateral_balance:null,ratio_too_high:null}}},{key:"confirmClicked",value:function(e){e.preventDefault(),c.a.publish(this.props.modalId,"close")}},{key:"_onBorrowChange",value:function(e){var t=this._getFeedPrice(),a=e.amount.replace(/,/g,""),n={short_amount:a,collateral:(this.state.collateral_ratio*(a/t)).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:this.state.collateral_ratio};this.setState(n),this._validateFields(n),this._setUpdatedPosition(n)}},{key:"_onCollateralChange",value:function(e){var t=e.amount.replace(/,/g,""),a=this._getFeedPrice(),r=t/(this.state.short_amount/a),s=this._isPredictionMarket(this.props)?{short_amount:t,collateral:t,collateral_ratio:1}:{short_amount:this.state.short_amount,collateral:t,collateral_ratio:Object(n.a)(r)?r:this._getInitialCollateralRatio(this.props)};this.setState(s),this._validateFields(s),this._setUpdatedPosition(s)}},{key:"_onRatioChange",value:function(e){var t=this._getFeedPrice(),a=e.target;new RegExp(/[[:digit:]]/).test(a.value)||(a.value=a.value.replace(/[^0-9.]/g,"")),"."==a.value.charAt(0)&&(a.value="0.");var n=a.value,r={short_amount:this.state.short_amount,collateral:(this.state.short_amount/t*n).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:n};this.setState(r),this._validateFields(r),this._setUpdatedPosition(r)}},{key:"_maximizeCollateral",value:function(){var e=this.props?this._getCurrentPosition(this.props):{},t=0;e.collateral&&(t=v.a.get_asset_amount(e.collateral,this.props.backing_asset));var a=Math.floor(Math.min(this.props.backing_balance.get("balance")/v.a.get_asset_precision(this.props.backing_asset)+t-10,this.state.short_amount/this._getFeedPrice()*1e3));this._onCollateralChange(new Object({amount:a.toString()}))}},{key:"_maximizeDebt",value:function(){var e=this.props?this._getCurrentPosition(this.props):{},t=0;e.collateral&&(t=v.a.get_asset_amount(e.collateral,this.props.backing_asset));var a=this.props.backing_balance.get("balance")/v.a.get_asset_precision(this.props.backing_asset)+t-10,n={short_amount:a/this.state.collateral_ratio*this._getFeedPrice(),collateral:a,collateral_ratio:this.state.collateral_ratio};this.setState(n),this._validateFields(n),this._setUpdatedPosition(n)}},{key:"_payDebt",value:function(){var e=this.props?this._getCurrentPosition(this.props):{debt:0};if(!(e.debt<=0)){var t=v.a.get_asset_amount(Math.max(e.debt-this.props.bitasset_balance.get("balance"),0),this.props.quote_asset);this._onBorrowChange({amount:t.toString()})}}},{key:"_setUpdatedPosition",value:function(e){this.setState({newPosition:parseFloat(e.short_amount)/parseFloat(e.collateral)})}},{key:"_validateFields",value:function(e){var t=this._getInitialErrors(),a=this.state.original_position,n=this.props.backing_balance?this.props.backing_balance.toJS():{balance:0};parseFloat(e.collateral)-a.collateral>v.a.get_asset_amount(n.balance,this.props.backing_asset.toJS())&&(t.collateral_balance=x.a.translate("borrow.errors.collateral"));var r=e.short_amount>=0&&e.collateral>=0&&(e.short_amount!=a.debt||e.collateral!=a.collateral),s=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3;parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:s)?(t.below_maintenance=x.a.translate("borrow.errors.below",{mr:s}),r=!1):parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:s+.5)&&(t.close_maintenance=x.a.translate("borrow.errors.close",{mr:s}),r=!0),this.setState({errors:t,isValid:r})}},{key:"_onSubmit",value:function(e){e.preventDefault();var t=v.a.get_asset_precision(this.props.quote_asset.get("precision")),a=v.a.get_asset_precision(this.props.backing_asset.get("precision")),n=this._getCurrentPosition(this.props),r=k.a.new_transaction();r.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.account.get("id"),delta_collateral:{amount:parseInt(this.state.collateral*a-n.collateral,10),asset_id:this.props.backing_asset.get("id")},delta_debt:{amount:parseInt(this.state.short_amount*t-n.debt,10),asset_id:this.props.quote_asset.get("id")}}),A.a.process_transaction(r,null,!0).catch(function(e){}),c.a.publish(this.props.modalId,"close")}},{key:"_getCurrentPosition",value:function(e){var t={collateral:null,debt:null};return e&&e.hasCallOrders&&e.call_orders&&(t=(t=e.call_orders.filter(function(e){return!!e}).find(function(t){return t.getIn(["call_price","quote","asset_id"])===e.quote_asset.get("id")}))?t.toJS():{collateral:null,debt:null}),t}},{key:"_getFeedPrice",value:function(){return this.props?this._isPredictionMarket(this.props)?1:1/v.a.get_asset_price(this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.backing_asset,this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.quote_asset):1}},{key:"_getInitialCollateralRatio",value:function(e){return this._isPredictionMarket(e)?1:0}},{key:"_getCollateralRatio",value:function(e,t){return t/(e/this._getFeedPrice())}},{key:"_isPredictionMarket",value:function(e){return e.quote_asset.getIn(["bitasset","is_prediction_market"])}},{key:"render",value:function(){var e=this,t=this.props,a=t.quote_asset,n=t.bitasset_balance,r=t.backing_asset,o=t.backing_balance,i=this.state,l=i.short_amount,c=i.collateral,u=i.collateral_ratio,p=i.errors,h=i.isValid,f=v.a.get_asset_precision(this.props.quote_asset.get("precision")),b=v.a.get_asset_precision(this.props.backing_asset.get("precision"));u&&!isNaN(u)&&u>0&&u<1e3||(u=0),n=n?n.toJS():{balance:0,id:null},o=o?o.toJS():{balance:0,id:null};var _=y()("form-group",{"has-error":p.collateral_balance}),k=y()("form-group",{"has-error":p.below_maintenance},{"has-warning":p.close_maintenance}),A=y()("button btn large",{disabled:p.collateral_balance||!h},{outline:p.collateral_balance||!h},{inverted:h}),O=this._getCurrentPosition(this.props),S=o.id?j.b.getObject(o.id):null,P=(S?S.get("balance"):0)-parseInt(this.state.collateral*b-O.collateral,10),T=s.a.createElement("span",null,s.a.createElement("span",null,s.a.createElement(m.a,{component:"span",content:"transfer.available"}),":"," ",n.id?s.a.createElement(w.a,{balance:n.id}):s.a.createElement(g.a,{amount:0,asset:a.get("id")})),s.a.createElement("a",{onClick:this._payDebt.bind(this)},s.a.createElement(m.a,{content:"borrow.pay_max_debt"})),"|",0!=u?s.a.createElement("a",{onClick:this._maximizeDebt.bind(this)},s.a.createElement(m.a,{content:"borrow.use_max"})):s.a.createElement("span",{className:"disabled-link","data-place":"left","data-tip":x.a.translate("borrow.maximize_debt_set_ratio_slider")},s.a.createElement(m.a,{content:"borrow.use_max"}))),I=s.a.createElement("span",null,s.a.createElement("span",null,s.a.createElement(m.a,{component:"span",content:"transfer.available"}),":"," ",o.id?s.a.createElement(g.a,{amount:P,asset:r.get("id")}):s.a.createElement(g.a,{amount:0,asset:r.get("id")})),s.a.createElement("a",{onClick:this._maximizeCollateral.bind(this)},s.a.createElement(m.a,{content:"borrow.use_max"}))),q=this._getFeedPrice(),D=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3,R=(this.props.quote_asset.getIn(["bitasset","current_feed","maximum_short_squeeze_ratio"]),this._isPredictionMarket(this.props));return!R&&isNaN(q)?s.a.createElement("div",null,s.a.createElement("form",{className:"grid-container text-center no-overflow",noValidate:!0},s.a.createElement(m.a,{component:"h3",content:"borrow.no_valid",asset_symbol:a.get("symbol")})),s.a.createElement("div",{className:"grid-content button-group text-center no-overflow"},s.a.createElement(d.a,{close:this.props.modalId},s.a.createElement("div",{className:" button btn large outline"},s.a.createElement(m.a,{content:"account.perm.cancel"}))))):s.a.createElement("div",null,s.a.createElement("form",{className:"grid-container small-10 small-offset-1 no-overflow",noValidate:!0},s.a.createElement(m.a,{component:"h3",content:"borrow.title",asset_symbol:a.get("symbol")}),s.a.createElement("div",{style:{textAlign:"left"}},this.props.hide_help?null:s.a.createElement(N.a,{path:"components/"+(R?"BorrowModalPrediction":"BorrowModal"),debt:a.get("symbol"),collateral:r.get("symbol"),borrower:this.props.account.get("name"),mr:D}),R?null:s.a.createElement("div",{style:{paddingBottom:"1rem"}},s.a.createElement("div",{className:"borrow-price-feeds"},s.a.createElement("span",{className:"borrow-price-label"},s.a.createElement(m.a,{content:"transaction.feed_price"}),": "),s.a.createElement(C.a,{noPopOver:!0,quote_amount:a.getIn(["bitasset","current_feed","settlement_price","base","amount"]),quote_asset:a.getIn(["bitasset","current_feed","settlement_price","base","asset_id"]),base_asset:a.getIn(["bitasset","current_feed","settlement_price","quote","asset_id"]),base_amount:a.getIn(["bitasset","current_feed","settlement_price","quote","amount"])})),s.a.createElement("b",null),s.a.createElement("div",{className:"borrow-price-final "+(p.below_maintenance?"has-error":p.close_maintenance?"has-warning":"")},s.a.createElement("span",{className:"borrow-price-label"},s.a.createElement(m.a,{content:"exchange.your_price"}),": "),this.state.newPosition?s.a.createElement(C.a,{noPopOver:!0,quote_amount:D*this.state.short_amount*f,quote_asset:a.get("id"),base_asset:r.get("id"),base_amount:this.state.collateral*b}):null)),s.a.createElement("div",{className:"form-group"},s.a.createElement(E.a,{label:"transaction.borrow_amount",amount:l.toString(),onChange:this._onBorrowChange.bind(this),asset:a.get("id"),assets:[a.get("id")],display_balance:T,placeholder:"0.0",tabIndex:1})),s.a.createElement("div",{className:_},s.a.createElement(E.a,{label:"transaction.collateral",amount:c.toString(),onChange:this._onCollateralChange.bind(this),asset:r.get("id"),assets:[r.get("id")],display_balance:I,placeholder:"0.0",tabIndex:1}),p.collateral_balance?s.a.createElement("div",{className:"float-left",style:{paddingTop:5}},p.collateral_balance):null),R?null:s.a.createElement("div",null,s.a.createElement("div",{className:k,style:{marginBottom:"1.5rem"}},s.a.createElement(m.a,{component:"label",content:"borrow.coll_ratio"}),s.a.createElement("span",null,s.a.createElement("input",{value:0==u?null:u,onChange:this._onRatioChange.bind(this),type:"text",style:{width:"12%",float:"right",marginTop:-10}}),s.a.createElement("input",{style:{width:"85%"},min:"0",max:"6",step:"0.01",onChange:this._onRatioChange.bind(this),value:u,type:"range"})),p.below_maintenance||p.close_maintenance?s.a.createElement("div",{style:{height:"1em",maxWidth:"85%"},className:"float-left"},p.below_maintenance,p.close_maintenance):null)),s.a.createElement("div",{className:"no-padding grid-content button-group no-overflow"},s.a.createElement("div",{onClick:this._onSubmit.bind(this),className:A},s.a.createElement(m.a,{content:"borrow.adjust"})),s.a.createElement("div",{onClick:function(t){t.preventDefault(),e.setState(e._initialState(e.props))},className:"outline btn large"},s.a.createElement(m.a,{content:"wallet.reset"}))))))}}]),t}();R.propTypes={quote_asset:f.a.ChainAsset.isRequired,bitasset_balance:f.a.ChainObject,backing_asset:f.a.ChainAsset.isRequired,backing_balance:f.a.ChainObject,call_orders:f.a.ChainObjectsList,hasCallOrders:i.a.bool},R=Object(b.a)(R);var M=function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={smallScreen:!1,open:!1},e}return D(t,s.a.Component),T(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){c.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"componentWillMount",value:function(){this.setState({smallScreen:window.innerHeight<=800})}},{key:"render",value:function(){var e=this.props,t=e.quote_asset,a=e.backing_asset,n=e.account,r=n.get("balances").toJS(),o=void 0,i=void 0;if(r)for(var l in r)l===a&&(o=r[l]),l===t&&(i=r[l]);return this.state.open?s.a.createElement(u.a,{id:this.props.modalId,overlay:!0,onClose:this.onClose.bind(this),ref:this.props.modalId,overlayClose:!0},s.a.createElement("div",{className:"grid-block vertical"},s.a.createElement(R,{quote_asset:t,call_orders:n.get("call_orders",Object(S.List)()).toList(),hasCallOrders:n.get("call_orders")&&n.get("call_orders").size>0,modalId:this.props.modalId,bitasset_balance:i,backing_balance:o,backing_asset:a,hide_help:this.state.smallScreen,account:n}))):null}}]),t}();t.a=M},328:function(e,t,a){"use strict";a.d(t,"a",function(){return y}),a.d(t,"b",function(){return v});var n=a(0),r=a.n(n),s=a(50),o=a(9),i=a.n(o),l=a(35),c=a(31),u=a(15),p=a(5),d=a(63),h=a(44),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(e){f(this,t);var a=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.statsInterval=null;var n=h.a.getMarketName(e.base,e.quote).marketName;return a.state={marketName:n},a}return g(t,r.a.Component),m(t,[{key:"_checkStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{close:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{close:{}};return e.volumeBase!==t.volumeBase||!p.a.are_equal_shallow(e.close&&e.close.base,t.close&&t.close.base)||!p.a.are_equal_shallow(e.close&&e.close.quote,t.close&&t.close.quote)}},{key:"shouldComponentUpdate",value:function(e){return this._checkStats(e.allMarketStats.get(this.state.marketName),this.props.allMarketStats.get(this.state.marketName))||e.base.get("id")!==this.props.base.get("id")||e.quote.get("id")!==this.props.quote.get("id")}},{key:"componentWillMount",value:function(){l.a.getMarketStats(this.props.base,this.props.quote),this.statsChecked=new Date,this.statsInterval=setInterval(l.a.getMarketStats.bind(this,this.props.base,this.props.quote),35e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.statsInterval)}}]),t}(),_=function(e){function t(e){return f(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return g(t,v),m(t,[{key:"shouldComponentUpdate",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,a,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)}},{key:"render",value:function(){var e=this.props.allMarketStats,t=this.state.marketName,a=e.get(t),n=a&&a.price?a.price:null;return r.a.createElement("span",{className:i()("",this.props.className)},n?r.a.createElement(d.a,{base_amount:n.base.amount,base_asset:n.base.asset_id,quote_amount:n.quote.amount,quote_asset:n.quote.asset_id,force_direction:this.props.force_direction,hide_symbols:this.props.hide_symbols}):"n/a")}}]),t}();_=Object(s.a)(_,{propNames:["quote","base"]});var y=function(e){function t(){return f(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,r.a.Component),m(t,[{key:"render",value:function(){return r.a.createElement(_,this.props)}}]),t}();y=Object(u.connect)(y,{listenTo:function(){return[c.a]},getProps:function(){return{allMarketStats:c.a.getState().allMarketStats}}})},329:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(2),o=a.n(s),i=a(11),l=a(3),c=a.n(l),u=a(54),p=a.n(u),d=a(5),h=a(1),m=a.n(h),f=a(22),b=a(276),g=a.n(b),v=a(111),_=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(function(e){function t(){return y(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,r.a.Component),_(t,[{key:"render",value:function(){var e=this.props,t=e.baseSymbol,a=e.quoteSymbol;return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{textAlign:"right"}},r.a.createElement(m.a,{content:"exchange.price"}),r.a.createElement("br",null),t?r.a.createElement("span",{className:"header-sub-title"},"(",r.a.createElement(f.a,{name:t}),"/",r.a.createElement(f.a,{name:a}),")"):null),r.a.createElement("th",{style:{textAlign:"right"}},r.a.createElement(m.a,{content:"transfer.amount"}),r.a.createElement("br",null),a?r.a.createElement("span",{className:"header-sub-title"},"(",r.a.createElement(f.a,{name:a}),")"):null),r.a.createElement("th",{style:{textAlign:"right"}},r.a.createElement(m.a,{content:"transaction.settlement_date"}),r.a.createElement("br",null),r.a.createElement("span",{style:{visibility:"hidden"},className:"header-sub-title"},"d"))))}}]),t}()).defaultProps={quoteSymbol:null,baseSymbol:null};var k=function(e){function t(){return y(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,r.a.Component),_(t,[{key:"render",value:function(){var e=this.props,t=e.base,a=e.quote,n=e.order,s=e.showSymbols,o="1.3.0"==t.get("id")?n.getPrice()/(1+n.offset_percent/1e4):n.getPrice()*(1+n.offset_percent/1e4),i=s?" "+a.get("symbol"):null;return r.a.createElement("tr",{style:{paddingRight:5}},r.a.createElement("td",{style:{textAlign:"right",width:"25%"}},d.a.format_number(o,a.get("precision"))," ",i),r.a.createElement("td",{style:{textAlign:"right",width:"25%"}},d.a.format_number(n[n.isBid()?"amountToReceive":"amountForSale"]().getAmount({real:!0}),a.get("precision"))),r.a.createElement("td",{style:{textAlign:"right",width:"25%"}},d.a.format_number(n[n.isBid()?"amountForSale":"amountToReceive"]().getAmount({real:!0}),t.get("precision"))),r.a.createElement("td",{style:{textAlign:"right",width:"25%"},className:"tooltip","data-tip":new Date(n.settlement_date)},c.a.localize(new Date(n.settlement_date),{type:"date",format:-1!==g()().toLowerCase().indexOf("en-us")?"market_history_us":"market_history"})))}}]),t}();k.defaultProps={showSymbols:!1,invert:!1};var A=function(e){function t(){return y(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,r.a.Component),_(t,[{key:"shouldComponentUpdate",value:function(e){return e.currentAccount!==this.props.currentAccount||e.orders!==this.props.orders}},{key:"render",value:function(){var e=this.props,t=e.orders,a=e.base,n=e.quote,s=null;if(!(t.size>0&&a&&n))return null;var o=0;return s=t.sort(function(e,t){return e.isBefore(t)?-1:1}).map(function(e){return Date.now()<e.settlement_date?r.a.createElement(k,{key:o++,order:e,base:a,quote:n}):null}).toArray(),r.a.createElement(v.a,{component:"tbody",transitionName:"newrow"},s)}}]),t}();A.defaultProps={base:{},quote:{},orders:{},quoteSymbol:"",baseSymbol:""},A.propTypes={base:o.a.object.isRequired,quote:o.a.object.isRequired,orders:o.a.object.isRequired,quoteSymbol:o.a.string.isRequired,baseSymbol:o.a.string.isRequired};var C=A,O=a(153),x=a(10),N=a(9),S=a.n(N),P=a(12),j=a(4),T=a(18),I=a(141),q=a(328),D=a(63),R=a(42),M=a.n(R);a.d(t,"b",function(){return z}),a.d(t,"c",function(){return H}),a.d(t,"a",function(){return J});var L=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var W={textAlign:"left"},H=function(e){function t(){return B(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return U(t,r.a.Component),L(t,[{key:"render",value:function(){var e=this.props,t=e.baseSymbol,a=e.quoteSymbol,n=e.dashboard,s=e.isMyAccount;return n?r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:W,colSpan:"5"},r.a.createElement(m.a,{content:"exchange.description"})),r.a.createElement("th",{style:W},r.a.createElement(m.a,{content:"exchange.price"})),r.a.createElement("th",{style:W},r.a.createElement(m.a,{content:"exchange.price_market"})),r.a.createElement("th",{style:{textAlign:"right"}},r.a.createElement(m.a,{content:"exchange.value"})),r.a.createElement("th",null,r.a.createElement(m.a,{content:"account.trade"})),s?r.a.createElement("th",{id:"cancelAllOrders",style:{cursor:"pointer"}},r.a.createElement(m.a,{content:"wallet.cancel"})):null)):r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{textAlign:this.props.leftAlign?"left":""}},r.a.createElement(m.a,{className:"header-sub-title",content:"exchange.price"})),r.a.createElement("th",{style:this.props.leftAlign?{textAlign:"left"}:null},t?r.a.createElement("span",{className:"header-sub-title"},r.a.createElement(f.a,{dataPlace:"top",name:a})):null),r.a.createElement("th",{style:this.props.leftAlign?{textAlign:"left"}:null},t?r.a.createElement("span",{className:"header-sub-title"},r.a.createElement(f.a,{dataPlace:"top",name:t})):null),r.a.createElement("th",{style:{textAlign:this.props.leftAlign?"left":""}},r.a.createElement(m.a,{className:"header-sub-title",content:"transaction.expiration"})),r.a.createElement("th",null)))}}]),t}();H.defaultProps={quoteSymbol:null,baseSymbol:null};var z=function(e){function t(){return B(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return U(t,r.a.Component),L(t,[{key:"shouldComponentUpdate",value:function(e){return e.order.for_sale!==this.props.order.for_sale||e.order.id!==this.props.order.id||e.quote!==this.props.quote||e.base!==this.props.base||e.order.market_base!==this.props.order.market_base}},{key:"render",value:function(){var e=this.props,t=e.base,a=e.quote,n=e.order,s=e.showSymbols,o=e.dashboard,l=e.isMyAccount,u=e.settings,p=n.isBid(),h=n.isCall(),b=h?"orderHistoryCall":p?"orderHistoryBid":"orderHistoryAsk",g=s?r.a.createElement("span",null," "+t.get("symbol")+"/"+a.get("symbol")):null,v=s?" "+t.get("symbol"):null,_=s?" "+a.get("symbol"):null,y=u?u.get("unit"):"1.3.0",E=p?"value positive":"value negative",w=p?"value negative":"value positive";return o?r.a.createElement("tr",{key:n.id,className:"clickable"},r.a.createElement("td",{colSpan:"5",style:W,onClick:this.props.onFlip},p?r.a.createElement(m.a,{content:"exchange.buy_description",baseAsset:d.a.format_number(n[p?"amountToReceive":"amountForSale"]().getAmount({real:!0}),t.get("precision"),!1),quoteAsset:d.a.format_number(n[p?"amountForSale":"amountToReceive"]().getAmount({real:!0}),a.get("precision"),!1),baseName:r.a.createElement(f.a,{noTip:!0,customClass:E,name:a.get("symbol")}),quoteName:r.a.createElement(f.a,{noTip:!0,customClass:w,name:t.get("symbol")})}):r.a.createElement(m.a,{content:"exchange.sell_description",baseAsset:d.a.format_number(n[p?"amountToReceive":"amountForSale"]().getAmount({real:!0}),t.get("precision"),!1),quoteAsset:d.a.format_number(n[p?"amountForSale":"amountToReceive"]().getAmount({real:!0}),a.get("precision"),!1),baseName:r.a.createElement(f.a,{noTip:!0,customClass:E,name:a.get("symbol")}),quoteName:r.a.createElement(f.a,{noTip:!0,customClass:w,name:t.get("symbol")})})),r.a.createElement("td",{style:W,onClick:this.props.onFlip},r.a.createElement(D.a,{base_amount:n.sellPrice().base.amount,base_asset:n.sellPrice().base.asset_id,quote_amount:n.sellPrice().quote.amount,quote_asset:n.sellPrice().quote.asset_id,force_direction:t.get("symbol"),hide_symbols:!0})),r.a.createElement("td",{style:W,onClick:this.props.onFlip},r.a.createElement(q.a,{base:t.get("id"),quote:a.get("id"),force_direction:t.get("symbol"),hide_symbols:!0,hide_asset:!0})),r.a.createElement("td",{style:{textAlign:"right"},onClick:this.props.onFlip},r.a.createElement(I.b,{hide_asset:!0,amount:n.amountForSale().getAmount(),fromAsset:n.amountForSale().asset_id,noDecimals:!0,toAsset:y})," ",r.a.createElement(f.a,{name:y})),r.a.createElement("td",null,r.a.createElement(i.b,{to:"/market/"+a.get("symbol")+"_"+t.get("symbol")},r.a.createElement(P.a,{name:"trade",title:"icons.trade.trade",className:"icon-14px"}))),l?r.a.createElement("td",{className:"text-center",style:{padding:"2px 5px"}},h?null:r.a.createElement("span",{style:{marginRight:0},className:"order-cancel"},r.a.createElement("input",{type:"checkbox",className:"orderCancel",onChange:this.props.onCheckCancel}))):null):r.a.createElement("tr",{key:n.id},r.a.createElement("td",{className:b,style:{paddingLeft:10}},r.a.createElement(O.a,{price:n.getPrice(),base:t,quote:a}),g),r.a.createElement("td",null,d.a.format_number(n[p?"amountToReceive":"amountForSale"]().getAmount({real:!0}),a.get("precision"))," ",_),r.a.createElement("td",null,d.a.format_number(n[p?"amountForSale":"amountToReceive"]().getAmount({real:!0}),t.get("precision"))," ",v),r.a.createElement("td",{style:{width:"25%",textAlign:"right"},className:"tooltip","data-tip":new Date(n.expiration)},h?null:c.a.localize(new Date(n.expiration),{type:"date",format:"short_custom"})),r.a.createElement("td",{className:"text-center",style:{width:"6%"}},h?null:r.a.createElement("a",{style:{marginRight:0},className:"order-cancel",onClick:this.props.onCancel},r.a.createElement(P.a,{name:"cross-circle",title:"icons.cross_circle.cancel_order",className:"icon-14px"}))))}}]),t}();z.defaultProps={showSymbols:!1};var J=function(e){function t(e){B(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={activeTab:e.activeTab},a._getOrders=a._getOrders.bind(a),a}return U(t,r.a.Component),L(t,[{key:"componentDidMount",value:function(){var e=this.refs.container;e&&p.a.initialize(e)}},{key:"componentDidUpdate",value:function(){var e=this.refs.container;e&&p.a.update(e)}},{key:"_getOrders",value:function(){var e,t=this.props,a=t.currentAccount,n=t.base,r=t.quote,s=t.feedPrice,o=a.get("orders"),i=a.get("call_orders"),l=n.get("id"),c=r.get("id"),u=(F(e={},n.get("id"),{precision:n.get("precision")}),F(e,r.get("id"),{precision:r.get("precision")}),e),p=o.toArray().map(function(e){var t=j.b.getObject(e);if(!t)return null;var a=t.getIn(["sell_price","base","asset_id"]),n=t.getIn(["sell_price","quote","asset_id"]);return a===l&&n===c||a===c&&n===l?new T.d(t.toJS(),u,r.get("id")):void 0}).filter(function(e){return!!e}),d=i.toArray().map(function(e){try{var t=j.b.getObject(e);if(!t)return null;var a=t.getIn(["call_price","base","asset_id"]),n=t.getIn(["call_price","quote","asset_id"]);if(a===l&&n===c||a===c&&n===l)return s?new T.b(t.toJS(),u,r.get("id"),s):null}catch(e){return null}}).filter(function(e){return!!e}).filter(function(e){try{return e.isMarginCalled()}catch(e){return!1}});return p.concat(d)}},{key:"_changeTab",value:function(e){x.a.changeViewSetting({ordersTab:e}),this.setState({activeTab:e});var t=this.refs.container;t.scrollTop=0,p.a.update(t),setTimeout(M.a.rebuild,1e3)}},{key:"render",value:function(){var e=this,t=this.props,a=t.base,n=t.quote,s=t.quoteSymbol,o=t.baseSymbol,i=t.settleOrders,l=this.state.activeTab;if(!a||!n)return null;var c=void 0,u=!!(a.get("bitasset_data_id")&&i.size>0),p=!!(n.get("bitasset_data_id")&&i.size>0);if(l&&(u||p)||(l="my_orders"),"my_orders"==l){var d=this._getOrders(),h=r.a.createElement("tr",null,r.a.createElement("td",{style:{textAlign:"center"},colSpan:"5"},r.a.createElement(m.a,{content:"account.no_orders"}))),b=d.filter(function(e){return e.isBid()}).sort(function(e,t){return t.getPrice()-e.getPrice()}).map(function(t){var s=t.getPrice();return r.a.createElement(z,{price:s,key:t.id,order:t,base:a,quote:n,onCancel:e.props.onCancel.bind(e,t.id)})}),g=d.filter(function(e){return!e.isBid()}).sort(function(e,t){return e.getPrice()-t.getPrice()}).map(function(t){var s=t.getPrice();return r.a.createElement(z,{price:s,key:t.id,order:t,base:a,quote:n,onCancel:e.props.onCancel.bind(e,t.id)})}),_=[];g.length&&(_=_.concat(g)),b.length&&(_=_.concat(b)),_.sort(function(e,t){return e.props.price-t.props.price}),c=r.a.createElement(v.a,{component:"tbody",transitionName:"newrow"},_.length?_:h)}l&&"open_settlement"==l&&(c=r.a.createElement(C,{key:"settle_orders",orders:i,base:a,quote:n,baseSymbol:o,quoteSymbol:s}));var y="mymarkets-header clickable",E=S()(y,{inactive:"my_orders"!==l}),w=S()(y,{inactive:"open_settlement"!==l}),k=u||p?"50%":"100%",A=u||p?"inherit":"none",O="open_settlement"===l?this.props.className+" settle":this.props.className;return r.a.createElement("div",{key:"open_orders",className:O},r.a.createElement("div",{className:"exchange-bordered small-12"},r.a.createElement("div",{className:"grid-block shrink left-orderbook-header"},r.a.createElement("div",{style:{width:k},className:E,onClick:this._changeTab.bind(this,"my_orders")},r.a.createElement(m.a,{content:"exchange.my_orders"})),r.a.createElement("div",{style:{display:A},className:w,onClick:this._changeTab.bind(this,"open_settlement")},r.a.createElement(m.a,{content:"exchange.settle_orders"}))),r.a.createElement("div",{className:"grid-block shrink left-orderbook-header market-right-padding-only"},r.a.createElement("table",{className:"open-orders__headings table order-table text-right fixed-table market-right-padding"},"my_orders"==l?r.a.createElement(H,{rightAlign:!0,type:"sell",baseSymbol:o,quoteSymbol:s}):r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(m.a,{className:"header-sub-title",content:"exchange.price"})),r.a.createElement("th",null,r.a.createElement("span",{className:"header-sub-title"},r.a.createElement(f.a,{dataPlace:"top",name:s}))),r.a.createElement("th",null,r.a.createElement("span",{className:"header-sub-title"},r.a.createElement(f.a,{dataPlace:"top",name:o}))),r.a.createElement("th",null))))),r.a.createElement("div",{className:"table-container grid-block no-overflow",ref:"container",style:{overflow:"hidden",maxHeight:200,paddingRight:"0.6rem"}},r.a.createElement("table",{className:"open-orders__table table order-table text-right fixed-table market-right-padding"},c))))}}]),t}();J.defaultProps={base:{},quote:{},orders:{},quoteSymbol:"",baseSymbol:""},J.propTypes={base:o.a.object.isRequired,quote:o.a.object.isRequired,orders:o.a.object.isRequired,quoteSymbol:o.a.string.isRequired,baseSymbol:o.a.string.isRequired}},356:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(3),o=a.n(s),i=a(1),l=a.n(i),c=a(142),u=a(132),p=a(114),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.currencies=[],a.courses=[];var n=a;return a.state={isActiveThisModal:"is-active",account:null,assets:[],asset:t.DEFAULT_CURRENCY,address:"",minimal:0,confirmations:0,assetValues:[]},a.onChooseAsset=a.onChooseAsset.bind(a),a.closeModal=a.closeModal.bind(a),a.handleReceiveInput=a.handleReceiveInput.bind(a),a.handleSendInput=a.handleSendInput.bind(a),(new p.a).getAllowCurrency(function(a){n.currencies=a.deposit;var r=t.DEFAULT_CURRENCY;if(n.currencies){var s=[],o=[];for(var i in n.currencies)n.currencies[i].asset&&(s.push(n.currencies[i].asset),o[n.currencies[i].asset]=n.currencies[i].asset,n.currencies[i].asset===e.asset&&(r=e.asset));n.onChooseAsset(r),n.setState({asset:r,assets:s,assetValues:o})}}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),d(t,[{key:"closeModal",value:function(e){e.target.classList.contains("close-modal")&&this.setState({isActiveThisModal:""})}},{key:"showModal",value:function(){this.setState({isActiveThisModal:"is-active"})}},{key:"loadAssetCourse",value:function(e,t){var a=this;(new p.a).getPairsCourse(function(n){a.courses=n.list,t(e)})}},{key:"onChooseAsset",value:function(e){var a=this,n=this.findCurrentCurrency(e);this.setState({asset:e,confirmations:this.getCountConfirmations(e),minimal:n?n.minimal:0}),this.loadAssetCourse(e,this.updateSend.bind(this)),(new p.a).сreatePaymentAddress(this.props.account.get("name"),e,t.MODE_BRIDGE,function(e){a.setState({address:e})})}},{key:"getCountConfirmations",value:function(e){switch(e){case"BTC":return 2;case"LTC":case"DASH":return 6;case"USDT":return 2;case"ETH":return 6;case"XMR":return 10}return 6}},{key:"findCurrentCurrency",value:function(e){for(var t in void 0===e&&(e=this.state.asset),this.currencies){var a=this.currencies[t];if(a.asset==e)return a}return null}},{key:"updateReceive",value:function(e){if(document.querySelector(".receive-input")){var a=this.getCourseByAsset(e),n=parseFloat(document.querySelector(".send-input").value.replace(",","."))*parseFloat(a.coef);isNaN(n)&&(n=0),document.querySelector(".receive-input").value=n.toFixed(t.PRESICTION)}}},{key:"updateSend",value:function(e){if(document.querySelector(".send-input")){var a=this.getCourseByAsset(e),n=parseFloat(document.querySelector(".receive-input").value.replace(",","."))/parseFloat(a.coef);isNaN(n)&&(n=0),document.querySelector(".send-input").value=n.toFixed(t.PRESICTION)}}},{key:"getCourseByAsset",value:function(e){for(var t in this.courses){var a=this.courses[t];if(a.to==e)return a}return null}},{key:"handleSendInput",value:function(e){e.preventDefault(),this.updateReceive(this.state.asset)}},{key:"handleReceiveInput",value:function(e){e.preventDefault(),this.updateSend(this.state.asset)}},{key:"render",value:function(){var e=r.a.createElement("div",{className:"button-group",style:{marginTop:10}},r.a.createElement("div",{onClick:this.closeModal,className:"button btn large outline close-modal"},r.a.createElement("span",{className:"close-modal"},o.a.translate("modal.withdraw.cancel")))),t=r.a.createElement("div",{className:"small-6",style:{paddingTop:10,paddingRight:10,float:"left",width:"49%"}},r.a.createElement("div",{className:"grid-block"},r.a.createElement("label",{className:"left-label"},r.a.createElement(l.a,{content:"transfer.send"}))),r.a.createElement("div",{className:"inline-label input-wrapper"},r.a.createElement("input",{className:"send-input",type:"number",onChange:this.handleSendInput}),r.a.createElement("div",{className:"form-label select floating-dropdown"},r.a.createElement(c.a,{entries:this.state.assets,values:this.state.assetValues,singleEntry:this.state.asset,value:this.state.asset,onChange:this.onChooseAsset})))),a=r.a.createElement("div",{className:"small-6",style:{paddingTop:10,paddingRight:10,float:"left",width:"49%"}},r.a.createElement("label",{className:"left-label"},r.a.createElement(l.a,{content:"exchange.receive"})),r.a.createElement("div",{className:"inline-label input-wrapper"},r.a.createElement("input",{className:"receive-input",type:"number",onChange:this.handleReceiveInput,defaultValue:1e3}),r.a.createElement("div",{className:"input-right-symbol"},"LLC"))),n=r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(l.a,{content:"gateway.rudex.min_amount",minAmount:this.state.minimal,symbol:this.state.asset}),r.a.createElement("br",null),r.a.createElement(l.a,{className:"deposit-withdraw-info",component:"b",content:"gateway.min_count_confirmations",cnt:this.state.confirmations}),r.a.createElement("br",null),r.a.createElement(l.a,{component:"span",style:{fontSize:"0.8rem"},content:"gateway.min_deposit_warning_asset",minDeposit:this.state.minimal||0,coin:this.state.asset})),s=r.a.createElement("div",{className:"d-flex"},r.a.createElement(u.a,{text:this.state.address,className:"btn icon"}),r.a.createElement("div",null,r.a.createElement(l.a,{component:"div",style:{fontSize:"0.8rem",fontWeight:"bold",paddingBottom:"0.3rem"},content:"gateway.purchase_notice",inputAsset:this.state.asset,outputAsset:"LLC"}),r.a.createElement("div",{className:"modal__highlight bridge_modal_address"},this.state.address)));return r.a.createElement("div",{onClick:this.closeModal,className:"modal-overlay close-modal "+this.state.isActiveThisModal},r.a.createElement("div",{id:"withdraw_asset_rudex-scorum_RUDEX.SCR","data-closable":"true",className:"modal fadeIn ng-enter is-active ng-enter-active buy-table-modal"},r.a.createElement("a",{onClick:this.closeModal,href:"javascript:void(0)",className:"close-button close-modal"},"×"),r.a.createElement("br",null),r.a.createElement("div",{className:"grid-block vertical"},r.a.createElement("form",{className:"grid-block vertical full-width-content"},r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"content-block"},r.a.createElement("h3",null,r.a.createElement("span",null,o.a.translate("exchange.buy")," ","LLC"))),t,a,r.a.createElement("br",null),r.a.createElement("br",null),n,r.a.createElement("br",null),s,r.a.createElement("br",null),e)))))}}]),t}();h.DEFAULT_CURRENCY="BTC",h.MODE_BRIDGE="1",h.PRESICTION=4,t.a=h},359:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(1),o=a.n(s),i=a(5),l=a(57),c=a(3),u=a.n(c),p=a(43),d=a(77),h=a(4),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={amount:0,showError:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),m(t,[{key:"onAmountChanged",value:function(e){var t=e.amount,a=e.asset;this.setState({amount:t,asset:a})}},{key:"getBalance",value:function(){var e=this,t=this.props.account.get("balances"),a=0;return t&&t.forEach(function(t,n){if(n==e.props.assetId){var r=h.b.getObject(t);a=r.get("balance")}}),a}},{key:"onSubmit",value:function(){var e=i.a.get_asset_precision(this.state.asset.get("precision")),t=this.state.amount.replace(/,/g,"");t*=e;var a=this.getBalance();t<=0||t>a?this.setState({showError:!0}):(this.setState({showError:!1}),d.a.reserveAsset(t,this.props.assetId,this.props.account.get("id")),this.props.onClose())}},{key:"render",value:function(){var e=this,t=this.props.assetId;return r.a.createElement("form",{className:"grid-block vertical full-width-content"},r.a.createElement(o.a,{component:"h3",content:"modal.reserve.title"}),r.a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},r.a.createElement("div",{className:"content-block",onClick:function(){e.setState({showError:!1})}},r.a.createElement(p.a,{label:"modal.reserve.amount",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:t,assets:[t],display_balance:r.a.createElement(l.a,{balance:this.props.account.getIn(["balances",t])}),tabIndex:1})),this.state.showError?r.a.createElement("p",{className:"errorModal"},u.a.translate("exchange.invalid_amount")):null,r.a.createElement("div",{className:"content-block button-group"},r.a.createElement("input",{type:"submit",className:"button success btn large inverted",onClick:this.onSubmit.bind(this),value:u.a.translate("modal.reserve.submit"),tabIndex:2}),r.a.createElement("div",{className:"button btn large outline",onClick:this.props.onClose,tabIndex:3},u.a.translate("cancel")))))}}]),t}();t.a=f},449:function(e,t,a){"use strict";(function(e){var n=a(76),r=a(0),s=a.n(r),o=a(20),i=a.n(o),l=a(34),c=a(1),u=a.n(c),p=a(18),d=a(5),h=a(13),m=a(6),f=a(24),b=a(42),g=a.n(b),v=a(3),_=a.n(v),y=a(25),E=a(132),w=a(12),k=a(37),A=a(36),C=a(22),O=a(4),x=a(182),N=a(23),S=(a(450),a(451),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}),P=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var q=function(t){function a(e){j(this,a);var t=T(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return t.state={toAddress:y.a.getLast(e.walletType),withdrawValue:"",amountError:null,symbol:e.asset.get("symbol"),to_withdraw:new p.a({asset_id:e.asset.get("id"),precision:e.asset.get("precision")}),fee_asset_id:"1.3.0",feeStatus:{},loading:!1,emptyAddressDeposit:!1},t._validateAddress(t.state.toAddress,e),t.addDepositAddress=t.addDepositAddress.bind(t),t._checkFeeStatus=t._checkFeeStatus.bind(t),t._checkBalance=t._checkBalance.bind(t),t._getCurrentBalance=t._getCurrentBalance.bind(t),t._getFee=t._getFee.bind(t),t._updateFee=Object(n.a)(t._updateFee.bind(t),250),t}return I(a,x["a"]),P(a,[{key:"componentWillMount",value:function(){this._getDepositAddress(),this._updateFee(),this._checkFeeStatus()}},{key:"componentWillReceiveProps",value:function(e){e.asset&&this.props.asset&&e.asset.get("id")!==this.props.asset.get("id")&&this.setState({to_withdraw:new p.a({asset_id:e.asset.get("id"),precision:e.asset.get("precision")}),gateFee:e.asset.get("gateFee"),intermediateAccount:e.asset.get("intermediateAccount"),symbol:e.asset.get("symbol"),memo:"",withdrawValue:"",receive_address:null,toAddress:y.a.getLast(e.walletType)},this._getDepositAddress)}},{key:"_getDepositAddress",value:function(){if(this.props.backingCoinType){var e=Object(y.j)({coin:"open."+this.props.backingCoinType.toLowerCase(),account:this.props.account,stateCallback:this.addDepositAddress});e?this.setState({receive_address:e}):Object(y.l)(this._getDepositObject())}}},{key:"_getDepositObject",value:function(){return{inputCoinType:this.props.backingCoinType.toLowerCase(),outputCoinType:this.props.symbol.toLowerCase(),outputAddress:this.props.sender.get("name"),stateCallback:this.addDepositAddress}}},{key:"requestDepositAddressLoad",value:function(){this.setState({loading:!0,emptyAddressDeposit:!1}),Object(y.l)(this._getDepositObject())}},{key:"addDepositAddress",value:function(e){e.error&&("no_address"===e.error.message?this.setState({emptyAddressDeposit:!0}):this.setState({emptyAddressDeposit:!1})),this.setState({receive_address:e,loading:!1})}},{key:"componentDidUpdate",value:function(){g.a.rebuild()}},{key:"onSubmit",value:function(t){if(t.preventDefault(),0===this.state.to_withdraw.getAmount())return this.setState({amountError:"transfer.errors.pos"});if(this.props.intermediateAccount){var a=this._getFee(),n=this._getGateFee(),r=this.state.to_withdraw.clone(),s=r.clone(this._getCurrentBalance().get("balance"));r.plus(n),s.lt(r)&&(r=this.state.to_withdraw.clone()),f.a.transfer(this.props.sender.get("id"),this.props.intermediateAccount,this.state.to_withdraw.getAmount(),this.state.to_withdraw.asset_id,this.props.backingCoinType.toLowerCase()+":"+this.state.toAddress+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,a.asset_id)}}},{key:"_updateAmount",value:function(){var e=this._getFee(),t=this._getCurrentBalance(),a=new p.a({amount:t?t.get("balance"):0,asset_id:this.props.asset.get("id"),precision:this.props.asset.get("precision")});a.asset_id===e.asset_id&&a.minus(e),this.state.to_withdraw.setAmount({sats:a.getAmount()}),this.setState({withdrawValue:a.getAmount({real:!0}),amountError:null},this._checkBalance)}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.sender;if(t){var a=["1.3.0",this.state.to_withdraw.asset_id],n={},r=[];a.forEach(function(a){r.push(Object(A.b)({accountID:t.get("id"),feeID:a,options:["price_per_kbyte"],data:{type:"memo",content:e.props.backingCoinType.toLowerCase()+":"+e.state.toAddress+(e.state.memo?":"+e.state.memo:"")}}))}),Promise.all(r).then(function(t){a.forEach(function(e,a){n[e]=t[a]}),d.a.are_equal_shallow(e.state.feeStatus,n)||e.setState({feeStatus:n}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:"_updateFee",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.fee_asset_id;if(!this.props.sender)return null;Object(A.b)({accountID:this.props.sender.get("id"),feeID:t,options:["price_per_kbyte"],data:{type:"memo",content:this.props.backingCoinType.toLowerCase()+":"+this.state.toAddress+(this.state.memo?":"+this.state.memo:"")}}).then(function(t){var a=t.fee,n=t.hasBalance,r=t.hasPoolBalance;e.setState({feeAmount:a,hasBalance:n,hasPoolBalance:r,error:!n||!r},e._checkFeeStatus)})}},{key:"_getCurrentBalance",value:function(){var e=this;return this.props.balances.find(function(t){return t&&t.get("asset_type")===e.props.asset.get("id")})}},{key:"_checkBalance",value:function(){var e=this.state,t=e.feeAmount,a=e.to_withdraw,n=this.props.asset,r=this._getCurrentBalance();if(r&&t){var s=Object(A.a)(a.getAmount({real:!0}),n,this._getFee(),r,this._getGateFee());if(null!==s)return this.state.balanceError!==!s&&this.setState({balanceError:!s}),s}}},{key:"_getFee",value:function(){var e={getAmount:function(){return 0},asset_id:this.state.fee_asset_id};if(!this.state.feeStatus||!this.state.feeAmount)return e;var t=this.state.feeStatus["1.3.0"],a=this.state.feeStatus[this.state.to_withdraw.asset_id];return t&&t.hasBalance?t.fee:t&&!t.hasBalance&&a&&a.hasBalance?a.fee:t?t.fee:e}},{key:"_onInputAmount",value:function(e){try{this.state.to_withdraw.setAmount({real:parseFloat(e.target.value||0)}),this.setState({withdrawValue:e.target.value,amountError:null},this._checkBalance)}catch(e){console.error("err:",e)}}},{key:"_onInputTo",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address_check_in_progress:!0,withdraw_address_selected:t,validAddress:null,toAddress:t}),this._validateAddress(t)}},{key:"_onMemoChanged",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:"_validateAddress",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(y.m)({url:N.e.BASE,walletType:a.walletType,newAddress:e}).then(function(a){t.state.toAddress===e&&t.setState({withdraw_address_check_in_progress:!1,validAddress:!!a})}).catch(function(e){console.error("Error when validating address:",e)})}},{key:"_openRegistrarSite",value:function(e){e.preventDefault(),window.open(SettingsStore.site_registr,"_blank").opener=null}},{key:"_getGateFee",value:function(){var e=this.props,t=e.gateFee,a=e.asset;return new p.a({real:parseFloat(t?t.replace(",",""):0),asset_id:a.get("id"),precision:a.get("precision")})}},{key:"_renderWithdraw",value:function(){var e=this.state.amountError,t=d.a.replaceName(this.props.asset).name,a=1,n=this.props.supportsMemos,r=this._getFee(),o=this._getGateFee(),i=this.state.feeStatus[r.asset_id],l=O.b.getAsset(r.asset_id),c=i&&!i.hasBalance||this.state.balanceError||!this.state.toAddress||!this.state.withdrawValue;return s.a.createElement("div",null,s.a.createElement("p",null,s.a.createElement(u.a,{content:"gateway.withdraw_funds",asset:t})),this._renderCurrentBalance(),s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("label",{className:"left-label"},_.a.translate("modal.withdraw.amount")),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("input",{tabIndex:a++,type:"number",min:"0",onKeyPress:this.onKeyPress.bind(this),value:this.state.withdrawValue,onChange:this._onInputAmount.bind(this)}),s.a.createElement("div",{className:"form-label select floating-dropdown"},s.a.createElement("div",{className:"dropdown-wrapper inactive"},s.a.createElement("div",null,t)))),e?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(u.a,{content:e})):null,this.state.balanceError?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(u.a,{content:"transfer.errors.insufficient"})):null),s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("label",{className:"left-label"},_.a.translate("transfer.fee")),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("input",{type:"text",disabled:!0,value:r.getAmount({real:!0})}),s.a.createElement("div",{className:"form-label select floating-dropdown"},s.a.createElement("div",{className:"dropdown-wrapper inactive"},s.a.createElement("div",null,l?s.a.createElement(C.a,{name:l.get("symbol")}):null)))),i&&!i.hasBalance?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(u.a,{content:"transfer.errors.insufficient"})):null),s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("label",{className:"left-label"},_.a.translate("gateway.fee")),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("input",{type:"text",disabled:!0,value:o.getAmount({real:!0})}),s.a.createElement("div",{className:"form-label select floating-dropdown"},s.a.createElement("div",{className:"dropdown-wrapper inactive"},s.a.createElement("div",null,s.a.createElement(C.a,{name:this.props.asset.get("symbol")}))))),i&&!i.hasBalance?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(u.a,{content:"transfer.errors.insufficient"})):null),s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("label",{className:"left-label"},_.a.translate("modal.withdraw.address")),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("input",{placeholder:_.a.translate("gateway.withdraw_placeholder",{asset:t}),tabIndex:a++,type:"text",value:this.state.toAddress,onChange:this._onInputTo.bind(this)}),s.a.createElement("div",{className:"form-label select floating-dropdown"},s.a.createElement("div",{className:"dropdown-wrapper inactive"},s.a.createElement("div",{"data-place":"right","data-tip":_.a.translate("tooltip.withdraw_address",{asset:t})},"?")))),!this.state.validAddress&&this.state.toAddress?s.a.createElement("div",{className:"has-error",style:{paddingTop:10}},s.a.createElement(u.a,{content:"gateway.valid_address",coin_type:t})):null),n?s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("label",{className:"left-label"},_.a.translate("transfer.memo")),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("textarea",{rows:"3",value:this.state.memo,tabIndex:a++,onChange:this._onMemoChanged.bind(this)})),!this.state.validAddress&&this.state.toAddress?s.a.createElement("div",{className:"has-error",style:{paddingTop:10}},s.a.createElement(u.a,{content:"gateway.valid_address",coin_type:t})):null):null,s.a.createElement("div",{className:"button-group SimpleTrade__withdraw-row"},s.a.createElement("button",{tabIndex:a++,className:"button"+(c?" disabled":""),onClick:this.onSubmit.bind(this),type:"submit"},s.a.createElement(u.a,{content:"gateway.withdraw_now"}))))}},{key:"_renderDeposit",value:function(){var e=this.state,t=e.receive_address,a=e.loading,n=e.emptyAddressDeposit,r=d.a.replaceName(this.props.asset).name,o=t&&"memo"in t&&t.memo,i=t&&t.address||"",l=1;return s.a.createElement("div",{className:i?"":"no-overflow"},s.a.createElement("p",null,s.a.createElement(u.a,{unsafe:!0,content:"gateway.add_funds",account:this.props.sender.get("name")})),this._renderCurrentBalance(),s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("p",{style:{marginBottom:10},"data-place":"right","data-tip":_.a.translate("tooltip.deposit_tip",{asset:r})},s.a.createElement(u.a,{className:"help-tooltip",content:"gateway.deposit_to",asset:r}),":",s.a.createElement("label",{className:"fz_12 left-label"},s.a.createElement(u.a,{content:"gateway.deposit_notice_delay"}))),i?s.a.createElement("label",null,n?s.a.createElement(u.a,{content:"gateway.please_generate_address"}):s.a.createElement("span",{className:"inline-label"},s.a.createElement("input",{readOnly:!0,type:"text",value:i}),s.a.createElement(E.a,{text:i})," ")):s.a.createElement(k.a,{type:"three-bounce"}),o?s.a.createElement("label",null,s.a.createElement("span",{className:"inline-label"},s.a.createElement("input",{readOnly:!0,type:"text",value:_.a.translate("transfer.memo")+": "+t.memo}),s.a.createElement(E.a,{text:t.memo}))):null,t&&t.error?s.a.createElement("div",{className:"has-error",style:{paddingTop:10}},t.error.message):null),s.a.createElement("div",{className:"button-group SimpleTrade__withdraw-row"},s.a.createElement("button",{tabIndex:l++,className:"button spinner-button-circle",onClick:this.requestDepositAddressLoad.bind(this),type:"submit"},a?s.a.createElement(k.a,{type:"circle"}):null,s.a.createElement(u.a,{content:"gateway.generate_new"}))))}},{key:"_renderCurrentBalance",value:function(){var e=d.a.replaceName(this.props.asset).name,t="deposit"===this.props.action,a=this._getCurrentBalance(),n=a?new p.a({asset_id:a.get("asset_type"),precision:this.props.asset.get("precision"),amount:a.get("balance")}):null,r=t?s.a.createElement("span",{style:{border:"2px solid black",borderLeft:"none"},className:"form-label"},e):s.a.createElement("button",{"data-place":"right","data-tip":_.a.translate("tooltip.withdraw_full"),className:"button",style:{border:"2px solid black",borderLeft:"none"},onClick:this._updateAmount.bind(this,a?parseInt(a.get("balance"),10):0)},s.a.createElement(w.a,{name:"clippy",title:"icons.clippy.withdraw_full"}));return s.a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{fontSize:"1rem"}},s.a.createElement("label",{style:{fontSize:"1rem"}},_.a.translate("gateway.balance_asset",{asset:e}),":",s.a.createElement("span",{className:"inline-label"},s.a.createElement("input",{disabled:!0,style:{color:"black",border:"2px solid black",padding:10,width:"100%"},value:n?n.getAmount({real:!0}):0}),r)))}},{key:"render",value:function(){var e=this.props,t=e.asset,a="deposit"===e.action;if(!t)return null;var n=d.a.replaceName(t).name,r=this.props.isDown?s.a.createElement("div",null,s.a.createElement(u.a,{className:"txtlabel cancel",content:"gateway.unavailable_OPEN",component:"p"})):this.props.isAvailable?a?this._renderDeposit():this._renderWithdraw():s.a.createElement("div",null,s.a.createElement(u.a,{className:"txtlabel cancel",content:"gateway.unavailable",component:"p"}));return s.a.createElement("div",{className:"SimpleTrade__modal"},s.a.createElement("div",{className:"Modal__header"},s.a.createElement("h3",null,s.a.createElement(u.a,{content:a?"gateway.deposit":"modal.withdraw.submit"})," ",n)),s.a.createElement("div",{className:"Modal__divider"}),s.a.createElement("div",{className:"grid-block vertical no-overflow",style:{zIndex:1002,paddingLeft:"2rem",paddingRight:"2rem",paddingTop:"1rem"}},r))}}]),a}();q.propTypes={sender:m.a.ChainAccount.isRequired,asset:m.a.ChainAsset.isRequired,coreAsset:m.a.ChainAsset.isRequired,globalObject:m.a.ChainAsset.isRequired},q.defaultProps={coreAsset:"1.3.0",globalObject:"2.0.0"},q=Object(h.a)(q);var D=function(e){function t(){j(this,t);var e=T(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return I(t,s.a.Component),P(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){i.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){return this.state.open?s.a.createElement(l.a,{className:"test",onClose:this.onClose.bind(this),overlay:!0,id:this.props.modalId},this.state.open?s.a.createElement(q,S({},this.props,{open:this.state.open})):null):null}}]),t}();t.a=D}).call(this,a(29).Buffer)},452:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(20),o=a.n(s),i=a(34),l=a(1),c=a.n(l),u=a(18),p=a(5),d=a(13),h=a(6),m=a(42),f=a.n(m),b=a(3),g=a.n(b),v=a(25),_=a(219),y=a(132),E=a(12),w=a(37),k=a(23),A=a(142),C=a(15),O=a(8),x=a(10),N=a(149),S=a.n(N),P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},j=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var D=function(e){function t(e){T(this,t);var a=I(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={toAddress:v.a.getLast(e.walletType),withdrawValue:"",amountError:null,inputAmount:0,receiveLoading:!1,limitLoading:!0,apiError:!1},a._validateAddress(a.state.toAddress,e),a.deposit_address_cache=new _.a,a}return q(t,r.a.Component),j(t,[{key:"onClose",value:function(){o.a.publish(this.props.modalId,"close")}},{key:"componentWillMount",value:function(){this._getDepositAddress()}},{key:"componentDidMount",value:function(){this._getDepositLimit(),this._estimateOutput()}},{key:"componentWillReceiveProps",value:function(e){e.inputCoinType===this.props.inputCoinType&&e.outputCoinType===this.props.outputCoinType||(this._getDepositLimit(e),this._estimateOutput(e),this._getDepositAddress(e))}},{key:"shouldComponentUpdate",value:function(e,t){return e.inputCoinType!==this.props.inputCoinType||e.outputCoinType!==this.props.outputCoinType||e.sender!==this.props.sender||e.asset!==this.props.asset||e.isAvailable!==this.props.isAvailable||e.isDown!==this.props.isDown||!p.a.are_equal_shallow(t,this.state)}},{key:"_getDepositLimit",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({limitLoading:!0}),Object(v.k)(t.inputCoinType,t.outputCoinType).then(function(t){e.setState({depositLimit:t.depositLimit,limitLoading:!1})}).catch(function(t){console.log("deposit limit error:",t),e.setState({depositLimit:null,limitLoading:!1})})}},{key:"_onAmountChange",value:function(e,t){var a=new RegExp(/[[:digit:]]/),n=t.target;switch(a.test(n.value)||(n.value=n.value.replace(/[^0-9.]/g,"")),"."==n.value.charAt(0)&&(n.value="0."),n.value.charAt(n.value.length)!=n.value.search(".")&&n.value.substr(1),n.value=p.a.limitByPrecision(n.value,8),e){case"input":this.setState({inputAmount:n.value},this._estimateOutput.bind(this));break;case"output":this.setState({outputAmount:n.value},this._estimateInput.bind(this))}}},{key:"_estimateOutput",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({receiveAmount:0,sendAmount:this.state.inputAmount}),this.state.inputAmount&&(this.setState({receiveLoading:!0}),Object(v.c)(this.state.inputAmount,t.inputCoinType,t.outputCoinType).then(function(t){e.setState({inputAmount:t.inputAmount,receiveAmount:t.outputAmount,receiveLoading:!1})}).catch(function(t){console.log("receive amount err:",t),e.setState({receiveLoading:!1,apiError:!0})}))}},{key:"_estimateInput",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({receiveAmount:this.state.outputAmount,sendAmount:0}),this.state.outputAmount&&(this.setState({receiveLoading:!0}),Object(v.b)(this.state.outputAmount,t.inputCoinType,t.outputCoinType).then(function(t){e.setState({inputAmount:t.inputAmount,sendAmount:p.a.limitByPrecision(t.inputAmount,8),receiveLoading:!1})}).catch(function(t){console.log("send amount err:",t),e.setState({receiveLoading:!1,apiError:!0})}))}},{key:"_getDepositAddress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(e.inputCoinType){this.setState({receive_address:null}),Object(v.l)(this._getDepositObject(e))}}},{key:"_getDepositObject",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{inputCoinType:t.inputCoinType.toLowerCase(),outputCoinType:t.outputCoinType.toLowerCase(),outputAddress:t.sender.get("name"),url:k.a.BASE,stateCallback:function(a){e.addDepositAddress(t.inputCoinType.toLowerCase(),t.outputCoinType.toLowerCase(),t.sender.get("name"),a)}}}},{key:"addDepositAddress",value:function(e,t,a,n){this.deposit_address_cache.cacheInputAddress("blocktrades",a,e,t,n.address,n.memo),this.setState({receive_address:n})}},{key:"componentDidUpdate",value:function(){f.a.rebuild()}},{key:"_validateAddress",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(v.m)({walletType:a.walletType,newAddress:e}).then(function(a){t.state.toAddress===e&&t.setState({withdraw_address_check_in_progress:!1,validAddress:a})}).catch(function(e){console.error("Error when validating address:",e)})}},{key:"_openRegistrarSite",value:function(e){e.preventDefault(),window.open(O.a.site_registr,"_blank").opener=null}},{key:"_onDropDownSelect",value:function(e){x.a.changeViewSetting({preferredBridge:e})}},{key:"onBlockTradesContact",value:function(){console.log("Open New Tab"),window.open("https://www.blocktrades.us/contact","_blank").focus()}},{key:"_renderDeposit",value:function(){var e=p.a.replaceName(this.props.asset),t=e.name,a=e.prefix,n=this.state,s=n.receive_address,o=n.apiError,i=s&&"memo"in s&&s.memo,l=s&&s.address||"",u=r.a.createElement("div",{className:"QR",style:{textAlign:"center"}},r.a.createElement(S.a,{size:140,value:l})),d=Object.keys(this.props.bridges.toJS()),h=this.props.inputCoinType.toUpperCase(),m=(a||"")+t,f=(this.state.receiveAmount/this.state.inputAmount).toFixed(4),b=m+"/"+h,v=this.state.inputAmount>parseFloat(this.state.depositLimit)||this.state.sendAmount>parseFloat(this.state.depositLimit),_=v?{border:"1px solid #a94442"}:null;return r.a.createElement("div",{className:"modal__body"},r.a.createElement("div",{className:"container-row"},r.a.createElement("label",{className:"left-label"},r.a.createElement(c.a,{content:"modal.buy.asset"})),r.a.createElement("div",{className:"inline-label input-wrapper"},r.a.createElement("input",{disabled:!0,type:"text",defaultValue:m}))),r.a.createElement("div",{className:"container-row"},r.a.createElement("div",{className:"grid-block"},r.a.createElement("label",{className:"left-label"},r.a.createElement(c.a,{content:"modal.buy.bridge"})),r.a.createElement("span",{"data-tip":g.a.translate("tooltip.bridge_TRADE"),className:"inline-block tooltip",onClick:this.onBlockTradesContact.bind(this)}," ",r.a.createElement(E.a,{style:{position:"relative",top:0},name:"question-circle",title:"icons.question_circle"}))),r.a.createElement("div",{className:"inline-label input-wrapper"},r.a.createElement("input",{disabled:!0,type:"text",defaultValue:"BLOCKTRADES"})," ")),r.a.createElement("span",{style:o?{display:"none"}:{display:""}},r.a.createElement("div",{className:"container-row double-row"},r.a.createElement("div",{className:"no-margin no-padding"},r.a.createElement("div",{className:"small-6",style:{paddingRight:10}},r.a.createElement("div",{className:"grid-block"},r.a.createElement("label",{className:"left-label"},r.a.createElement(c.a,{content:"transfer.send"})),v?r.a.createElement("div",{className:"error-msg inline-block tooltip","data-tip":g.a.translate("tooltip.over_limit")},r.a.createElement(c.a,{content:"gateway.over_limit"})," ",r.a.createElement(E.a,{name:"question-circle",title:"icons.question_circle"})):null),r.a.createElement("div",{className:"inline-label input-wrapper"},r.a.createElement("input",{style:_,type:"text",value:this.state.sendAmount,onInput:this._onAmountChange.bind(this,"input")}),r.a.createElement("div",{className:"form-label select floating-dropdown"},r.a.createElement(A.a,{entries:d,values:d.reduce(function(e,t){return t&&(e[t]=t),e},{}),singleEntry:d[0],value:this.props.preferredBridge||d[0],onChange:this._onDropDownSelect,upperCase:!0})))),r.a.createElement("div",{className:"small-6",style:{paddingLeft:10}},r.a.createElement("label",{className:"left-label"},r.a.createElement(c.a,{content:"gateway.deposit_limit"})),r.a.createElement("div",{className:"inline-label input-wrapper"},r.a.createElement("input",{disabled:!0,type:"number",value:this.state.depositLimit&&parseFloat(this.state.depositLimit).toFixed(4)||0}),r.a.createElement("div",{className:"input-right-symbol"},h))))),r.a.createElement("div",{className:"container-row double-row"},r.a.createElement("div",{className:"no-margin no-padding"},r.a.createElement("div",{className:"small-6",style:{paddingRight:10}},r.a.createElement("label",{className:"left-label"},r.a.createElement(c.a,{content:"exchange.receive"})),r.a.createElement("div",{className:"inline-label input-wrapper"},r.a.createElement("input",{style:_,type:"text",value:this.state.receiveAmount,onInput:this._onAmountChange.bind(this,"output")}),r.a.createElement("div",{className:"input-right-symbol"},m))),r.a.createElement("div",{className:"small-6",style:{paddingLeft:10}},r.a.createElement("div",{className:"grid-block"},r.a.createElement("label",{className:"left-label"},r.a.createElement(c.a,{content:"exchange.price"}),"  ",this.state.receiveLoading?r.a.createElement(c.a,{content:"footer.loading"}):"")),r.a.createElement("div",{className:"inline-label input-wrapper"},r.a.createElement("input",{disabled:!0,type:"number",value:v?0:f}),r.a.createElement("div",{className:"input-right-symbol"},b))))),l?r.a.createElement("div",{className:"container-row"},i?null:u,r.a.createElement("div",{className:"grid-block"},r.a.createElement("div",{className:"copyIcon"},r.a.createElement(y.a,{text:l,className:"copyIcon"})),r.a.createElement("div",null,r.a.createElement(c.a,{component:"div",style:{fontSize:"0.8rem",fontWeight:"bold",paddingBottom:"0.3rem"},content:"gateway.purchase_notice",inputAsset:h,outputAsset:m}),r.a.createElement("div",{className:"modal__highlight"},l))),i?r.a.createElement("div",{className:"grid-block",style:{marginTop:"10px"}},r.a.createElement("div",{className:"copyIcon"},r.a.createElement(y.a,{text:s.memo,className:"copyIcon"})),r.a.createElement("div",null,r.a.createElement(c.a,{unsafe:!0,content:"gateway.purchase_notice_memo",component:"div",style:{fontSize:"0.8rem",fontWeight:"bold",paddingBottom:"0.3rem"}}),r.a.createElement("div",{className:"modal__highlight"},s.memo))):null):r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(w.a,{type:"three-bounce"})),r.a.createElement("div",null,r.a.createElement("div",{className:"no-margin no-padding"},r.a.createElement("button",{className:"button primary hollow",onClick:this.onClose.bind(this)},r.a.createElement(c.a,{content:"transfer.close"}))))),r.a.createElement("span",{style:o?{display:""}:{display:"none"}},r.a.createElement("div",{className:"container-row double-row"},r.a.createElement(c.a,{className:"txtlabel cancel",content:"gateway.unavailable_TRADE",component:"h3"}),r.a.createElement("button",{className:"button primary hollow",onClick:this.onClose.bind(this)},r.a.createElement(c.a,{content:"transfer.close"})))))}},{key:"_renderCurrentBalance",value:function(){var e=this,t=p.a.replaceName(this.props.asset).name,a="deposit"===this.props.action,n=this.props.balances.find(function(t){return t&&t.get("asset_type")===e.props.asset.get("id")}),s=n?new u.a({asset_id:n.get("asset_type"),precision:this.props.asset.get("precision"),amount:n.get("balance")}):null,o=a?r.a.createElement("span",{style:{border:"2px solid black",borderLeft:"none"},className:"form-label"},t):r.a.createElement("button",{"data-place":"right","data-tip":g.a.translate("tooltip.withdraw_full"),className:"button",style:{border:"2px solid black",borderLeft:"none"},onClick:this._updateAmount.bind(this,n?parseInt(n.get("balance"),10):0)},r.a.createElement(E.a,{name:"clippy",title:"icons.clippy.withdraw_full"}));return r.a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{fontSize:"1rem"}},r.a.createElement("label",{style:{fontSize:"1rem"}},g.a.translate("gateway.balance_asset",{asset:t}),":",r.a.createElement("span",{className:"inline-label"},r.a.createElement("input",{disabled:!0,style:{color:"black",border:"2px solid black",padding:10,width:"100%"},value:s?s.getAmount({real:!0}):0}),o)))}},{key:"render",value:function(){return this.props.asset?r.a.createElement("div",{className:"grid-block vertical no-overflow"},r.a.createElement("div",{className:"modal__header"},r.a.createElement(c.a,{component:"p",content:"modal.buy.title"})),this.props.isDown?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(c.a,{className:"txtlabel cancel",content:"gateway.unavailable_TRADE",component:"p"})):this.props.isAvailable?this._renderDeposit():r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(c.a,{className:"txtlabel cancel",content:"gateway.unavailable",component:"p"}))):null}}]),t}();D.propTypes={sender:h.a.ChainAccount.isRequired,asset:h.a.ChainAsset.isRequired},D=Object(d.a)(D);var R=function(e){function t(){return T(this,t),I(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return q(t,r.a.Component),j(t,[{key:"render",value:function(){var e=this.props,t=e.preferredBridge,a=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["preferredBridge"]),n=this.props.bridges.get(this.props.preferredBridge);return n||(t=(n=this.props.bridges.first()).inputCoinType),r.a.createElement(D,P({},a,{preferredBridge:t},n.toJS()))}}]),t}();R=Object(C.connect)(R,{listenTo:function(){return[O.a]},getProps:function(){return{preferredBridge:O.a.getState().viewSettings.get("preferredBridge","btc")}}});var M=function(e){function t(){T(this,t);var e=I(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return q(t,r.a.Component),j(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){o.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){return this.props.bridges&&this.state.open?r.a.createElement(i.a,{id:this.props.modalId,onClose:this.onClose.bind(this),overlay:!0},this.state.open?r.a.createElement(R,P({},this.props,{open:this.state.open})):null):null}}]),t}();t.a=M},453:function(e,t,a){"use strict";a.d(t,"a",function(){return D});var n=a(0),r=a.n(n),s=a(1),o=a.n(s),i=a(123),l=a(151),c=a(6),u=a(13),p=a(5),d=a(4),h=a(111),m=a(54),f=a.n(m),b=a(3),g=a.n(b),v=a(12),_=a(9),y=a.n(_),E=a(2),w=a.n(E),k=a(58),A=a(42),C=a.n(A),O=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P=d.c.operations,j={textAlign:"left"},T={textAlign:"right"};function I(e,t){return t.block_num===e.block_num?t.virtual_op-e.virtual_op:t.block_num-e.block_num}function q(e){return e?'"'+e.textContent.replace(/[\s\t\r\n]/gi," ")+'"':""}var D=function(e){function t(e){x(this,t);var a=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={limit:e.limit||20,csvExport:!1,headerHeight:85,openFilter:!1,filter:"all"},a._updateTooltip=a._updateTooltip.bind(a),a._downloadCSV=a._downloadCSV.bind(a),a._findActiveFilter=a._findActiveFilter.bind(a),a._renderFilters=a._renderFilters.bind(a),a}return S(t,r.a.Component),O(t,[{key:"componentDidMount",value:function(){if(this._updateTooltip(),!this.props.fullHeight){var e=this.refs.transactions;f.a.initialize(e),this._setHeaderHeight()}}},{key:"_setHeaderHeight",value:function(){var e=this.refs.header.offsetHeight;e!==this.state.headerHeight&&this.setState({headerHeight:e})}},{key:"shouldComponentUpdate",value:function(e,t){if(!p.a.are_equal_shallow(this.props.accountsList,e.accountsList))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(this.state.headerHeight!==t.headerHeight)return!0;if(this.state.openFilter!==t.openFilter)return!0;if(this.state.filter!==t.filter)return!0;if(this.props.customFilter&&(!p.a.are_equal_shallow(this.props.customFilter.fields,e.customFilter.fields)||!p.a.are_equal_shallow(this.props.customFilter.values,e.customFilter.values)))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(t.limit!==this.state.limit||t.csvExport!==this.state.csvExport)return!0;for(var a=0;a<e.accountsList.length;++a){var n=e.accountsList[a],r=this.props.accountsList[a];if(n&&r&&n.get("history")!==r.get("history"))return!0}return!1}},{key:"componentDidUpdate",value:function(){if(this._updateTooltip(),this.state.csvExport){this.state.csvExport=!1;var e=document.getElementById("csv_export_container").childNodes,t="",a=!0,n=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var l=s.value.childNodes;""!==t&&(t+="\n"),t+=[q(l[0]),q(l[1]),q(l[2]),q(l[3])].join(",")}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}var c=new Blob([t],{type:"text/csv;charset=utf-8"}),u=new Date;Object(i.saveAs)(c,"btshist-"+u.getFullYear()+"-"+("0"+(u.getMonth()+1)).slice(-2)+"-"+("0"+u.getDate()).slice(-2)+"-"+("0"+u.getHours()).slice(-2)+("0"+u.getMinutes()).slice(-2)+".csv")}if(!this.props.fullHeight){var p=this.refs.transactions;f.a.update(p),this._setHeaderHeight()}}},{key:"_onIncreaseLimit",value:function(){this.setState({limit:this.state.limit+30})}},{key:"_getHistory",value:function(e,t,a){var n=[],r=new Set,s=!0,o=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;if(u){var p=u.get("history");p&&(n=n.concat(p.toJS().filter(function(e){return!r.has(e.id)&&r.add(e.id)})))}}}catch(e){o=!0,i=e}finally{try{!s&&c.return&&c.return()}finally{if(o)throw i}}return t&&(n=n.filter(function(e){return e.op[0]===P[t]})),a&&(n=n.filter(function(e){return a.fields.reduce(function(t,n){switch(n){case"asset_id":return t&&e.op[1].amount[n]===a.values[n];default:return t&&e.op[1][n]===a.values[n]}},!0)})),n}},{key:"_downloadCSV",value:function(){this.setState({csvExport:!0})}},{key:"_onChangeFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"_findActiveFilter",value:function(e){var t=this;return e.find(function(e){return e===t.state.filter})}},{key:"_updateTooltip",value:function(){C.a.rebuild()}},{key:"_renderFilters",value:function(e){var t=this,a=this._findActiveFilter(e);return a?r.a.createElement("div",{className:y()("select",{"is-open":this.state.openFilter})},r.a.createElement("span",{className:"placeholder",onClick:function(e){e.preventDefault(),t.setState({openFilter:!t.state.openFilter})}},g.a.translate("transaction.trxTypes."+a)),r.a.createElement("ul",null,e.filter(function(e){return e!==a}).map(function(e){return r.a.createElement("li",{key:""+e,onClick:function(a){a.preventDefault(),t.setState({filter:e}),t.setState({openFilter:!1})}},g.a.translate("transaction.trxTypes."+e))}))):null}},{key:"render",value:function(){var e=this,t=this.props,a=t.accountsList,n=t.compactView,s=t.filter,i=t.customFilter,c=t.style,u=(t.maxHeight,this.state),p=u.limit,d=(u.headerHeight,1===a.length&&a[0]?a[0].get("id"):null),m=this._getHistory(a,this.props.showFilters&&"all"!==this.state.filter?this.state.filter:s,i).sort(I),f=m.length;C.a.rebuild();var b=null;b=["all","transfer","limit_order_create","limit_order_cancel","fill_order","account_create","account_update","asset_create","witness_withdraw_pay","vesting_balance_withdraw"];var _=m.length?m.slice(0,p).map(function(e){return r.a.createElement(l.a,{includeOperationId:!0,operationId:e.id,style:j,key:e.id,op:e.op,result:e.result,block:e.block_num,current:d,hideFee:!0,inverted:!1,hideOpLabel:n,fullDate:!0})}):[r.a.createElement("tr",{key:"no_recent"},r.a.createElement("td",{colSpan:n?"2":"3"},r.a.createElement(o.a,{content:"operation.no_recent"})))];return(this.props.showMore&&f>this.props.limit||p<f)&&_.push(r.a.createElement("tr",{className:"total-value",key:"total_value"},r.a.createElement("td",{className:"column-hide-tiny"}),r.a.createElement("td",{style:T}),r.a.createElement("td",{style:{textAlign:"center"}}," ",r.a.createElement("a",{onClick:this._onIncreaseLimit.bind(this)},r.a.createElement(v.a,{name:"chevron-down",title:"icons.chevron_down.transactions",className:"icon-14px"}))),r.a.createElement("td",null," "))),r.a.createElement("div",{className:"recent-transactions no-overflow",style:c},r.a.createElement("div",{className:"generic-bordered-box"},this.props.dashboard?null:r.a.createElement("div",{ref:"header"},r.a.createElement("div",{className:"block-content-header"},r.a.createElement("span",null,this.props.title?this.props.title:r.a.createElement(o.a,{content:"account.recent"})))),r.a.createElement("div",{className:"dashboard__actions"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-3"},this.props.showFilters?this._renderFilters(b):null)))),r.a.createElement("div",{className:"dashboard__adaptive"},r.a.createElement("table",{className:"dashboard__table blue-bg with-borders"+(n?"compact":"")+(this.props.dashboard?" dashboard-table":"")},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"column-hide-tiny",style:j},r.a.createElement(o.a,{content:"account.transactions.id"})),r.a.createElement("th",{className:"column-hide-tiny",style:j},r.a.createElement(o.a,{content:"account.transactions.type",onLoad:this._updateTooltip()})),r.a.createElement("th",{style:j},r.a.createElement(o.a,{content:"account.transactions.fee"})),r.a.createElement("th",{style:j},r.a.createElement(o.a,{content:"account.transactions.info"})),r.a.createElement("th",{style:j},r.a.createElement(o.a,{content:"account.transactions.time"})))),r.a.createElement(h.a,{component:"tbody",transitionName:"newrow"},_))),f>0?r.a.createElement("div",{className:"export-row",style:{marginTop:"20px"}},r.a.createElement("a",{className:"csv-export",href:"#",onClick:function(t){t.preventDefault(),e._downloadCSV()}},r.a.createElement("img",{src:k.csvIcon,alt:""}),g.a.translate("transaction.csv_tip"))):null,f>0&&this.state.csvExport&&r.a.createElement("div",{id:"csv_export_container",style:{display:"none"}},r.a.createElement("div",null,r.a.createElement("div",null,"DATE"),r.a.createElement("div",null,"OPERATION"),r.a.createElement("div",null,"MEMO"),r.a.createElement("div",null,"AMOUNT")),m.map(function(e){return r.a.createElement(l.a,{key:e.id,op:e.op,result:e.result,block:e.block_num,inverted:!1,csvExportMode:!0})}))))}}]),t}();D.propTypes={accountsList:c.a.ChainAccountsList.isRequired,compactView:w.a.bool,limit:w.a.number,maxHeight:w.a.number,fullHeight:w.a.bool,showFilters:w.a.bool},D.defaultProps={limit:25,maxHeight:500,fullHeight:!1,showFilters:!1},D=Object(u.a)(D);var R=function(e){function t(){return x(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,r.a.Component),O(t,[{key:"render",value:function(){return r.a.createElement("span",{className:"wrapper"},this.props.children(this.props))}}]),t}();R.propTypes={asset:c.a.ChainAsset.isRequired,to:c.a.ChainAccount.isRequired,fromAccount:c.a.ChainAccount.isRequired},R.defaultProps={asset:"1.3.0"},R=Object(u.a)(R)},531:function(e,t,a){"use strict";var n=a(64).a.isFinite;t.a=function(e){return"number"==typeof e&&n(e)}},580:function(e,t,a){var n;n=function(e){var t=function(e){var t=e.each,a=e.extend,n=e.isArray,r=e.isObject,s=e.isNumber,o=e.merge,i=e.pick,l=e.reduce;return{getColor:function(t,a){var n,r,s,o,l=a.index,c=a.mapOptionsToLevel,u=a.parentColor,p=a.parentColorIndex,d=a.series,h=a.colors,m=a.siblings,f=d.points;return t&&(f=f[t.i],t=c[t.level]||{},(n=f&&t.colorByPoint)&&(s=f.index%(h?h.length:d.chart.options.chart.colorCount),r=h&&h[s]),h=f&&f.options.color,n=t&&t.color,(c=u)&&(c=(c=t&&t.colorVariation)&&"brightness"===c.key?e.color(u).brighten(l/m*c.to).get():u),n=i(h,n,r,c,d.color),o=i(f&&f.options.colorIndex,t&&t.colorIndex,s,p,a.colorIndex)),{color:n,colorIndex:o}},getLevelOptions:function(e){var t,i,c,u,p=null;if(r(e))for(p={},c=s(e.from)?e.from:1,u=e.levels,i={},t=r(e.defaults)?e.defaults:{},n(u)&&(i=l(u,function(e,n){var i,l;return r(n)&&s(n.level)&&(i="boolean"==typeof(l=o({},n)).levelIsConstant?l.levelIsConstant:t.levelIsConstant,delete l.levelIsConstant,delete l.level,n=n.level+(i?0:c-1),r(e[n])?a(e[n],l):e[n]=l),e},{})),u=s(e.to)?e.to:1,e=0;e<=u;e++)p[e]=o({},t,r(i[e])?i[e]:{});return p},setTreeValues:function e(n,r){var s=r.before,o=r.idRoot,l=r.mapIdToNode[o],c=r.points[n.i],u=c&&c.options||{},p=0,d=[];return a(n,{levelDynamic:n.level-("boolean"!=typeof r.levelIsConstant||r.levelIsConstant?0:l.level),name:i(c&&c.name,""),visible:o===n.id||"boolean"==typeof r.visible&&r.visible}),"function"==typeof s&&(n=s(n,r)),t(n.children,function(t,s){var o=a({},r);a(o,{index:s,siblings:n.children.length,visible:n.visible}),t=e(t,o),d.push(t),t.visible&&(p+=t.val)}),n.visible=0<p||n.visible,s=i(u.value,p),a(n,{children:d,childrenTotal:p,isLeaf:n.visible&&!p,val:s}),n},updateRootId:function(e){var t;return r(e)&&(t=r(e.options)?e.options:{},t=i(e.rootNode,t.rootId,""),r(e.userOptions)&&(e.userOptions.rootId=t),e.rootNode=t),t}}}(e);!function(e,t){var a=e.seriesType,n=e.seriesTypes,r=e.map,s=e.merge,o=e.extend,i=e.noop,l=e.each,c=t.getColor,u=t.getLevelOptions,p=e.grep,d=e.isNumber,h=e.isObject,m=e.isString,f=e.pick,b=e.Series,g=e.stableSort,v=e.Color,_=e.reduce,y=function(e,t,a){a=a||this,!1!==(e=t.call(a,e))&&y(e,t,a)},E=t.updateRootId;a("treemap","scatter",{showInLegend:!1,marker:!1,colorByPoint:!1,dataLabels:{enabled:!0,defer:!1,verticalAlign:"middle",formatter:function(){return this.point.name||this.point.id},inside:!0},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}</b>: {point.value}<br/>"},ignoreHiddenPoint:!0,layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,drillUpButton:{position:{align:"right",x:-10,y:10}},borderColor:"#e6e6e6",borderWidth:1,opacity:.15,states:{hover:{borderColor:"#999999",brightness:n.heatmap?0:.1,halo:!1,opacity:.75,shadow:!1}}},{pointArrayMap:["value"],axisTypes:n.heatmap?["xAxis","yAxis","colorAxis"]:["xAxis","yAxis"],directTouch:!0,optionalAxis:"colorAxis",getSymbol:i,parallelArrays:["x","y","value","colorValue"],colorKey:"colorValue",translateColors:n.heatmap&&n.heatmap.prototype.translateColors,colorAttribs:n.heatmap&&n.heatmap.prototype.colorAttribs,trackerGroups:["group","dataLabelsGroup"],getListOfParents:function(t,a){return function(t,a,n){n=n||this,e.objectEach(t,function(e,r){a.call(n,e,r,t)})}(t=_(t||[],function(e,t,a){return void 0===e[t=f(t.parent,"")]&&(e[t]=[]),e[t].push(a),e},{}),function(t,n,r){""!==n&&-1===e.inArray(n,a)&&(l(t,function(e){r[""].push(e)}),delete r[n])}),t},getTree:function(){var e=r(this.data,function(e){return e.id});e=this.getListOfParents(this.data,e);return this.nodeMap=[],this.buildNode("",-1,0,e,null)},init:function(t,a){b.prototype.init.call(this,t,a),this.options.allowDrillToNode&&e.addEvent(this,"click",this.onClickDrillToNode)},buildNode:function(e,t,a,n,r){var s,o=this,i=[],c=o.points[t],u=0;return l(n[e]||[],function(t){s=o.buildNode(o.points[t].id,t,a+1,n,e),u=Math.max(s.height+1,u),i.push(s)}),t={id:e,i:t,children:i,height:u,level:a,parent:r,visible:!1},o.nodeMap[t.id]=t,c&&(c.node=t),t},setTreeValues:function(e){var t,a=this,n=a.options,r=a.nodeMap[a.rootNode],s=(n="boolean"!=typeof n.levelIsConstant||n.levelIsConstant,0),i=[],c=a.points[e.i];return l(e.children,function(e){e=a.setTreeValues(e),i.push(e),e.ignore||(s+=e.val)}),g(i,function(e,t){return e.sortIndex-t.sortIndex}),t=f(c&&c.options.value,s),c&&(c.value=t),o(e,{children:i,childrenTotal:s,ignore:!(f(c&&c.visible,!0)&&0<t),isLeaf:e.visible&&!s,levelDynamic:e.level-(n?0:r.level),name:f(c&&c.name,""),sortIndex:f(c&&c.sortIndex,-t),val:t}),e},calculateChildrenAreas:function(e,t){var a,n=this,r=n.options,o=n.mapOptionsToLevel[e.level+1],i=f(n[o&&o.layoutAlgorithm]&&o.layoutAlgorithm,r.layoutAlgorithm),c=r.alternateStartingDirection;e=p(e.children,function(e){return!e.ignore}),o&&o.layoutStartingDirection&&(t.direction="vertical"===o.layoutStartingDirection?0:1),a=n[i](t,e),l(e,function(e,r){r=a[r],e.values=s(r,{val:e.childrenTotal,direction:c?1-t.direction:t.direction}),e.pointValues=s(r,{x:r.x/n.axisRatio,width:r.width/n.axisRatio}),e.children.length&&n.calculateChildrenAreas(e,e.values)})},setPointValues:function(){var e=this,t=e.xAxis,a=e.yAxis;l(e.points,function(n){var r,s,o,i=n.node,l=i.pointValues;o=(e.pointAttribs(n)["stroke-width"]||0)%2/2,l&&i.visible?(i=Math.round(t.translate(l.x,0,0,0,1))-o,r=Math.round(t.translate(l.x+l.width,0,0,0,1))-o,s=Math.round(a.translate(l.y,0,0,0,1))-o,l=Math.round(a.translate(l.y+l.height,0,0,0,1))-o,n.shapeType="rect",n.shapeArgs={x:Math.min(i,r),y:Math.min(s,l),width:Math.abs(r-i),height:Math.abs(l-s)},n.plotX=n.shapeArgs.x+n.shapeArgs.width/2,n.plotY=n.shapeArgs.y+n.shapeArgs.height/2):(delete n.plotX,delete n.plotY)})},setColorRecursive:function(e,t,a,n,r){var s,o=this,i=(i=o&&o.chart)&&i.options&&i.options.colors;e&&(s=c(e,{colors:i,index:n,mapOptionsToLevel:o.mapOptionsToLevel,parentColor:t,parentColorIndex:a,series:o,siblings:r}),(t=o.points[e.i])&&(t.color=s.color,t.colorIndex=s.colorIndex),l(e.children||[],function(t,a){o.setColorRecursive(t,s.color,s.colorIndex,a,e.children.length)}))},algorithmGroup:function(e,t,a,n){this.height=e,this.width=t,this.plot=n,this.startDirection=this.direction=a,this.lH=this.nH=this.lW=this.nW=this.total=0,this.elArr=[],this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(e,t){return Math.max(e/t,t/e)}},this.addElement=function(e){this.lP.total=this.elArr[this.elArr.length-1],this.total+=e,0===this.direction?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH)),this.elArr.push(e)},this.reset=function(){this.lW=this.nW=0,this.elArr=[],this.total=0}},algorithmCalcPoints:function(e,t,a,n){var r,s,o,i,c,u=a.lW,p=a.lH,d=a.plot,h=0,m=a.elArr.length-1;t?(u=a.nW,p=a.nH):c=a.elArr[a.elArr.length-1],l(a.elArr,function(e){(t||h<m)&&(0===a.direction?(r=d.x,s=d.y,i=e/(o=u)):(r=d.x,s=d.y,o=e/(i=p)),n.push({x:r,y:s,width:o,height:i}),0===a.direction?d.y+=i:d.x+=o),h+=1}),a.reset(),0===a.direction?a.width-=u:a.height-=p,d.y=d.parent.y+(d.parent.height-a.height),d.x=d.parent.x+(d.parent.width-a.width),e&&(a.direction=1-a.direction),t||a.addElement(c)},algorithmLowAspectRatio:function(e,t,a){var n,r=[],s=this,o={x:t.x,y:t.y,parent:t},i=0,c=a.length-1,u=new this.algorithmGroup(t.height,t.width,t.direction,o);return l(a,function(a){n=a.val/t.val*t.height*t.width,u.addElement(n),u.lP.nR>u.lP.lR&&s.algorithmCalcPoints(e,!1,u,r,o),i===c&&s.algorithmCalcPoints(e,!0,u,r,o),i+=1}),r},algorithmFill:function(e,t,a){var n,r,s,o,i,c=[],u=t.direction,p=t.x,d=t.y,h=t.width,m=t.height;return l(a,function(a){n=a.val/t.val*t.height*t.width,r=p,s=d,0===u?(h-=o=n/(i=m),p+=o):(m-=i=n/(o=h),d+=i),c.push({x:r,y:s,width:o,height:i}),e&&(u=1-u)}),c},strip:function(e,t){return this.algorithmLowAspectRatio(!1,e,t)},squarified:function(e,t){return this.algorithmLowAspectRatio(!0,e,t)},sliceAndDice:function(e,t){return this.algorithmFill(!0,e,t)},stripes:function(e,t){return this.algorithmFill(!1,e,t)},translate:function(){var e,t,a=this,n=a.options,r=E(a);b.prototype.translate.call(a),t=a.tree=a.getTree(),e=a.nodeMap[r],a.mapOptionsToLevel=u({from:e.level+1,levels:n.levels,to:t.height,defaults:{levelIsConstant:a.options.levelIsConstant,colorByPoint:n.colorByPoint}}),""===r||e&&e.children.length||(a.drillToNode("",!1),r=a.rootNode,e=a.nodeMap[r]),y(a.nodeMap[a.rootNode],function(e){var t=!1,n=e.parent;return e.visible=!0,(n||""===n)&&(t=a.nodeMap[n]),t}),y(a.nodeMap[a.rootNode].children,function(e){var t=!1;return l(e,function(e){e.visible=!0,e.children.length&&(t=(t||[]).concat(e.children))}),t}),a.setTreeValues(t),a.axisRatio=a.xAxis.len/a.yAxis.len,a.nodeMap[""].pointValues=r={x:0,y:0,width:100,height:100},a.nodeMap[""].values=r=s(r,{width:r.width*a.axisRatio,direction:"vertical"===n.layoutStartingDirection?0:1,val:t.val}),a.calculateChildrenAreas(t,r),a.colorAxis?a.translateColors():n.colorByPoint||a.setColorRecursive(a.tree),n.allowDrillToNode&&(n=e.pointValues,a.xAxis.setExtremes(n.x,n.x+n.width,!1),a.yAxis.setExtremes(n.y,n.y+n.height,!1),a.xAxis.setScale(),a.yAxis.setScale()),a.setPointValues()},drawDataLabels:function(){var e,t,a=this,n=a.mapOptionsToLevel,r=p(a.points,function(e){return e.node.visible});l(r,function(r){t=n[r.node.level],e={style:{}},r.node.isLeaf||(e.enabled=!1),t&&t.dataLabels&&(e=s(e,t.dataLabels),a._hasPointLabels=!0),r.shapeArgs&&(e.style.width=r.shapeArgs.width,r.dataLabel&&r.dataLabel.css({width:r.shapeArgs.width+"px"})),r.dlOptions=s(e,r.options.dataLabels)}),b.prototype.drawDataLabels.call(this)},alignDataLabel:function(e){n.column.prototype.alignDataLabel.apply(this,arguments),e.dataLabel&&e.dataLabel.attr({zIndex:(e.node.zIndex||0)+1})},pointAttribs:function(e,t){var a=h(this.mapOptionsToLevel)?this.mapOptionsToLevel:{},n=e&&a[e.node.level]||{},r=(a=this.options,t&&a.states[t]||{}),s=e&&e.getClassName()||"";return e={stroke:e&&e.borderColor||n.borderColor||r.borderColor||a.borderColor,"stroke-width":f(e&&e.borderWidth,n.borderWidth,r.borderWidth,a.borderWidth),dashstyle:e&&e.borderDashStyle||n.borderDashStyle||r.borderDashStyle||a.borderDashStyle,fill:e&&e.color||this.color},-1!==s.indexOf("highcharts-above-level")?(e.fill="none",e["stroke-width"]=0):-1!==s.indexOf("highcharts-internal-node-interactive")?(t=f(r.opacity,a.opacity),e.fill=v(e.fill).setOpacity(t).get(),e.cursor="pointer"):-1!==s.indexOf("highcharts-internal-node")?e.fill="none":t&&(e.fill=v(e.fill).brighten(r.brightness).get()),e},drawPoints:function(){var e=this,t=p(e.points,function(e){return e.node.visible});l(t,function(t){var a="level-group-"+t.node.levelDynamic;e[a]||(e[a]=e.chart.renderer.g(a).attr({zIndex:1e3-t.node.levelDynamic}).add(e.group)),t.group=e[a]}),n.column.prototype.drawPoints.call(this),e.options.allowDrillToNode&&l(t,function(t){t.graphic&&(t.drillId=e.options.interactByLeaf?e.drillToByLeaf(t):e.drillToByGroup(t))})},onClickDrillToNode:function(e){var t=(e=e.point)&&e.drillId;m(t)&&(e.setState(""),this.drillToNode(t))},drillToByGroup:function(e){var t=!1;return 1!=e.node.level-this.nodeMap[this.rootNode].level||e.node.isLeaf||(t=e.id),t},drillToByLeaf:function(e){var t=!1;if(e.node.parent!==this.rootNode&&e.node.isLeaf)for(e=e.node;!t;)(e=this.nodeMap[e.parent]).parent===this.rootNode&&(t=e.id);return t},drillUp:function(){var e=this.nodeMap[this.rootNode];e&&m(e.parent)&&this.drillToNode(e.parent)},drillToNode:function(e,t){var a=this.nodeMap[e];this.idPreviousRoot=this.rootNode,this.rootNode=e,""===e?this.drillUpButton=this.drillUpButton.destroy():this.showDrillUpButton(a&&a.name||e),this.isDirty=!0,f(t,!0)&&this.chart.redraw()},showDrillUpButton:function(e){var t=this;e=e||"< Back";var a,n,r=t.options.drillUpButton;r.text&&(e=r.text),this.drillUpButton?(this.drillUpButton.placed=!1,this.drillUpButton.attr({text:e}).align()):(n=(a=r.theme)&&a.states,this.drillUpButton=this.chart.renderer.button(e,null,null,function(){t.drillUp()},a,n&&n.hover,n&&n.select).addClass("highcharts-drillup-button").attr({align:r.position.align,zIndex:7}).add().align(r.position,!1,r.relativeTo||"plotBox"))},buildKDTree:i,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,getExtremes:function(){b.prototype.getExtremes.call(this,this.colorValueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,b.prototype.getExtremes.call(this)},getExtremesFromAll:!0,bindAxes:function(){var t={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,dataMin:0,minPadding:0,max:100,dataMax:100,maxPadding:0,startOnTick:!1,title:null,tickPositions:[]};b.prototype.bindAxes.call(this),e.extend(this.yAxis.options,t),e.extend(this.xAxis.options,t)},utils:{recursive:y,reduce:_}},{getClassName:function(){var t=e.Point.prototype.getClassName.call(this),a=this.series,n=a.options;return this.node.level<=a.nodeMap[a.rootNode].level?t+=" highcharts-above-level":this.node.isLeaf||f(n.interactByLeaf,!n.allowDrillToNode)?this.node.isLeaf||(t+=" highcharts-internal-node"):t+=" highcharts-internal-node-interactive",t},isValid:function(){return this.id||d(this.value)},setState:function(t){e.Point.prototype.setState.call(this,t),this.graphic&&this.graphic.attr({zIndex:"hover"===t?1:0})},setVisible:n.pie.prototype.pointClass.prototype.setVisible})}(e,t)},e.exports?e.exports=n:n(Highcharts)},581:function(e,t,a){var n;n=function(e){!function(e){var t,a=e.addEvent,n=e.Axis,r=e.Chart,s=e.color,o=e.each,i=e.extend,l=e.isNumber,c=e.Legend,u=e.LegendSymbolMixin,p=e.noop,d=e.merge,h=e.pick;e.ColorAxis||(t=e.ColorAxis=function(){this.init.apply(this,arguments)},i(t.prototype,n.prototype),i(t.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{overflow:"justify",rotation:0},minColor:"#e6ebf5",maxColor:"#003399",tickLength:5,showInLegend:!0},keepProps:["legendGroup","legendItemHeight","legendItemWidth","legendItem","legendSymbol"].concat(n.prototype.keepProps),init:function(e,t){var a,r="vertical"!==e.options.legend.layout;this.coll="colorAxis",a=d(this.defaultColorAxisOptions,{side:r?2:1,reversed:!r},t,{opposite:!r,showEmpty:!1,title:null,visible:e.options.legend.enabled}),n.prototype.init.call(this,e,a),t.dataClasses&&this.initDataClasses(t),this.initStops(),this.horiz=r,this.zoomEnabled=!1,this.defaultLegendLength=200},initDataClasses:function(e){var t,a=this.chart,n=0,r=a.options.chart.colorCount,i=this.options,l=e.dataClasses.length;this.dataClasses=t=[],this.legendItems=[],o(e.dataClasses,function(e,o){e=d(e),t.push(e),e.color||("category"===i.dataClassColor?(o=a.options.colors,r=o.length,e.color=o[n],e.colorIndex=n,++n===r&&(n=0)):e.color=s(i.minColor).tweenTo(s(i.maxColor),2>l?.5:o/(l-1)))})},setTickPositions:function(){if(!this.dataClasses)return n.prototype.setTickPositions.call(this)},initStops:function(){this.stops=this.options.stops||[[0,this.options.minColor],[1,this.options.maxColor]],o(this.stops,function(e){e.color=s(e[1])})},setOptions:function(e){n.prototype.setOptions.call(this,e),this.options.crosshair=this.options.marker},setAxisSize:function(){var e,t,a=this.legendSymbol,n=this.chart,r=n.options.legend||{};a?(this.left=r=a.attr("x"),this.top=e=a.attr("y"),this.width=t=a.attr("width"),this.height=a=a.attr("height"),this.right=n.chartWidth-r-t,this.bottom=n.chartHeight-e-a,this.len=this.horiz?t:a,this.pos=this.horiz?r:e):this.len=(this.horiz?r.symbolWidth:r.symbolHeight)||this.defaultLegendLength},normalizedValue:function(e){return this.isLog&&(e=this.val2lin(e)),1-(this.max-e)/(this.max-this.min||1)},toColor:function(e,t){var a,n,r,s,o=this.stops,i=this.dataClasses;if(i){for(s=i.length;s--;)if(a=(r=i[s]).from,o=r.to,(void 0===a||e>=a)&&(void 0===o||e<=o)){n=r.color,t&&(t.dataClass=s,t.colorIndex=r.colorIndex);break}}else{for(e=this.normalizedValue(e),s=o.length;s--&&!(e>o[s][0]););a=o[s]||o[s+1],e=1-((o=o[s+1]||a)[0]-e)/(o[0]-a[0]||1),n=a.color.tweenTo(o.color,e)}return n},getOffset:function(){var e=this.legendGroup,t=this.chart.axisOffset[this.side];e&&(this.axisParent=e,n.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=t)},setLegendColor:function(){var e,t=this.reversed;e=t?1:0,t=t?0:1,e=this.horiz?[e,0,t,0]:[0,t,0,e],this.legendColor={linearGradient:{x1:e[0],y1:e[1],x2:e[2],y2:e[3]},stops:this.stops}},drawLegendSymbol:function(e,t){var a=e.padding,n=e.options,r=this.horiz,s=h(n.symbolWidth,r?this.defaultLegendLength:12),o=h(n.symbolHeight,r?12:this.defaultLegendLength),i=h(n.labelPadding,r?16:30);n=h(n.itemDistance,10);this.setLegendColor(),t.legendSymbol=this.chart.renderer.rect(0,e.baseline-11,s,o).attr({zIndex:1}).add(t.legendGroup),this.legendItemWidth=s+a+(r?n:i),this.legendItemHeight=o+a+(r?i:0)},setState:function(e){o(this.series,function(t){t.setState(e)})},visible:!0,setVisible:p,getSeriesExtremes:function(){var e=this.series,t=e.length;for(this.dataMin=1/0,this.dataMax=-1/0;t--;)e[t].getExtremes(),void 0!==e[t].valueMin&&(this.dataMin=Math.min(this.dataMin,e[t].valueMin),this.dataMax=Math.max(this.dataMax,e[t].valueMax))},drawCrosshair:function(e,t){var a,r=t&&t.plotX,s=t&&t.plotY,o=this.pos,i=this.len;t&&((a=this.toPixels(t[t.series.colorKey]))<o?a=o-2:a>o+i&&(a=o+i+2),t.plotX=a,t.plotY=this.len-a,n.prototype.drawCrosshair.call(this,e,t),t.plotX=r,t.plotY=s,this.cross&&!this.cross.addedToColorAxis&&this.legendGroup&&(this.cross.addClass("highcharts-coloraxis-marker").add(this.legendGroup),this.cross.addedToColorAxis=!0,this.cross.attr({fill:this.crosshair.color})))},getPlotLinePath:function(e,t,a,r,s){return l(s)?this.horiz?["M",s-4,this.top-6,"L",s+4,this.top-6,s,this.top,"Z"]:["M",this.left,s,"L",this.left-6,s+6,this.left-6,s-6,"Z"]:n.prototype.getPlotLinePath.call(this,e,t,a,r)},update:function(e,t){var a=this.chart,r=a.legend;o(this.series,function(e){e.isDirtyData=!0}),e.dataClasses&&r.allItems&&(o(r.allItems,function(e){e.isDataClass&&e.legendGroup&&e.legendGroup.destroy()}),a.isDirtyLegend=!0),a.options[this.coll]=d(this.userOptions,e),n.prototype.update.call(this,e,t),this.legendItem&&(this.setLegendColor(),r.colorizeItem(this,!0))},remove:function(){this.legendItem&&this.chart.legend.destroyItem(this),n.prototype.remove.call(this)},getDataClassLegendSymbols:function(){var t,a=this,n=this.chart,r=this.legendItems,s=n.options.legend,l=s.valueDecimals,c=s.valueSuffix||"";return r.length||o(this.dataClasses,function(s,d){var h=!0,m=s.from,f=s.to;t="",void 0===m?t="< ":void 0===f&&(t="> "),void 0!==m&&(t+=e.numberFormat(m,l)+c),void 0!==m&&void 0!==f&&(t+=" - "),void 0!==f&&(t+=e.numberFormat(f,l)+c),r.push(i({chart:n,name:t,options:{},drawLegendSymbol:u.drawRectangle,visible:!0,setState:p,isDataClass:!0,setVisible:function(){h=this.visible=!h,o(a.series,function(e){o(e.points,function(e){e.dataClass===d&&e.setVisible(h)})}),n.legend.colorizeItem(this,h)}},s))}),r},name:""}),o(["fill","stroke"],function(t){e.Fx.prototype[t+"Setter"]=function(){this.elem.attr(t,s(this.start).tweenTo(s(this.end),this.pos),null,!0)}}),a(r,"afterGetAxes",function(){var e=this.options.colorAxis;this.colorAxis=[],e&&new t(this,e)}),a(c,"afterGetAllItems",function(t){var a=[],n=this.chart.colorAxis[0];for(n&&n.options&&n.options.showInLegend&&(n.options.dataClasses?a=n.getDataClassLegendSymbols():a.push(n),o(n.series,function(a){e.erase(t.allItems,a)})),n=a.length;n--;)t.allItems.unshift(a[n])}),a(c,"afterColorizeItem",function(e){e.visible&&e.item.legendColor&&e.item.legendSymbol.attr({fill:e.item.legendColor})}),a(c,"afterUpdate",function(e,t,a){this.chart.colorAxis[0]&&this.chart.colorAxis[0].update({},a)}))}(e),function(e){var t=e.defined,a=e.each,n=e.noop,r=e.seriesTypes;e.colorPointMixin={isValid:function(){return null!==this.value&&1/0!==this.value&&-1/0!==this.value},setVisible:function(e){var t=this,n=e?"show":"hide";a(["graphic","dataLabel"],function(e){t[e]&&t[e][n]()})},setState:function(t){e.Point.prototype.setState.call(this,t),this.graphic&&this.graphic.attr({zIndex:"hover"===t?1:0})}},e.colorSeriesMixin={pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:n,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:r.column.prototype.pointAttribs,translateColors:function(){var e=this,t=this.options.nullColor,n=this.colorAxis,r=this.colorKey;a(this.data,function(a){var s=a[r];(s=a.options.color||(a.isNull?t:n&&void 0!==s?n.toColor(s,a):a.color||e.color))&&(a.color=s)})},colorAttribs:function(e){var a={};return t(e.color)&&(a[this.colorProp||"fill"]=e.color),a}}}(e),function(e){var t=e.colorPointMixin,a=e.each,n=e.merge,r=e.noop,s=e.pick,o=e.Series,i=e.seriesType,l=e.seriesTypes;i("heatmap","scatter",{animation:!1,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}}},n(e.colorSeriesMixin,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var e;l.scatter.prototype.init.apply(this,arguments),(e=this.options).pointRange=s(e.pointRange,e.colsize||1),this.yAxis.axisPointRange=e.rowsize||1},translate:function(){var e=this.options,t=this.xAxis,n=this.yAxis,r=e.pointPadding||0,o=function(e,t,a){return Math.min(Math.max(t,e),a)};this.generatePoints(),a(this.points,function(a){var i=(e.colsize||1)/2,l=(e.rowsize||1)/2,c=o(Math.round(t.len-t.translate(a.x-i,0,1,0,1)),-t.len,2*t.len),u=(i=o(Math.round(t.len-t.translate(a.x+i,0,1,0,1)),-t.len,2*t.len),o(Math.round(n.translate(a.y-l,0,1,0,1)),-n.len,2*n.len)),p=(l=o(Math.round(n.translate(a.y+l,0,1,0,1)),-n.len,2*n.len),s(a.pointPadding,r));a.plotX=a.clientX=(c+i)/2,a.plotY=(u+l)/2,a.shapeType="rect",a.shapeArgs={x:Math.min(c,i)+p,y:Math.min(u,l)+p,width:Math.abs(i-c)-2*p,height:Math.abs(l-u)-2*p}}),this.translateColors()},drawPoints:function(){l.column.prototype.drawPoints.call(this),a(this.points,function(e){e.graphic.attr(this.colorAttribs(e))},this)},animate:r,getBox:r,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,alignDataLabel:l.column.prototype.alignDataLabel,getExtremes:function(){o.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,o.prototype.getExtremes.call(this)}}),e.extend({haloPath:function(e){if(!e)return[];var t=this.shapeArgs;return["M",t.x-e,t.y-e,"L",t.x-e,t.y+t.height+e,t.x+t.width+e,t.y+t.height+e,t.x+t.width+e,t.y-e,"Z"]}},t))}(e)},e.exports?e.exports=n:n(Highcharts)},7861:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(7),o=a.n(s),i=a(1),l=a.n(i),c=a(57),u=a(108),p=a(20),d=a.n(p),h=a(34),m=a(6),f=a(13),b=a(5),g=a(86),v=a(16),_=a(3),y=a.n(_),E=a(4),w=a(43),k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=function(e){function t(){A(this,t);var e=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={amount:0},e}return O(t,r.a.Component),k(t,[{key:"onAmountChanged",value:function(e){var t=e.amount;e.asset;this.setState({amount:t})}},{key:"onSubmit",value:function(e){e.preventDefault(),d.a.publish("settlement_modal","close");var t=b.a.get_asset_precision(this.props.asset.get("precision")),a=this.state.amount.replace(/,/g,"");a*=t;var n=g.a.new_transaction();return n.add_type_operation("asset_settle",{fee:{amount:0,asset_id:0},account:this.props.account.get("id"),amount:{amount:a,asset_id:this.props.asset.get("id")}}),v.a.process_transaction(n,null,!0).then(function(e){return console.log("asset settle result:",e),!0}).catch(function(e){return console.error("asset settle error: ",e),!1})}},{key:"render",value:function(){var e=this.props,t=e.asset,a=e.account,n=this.state.amount;if(!t)return null;var s=t.get("id"),o=a.get("balances"),i=null,u=0;o&&o.forEach(function(e){var t=E.b.getObject(e);if(!t.get("balance"))return null;t.get("asset_type")===s&&(i=e,u=t.get("balance"))});var p=b.a.get_asset_precision(t.get("precision")),d=n?n.replace(/,/g,""):0,h=parseFloat(d)>0&&parseFloat(d)*p<=parseFloat(u)?"button btn large outline":"button disabled btn large outline",m=r.a.createElement("span",null,r.a.createElement(l.a,{content:"exchange.balance"}),": ",i?r.a.createElement(c.a,{balance:i}):"0 "+t.get("symbol"));return r.a.createElement("form",{className:"grid-block vertical full-width-content"},r.a.createElement(l.a,{component:"h3",style:{textAlign:"center"},content:"modal.settle.title",asset:t.get("symbol")}),r.a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},r.a.createElement("div",{className:"content-block"},r.a.createElement(w.a,{label:"modal.settle.amount",amount:n,onChange:this.onAmountChanged.bind(this),display_balance:m,asset:s,assets:[s],tabIndex:1})),r.a.createElement("div",{className:"content-block"},r.a.createElement("input",{type:"submit",className:h,onClick:this.onSubmit.bind(this),value:y.a.translate("modal.settle.submit")}))))}}]),t}();x.propTypes={asset:m.a.ChainAsset.isRequired,account:m.a.ChainAccount.isRequired},x=Object(f.a)(x);var N=function(e){function t(){A(this,t);var e=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return O(t,r.a.Component),k(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){d.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){return r.a.createElement(h.a,{id:this.props.modalId,onClose:this.onClose.bind(this),overlay:!0,ref:"settlement_modal"},r.a.createElement("div",{className:"grid-block vertical"},r.a.createElement(x,this.props)))}}]),t}(),S=a(141),P=a(79),j=a(50),T=a(15),I=a(31),q=a(42),D=a.n(q),R=a(328),M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},L=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function V(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var U=function(e){function t(e){return F(this,t),B(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return V(t,R["b"]),L(t,[{key:"componentDidMount",value:function(){D.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,a,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.base!==this.props.base}},{key:"getValue",value:function(){var e=this.props.marketStats;return e&&e.change?e.change:0}},{key:"render",value:function(){var e=this.getValue(),t=0===parseFloat(e)?"":parseFloat(e)<0?"change-down":"change-up",a=r.a.createElement(P.b,{style:"decimal",value:e,minimumFractionDigits:2,maximumFractionDigits:2});return r.a.createElement("span",{className:"value "+t},a,"%")}}]),t}();U.defaultProps={fullPrecision:!1,noDecimals:!1,hide_asset:!1},U=Object(j.a)(U,{propNames:["quote","base"],defaultProps:{quote:"1.3.0"}});var W=function(e){function t(){return F(this,t),B(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return V(t,r.a.Component),L(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,a=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["refCallback"]);return r.a.createElement(U,M({},a,{ref:t}))}}]),t}();W=Object(T.connect)(W,{listenTo:function(){return[I.a]},getProps:function(e){return{marketStats:I.a.getState().allMarketStats.get(e.marketId),allMarketStats:I.a.getState().allMarketStats}}});var H=a(22),z=a(17),J=a(63),K=a(221),G=a(12),X=a(11),Y=a(33),Z=a(2),Q=a.n(Z),$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ee=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function te(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var se={textAlign:"right"},oe={textAlign:"left"},ie=function(e){function t(){return ae(this,t),ne(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return re(t,r.a.Component),ee(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.object.getIn(["call_price","quote","asset_id"]);this.refs[t].show()}},{key:"_onClosePosition",value:function(e){e.preventDefault();var t=g.a.new_transaction();t.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.object.get("borrower"),delta_collateral:{amount:-this.props.object.get("collateral"),asset_id:this.props.object.getIn(["call_price","base","asset_id"])},delta_debt:{amount:-this.props.object.get("debt"),asset_id:this.props.object.getIn(["call_price","quote","asset_id"])}}),v.a.process_transaction(t,null,!0)}},{key:"_getBalance",value:function(){var e=this.props.account,t=this.props.object.getIn(["call_price","quote","asset_id"]),a=e.get("balances"),n=0;return a&&a.forEach(function(e,a){if(a==t){var r=E.b.getObject(e);n=r.get("balance")}}),n}},{key:"_getFeedPrice",value:function(){return this.props?1/b.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_getCollateralRatio",value:function(){var e=this.props.object.toJS();return b.a.get_asset_amount(e.collateral,this.props.collateralAsset)/(b.a.get_asset_amount(e.debt,this.props.debtAsset)/this._getFeedPrice())}},{key:"_getMR",value:function(){return this.props.debtAsset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3}},{key:"_getStatusClass",value:function(){var e=this._getCollateralRatio(),t=this._getMR();return isNaN(e)?null:e<t?"danger":e<t+.5?"warning":""}},{key:"_getCRTip",value:function(){var e=this._getStatusClass(),t=this._getMR();return e&&""!==e?"danger"===e?y.a.translate("tooltip.cr_danger",{mr:t}):"warning"===e?y.a.translate("tooltip.cr_warning",{mr:t}):null:null}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.context.router.push(e)}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,a=e.collateralAsset,n=e.object.toJS(),o=this._getCollateralRatio(),i=b.a.get_asset_amount(n.debt,this.props.debtAsset),c=this._getBalance(),p=this._getStatusClass(),d="/asset/"+t.get("symbol"),h="/market/"+t.get("symbol")+"_"+a.get("symbol"),m=r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:d,onClick:this._onNavigate.bind(this,d)},r.a.createElement(l.a,{content:"account.asset_details"}))),r.a.createElement("li",null,r.a.createElement("a",{href:h,onClick:this._onNavigate.bind(this,h)},r.a.createElement(H.a,{name:t.get("symbol")})," :"," ",r.a.createElement(H.a,{name:a.get("symbol")}))));return r.a.createElement("tr",{className:"margin-row"},r.a.createElement("td",{style:oe},r.a.createElement(X.b,{to:"/asset/"+t.get("symbol")},r.a.createElement(H.a,{noTip:!0,name:t.get("symbol")}))),r.a.createElement("td",{style:se},r.a.createElement(z.a,{amount:c,asset:n.call_price.quote.asset_id,assetInfo:m,hide_asset:!0})),r.a.createElement("td",{style:se},r.a.createElement(z.a,{amount:n.debt,asset:n.call_price.quote.asset_id,assetInfo:m,hide_asset:!0})),r.a.createElement("td",{style:se,className:"column-hide-medium"},r.a.createElement(z.a,{decimalOffset:5,amount:n.collateral,asset:n.call_price.base.asset_id})),r.a.createElement("td",{"data-place":"bottom","data-tip":this._getCRTip(),className:"center-content "+p},b.a.format_number(o,2)),r.a.createElement("td",{style:se},r.a.createElement(u.a,{noTip:!0,balances:Object(s.List)(),debt:te({},t.get("id"),n.debt),collateral:te({},a.get("id"),parseInt(n.collateral,10)),hide_asset:!0})),r.a.createElement("td",{style:se,className:"column-hide-small"},r.a.createElement(J.a,{base_amount:n.call_price.base.amount,base_asset:n.call_price.base.asset_id,quote_amount:n.call_price.quote.amount,quote_asset:n.call_price.quote.asset_id,hide_symbols:!0})),r.a.createElement("td",{style:se,className:"column-hide-small"},r.a.createElement(J.a,{base_amount:t.getIn(["bitasset","current_feed","settlement_price","base","amount"]),base_asset:n.call_price.quote.asset_id,quote_amount:t.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),quote_asset:n.call_price.base.asset_id,hide_symbols:!0})),r.a.createElement("td",{className:"center-content column-hide-small",style:oe},r.a.createElement(J.a,{base_amount:n.call_price.base.amount,base_asset:n.call_price.base.asset_id,quote_amount:n.call_price.quote.amount,quote_asset:n.call_price.quote.asset_id,hide_value:!0})),r.a.createElement("td",null,r.a.createElement("div",{"data-place":"left","data-tip":y.a.translate("tooltip.update_position"),style:{paddingBottom:5}},r.a.createElement("a",{onClick:this._onUpdatePosition.bind(this)},r.a.createElement(G.a,{name:"adjust",title:"icons.adjust",className:"icon-14px rotate90"})))),r.a.createElement("td",null,r.a.createElement("div",{"data-place":"left","data-tip":y.a.translate("tooltip.close_position",{amount:i,asset:t.get("symbol")}),style:{paddingBottom:5}},r.a.createElement("a",{onClick:this._onClosePosition.bind(this)},r.a.createElement(G.a,{name:"cross-circle",title:"icons.cross_circle.close_position",className:"icon-14px"}))),t?r.a.createElement(K.a,{ref:"cp_modal_"+n.call_price.quote.asset_id,modalId:"cp_modal_"+n.call_price.quote.asset_id,quote_asset:n.call_price.quote.asset_id,backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}();ie.propTypes={debtAsset:m.a.ChainAsset.isRequired,collateralAsset:m.a.ChainAsset.isRequired},ie.defaultProps={tempComponent:"tr"},ie.contextTypes={router:Q.a.object},ie=Object(f.a)(ie);var le=function(e){function t(){return ae(this,t),ne(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return re(t,r.a.Component),ee(t,[{key:"render",value:function(){var e=this.props,t=e.object,a=e.account,n=t.getIn(["call_price","quote","asset_id"]),s=t.getIn(["call_price","base","asset_id"]);return r.a.createElement(ie,$({debtAsset:n,collateralAsset:s,account:a},this.props))}}]),t}();le.propTypes={object:m.a.ChainObject.isRequired},le=Object(f.a)(le);var ce=function(e){function t(){return ae(this,t),ne(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return re(t,r.a.Component),ee(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.debtAsset.get("id");this.refs[t].show()}},{key:"_getFeedPrice",value:function(){return this.props?1/b.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.context.router.push(e)}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,a=e.collateralAsset,n=e.account,s=t.get("id"),o=n.get("balances"),i=0;o&&o.forEach(function(e,t){if(t==s){var a=E.b.getObject(e);i=a.get("balance")}});var c="/asset/"+t.get("symbol"),u="/market/"+t.get("symbol")+"_"+a.get("symbol"),p=r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:c,onClick:this._onNavigate.bind(this,c)},r.a.createElement(l.a,{content:"account.asset_details"}))),r.a.createElement("li",null,r.a.createElement("a",{href:u,onClick:this._onNavigate.bind(this,u)},r.a.createElement(H.a,{name:t.get("symbol")})," :"," ",r.a.createElement(H.a,{name:a.get("symbol")}))));return r.a.createElement("tr",{className:"margin-row"},r.a.createElement("td",{style:oe},r.a.createElement(X.b,{to:"/asset/"+t.get("symbol")},r.a.createElement(H.a,{noTip:!0,name:t.get("symbol")}))),r.a.createElement("td",{style:se},r.a.createElement(z.a,{amount:i,asset:t.get("id"),assetInfo:p,hide_asset:!0})),r.a.createElement("td",{style:se},r.a.createElement(z.a,{amount:0,asset:t.get("id"),assetInfo:p,hide_asset:!0})),r.a.createElement("td",{style:se,className:"column-hide-medium"},r.a.createElement(z.a,{decimalOffset:5,amount:0,asset:a.get("id")})),r.a.createElement("td",null),r.a.createElement("td",{style:se}),r.a.createElement("td",{style:se,className:"column-hide-small"}),r.a.createElement("td",{style:se,className:"column-hide-small"}),r.a.createElement("td",{className:"center-content column-hide-small",style:oe}),r.a.createElement("td",null,r.a.createElement("div",{"data-place":"left","data-tip":y.a.translate("tooltip.update_position"),style:{paddingBottom:5}},r.a.createElement("a",{onClick:this._onUpdatePosition.bind(this)},r.a.createElement(G.a,{name:"adjust",title:"icons.adjust",className:"icon-14px rotate90"})))),r.a.createElement("td",null,t?r.a.createElement(K.a,{ref:"cp_modal_"+t.get("id"),modalId:"cp_modal_"+t.get("id"),quote_asset:t.get("id"),backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}();ce.propTypes={debtAsset:m.a.ChainAsset.isRequired,collateralAsset:m.a.ChainAsset.isRequired},ce.defaultProps={tempComponent:"tr"},ce.contextTypes={router:Q.a.object},ce=Object(f.a)(ce);var ue=function(e){function t(){return ae(this,t),ne(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return re(t,r.a.Component),ee(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.callOrders,s=t.bitAssets;if(n=n.filter(function(e){return!!e}),!(s=s.filter(function(e){return!!e})).length)return null;if(n.forEach(function(e){if(e){var t=s.findIndex(function(t){return t&&t.get("id")===e.getIn(["call_price","quote","asset_id"])});-1!==t&&s.splice(t,1)}}),!s.length)return null;var o=s.map(function(t){return r.a.createElement(ce,$({key:t.get("id"),debtAsset:t.get("id"),collateralAsset:t.getIn(["bitasset","options","short_backing_asset"]),account:a},e.props))});return r.a.createElement("tbody",null,o)}}]),t}();ue.propTypes={callOrders:m.a.ChainObjectsList},ue=Object(f.a)(ue),ue=Object(j.a)(ue,{propNames:["bitAssets"],defaultProps:{bitAssets:["1.3.103","1.3.113","1.3.120","1.3.121","1.3.958","1.3.1325","1.3.1362","1.3.105","1.3.106"]},asList:!0});var pe=function(e){var t=e.callOrders,a=e.account,n=e.className,s=e.children,i=e.preferredUnit;return r.a.createElement("div",{className:"dashboard__adaptive"},r.a.createElement("table",{className:"dashboard__table "+n},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:oe},r.a.createElement(l.a,{content:"explorer.asset.title"})),r.a.createElement("th",{style:se},r.a.createElement(l.a,{content:"exchange.balance"})),r.a.createElement("th",{style:se},r.a.createElement(l.a,{content:"transaction.borrow_amount"})),r.a.createElement("th",{style:se,className:"column-hide-medium"},r.a.createElement(l.a,{content:"transaction.collateral"})),r.a.createElement("th",null,r.a.createElement("div",{className:"tooltip inline-block","data-place":"top","data-tip":y.a.translate("tooltip.coll_ratio")},r.a.createElement(l.a,{content:"borrow.coll_ratio"}))),r.a.createElement("th",null,r.a.createElement(Y.a,{noLink:!0,string:"account.total",keys:[{type:"asset",value:i,arg:"asset"}]})),r.a.createElement("th",{style:se,className:"column-hide-small"},r.a.createElement("div",{className:"tooltip inline-block","data-place":"top","data-tip":y.a.translate("tooltip.call_price")},r.a.createElement(l.a,{content:"exchange.call"}))),r.a.createElement("th",{style:se,className:"column-hide-small"},r.a.createElement(l.a,{content:"exchange.price"})),r.a.createElement("th",{className:"column-hide-small",style:oe},r.a.createElement(l.a,{content:"explorer.assets.units"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"borrow.adjust_short"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"transfer.close"})))),r.a.createElement("tbody",null,t.sort(function(e,t){return e.split(".")[2]-t.split(".")[2]}).map(function(e){return r.a.createElement(le,{key:e,object:e,account:a})})),r.a.createElement(ue,{account:a,callOrders:o.a.List(t)}),r.a.createElement("tbody",null,s)))},de=a(453),he=a(258),me=a(115),fe=a(14),be=a(200),ge=a(40),ve=function(e){var t=this;this.id=e.toJS?e.get(0):e[0],this.weight=e.toJS?e.get(1):e[1],this.isAvailable=function(e){return e.includes?e.includes(t.id):-1!==e.indexOf(t)}},_e={AccountPermission:function(e,t,a){var n=this;this.id=e.get("id"),this.weight=t,this.threshold=e.getIn([a,"weight_threshold"]),this.accounts=[],this.keys=e.getIn([a,"key_auths"]).map(function(e){return new ve(e)}).toArray(),this.isAvailable=function(e){return e.includes?e.includes(n.id):-1!==e.indexOf(n)},this._sumWeights=function(e){if(n.isNested()||n.isMultiSig()){var t=n.accounts.reduce(function(t,a){return t+(a._sumWeights(e)?a.weight:0)},0);return Math.floor(t/n.threshold)}return n.isAvailable(e)?n.weight:0},this.getStatus=function(e,t){if(n.isNested()){var a=n.accounts.reduce(function(t,a){return t+a._sumWeights(e)},0);return n.keys.length&&(a+=n.sumKeys(t)),a}var r=n._sumWeights(e);return n.isMultiSig()&&(r+=n.sumKeys(t)),r},this.sumKeys=function(e){return n.keys.reduce(function(t,a){return t+(a.isAvailable(e)?a.weight:0)},0)},this.isNested=function(){return n.accounts.length>0},this.isMultiSig=function(){return n.keys.reduce(function(e,t){return e||t.weight<n.threshold},!1)},this.getMissingSigs=function(e){var t=[],a=[];return n.isNested()?a=n.accounts.reduce(function(t,a){return t.concat(a.getMissingSigs(e))},[]):n.isAvailable(e)||t.push(n.id),t.concat(a)},this.getMissingKeys=function(e){var t=[],a=[];return n.keys.length&&(n.isNested()||n.isMultiSig())&&n.keys.forEach(function(a){a.isAvailable(e)||t.push(a.id)}),n.isNested()&&(a=n.accounts.reduce(function(t,a){return t.concat(a.getMissingKeys(e))},[])),t.concat(a)}},listToIDs:function(e){var t=[];return e.forEach(function(e){e&&t.push(e.get?e.get("id"):e)}),t},unravel:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<3){var r=E.b.getAccount(e.id);r&&r.getIn([t,"account_auths"]).size&&r.getIn([t,"account_auths"]).forEach(function(r){var s=E.b.getAccount(r.get(0));s&&e.accounts.push(a.unravel(new a.AccountPermission(s,r.get(1),t),t,n+1))})}return e},unnest:function(e,t){var a=this,n=[];return e.forEach(function(e){var r=E.b.getAccount(e),s=a.unravel(new a.AccountPermission(r,null,t),t);n.push(s)}),n},flatten_auths:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.a.List();return e.size?(e.forEach(function(e){t.includes(e.get(0))||(t=t.push(e.get(0)))}),t):t}},ye=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),ye(t,[{key:"componentDidMount",value:function(){D.a.rebuild()}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.children,n=e.dataTip,s=e.content;return r.a.createElement("span",{className:"tooltip "+t,"data-html":!0,"data-tip":n||y.a.translate(s)},a)}}]),t}(),we=function(){return r.a.createElement(Ee,{className:"error appended",content:"explorer.proposals.authority_depth_warning"},"/!\\")},ke=function(){return r.a.createElement(Ee,{className:"error appended",content:"explorer.proposals.children_authority_depth_warning"},"/!\\")},Ae=function(){return r.a.createElement(Ee,{className:"warning",content:"explorer.proposals.pending_approval"},r.a.createElement(l.a,{content:"explorer.proposals.pending"}))},Ce=function(){return r.a.createElement(Ee,{className:"warning",content:"explorer.proposals.pending_review"},r.a.createElement(l.a,{content:"explorer.proposals.review"}))},Oe=function(){return r.a.createElement(Ee,{className:"error",content:"explorer.proposals.failed_execute"},r.a.createElement(l.a,{content:"explorer.proposals.failed"}))},xe=function(e){var t=e.onToggle,a=e.expanded;return r.a.createElement("a",{className:"expand-button",onClick:t},"[",a?"-":"+","]")},Ne=function(e){return e.approved?r.a.createElement(G.a,{name:"checkmark-circle",size:"1x",className:"success",title:"icons.checkmark_circle.operation_succeed"}):r.a.createElement(G.a,{name:"cross-circle",size:"1x",className:"error",title:"icons.cross_circle.operation_failed"})},Se=function(e){var t=e.available,a=e.permission,n=e.weight,s=e.level;return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement(Ne,{approved:a.isAvailable(t)}),a.id.substr(0,20-4*s),"..."),r.a.createElement("td",null,n)))},Pe=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n>t||!(!a.isNested()&&!a.isMultiSig())&&a.accounts.some(function(a){return e(t,a,n+1)})},je=function(e,t,a){return e.accounts.reduce(function(e,n){return e+(Te(n,t,a)?n.weight:0)},0)+e.keys.reduce(function(e,t){return e+(t.isAvailable(a)?t.weight:0)},0)},Te=function(e,t,a){return e.isNested()||e.isMultiSig()?je(e,t,a)>=e.threshold:e.isAvailable(t)},Ie=function(e,t,a){return e&&e.threshold>10?b.a.get_percentage(e.getStatus(t,a),e.threshold)+" / 100%":e.getStatus(t,a)+" / "+e.threshold},qe=function(e,t){return t&&t>10?b.a.get_percentage(e,t):e},De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Re=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Be=function(e){function t(e){Me(this,t);var a=Le(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExpandToggle=function(){a.setState({expanded:!a.state.expanded})},a.state={expanded:!!e.expanded},a}return Fe(t,r.a.Component),Re(t,[{key:"render",value:function(){var e=this.props,t=e.account,a=e.available,n=e.availableKeys,s=e.permission,o=e.threshold,i=e.level,l=e.maxAuthorityDepth,c=e.hideRoot,u=this.state.expanded,p=Te(s,a,n),d=s.isNested(),h=s.isMultiSig(),m=qe(s.weight,o)||1,f=Ie(s,a,n),b=i>=l,g=d||h?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement(Ne,{approved:p}),r.a.createElement(ge.a,{subpage:"permissions",account:t.get("id")})),r.a.createElement("td",null,u?r.a.createElement("span",{className:p?"success-text":""},m):m&&(m&&2===m.length?"  ":"")+m+" ",r.a.createElement(xe,{onToggle:this.handleExpandToggle,expanded:u}),u&&r.a.createElement("span",{className:"appended"},"(",f,")"),b?r.a.createElement(we,null):Pe(l,s,i)&&!u&&r.a.createElement(ke,null))):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement(Ne,{approved:p}),r.a.createElement(ge.a,{subpage:"permissions",account:t.get("id")})),r.a.createElement("td",null,!d&&m?(m&&2===m.length?"  ":"")+m+" ":null)),v=[];return(d||h)&&u&&(s.accounts.forEach(function(e){v.push(r.a.createElement(Ve,{key:e.id,account:e.id,accounts:e.accounts,permission:e,available:a,availableKeys:n,threshold:s.threshold,level:i+1,maxAuthorityDepth:l}))}),s.keys.length&&s.keys.forEach(function(e){return v.push(r.a.createElement(Se,{key:e.id,permission:e,available:n,level:i+(c?0:1),weight:qe(e.weight,o)}))})),v.length>0?r.a.createElement("tbody",null,c||g,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"3",className:"heading-perm"},r.a.createElement("div",{className:c?"":"table-container"},r.a.createElement("table",null,v)),u&&0===i&&r.a.createElement("div",{className:"spacer"})))):r.a.createElement("tbody",null,g)}}]),t}();Be.propTypes={account:m.a.ChainAccount.isRequired,accounts:m.a.ChainAccountsList,level:Q.a.number.isRequired},Be.defaultProps={level:0};var Ve=Object(f.a)(Be),Ue=function(e){function t(e){Me(this,t);var a=Le(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExpandToggle=function(){return a.setState({expanded:!a.state.expanded})},a.state={requiredPermissions:[],expanded:e.expanded},a._updateState=a._updateState.bind(a),a}return Fe(t,r.a.Component),Re(t,[{key:"componentWillMount",value:function(){this._updateState(),E.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){E.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=_e.listToIDs(this.props.required),t=_e.listToIDs(this.props.available);this.setState({requiredPermissions:_e.unnest(e,this.props.type),required:e,available:t})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.type,t.added),n=t.removed,s=t.availableKeys,o=t.globalObject,i=t.reviewPeriodTime,l=t.noFail,c=this.state,u=c.requiredPermissions,p=(c.required,c.available),d=c.expanded;p=Object(be.a)(p),s=s.toJS(),a&&(p.push(a),s.push(a)),n&&(-1!==p.indexOf(n)&&p.splice(p.indexOf(n),1),-1!==s.indexOf(n)&&s.splice(s.indexOf(n),1));var h=u.reduce(function(e,t){return e+(Te(t,p,s)?1:0)},0),m=u.length,f=h===m,b=f&&!i&&!l,g=f&&i,v=o.get("parameters").get("max_authority_depth"),_=1===u.length,y=_?u[0]:null,E=!_&&h+" / "+m,w=u.map(function(t){return r.a.createElement(Ve,{key:t.id,account:t.id,accounts:t.accounts,permission:t,available:p,availableKeys:s,expanded:e.props.expanded||_,level:0,maxAuthorityDepth:v,hideRoot:_})});return r.a.createElement("div",{className:"nested-approval-state"},r.a.createElement("div",{className:"root-status"},b?r.a.createElement(Oe,null):g?r.a.createElement(Ce,null):r.a.createElement(Ae,null)," ",y?y.threshold>1&&Ie(y,p,s):r.a.createElement("span",null,"(",E,")"),(!y||y.isMultiSig()||y.isNested())&&r.a.createElement(xe,{onToggle:this.handleExpandToggle,expanded:d}),!d&&u.some(function(e){return Pe(v,e,0)})&&r.a.createElement(ke,null)),d&&r.a.createElement("table",null,w))}}]),t}();Ue.propTypes={required:m.a.ChainAccountsList,available:m.a.ChainAccountsList},Ue.defaultProps={type:"active",added:null,removed:null},Ue=Object(f.a)(Ue);var We=function(e){function t(){return Me(this,t),Le(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Fe(t,r.a.Component),Re(t,[{key:"render",value:function(){var e=this.props,t=e.proposal,a=e.type,n=t.get("available_"+a+"_approvals"),s=t.get("available_key_approvals"),o=t.get("required_"+a+"_approvals");return r.a.createElement(Ue,De({},this.props,{required:o,available:n,availableKeys:s,reviewPeriodTime:t.get("review_period_time")}))}}]),t}();We.propTypes={proposal:m.a.ChainObject.isRequired,type:Q.a.string.isRequired,globalObject:m.a.ChainObject.isRequired},We.defaultProps={type:"active",added:null,globalObject:"2.0.0"};var He=Object(f.a)(We),ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Je=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw s}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ke=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ze=function(e,t,a){var n=[];e.forEach(function(e){n=n.concat(e.getMissingSigs(t))});var r=[];return e.forEach(function(e){r=r.concat(e.getMissingKeys(a))}),[n,r]},Qe=function(e){function t(e){Ge(this,t);var a=Xe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={active:null,key:null,owner:null,payee:null},a}return Ye(t,r.a.Component),Ke(t,[{key:"onActiveAccount",value:function(e,t,a,n){var r={};t[n]?(r.key=n,r[a]=null):n?(r[a]=e[n],r.key=null):(r[a]=null,r.key=null),this.setState(r)}},{key:"_onProposalAction",value:function(e){var t=this,a=e.toJS(),n=this.state,r=n.active,s=(n.key,n.owner,{fee_paying_account:n.payee||r,proposal:a.id,active_approvals_to_add:[],active_approvals_to_remove:[],owner_approvals_to_add:[],owner_approvals_to_remove:[],key_approvals_to_add:[],key_approvals_to_remove:[]}),o="approve"===this.props.action,i=[];["active","owner","key"].forEach(function(e){var n=t.state[e];if(n){var r=-1!==a["available_"+e+"_approvals"].indexOf(n);(o&&!r||!o&&r)&&("approve"===t.props.action?(s[e+"_approvals_to_add"]=[n],"key"===e&&i.push(n)):"reject"===t.props.action&&(s[e+"_approvals_to_remove"]=[n],"key"===e&&i.push(n)))}});var l=g.a.new_transaction();l.add_type_operation("proposal_update",s),v.a.process_transaction(l,null,!0,i),d.a.publish(this.props.modalId,"close")}},{key:"onChangePayee",value:function(e){var t=E.b.getAccount(e);t&&this.setState({payee:t.get("id")})}},{key:"onCancel",value:function(){d.a.publish(this.props.modalId,"close")}},{key:"render",value:function(){var e=this.props,t=e.proposal,a=e.type,n=[],s={},o="approve"===this.props.action;this.props.accounts.length&&this.props.accounts.forEach(function(e){(o?e&&!t.get("available_"+a+"_approvals").includes(e.get("id")):e&&t.get("available_"+a+"_approvals").includes(e.get("id")))&&(s[e.get("name")]=e.get("id"),n.push(e.get("name")))});var i=[],c={};this.props.keys.length&&this.props.keys.forEach(function(e){var a=fe.a.isMyKey(e),n=t.get("available_key_approvals").includes(e);(a&&o&&!n||a&&!o&&n)&&(c[e]=!0,i.push(e))});var u=fe.a.getMyAccounts();return r.a.createElement("form",{className:"grid-block vertical full-width-content"},r.a.createElement("div",{className:"grid-container"},r.a.createElement("div",{className:"content-block"},r.a.createElement("h4",null,o?"Add approval":"Remove approval")),r.a.createElement("div",{className:"content-block",style:{paddingRight:"20%"}},r.a.createElement(He,{expanded:!0,proposal:t.get("id"),type:a,added:o?this.state.key?this.state.key:this.state[a]||null:null,removed:o?null:this.state.key?this.state.key:this.state[a]||null,noFail:!0})),r.a.createElement("div",{className:"content-block full-width-content"},r.a.createElement("div",{className:"full-width-content form-group"},r.a.createElement(l.a,{content:"modal.proposals.pay_with",component:"label"}),r.a.createElement(me.a,{account_names:u,onChange:this.onChangePayee.bind(this)})),n.length||i.length?r.a.createElement("div",{className:"full-width-content form-group"},r.a.createElement(l.a,{content:"modal.proposals.approval_"+(o?"add":"remove"),component:"label"}),r.a.createElement(me.a,{account_names:n.concat(i),onChange:this.onActiveAccount.bind(this,s,c,a)})):null,null),r.a.createElement("div",{className:"content-block"},r.a.createElement("input",{type:"submit",className:"button btn large outline",onClick:this._onProposalAction.bind(this,t),value:o?"Approve":"Remove"}),r.a.createElement("div",{onClick:this.onCancel.bind(this),className:" button btn large outline"},r.a.createElement(l.a,{content:"account.perm.cancel"})))))}}]),t}();Qe.propTypes={accounts:m.a.ChainAccountsList},Qe=Object(f.a)(Qe);var $e=function(e){function t(){Ge(this,t);var e=Xe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._updateState=e._updateState.bind(e),e}return Ye(t,r.a.Component),Ke(t,[{key:"componentWillMount",value:function(){this._updateState(),E.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){E.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=this.props,t=e.proposal,a=(e.account,t.get("required_active_approvals").size?"active":"owner"),n=_e.listToIDs(t.get("required_"+a+"_approvals")),r=_e.listToIDs(t.get("available_"+a+"_approvals")),s=_e.listToIDs(t.get("available_key_approvals"));this.setState({requiredPermissions:_e.unnest(n,a),available:r,availableKeys:s,type:a})}},{key:"render",value:function(){var e=this.props.action,t=this.state,a=t.requiredPermissions,n=t.available,s=t.availableKeys,o=t.type,i=Ze(a,n,s),l=Je(i,2),c=l[0],u=l[1];return r.a.createElement(Qe,ze({},this.props,{type:o,accounts:"approve"===e?c:n,keys:"approve"===e?u:s}))}}]),t}();$e.propTypes={account:m.a.ChainAccount.isRequired,proposal:m.a.ChainObject.isRequired},$e=Object(f.a)($e);var et=function(e){function t(){Ge(this,t);var e=Xe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return Ye(t,r.a.Component),Ke(t,[{key:"componentDidMount",value:function(){var e=this;d.a.subscribe(this.props.modalId,function(t,a){e.setState({open:"open"===a})})}},{key:"show",value:function(){d.a.publish(this.props.modalId,"open")}},{key:"render",value:function(){var e=this.props,t=e.modalId;e.proposal;return r.a.createElement(h.a,{id:t,overlay:!0,ref:t},this.state.open?r.a.createElement("div",{className:"grid-block vertical"},r.a.createElement($e,this.props)):null)}}]),t}(),tt=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw s}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),at=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var nt=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.forceUpdate=e.forceUpdate.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),at(t,[{key:"componentDidMount",value:function(){E.b.subscribe(this.forceUpdate)}},{key:"componentWillUnmount",value:function(){E.b.unsubscribe(this.forceUpdate)}},{key:"_onApproveModal",value:function(e,t){this.refs[e+"_"+t]&&this.refs[e+"_"+t].show()}},{key:"_canReject",value:function(e){return e.available_active_approvals.length||e.available_owner_approvals.length||e.available_key_approvals.length}},{key:"render",value:function(){var e=this,t=this.props.account;if(!t)return null;var a=[];t.get("proposals").size&&t.get("proposals").forEach(function(e){var n=E.b.getObject(e);if(n){var r=n.get("proposed_transaction").get("operations");a.push({operations:r,account:t,proposal:n})}});var n=a.sort(function(e,t){return b.a.sortID(e.proposal.get("id"),t.proposal.get("id"),!0)}).reduce(function(t,a,n){var s=!1,o=a.proposal.get("id"),i=a.proposal.get("expiration_time"),c=a.operations.map(function(e,t){return"1.2.153124"===e.getIn([1,"to"])&&(s=!0),r.a.createElement(he.b,{key:a.proposal.get("id")+"_operation_"+t,expiration:i,index:t,op:e.toJS(),inverted:!1,hideFee:!0,hideOpLabel:!0,hideExpiration:!0,hideDate:!0,proposal:!0,id:o})}).toArray(),u=e._canReject(a.proposal.toJS()),p=a.proposal.get("id"),d=a.proposal.get("required_active_approvals").size?"active":"owner";t.push(r.a.createElement("tr",{key:p+"_id"},r.a.createElement("td",{colSpan:"4",className:"proposal"+(0===n?" first":"")},r.a.createElement(he.a,{id:o,expiration:i}))));var h=_e.listToIDs(a.proposal.get("available_"+d+"_approvals")),m=_e.listToIDs(a.proposal.get("available_key_approvals")),f=_e.listToIDs(a.proposal.get("required_"+d+"_approvals")),b=_e.unnest(f,d),g=Ze(b,h,m),v=tt(g,2),_=v[0],E=v[1],w=[];_.length&&_.forEach(function(e){e&&!a.proposal.get("available_"+d+"_approvals").includes(e)&&w.push(e)});var k=[];E.length&&E.forEach(function(e){fe.a.isMyKey(e)&&!a.proposal.get("available_key_approvals").includes(e)&&k.push(e)});var A=w.length+k.length>0;return t.push(r.a.createElement("tr",{className:"top-left-align",key:p+"_content"},r.a.createElement("td",null,c),r.a.createElement("td",null,b.map(function(e,t){return r.a.createElement("div",{className:"list-item",key:p+"_approver_"+t},r.a.createElement(ge.a,{subpage:"permissions",account:e.id}))})),r.a.createElement("td",null,r.a.createElement(He,{proposal:a.proposal.get("id"),type:d})),r.a.createElement("td",{className:"approval-buttons"},s?r.a.createElement("div",{"data-tip":y.a.translate("tooltip.propose_scam"),className:"tooltip has-error scam-error"},"SCAM"):r.a.createElement("button",{onClick:A?e._onApproveModal.bind(e,p,"approve"):function(){},className:"button primary hollow"+(A?"":" hidden")},r.a.createElement("span",null,r.a.createElement(l.a,{content:"proposal.approve"}))),r.a.createElement(et,{ref:p+"_approve",modalId:p+"_approve",account:a.account.get("id"),proposal:p,action:"approve"}),u?r.a.createElement("button",{onClick:e._onApproveModal.bind(e,p,"reject"),className:"button primary hollow"},r.a.createElement(l.a,{content:"proposal.reject"})):null,r.a.createElement(et,{ref:p+"_reject",modalId:p+"_reject",account:a.account.get("id"),proposal:p,action:"reject"})))),t.push(r.a.createElement("tr",{key:p+"_separator"},r.a.createElement("td",{colSpan:"4"},r.a.createElement("hr",null)))),t},[]);return r.a.createElement("table",{className:"table proposals compact "+this.props.className},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(l.a,{content:"proposal.proposals"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"proposal.approvers"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"proposal.status"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"proposal.action"})))),r.a.createElement("tbody",null,n))}}]),t}();nt.propTypes={account:m.a.ChainAccount.isRequired};var rt=Object(f.a)(nt),st=a(10),ot=a(48),it=a(51),lt=a.n(it),ct=a(8),ut=a(275),pt=a(44),dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ht=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var gt=function(e){function t(){return mt(this,t),ft(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return bt(t,ut["a"]),ht(t,[{key:"shouldComponentUpdate",value:function(e,a){return function e(t,a,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,a,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.base_amount!==this.props.base_amount||e.quote_amount!==this.props.quote_amount||e.decimals!==this.props.decimals||!b.a.are_equal_shallow(e.pulsate,this.props.pulsate)||!b.a.are_equal_shallow(a,this.state)}},{key:"getFinalPrice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,a=t.coreAsset,n=t.fromAsset,r=t.toAsset,s=t.marketStats;return pt.a.getFinalPrice(a,n,r,s,e)}},{key:"render",value:function(){var e=this.props,t=e.toAsset,a=e.forceDirection,n=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["toAsset","forceDirection"]),s=this.getFinalPrice();return 1===s?r.a.createElement("span",null,"1.00"):s?r.a.createElement(J.a,dt({force_direction:!!a&&t.get("symbol"),base_amount:s.base.amount,base_asset:s.base.asset_id,quote_amount:s.quote.amount,quote_asset:s.quote.asset_id},n)):r.a.createElement("span",null,"--")}}]),t}();gt.defaultProps={forceDirection:!0},gt=Object(j.a)(gt,{propNames:["toAsset","fromAsset","coreAsset"],defaultProps:{toAsset:"1.3.0",coreAsset:"1.3.0"}});var vt=function(e){function t(){return mt(this,t),ft(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return bt(t,r.a.Component),ht(t,[{key:"render",value:function(){var e=this;return r.a.createElement(lt.a,{stores:[ct.a,I.a],inject:{toAsset:function(){return e.props.toAsset||ct.a.getState().settings.get("unit","1.3.0")},marketStats:function(){return I.a.getState().allMarketStats}}},r.a.createElement(gt,dt({},this.props,{ref:this.props.refCallback})))}}]),t}(),_t=a(107),yt=(a(254),a(449),a(452),a(104)),Et=a(329),wt=a(35),kt=a(18),At=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Ct(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ot=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectedOrders:[],filterValue:""},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),At(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("cancelAllOrders");e&&e.addEventListener("click",function(){var e=this._getFilteredOrders.call(this);e=e.toJS?e.toJS():e,this.setState({selectedOrders:e}),document.querySelectorAll(".orderCancel").forEach(function(e){e.checked||(e.checked=!0)})}.bind(this))}},{key:"_getFilteredOrders",value:function(){var e=this.state.filterValue;return(this.props.account.get("orders")||[]).filter(function(t){var a=E.b.getObject(t).toJS(),n=E.b.getAsset(a.sell_price.base.asset_id),r=E.b.getAsset(a.sell_price.quote.asset_id),s=n.get("symbol").toLowerCase(),o=r.get("symbol").toLowerCase();return s.indexOf(e)>-1||o.indexOf(e)>-1})}},{key:"_cancelLimitOrder",value:function(e,t){t.preventDefault(),wt.a.cancelLimitOrder(this.props.account.get("id"),e,!1).catch(function(e){console.log("cancel order error:",e)})}},{key:"_cancelLimitOrders",value:function(e){var t=this;wt.a.cancelLimitOrders(this.props.account.get("id"),this.state.selectedOrders).then(function(){t.resetSelected()}).catch(function(e){console.log("cancel orders error:",e)})}},{key:"onFlip",value:function(e){var t={};t[e]=!this.props.marketDirections.get(e),st.a.changeMarketDirection(t)}},{key:"onCheckCancel",value:function(e,t){var a=this.state.selectedOrders;if(t.target.checked)this.setState({selectedOrders:a.concat([e])});else{var n=a.indexOf(e);n>-1&&this.setState({selectedOrders:a.slice(0,n).concat(a.slice(n+1))})}}},{key:"setFilterValue",value:function(e){this.setState({filterValue:e.target.value.toLowerCase()})}},{key:"resetSelected",value:function(){this.setState({selectedOrders:[]}),document.querySelectorAll(".orderCancel").forEach(function(e){e.checked&&(e.checked=!1)})}},{key:"cancelSelected",value:function(){this._cancelLimitOrders.call(this)}},{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.marketDirections,s=this.state,o=s.filterValue,i=s.selectedOrders,c=y.a.translate("account.perm.cancel"),u={},p={};if(!a.get("orders"))return null;var d=a.get("orders"),h=d.size;o&&(d=this._getFilteredOrders.call(this)),d.forEach(function(t){var a=E.b.getObject(t).toJS(),s=E.b.getAsset(a.sell_price.base.asset_id),o=E.b.getAsset(a.sell_price.quote.asset_id);if(s&&o){var i,l=(Ct(i={},s.get("id"),{precision:s.get("precision")}),Ct(i,o.get("id"),{precision:o.get("precision")}),i),d=pt.a.getMarketName(s,o).marketName,h=n.get(d);u[d]||(u[d]=h?{base:{id:s.get("id"),symbol:s.get("symbol"),precision:s.get("precision")},quote:{id:o.get("id"),symbol:o.get("symbol"),precision:o.get("precision")}}:{base:{id:o.get("id"),symbol:o.get("symbol"),precision:o.get("precision")},quote:{id:s.get("id"),symbol:s.get("symbol"),precision:s.get("precision")}});var m=new kt.d(a,l,u[d].quote.id),f=E.b.getAsset(u[d].base.id),b=E.b.getAsset(u[d].quote.id);p[d]||(p[d]=[]),p[d].push(r.a.createElement(Et.b,{ref:u[d].base.symbol,key:a.id,order:m,base:f,quote:b,cancel_text:c,showSymbols:!1,invert:!0,onCancel:e._cancelLimitOrder.bind(e,a.id),price:m.getPrice(),dashboard:!0,isMyAccount:e.props.isMyAccount,settings:e.props.settings,onFlip:e.onFlip.bind(e,d),onCheckCancel:e.onCheckCancel.bind(e,a.id)}))}});var m=[];for(var f in p)p[f].length&&(m.push(r.a.createElement("tbody",{key:f},p[f].sort(function(e,t){return e.props.price-t.props.price}))),0);return r.a.createElement("div",null,r.a.createElement("div",{className:"dashboard__actions"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-9"},d&&h?r.a.createElement("input",{type:"text",placeholder:y.a.translate("account.filter_orders"),style:{display:"inline-block",maxWidth:"50%",marginRight:"1em",marginBottom:"0"},onChange:this.setFilterValue.bind(this)}):null,i.length?r.a.createElement("button",{className:"btn large inverted"},r.a.createElement(l.a,{content:"account.reset_orders",onClick:this.resetSelected.bind(this)})):null,i.length?r.a.createElement("button",{className:"btn large outline"},r.a.createElement(l.a,{content:"account.submit_orders",onClick:this.cancelSelected.bind(this)})):null)))),r.a.createElement("div",{className:"dashboard__adaptive"},r.a.createElement("table",{className:"dashboard__table blue-bg with-borders"},r.a.createElement(Et.c,{settings:this.props.settings,dashboard:!0,isMyAccount:this.props.isMyAccount}),m,this.props.children)))}}]),t}(),xt=Ot=Object(T.connect)(Ot,{listenTo:function(){return[ct.a]},getProps:function(){return{marketDirections:ct.a.getState().marketDirections}}}),Nt=(a(9),{}),St=6e4;var Pt=a(392),jt=a(222),Tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},It=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function qt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Dt=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=qt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.tick=function(){var e=n.props,t=e.onIcon,a=e.offIcon,r=(n.state||{}).name,s=void 0===r?t:r;n.setState({name:s===t?a:t})},qt(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),It(t,[{key:"componentDidMount",value:function(){var e=this.props.duration;this.interval=setInterval(this.tick,e)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.onIcon,a=e.rest,n=(this.state||{}).name,s=void 0===n?t:n,o=this.props.title;return r.a.createElement(G.a,Tt({name:s,title:o},a))}}]),t}();Dt.propTypes={duration:Q.a.number.isRequired,offIcon:Q.a.string.isRequired,onIcon:Q.a.string.isRequired,title:Q.a.string.isRequired};var Rt=Dt,Mt=(a(255),a(134)),Lt=a.n(Mt),Ft=a(580),Bt=a.n(Ft),Vt=a(581),Ut=a.n(Vt),Wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ht=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Kt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Bt()(Lt.a.Highcharts),Ut()(Lt.a.Highcharts);var Gt=function(e){function t(){return zt(this,t),Jt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Kt(t,r.a.Component),Ht(t,[{key:"render",value:function(){var e=this.props,t=e.balanceObjects,a=e.core_asset,n=e.marketStats,s=e.preferredAsset,o=null;if(t&&t.length>0){var i=0;o=t.forEach(function(e){if(e){var t="string"==typeof e?E.b.getObject(e):e,r=t.get("asset_type"),o=E.b.getAsset(r);if(o&&s){var l=Number(t.get("balance")),c=pt.a.convertValue(l,s,o,n,a);if(c){var u=b.a.get_asset_precision(s.get("precision"));i+=c/u}}}}),o=t.map(function(e,t){if(!e)return null;var r="string"==typeof e?E.b.getObject(e):e,o=r.get("asset_type"),l=E.b.getAsset(o);if(!l)return null;var c=Number(r.get("balance")),u=pt.a.convertValue(c,s,l,n,a);if(!u)return null;var p=u/b.a.get_asset_precision(s.get("precision")),d=p/i*100;return d<.5?null:p>=1?{name:l.get("symbol")+" ("+(0===i?0:d.toFixed(2))+"%)",value:p,color:Lt.a.Highcharts.getOptions().colors[t]}:null}).filter(function(e){return!!e})}o&&1===o.length&&0===o[0].value&&(o=null);var l={chart:{backgroundColor:"rgba(255, 0, 0, 0)",height:250,spacingLeft:0,spacingRight:0,spacingBottom:0},credits:{enabled:!1},legend:{enabled:!1},plotOptions:{treemap:{animation:!1,tooltip:{pointFormatter:function(){return"<b>"+this.name+"</b>: "+Lt.a.Highcharts.numberFormat(this.value,0)+" "+s.get("symbol")}}}},series:[{type:"treemap",levels:[{level:1,layoutAlgorithm:"sliceAndDice",dataLabels:{enabled:!0,align:"center",verticalAlign:"middle"}}],data:o}],title:{text:null}};return r.a.createElement("div",{className:"account-treemap"},r.a.createElement(Lt.a,{config:l}))}}]),t}();Gt.propTypes={assets:m.a.ChainAssetsList,preferredAsset:m.a.ChainAsset.isRequired},Gt.defaultProps={assets:[],preferredAsset:"1.3.0"},Gt=Object(f.a)(Gt);var Xt=function(e){function t(){return zt(this,t),Jt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Kt(t,r.a.Component),Ht(t,[{key:"render",value:function(){var e=this.props.balanceObjects.filter(function(e){return!!e}).map(function(e){return e.get("asset_type")});return r.a.createElement(Gt,Wt({preferredAsset:this.props.settings.get("unit","1.3.0"),assets:e},this.props))}}]),t}();Xt.propTypes={balanceObjects:m.a.ChainObjectsList,core_asset:m.a.ChainAsset.isRequired},Xt.defaultProps={balanceObjects:[],core_asset:"1.3.0"},Xt=Object(f.a)(Xt);var Yt=function(e){function t(){return zt(this,t),Jt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Kt(t,r.a.Component),Ht(t,[{key:"render",value:function(){return r.a.createElement(lt.a,{stores:[ct.a,I.a],inject:{marketStats:function(){return I.a.getState().allMarketStats},settings:function(){return ct.a.getState().settings}}},r.a.createElement(Xt,Wt({},this.props,{ref:this.props.refCallback})))}}]),t}(),Zt=a(102),Qt=a(359),$t=a(356),ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ta=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function aa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function na(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ra(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function sa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var oa=function(e){function t(e){na(this,t);var a=ra(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));for(var n in a.updateModal=function(){a.setState({isBridgeModalVisible:!1})},a.sortFunctions={qty:function(e,t,a){return Number(this.qtyRefs[e.key])<Number(this.qtyRefs[t.key])?this.state.sortDirection||a?-1:1:Number(this.qtyRefs[e.key])>Number(this.qtyRefs[t.key])?this.state.sortDirection||a?1:-1:void 0},alphabetic:function(e,t,a){return e.key>t.key?this.state.sortDirection||a?1:-1:e.key<t.key?this.state.sortDirection||a?-1:1:0},priceValue:function(e,t){var a=this.priceRefs[e.key],n=this.priceRefs[t.key];if(a&&n){var r=a.getFinalPrice(!0),s=n.getFinalPrice(!0);return null===r&&null!==s?1:null!==r&&null===s?-1:null===r&&null===s?this.sortFunctions.alphabetic(e,t,!0):this.state.sortDirection?r-s:s-r}},totalValue:function(e,t){var a=this.valueRefs[e.key],n=this.valueRefs[t.key];if(a&&n){var r=a.getValue(),s=n.getValue();return!r&&s?1:r&&!s?-1:r||s?this.state.sortDirection?r-s:s-r:this.sortFunctions.alphabetic(e,t,!0)}},changeValue:function(e,t){var a=this.changeRefs[e.key],n=this.changeRefs[t.key];if(a&&n){var r=a.getValue(),s=n.getValue(),o="NaN"!=parseFloat(r)?parseFloat(r):r,i="NaN"!=parseFloat(s)?parseFloat(s):s;return void 0===this.state.sortDirection||this.state.sortDirection?o-i:i-o}}},a._renderBuy=function(e,t,n,s,o){return"LLC"===e?r.a.createElement("span",null,a.state.isBridgeModalVisible?r.a.createElement($t.a,{account:a.props.account}):null,r.a.createElement("a",{onClick:a.onShowModal},r.a.createElement(Rt,{onIcon:"dollar",title:"icons.dollar.buy",duration:1e3,className:"icon-14px"}))):s},a.state={sortKey:e.viewSettings.get("portfolioSort","totalValue"),sortDirection:e.viewSettings.get("portfolioSortDirection",!0),settleAsset:"1.3.0",shownAssets:e.viewSettings.get("shownAssets","active"),depositAsset:null,withdrawAsset:null,bridgeAsset:null,alwaysShowAssets:["LLC"],hide0balances:!1,isBridgeModalVisible:!1},a.qtyRefs={},a.priceRefs={},a.valueRefs={},a.changeRefs={},a.sortFunctions)a.sortFunctions[n]=a.sortFunctions[n].bind(a);return a._handleFilterInput=a._handleFilterInput.bind(a),a.onShowModal=a.onShowModal.bind(a),a}return sa(t,r.a.Component),ta(t,[{key:"onShowModal",value:function(){var e=this;this.setState({isBridgeModalVisible:!1},function(){e.setState({isBridgeModalVisible:!0})})}},{key:"_reserveButtonClick",value:function(e,t){t.preventDefault(),this.setState({reserve:e}),d.a.publish("reserve_asset","open")}},{key:"_reserveAsset",value:function(e,t){t.preventDefault(),d.a.publish("reserve_asset","close");var a=this.state.issue,n=this.props.assets.get(a.asset_id);a.amount*=b.a.get_asset_precision(n.precision),AssetActions.issueAsset(e,a)}},{key:"_handleFilterInput",value:function(e){e.preventDefault(),this.setState({filterValue:e.target.value})}},{key:"componentWillMount",value:function(){this._checkMarginStatus()}},{key:"_checkMarginStatus",value:function(){var e=this;(function(e){if(!e||e&&!e.get("call_orders",[]).size)return Promise.resolve(null);var t=e.get("name")+JSON.stringify(e.get("call_orders"));return Nt[t]?Nt[t].result?Promise.resolve(Nt[t].result):new Promise(function(e,a){Nt[t].queue.push({res:e,rej:a})}):new Promise(function(a,n){Nt[t]={queue:[{res:a,rej:n}],result:null},Object(E.f)("getObject",e.get("call_orders").toArray()).then(function(e){var a=[];e.forEach(function(e){var t=e.getIn(["call_price","base","asset_id"]),n=e.getIn(["call_price","quote","asset_id"]);-1===a.indexOf(t)&&a.push(t),-1===a.indexOf(n)&&a.push(n)}),Object(E.f)("getAsset",a,6e3).then(function(a){var n={};a.forEach(function(e){n[e.get("id")]=e.toJS()});var r={};e.forEach(function(e){var t=n[e.getIn(["call_price","quote","asset_id"])],a=n[e.getIn(["call_price","base","asset_id"])],s=t.bitasset.current_feed.settlement_price;if(s.base.asset_id===s.quote.asset_id)r[t.id]={ratio:null};else{var o=new kt.a({amount:e.get("collateral"),asset_id:a.id,precision:a.precision}),i=new kt.a({amount:e.get("debt"),asset_id:t.id,precision:t.precision}),l=t.bitasset.current_feed.maintenance_collateral_ratio/1e3,c=new kt.c({priceObject:t.bitasset.current_feed.settlement_price,market_base:t.bitasset.current_feed.settlement_price.quote.asset_id,sqr:t.bitasset.current_feed.maximum_short_squeeze_ratio,assets:n}),u={ratio:o.getAmount({real:!0})/(i.getAmount({real:!0})/c.toReal())};if(isNaN(u.ratio))return null;u.ratio<l?u.statusClass="danger":u.ratio<l+.5?u.statusClass="warning":u.statusClass=null,r[t.id]=u}}),Nt[t].queue.forEach(function(e){e.res(r)}),Nt[t]={result:r},setTimeout(function(){delete Nt[t]},St)})}).catch(function(){Nt[t].queue.forEach(function(e){e.rej()})})})})((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).account).then(function(t){var a=null;for(var n in t)a=t[n].statusClass||a;e.setState({globalMarginStatus:a})})}},{key:"componentWillReceiveProps",value:function(e){e.account!==this.props.account&&(this._checkMarginStatus(e),this.priceRefs={},this.valueRefs={},this.changeRefs={},setTimeout(this.forceUpdate.bind(this),500))}},{key:"shouldComponentUpdate",value:function(e,t){return!b.a.are_equal_shallow(e.backedCoins,this.props.backedCoins)||!b.a.are_equal_shallow(e.balances,this.props.balances)||e.account!==this.props.account||e.settings!==this.props.settings||e.hiddenAssets!==this.props.hiddenAssets||!b.a.are_equal_shallow(t,this.state)||this.state.filterValue!==t.filterValue}},{key:"_onSettleAsset",value:function(e,t){t.preventDefault(),this.setState({settleAsset:e}),this.refs.settlement_modal.show(),console.log("===================================="),console.log(this.refs.settlement_modal),console.log("====================================")}},{key:"_hideAsset",value:function(e,t){st.a.hideAsset(e,t)}},{key:"_showDepositModal",value:function(e,t){var a=this;t.preventDefault(),this.setState({depositAsset:e},function(){a.refs.deposit_modal_new.show()})}},{key:"_showDepositWithdraw",value:function(e,t,a,n){var r,s=this;n.preventDefault(),this.setState((aa(r={},"bridge_modal"===e?"bridgeAsset":"deposit_modal"===e?"depositAsset":"withdrawAsset",t),aa(r,"fiatModal",a),r),function(){s.refs[e].show()})}},{key:"_getSeparator",value:function(e){return e?r.a.createElement("span",null," | "):null}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.props.router.push(e)}},{key:"triggerSend",value:function(e){var t=this;this.setState({send_asset:e},function(){t.send_modal&&t.send_modal.show()})}},{key:"_renderBalances",value:function(e,t,a){var n=this,s=this.props.core_asset,o=this.props,i=o.settings,l=o.hiddenAssets,u=o.orders,p=i.get("unit")||s.get("symbol"),d=i.get("showAssetPercent",!1),h=function(e,t){var a=e&&e.has("bitasset_data_id"),s="cp_modal_"+e.get("id");return{isBitAsset:a,borrowModal:a?r.a.createElement(K.a,{ref:s,modalId:"borrow_modal_"+e.get("id"),quote_asset:e.get("id"),backing_asset:e.getIn(["bitasset","options","short_backing_asset"]),account:t}):null,borrowLink:a?r.a.createElement("a",{onClick:function(){D.a.hide(),n.refs[s].show()}},r.a.createElement(G.a,{name:"dollar",title:"icons.dollar.borrow",className:"icon-14px"})):null}},m=[];return e.forEach(function(e){var t=E.b.getObject(e);if(t){var a=t.get("asset_type"),o=E.b.getObject(a);if(o){var i,f,g,v="",_=o.get("symbol"),w="1.3.0"!==o.get("id"),k=p!==s.get("symbol"),A=ot.a.parseDescription(o.getIn(["options","description"])).market;-1===(v=o.get("symbol")).indexOf("OPEN.")||A||(A="USD");var C=A||p;w&&C===v&&(C=s.get("symbol")),i=w?r.a.createElement(X.b,{to:"/market/"+C+"_"+o.get("symbol")},r.a.createElement(G.a,{name:"trade",title:"icons.trade.trade",className:"icon-14px"})):k?r.a.createElement(X.b,{to:"/market/"+p+"_"+o.get("symbol")},r.a.createElement(G.a,{name:"trade",title:"icons.trade.trade",className:"icon-14px"})):"-",g=r.a.createElement("a",{onClick:n.triggerSend.bind(n,o.get("id"))},r.a.createElement(G.a,{name:"transfer",title:"icons.transfer",className:"icon-14px"}));var O=h(o,n.props.account),x=O.isBitAsset,N=O.borrowModal,P=O.borrowLink;f=r.a.createElement("a",{onClick:n._onSettleAsset.bind(n,o.get("id"))},r.a.createElement(G.a,{name:"settle",title:"icons.settle",className:"icon-14px"}));var j=!l.includes(a),T=!!t.get("balance"),I=!!u[a],q=Object(Zt.b)(o.get("symbol"),n.props.backedCoins),D=q&&q.depositAllowed||"LLC"==o.get("symbol"),R=q&&q.withdrawalAllowed&&T&&0!=t.get("balance"),M=!!n.props.bridgeCoins.get(v),L=t.get("balance");n.qtyRefs[o.get("symbol")]=b.a.get_asset_amount(L,o),m.push(r.a.createElement("tr",{key:o.get("symbol"),style:{maxWidth:"100rem"}},r.a.createElement("td",{style:{textAlign:"left"}},r.a.createElement(_t.a,{showIcon:!0,asset:o.get("id")})),r.a.createElement("td",{style:{textAlign:"right"}},T||I?r.a.createElement(c.a,{balance:e,hide_asset:!0}):null),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},r.a.createElement(vt,{refCallback:function(e){e&&e.refs.bound_component&&(n.priceRefs[o.get("symbol")]=e.refs.bound_component)},fromAsset:o.get("id"),pulsate:{reverse:!0,fill:"forwards"},hide_symbols:!0})),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},r.a.createElement(W,{refCallback:function(e){e&&e.refs.bound_component&&(n.changeRefs[o.get("symbol")]=e.refs.bound_component)},base:o.get("id"),quote:p,marketId:o.get("symbol")+"_"+p,hide_symbols:!0})),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},T||I?r.a.createElement(S.a,{balance:e,toAsset:p,hide_asset:!0,refCallback:function(e){e&&e.refs.bound_component&&(n.valueRefs[o.get("symbol")]=e.refs.bound_component)}}):null),d?r.a.createElement("td",{style:{textAlign:"right"}},T?r.a.createElement(c.a,{balance:e,asPercentage:!0}):null):null,r.a.createElement("td",null,g),r.a.createElement("td",null,n._renderBuy(o.get("symbol"),M,_,"-",t.get("balance"))),r.a.createElement("td",null,D?r.a.createElement("span",null,r.a.createElement(G.a,{style:{cursor:"pointer"},name:"deposit",title:"icons.deposit.deposit",className:"icon-14x",onClick:n._onNavigate.bind(n,"/deposit-withdraw")})):"-"),r.a.createElement("td",null,R&&n.props.isMyAccount?r.a.createElement("span",null,r.a.createElement("a",{className:R?"":"disabled",onClick:R?n._showDepositWithdraw.bind(n,"withdraw_modal_new",_,!1):function(){}},r.a.createElement(G.a,{name:"withdraw",title:"icons.withdraw",className:"icon-14px"}))):"-"),r.a.createElement("td",null,i),r.a.createElement("td",null,x?r.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":y.a.translate("tooltip.borrow",{asset:v})},P,N):"-"),r.a.createElement("td",null,x?r.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":y.a.translate("tooltip.settle",{asset:v})},f):"-"),r.a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":y.a.translate("tooltip.burn"),onClick:n._reserveButtonClick.bind(n,o.get("id"))},r.a.createElement("a",{style:{marginRight:0},className:j?"order-cancel":"action-plus"},r.a.createElement("span",{className:"icon fire icon-14px"},r.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},r.a.createElement("path",{d:"M10.031 32c-2.133-4.438-0.997-6.981 0.642-9.376 1.795-2.624 2.258-5.221 2.258-5.221s1.411 1.834 0.847 4.703c2.493-2.775 2.963-7.196 2.587-8.889 5.635 3.938 8.043 12.464 4.798 18.783 17.262-9.767 4.294-24.38 2.036-26.027 0.753 1.646 0.895 4.433-0.625 5.785-2.573-9.759-8.937-11.759-8.937-11.759 0.753 5.033-2.728 10.536-6.084 14.648-0.118-2.007-0.243-3.392-1.298-5.312-0.237 3.646-3.023 6.617-3.777 10.27-1.022 4.946 0.765 8.568 7.555 12.394z"}))))),r.a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":y.a.translate("tooltip."+(j?"hide_asset":"show_asset")),onClick:n._hideAsset.bind(n,a,j)},r.a.createElement("a",{style:{marginRight:0},className:j?"order-cancel":"action-plus"},r.a.createElement(G.a,{name:j?"cross-circle":"plus-circle",title:j?"icons.cross_circle.hide_asset":"icons.plus_circle.show_asset",className:"icon-14px"})))))}}}),t&&t.filter(function(e){var t=!1;n.props.backedCoins.get("OPEN",[]).forEach(function(a){a&&a.symbol===e&&(t=!0)}),n.props.bridgeCoins.get(e)&&(t=!0);var a=!0;return m.forEach(function(t){t.key===e&&(a=!1)}),a&&t}).forEach(function(e){var t=E.b.getAsset(e);if(t&&n.props.isMyAccount){var o=!l.includes(t.get("id")),i=t.get("symbol").split("."),c=!!n.props.backedCoins.get("OPEN",[]).find(function(e){return e.backingCoinType===i[1]})||!!n.props.backedCoins.get("RUDEX",[]).find(function(e){return e.backingCoin===i[1]})||"LLC"==t.get("symbol"),u=!!n.props.bridgeCoins.get(t.get("symbol")),p="1.3.0"!==t.get("id"),d=ot.a.parseDescription(t.getIn(["options","description"])).market;-1===t.get("symbol").indexOf("OPEN.")||d||(d="USD");var f=d||(s?s.get("symbol"):"LLC"),b=p?r.a.createElement(X.b,{to:"/market/"+f+"_"+t.get("symbol")},r.a.createElement(G.a,{name:"trade",title:"icons.trade.trade",className:"icon-14px"})):"-",g=h(t,n.props.account),v=g.isBitAsset,_=g.borrowModal,w=g.borrowLink;(o&&a||!o&&!a)&&m.push(r.a.createElement("tr",{key:t.get("symbol"),style:{maxWidth:"100rem"}},r.a.createElement("td",{style:{textAlign:"left"}},r.a.createElement(_t.a,{asset:t.get("id")})),r.a.createElement("td",null,"-"),r.a.createElement("td",{className:"column-hide-small"},"-"),r.a.createElement("td",{className:"column-hide-small"},"-"),r.a.createElement("td",{className:"column-hide-small"},"-"),r.a.createElement("td",null,"-"),r.a.createElement("td",{style:{textAlign:"center"}},u&&n.props.isMyAccount?r.a.createElement("span",null,r.a.createElement("a",{onClick:n._showDepositWithdraw.bind(n,"bridge_modal",e,!1)},r.a.createElement(G.a,{name:"dollar",title:"icons.dollar.buy",className:"icon-14px"}))):"-"),r.a.createElement("td",null,c&&n.props.isMyAccount?r.a.createElement("span",null,r.a.createElement(G.a,{style:{cursor:"pointer"},name:"deposit",title:"icons.deposit.deposit",className:"icon-14x",onClick:n._showDepositModal.bind(n,t.get("symbol"))})):"-"),r.a.createElement("td",null,"-"),r.a.createElement("td",{style:{textAlign:"center"}},b),r.a.createElement("td",null,v?r.a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":y.a.translate("tooltip.borrow",{asset:t.get("symbol")})},w,_):"-"),r.a.createElement("td",null,"-"),r.a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":y.a.translate("tooltip."+(o?"hide_asset":"show_asset"))},r.a.createElement("a",{style:{marginRight:0},className:o?"order-cancel":"action-plus",onClick:n._hideAsset.bind(n,t.get("id"),o)},r.a.createElement(G.a,{name:o?"cross-circle":"plus-circle",title:o?"icons.cross_circle.hide_asset":"icons.plus_circle.show_asset",className:"icon-14px"})))))}}),m.sort(this.sortFunctions[this.state.sortKey]),m}},{key:"_changeShownAssets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"active";this.setState({shownAssets:e}),st.a.changeViewSetting({shownAssets:e})}},{key:"_toggleSortOrder",value:function(e){this.state.sortKey===e?(st.a.changeViewSetting({portfolioSortDirection:!this.state.sortDirection}),this.setState({sortDirection:!this.state.sortDirection})):(st.a.changeViewSetting({portfolioSort:e}),this.setState({sortDirection:!1,sortKey:e}))}},{key:"_renderRadioButton",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.a.createElement("label",{className:"radio"},r.a.createElement("input",{className:"radio__input",type:"radio",name:"dashboard-filters",onChange:t,checked:a}),r.a.createElement("span",{className:"radio__styled"}),r.a.createElement("span",{className:"radio__label"},e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.hiddenAssets,s=t.settings,i=t.orders,c=this.state.shownAssets;if(!a)return null;var p=[],m={},f={};a.toJS&&a.has("call_orders")&&(p=a.get("call_orders").toJS());var g=void 0,v=void 0,_=a.get("balances"),w=o.a.List(),k=o.a.List();(p.forEach(function(e){var t=E.b.getObject(e);if(t){var a=t.getIn(["call_price","base","asset_id"]);m[a]?m[a]+=parseInt(t.get("collateral"),10):m[a]=parseInt(t.get("collateral"),10);var n=t.getIn(["call_price","quote","asset_id"]);f[n]?f[n]+=parseInt(t.get("debt"),10):f[n]=parseInt(t.get("debt"),10)}}),_)&&((_=_.filter(function(t,a){var n=E.b.getObject(t);return!(n&&!n.get("balance")&&!i[a])&&!(e.state.hide0balances&&n.get("balance")<=0)})).forEach(function(t,a){var r=E.b.getAsset(a),s="",o="";e.state.filterValue&&(o=e.state.filterValue?String(e.state.filterValue).toLowerCase():"",s=r.get("symbol").toLowerCase(),b.a.replaceName(r).isBitAsset&&(s="bit"+s));n.includes(a)&&s.includes(o)?k=k.push(t):s.includes(o)&&(w=w.push(t))}),g=this._renderBalances(w,this.state.filterValue?null:this.state.alwaysShowAssets,!0),v=this._renderBalances(k,this.state.filterValue?null:this.state.alwaysShowAssets));var A=r.a.createElement(u.a,{noTip:!0,balances:k,hide_asset:!0}),C=r.a.createElement(u.a,{noTip:!0,balances:w,hide_asset:!0}),O=r.a.createElement(u.a,{noTip:!0,balances:o.a.List(),openOrders:i,hide_asset:!0}),x=r.a.createElement(u.a,{noTip:!0,balances:o.a.List(),debt:f,collateral:m,hide_asset:!0}),S=r.a.createElement(u.a,{noTip:!0,balances:o.a.List(),debt:f,hide_asset:!0}),P=r.a.createElement(u.a,{noTip:!0,balances:o.a.List(),collateral:m,hide_asset:!0}),j=s.get("unit")||this.props.core_asset.get("symbol"),T=r.a.createElement(Y.a,{noLink:!0,string:"account.total",keys:[{type:"asset",value:j,arg:"asset"}]});g.push(r.a.createElement("tr",{key:"portfolio",className:"total-value"},r.a.createElement("td",{colSpan:"2",style:{textAlign:"left"}},T),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{style:{textAlign:"right"}},C),r.a.createElement("td",{colSpan:"9"}))),v.push(r.a.createElement("tr",{key:"portfolio",className:"total-value"},r.a.createElement("td",{colSpan:"2",style:{textAlign:"left"}},T),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{style:{textAlign:"right"}},A),r.a.createElement("td",{colSpan:"9"})));var I=s.get("showAssetPercent",!1),q=(this.props.backedCoins.get("OPEN",[]).find(function(t){return t.symbol===e.state.withdrawAsset}),this.props.bridgeCoins.get(this.state.bridgeAsset),[{title:"account.portfolio",subTitle:C,content:r.a.createElement("div",null,r.a.createElement("div",{className:"dashboard__actions"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-3 col-lg-6"},r.a.createElement("input",{type:"text",placeholder:"Filter",onChange:this._handleFilterInput})),r.a.createElement("div",{className:"col-xl-9 col-lg-12"},r.a.createElement("div",{className:"dashboard__actions__filters"},this._renderRadioButton(y.a.translate("account.hide_hidden"),"active"!=c?this._changeShownAssets.bind(this,"active"):function(){},!("active"!=c)),v.length?this._renderRadioButton(y.a.translate("account.show_hidden"),"hidden"!=c?this._changeShownAssets.bind(this,"hidden"):function(){},!("hidden"!=c)):null,this._renderRadioButton(y.a.translate("account.show_visual"),"visual"!=c?this._changeShownAssets.bind(this,"visual"):function(){},!("visual"!=c)),r.a.createElement("div",null,r.a.createElement("label",{className:"hide0balances"},r.a.createElement("input",{name:"isGoing",type:"checkbox",checked:this.state.hide0balances,onChange:function(t){return e.setState({hide0balances:!e.state.hide0balances})}}),r.a.createElement("span",null),r.a.createElement("span",null,y.a.translate("exchange.hide")," 0 ",y.a.translate("transfer.balances"))))))))),r.a.createElement(jt.a,{id:"send_modal_portfolio",refCallback:function(t){t&&(e.send_modal=t)},from_name:this.props.account.get("name"),asset_id:this.state.send_asset||"1.3.0"}),"visual"!=c?r.a.createElement("div",{className:"dashboard__adaptive"},r.a.createElement("table",{className:"dashboard__table blue-bg with-borders"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{textAlign:"left"},className:"clickable",onClick:this._toggleSortOrder.bind(this,"alphabetic")},r.a.createElement(l.a,{component:"span",content:"account.asset"})),r.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"qty"),className:"clickable",style:{textAlign:"right"}},r.a.createElement(l.a,{content:"account.qty"})),r.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"priceValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},r.a.createElement(l.a,{content:"exchange.price"})," (",r.a.createElement(H.a,{name:j,noTip:!0}),")"),r.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"changeValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},r.a.createElement(l.a,{content:"account.hour_24_short"})),r.a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"totalValue"),style:{textAlign:"right"},className:"column-hide-small clickable"},r.a.createElement(Y.a,{noLink:!0,string:"account.eq_value_header",keys:[{type:"asset",value:j,arg:"asset"}],noTip:!0})),I?r.a.createElement("th",{style:{textAlign:"right"}},r.a.createElement(l.a,{component:"span",content:"account.percent"})):null,r.a.createElement("th",null,r.a.createElement(l.a,{content:"header.payments"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"exchange.buy"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"modal.deposit.submit"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"modal.withdraw.submit"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"account.trade"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"exchange.borrow_short"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"account.settle"})),r.a.createElement("th",null,r.a.createElement(l.a,{content:"modal.reserve.submit"})),r.a.createElement("th",{className:"column-hide-small"},r.a.createElement(l.a,{content:"active"==c?"exchange.hide":"account.perm.show"})))),r.a.createElement("tbody",null,"hidden"==c&&v.length?v:g))):r.a.createElement(Yt,{balanceObjects:w}))},{title:"account.open_orders",subTitle:O,content:r.a.createElement(xt,this.props,r.a.createElement("tbody",null,r.a.createElement("tr",{className:"total-value"},r.a.createElement("td",{colSpan:"7",style:{textAlign:"right"}},T),r.a.createElement("td",{colSpan:"2",style:{textAlign:"left"}},O),this.props.isMyAccount?r.a.createElement("td",null):null)))},{title:"account.collaterals",subTitle:x,content:r.a.createElement(pe,{preferredUnit:j,className:"dashboard-table blue-bg with-borders",callOrders:p,account:a},r.a.createElement("tr",{className:"total-value"},r.a.createElement("td",null,T),r.a.createElement("td",null),r.a.createElement("td",null,S),r.a.createElement("td",{className:"column-hide-medium"},P),r.a.createElement("td",null),r.a.createElement("td",null,x),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{className:"column-hide-small"}),r.a.createElement("td",{colSpan:"3"})))},{title:"account.activity",subTitle:"",content:r.a.createElement(de.a,{accountsList:o.a.fromJS([a.get("id")]),compactView:!1,showMore:!0,fullHeight:!0,limit:15,showFilters:!0,dashboard:!0})},{title:"account.proposed_transactions",subTitle:"",content:r.a.createElement("div",{className:"propsal-table-wrap"},r.a.createElement(rt,{className:"dashboard-table",account:a.get("id")}))}]);return r.a.createElement("div",{className:"dashboard-layout"},r.a.createElement(yt.a,{items:q,inner:!0,updateModal:this.updateModal}),r.a.createElement(h.a,{id:"reserve_asset",overlay:!0},r.a.createElement("br",null),r.a.createElement("div",{className:"grid-block vertical"},r.a.createElement(Qt.a,{assetId:this.state.reserve,account:a,onClose:function(){d.a.publish("reserve_asset","close")}}))),r.a.createElement("div",null),r.a.createElement(N,{ref:"settlement_modal",modalId:"settlement_modal",asset:this.state.settleAsset,account:a.get("name")}))}}]),t}();oa=Object(j.a)(oa,{propNames:["core_asset"]});var ia=function(e){function t(){return na(this,t),ra(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return sa(t,r.a.Component),ta(t,[{key:"render",value:function(){return r.a.createElement(Pt.a,ea({},this.props,{wrap:oa}))}}]),t}();t.default=ia}}]);